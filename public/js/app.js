/*! For license information please see app.js.LICENSE.txt */
(()=>{var __webpack_modules__={444:(e,t,n)=>{"use strict";n.d(t,{$s:()=>j,BH:()=>p,G6:()=>_,L:()=>o,LL:()=>x,P0:()=>h,Pz:()=>f,Sg:()=>m,ZR:()=>k,aH:()=>d,b$:()=>v,eu:()=>E,hl:()=>I,m9:()=>q,ne:()=>L,pd:()=>R,q4:()=>l,ru:()=>w,tV:()=>a,uI:()=>y,vZ:()=>A,w1:()=>b,xO:()=>O,xb:()=>S,z$:()=>g,zI:()=>T,zd:()=>N});var r=n(155);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,u=i>>2,l=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw Error();const c=i<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const c=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,u=()=>{try{return c()||(()=>{if(void 0===r||void 0===r.env)return;const e=r.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},l=e=>{var t,n;return null===(n=null===(t=u())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},h=e=>{const t=l(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},d=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=u())||void 0===t?void 0:t[`_${e}`]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function m(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function w(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return!function(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){try{return"object"==typeof indexedDB}catch(e){return!1}}function E(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function T(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class k extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x.prototype.create)}}class x{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(C,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new k(r,o,n)}}const C=/\{\$([^}]+)}/g;function S(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function A(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(D(n)&&D(s)){if(!A(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function D(e){return null!==e&&"object"==typeof e}function O(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function N(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function L(e,t){const n=new P(e,t);return n.subscribe.bind(n)}class P{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=M),void 0===r.error&&(r.error=M),void 0===r.complete&&(r.complete=M);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function M(){}const F=1e3,B=2,U=144e5,V=.5;function j(e,t=F,n=B){const r=t*Math.pow(n,e),i=Math.round(V*r*(Math.random()-.5)*2);return Math.min(U,r+i)}function q(e){return e&&e._delegate?e._delegate:e}},669:(e,t,n)=>{e.exports=n(609)},448:(e,t,n)=>{"use strict";var r=n(867),i=n(26),s=n(372),o=n(327),a=n(97),c=n(109),u=n(985),l=n(61),h=n(655),d=n(263);e.exports=function(e){return new Promise((function(t,n){var f,p=e.data,m=e.headers,g=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}r.isFormData(p)&&delete m["Content-Type"];var w=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(v+":"+b)}var _=a(e.baseURL,e.url);function I(){if(w){var r="getAllResponseHeaders"in w?c(w.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:r,config:e,request:w};i((function(e){t(e),y()}),(function(e){n(e),y()}),s),w=null}}if(w.open(e.method.toUpperCase(),o(_,e.params,e.paramsSerializer),!0),w.timeout=e.timeout,"onloadend"in w?w.onloadend=I:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(I)},w.onabort=function(){w&&(n(l("Request aborted",e,"ECONNABORTED",w)),w=null)},w.onerror=function(){n(l("Network Error",e,null,w)),w=null},w.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||h.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",w)),w=null},r.isStandardBrowserEnv()){var E=(e.withCredentials||u(_))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;E&&(m[e.xsrfHeaderName]=E)}"setRequestHeader"in w&&r.forEach(m,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete m[t]:w.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(w.withCredentials=!!e.withCredentials),g&&"json"!==g&&(w.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&w.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function(e){w&&(n(!e||e&&e.type?new d("canceled"):e),w.abort(),w=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),p||(p=null),w.send(p)}))}},609:(e,t,n)=>{"use strict";var r=n(867),i=n(849),s=n(321),o=n(185);var a=function e(t){var n=new s(t),a=i(s.prototype.request,n);return r.extend(a,s.prototype,n),r.extend(a,n),a.create=function(n){return e(o(t,n))},a}(n(655));a.Axios=s,a.Cancel=n(263),a.CancelToken=n(972),a.isCancel=n(502),a.VERSION=n(288).version,a.all=function(e){return Promise.all(e)},a.spread=n(713),a.isAxiosError=n(268),e.exports=a,e.exports.default=a},263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},972:(e,t,n)=>{"use strict";var r=n(263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(867),i=n(327),s=n(782),o=n(572),a=n(185),c=n(875),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new s,response:new s}}l.prototype.request=function(e,t){if("string"==typeof e?(t=t||{}).url=e:t=e||{},!t.url)throw new Error("Provided config url is not valid");(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var s,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!i){var h=[o,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(l),s=Promise.resolve(t);h.length;)s=s.then(h.shift(),h.shift());return s}for(var d=t;r.length;){var f=r.shift(),p=r.shift();try{d=f(d)}catch(e){p(e);break}}try{s=o(d)}catch(e){return Promise.reject(e)}for(;l.length;)s=s.then(l.shift(),l.shift());return s},l.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=l},782:(e,t,n)=>{"use strict";var r=n(867);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},97:(e,t,n)=>{"use strict";var r=n(793),i=n(303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},61:(e,t,n)=>{"use strict";var r=n(481);e.exports=function(e,t,n,i,s){var o=new Error(e);return r(o,t,n,i,s)}},572:(e,t,n)=>{"use strict";var r=n(867),i=n(527),s=n(502),o=n(655),a=n(263);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},185:(e,t,n)=>{"use strict";var r=n(867);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||s,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},26:(e,t,n)=>{"use strict";var r=n(61);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},527:(e,t,n)=>{"use strict";var r=n(867),i=n(655);e.exports=function(e,t,n){var s=this||i;return r.forEach(n,(function(n){e=n.call(s,e,t)})),e}},655:(e,t,n)=>{"use strict";var r=n(155),i=n(867),s=n(16),o=n(481),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==r&&"[object process]"===Object.prototype.toString.call(r))&&(u=n(448)),u),transformRequest:[function(e,t){return s(t,"Accept"),s(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){l.headers[e]=i.merge(a)})),e.exports=l},288:e=>{e.exports={version:"0.25.0"}},849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},327:(e,t,n)=>{"use strict";var r=n(867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(r.isURLSearchParams(t))s=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},372:(e,t,n)=>{"use strict";var r=n(867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},268:(e,t,n)=>{"use strict";var r=n(867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},985:(e,t,n)=>{"use strict";var r=n(867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16:(e,t,n)=>{"use strict";var r=n(867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},109:(e,t,n)=>{"use strict";var r=n(867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),n=r.trim(e.substr(s+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},875:(e,t,n)=>{"use strict";var r=n(288).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!s[r]&&(s[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],o=t[s];if(o){var a=e[s],c=void 0===a||o(a,s,e);if(!0!==c)throw new TypeError("option "+s+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+s)}},validators:i}},867:(e,t,n)=>{"use strict";var r=n(849),i=Object.prototype.toString;function s(e){return Array.isArray(e)}function o(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function h(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:s,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:u,isUndefined:o,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return c(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:h,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):s(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)h(arguments[r],n);return t},extend:function(e,t,n){return h(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},641:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(977),firebase_analytics__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(261),firebase_firestore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(247),firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(135),firebase_auth__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(962),last_page;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var s=t&&t.prototype instanceof d?t:d,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h={};function d(){}function f(){}function p(){}var m={};c(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(x([])));y&&y!==t&&n.call(y,s)&&(m=y);var w=p.prototype=d.prototype=Object.create(m);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var c=l(e[r],e,s);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(h).then((function(e){u.value=e,o(u)}),(function(e){return i("throw",e,o,a)}))}a(c.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return C()}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=I(o,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,r(w,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},v(b.prototype),c(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(u(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},v(w),c(w,a,"Generator"),c(w,s,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(a&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function asyncGeneratorStep(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){asyncGeneratorStep(s,r,i,o,a,"next",e)}function a(e){asyncGeneratorStep(s,r,i,o,a,"throw",e)}o(void 0)}))}}window.axios=__webpack_require__(669),window.Swal=__webpack_require__(455),window.showMessage=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";switch(console.log(e),i){case"info":t="bg-slate-800",n="text-slate-50";break;case"warning":t="bg-amber-500",n="text-amber-100";break;case"error":t="bg-red-500",n="text-red-100"}Swal.fire({title:e,position:r?"top":"bottom",timer:1500,timerProgressBar:!0,willClose:function(){clearInterval(undefined)},showClass:{popup:"\n            animate__animated\n            ".concat(r?"animate__fadeInDown":"animate__fadeInUp","\n            animate__faster\n            ")},hideClass:{popup:"\n            animate__animated\n            ".concat(r?"animate__fadeOutUp":"animate__fadeOutDown","\n            animate__faster\n            ")},customClass:{container:"p-1.5",title:"p-2.5 ".concat(n," text-base font-medium"),popup:"rounded-md ".concat(t)},padding:"0",grow:"row",showConfirmButton:!1,showCloseButton:!1,backdrop:!1,heightAuto:!1})},window._uuid=function(){var e=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},window.isOnline=function(){if("onLine"in navigator)return console.log(navigator.onLine),navigator.onLine;console.log("trying"),_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",axios.get("https://www.google.com").then((function(){return!0})).catch((function(e){return!1})));case 1:case"end":return e.stop()}}),e)})))()},window.updateEleText=function(e,t){document.getElementById(e).innerText=t},window.updateEleHTML=function(e,t){document.getElementById(e).innerHTML=t},window.showPage=function(e){last_page!=e&&document.getElementById(e).classList.replace("hidden","box"),null!=last_page&&last_page!=e&&document.getElementById(last_page).classList.replace("box","hidden"),last_page=e},window.copyHTML=function(e,t){document.getElementById(e).innerHTML=document.getElementById(t).innerHTML};var firebaseConfig={apiKey:"AIzaSyCQ5cg4VRFiVxeT6JQPKI1vd3kB938w_g0",authDomain:"frc-7589.firebaseapp.com",databaseURL:"https://frc-7589-default-rtdb.firebaseio.com",projectId:"frc-7589",storageBucket:"frc-7589.appspot.com",messagingSenderId:"283240547457",appId:"1:283240547457:web:ce55f744bc4b4d46653980",measurementId:"G-2EB11FYT18"},app=(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.ZF)(firebaseConfig),analytics=(0,firebase_analytics__WEBPACK_IMPORTED_MODULE_1__.IH)(app),db=(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.ad)(app),remoteConfig=(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.sN)(app),auth=(0,firebase_auth__WEBPACK_IMPORTED_MODULE_4__.v0)(app);function tba_available(){return null!=(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}function fetchSettings(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.xS)(remoteConfig).then((function(){e||showMessage("Config Fetched")})).catch((function(e){showMessage("Config Error: "+e,!0,"error")}))}function signIn(e,t){return _signIn.apply(this,arguments)}function _signIn(){return(_signIn=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,firebase_auth__WEBPACK_IMPORTED_MODULE_4__.e5)(auth,t,n).then((function(e){return!0})).catch((function(e){return!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function changeDBMode(e){return _changeDBMode.apply(this,arguments)}function _changeDBMode(){return _changeDBMode=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>1&&void 0!==r[1]&&r[1],t?(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Ix)(db).then((function(){n||showMessage("mode: ONLINE")})):(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.TF)(db).then((function(){n||showMessage("mode: OFFLINE")}));case 2:case"end":return e.stop()}}),e)}))),_changeDBMode.apply(this,arguments)}function getAllRecords(){return _getAllRecords.apply(this,arguments)}function _getAllRecords(){return _getAllRecords=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:null,showMessage("Fetching records..."),null==t){e.next=8;break}return e.next=5,(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.PL)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.IO)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.hJ)(db,"records"),(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.ar)("team_number","==",t)));case 5:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.PL)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.hJ)(db,"records"));case 11:case"end":return e.stop()}}),e)}))),_getAllRecords.apply(this,arguments)}function getTeams(){return _getTeams.apply(this,arguments)}function _getTeams(){return _getTeams=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:null,showMessage("Fetching teams..."),null==t){e.next=14;break}return e.next=5,(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.QT)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.JU)(db,"teams",t));case 5:if(!(n=e.sent).exists()){e.next=10;break}return e.abrupt("return",n);case 10:return showMessage("Team no found"),e.abrupt("return",null);case 12:e.next=17;break;case 14:return e.next=16,(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.PL)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.hJ)(db,"teams"));case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)}))),_getTeams.apply(this,arguments)}function storeTeam(e,t){return _storeTeam.apply(this,arguments)}function _storeTeam(){return _storeTeam=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,i=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.next=3,isOnline();case 3:e.sent||getTeamIndex(),(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.pl)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.JU)(db,"teams",t),n,{merge:!0}).then((function(){r||showMessage("Team successfully store!")})).catch((function(e){showMessage("FAILED to store team(".concat(e,")"),!0,"error")}));case 6:case"end":return e.stop()}}),e)}))),_storeTeam.apply(this,arguments)}function storeRecord(e,t){return _storeRecord.apply(this,arguments)}function _storeRecord(){return _storeRecord=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,i,s=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.next=3,isOnline();case 3:i=e.sent,showMessage("Saving record..."),i||showTeam(n.team_number),(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.pl)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.JU)(db,"records",t),n,{merge:!0}).then((function(){r||showMessage("Record successfully store!"),i&&showTeam(n.team_number)})).catch((function(e){showMessage("FAILED to store record(".concat(e,")"),!0,"error")}));case 7:case"end":return e.stop()}}),e)}))),_storeRecord.apply(this,arguments)}(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.ST)(db).catch((function(e){console.log("DB Error: "+e)})),window.getRecord=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return showMessage("Fetching record..."),e.next=3,(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.QT)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.JU)(db,"records",t));case 3:if(!(n=e.sent).exists()){e.next=8;break}return e.abrupt("return",n);case 8:showMessage("Record no found");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.getRate=function(data){var formula=(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"formula").asString(),parameters=JSON.parse((0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"parameters").asString());return parameters.forEach((function(e){try{formula="boolean"==typeof data[e.alias]?formula.replace(e.alias,data[e.alias]?1:0):void 0===data[e.alias]||parameters.contains("Attempts")?formula.replace(e.alias,"1"):formula.replace(e.alias,data[e.alias])}catch(t){formula=formula.replace(e.alias,"1")}})),console.log(formula),eval(formula)},window.getTeamIndex=function(){copyHTML("team-index","loadingScreen"),showPage("teamIndexScreen"),tba_available()&&document.getElementById("tbaAddTeamBtn").classList.remove("hidden"),getTeams().then((function(e){if(e.empty)copyHTML("team-index","noResultScreen");else{var t="";e.forEach(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(n){var r,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data(),i=0,e.next=4,getAllRecords(n.id).then((function(e){e.forEach((function(e){var t=e.data();i+=getRate(t.parameters)})),t+='<div class="bg-blue-100 rounded-lg w-full p-3 lg:p-5 space-y-3" onclick="showTeam(\''.concat(n.id,'\')">\n                                <div>\n                                    <h1 class="text-xl xl:text-2xl">Team #').concat(r.info.team_number,'</h1>\n                                    <h2 class="xl:text-lg">').concat(r.info.nickname,'</h2>\n                                </div>\n                                <div class="flex items-center justify-between space-x-2">\n                                    <div class="flex-1 bg-blue-200 rounded-lg flex flex-col p-4">\n                                        <h3 class="text-lg lg:text-xl flex space-x-1.5 items-center">\n                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">\n                                                <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" />\n                                            </svg>\n                                            <span>Rate:</span>\n                                        </h3>\n                                        <p class="text-4xl font-bold text-center">').concat(Math.round(i/e.size*100)/100,'</p></div>\n                                        <div class="flex-1 bg-blue-200 rounded-lg flex flex-col p-4">\n                                            <h3 class="text-lg lg:text-xl flex space-x-1.5 items-center">\n                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">\n                                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />\n                                            </svg>\n                                            <span>Records:</span>\n                                        </h3>\n                                        <p class="text-4xl font-bold text-center">').concat(e.size,"</p>\n                                    </div>\n                                </div>\n                            </div>")}));case 4:updateEleHTML("team-index",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}))},window.showTeam=function(e){document.getElementById("teamContainer").setAttribute("current","teamRecordList"),document.getElementById("teamRecordList").classList.remove("hidden"),document.getElementById("teamInfo").classList.add("hidden"),document.querySelector("[page=teamRecordList]").classList.replace("border-b-0","border-b-2"),document.querySelector("[page=teamInfo]").classList.replace("border-b-2","border-b-0"),getTeams(e).then((function(t){_asyncToGenerator(_regeneratorRuntime().mark((function n(){var r,i,s,o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.empty){n.next=23;break}if(r=t.data(),updateEleHTML("teamRecordList",""),showPage("teamViewScreen"),updateEleText("teamID",r.info.team_number),updateEleText("teamName",r.info.nickname),updateEleText("teamRookieYear",r.info.rookie_year),document.getElementById("recordCreateBtn").setAttribute("onclick","recordCreate('".concat(e,"')")),!("onLine"in navigator)||!r.offline){n.next=17;break}if(!navigator.onLine){n.next=17;break}return n.next=12,axios.get("https://www.thebluealliance.com/api/v3/team/frc".concat(e),{headers:{accept:"application/json","X-TBA-Auth-Key":(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}}).then((function(e){if(200==e.status)return e.data})).catch((function(e){showMessage("FAILED to fetch team info",!0,"warning")}));case 12:return i=n.sent,n.next=15,axios.get("https://www.thebluealliance.com/api/v3/team/frc".concat(e,"/awards"),{headers:{accept:"application/json","X-TBA-Auth-Key":(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}}).then((function(e){if(200==e.status)return e.data})).catch((function(e){showMessage("FAILED to fetch team info",!0,"warning")}));case 15:s=n.sent,storeTeam(e,{rankingPoint:0,info:i,awards:s,offline:(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.AK)()}).then((function(){showMessage("Team info successfully updated!"),showTeam(e)})).catch((function(e){console.error(e),showMessage("FAILED to update team info",!0,"error")}));case 17:o="<h3>Awards</h3><ol>",void 0!==r.awards&&r.awards.forEach((function(e){o+="<li><ul>",Object.keys(e).forEach((function(t){"object"!==_typeof(e[t])&&(o+="<li>"+t+": "+e[t]+"</li>")})),o+="</ul></li>"})),o+="</ol><h3>About</h3><ul>",void 0!==_typeof(r.info)&&Object.keys(r.info).forEach((function(e){"key"!=e&&"nickname"!=e&&"team_number"!=e&&null!=r.info[e]&&(o+="<li>"+e+": "+("website"==e?'<a href="'+r.info[e]+'">'+r.info[e]+"</a>":r.info[e])+"</li>")})),o+="</ul>",updateEleHTML("teamInfo",o);case 23:getAllRecords(e).then((function(t){if(t.empty)copyHTML("teamRecordList","noResultScreen");else{var n="";t.forEach((function(t){var r=t.data();n+='<div class="bg-blue-50 rounded-lg w-full p-3 lg:p-5 space-y-2 relative">\n                            <div class="absolute top-2 right-2 flex items-center space-x-2">\n                                <button class="w-5 h-5" onclick="deleteRecord(\''.concat(t.id,"', '").concat(e,'\')">\n                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">\n                                        <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />\n                                    </svg>\n                                </button>\n                                <button class="w-5 h-5" onclick="recordCreate(\'').concat(e,"', '").concat(t.id,'\')">\n                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">\n                                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125" />\n                                    </svg>\n                                </button>\n                            </div>\n                            <div>\n                                <h1 class="text-lg flex items-center space-x-1">\n                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">\n                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184" />\n                                    </svg>\n                                    <span>').concat(t.id,'</span>\n                                </h1>\n                                <h2 class="text-sm flex items-center space-x-1">\n                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">\n                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />\n                                    </svg>\n                                    <span>').concat(moment(new Date(1e3*r.timestamp.seconds)).format("YYYY/MM/DD, HH:mm:ss"),'</span>\n                                </h2>\n                            </div>\n                            <div class="prose w-full">\n                                <ul>'),Object.keys(r.parameters).forEach((function(e){n+='<li class="text-blue-800 space-x-1">'.concat(e,':<span class="font-bold">').concat(r.parameters[e],"</span></li>")})),n+="</ul></div></div>"})),updateEleHTML("teamRecordList",n)}}));case 24:case"end":return n.stop()}}),n)})))()}))},window.sendPassswordReset=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Swal.fire({title:"Forgot Password",html:'<input type="text" id="email" class="swal2-input w-7/8" placeholder="Email">\n        <button class="text-blue-700 mt-4 text-sm" onclick="userLogin()">Login?</button>',confirmButtonText:"Send email",focusConfirm:!1,showLoaderOnConfirm:!0,preConfirm:function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Swal.getPopup().querySelector("#email").value)||Swal.showValidationMessage("Please enter your email"),e.next=4,(0,firebase_auth__WEBPACK_IMPORTED_MODULE_4__.LS)(auth,t).then((function(){return!0})).catch((function(e){e.code,e.message;Swal.showValidationMessage("Wrong Email")}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),showClass:{popup:"\n            animate__animated\n            animate__fadeInUp\n            animate__faster\n            "},hideClass:{popup:"\n            animate__animated\n            animate__fadeOutDown\n            animate__faster\n            "},customClass:{container:"p-1.5",htmlContainer:"m-0 max-w-full flex flex-col spacep-y-2",popup:"max-w-lg w-full"},allowOutsideClick:!1}).then((function(e){showMessage("Password rest email Sent!"),setTimeout((function(){userLogin()}),1500)}));case 2:case"end":return e.stop()}}),e)}))),window.userLogin=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Swal.fire({title:"Account Login",html:'<input type="text" id="email" class="swal2-input w-7/8" placeholder="Email">\n        <input type="password" id="password" class="swal2-input w-7/8" placeholder="Password">\n        <button class="text-blue-700 mt-4 text-sm" onclick="sendPassswordReset()">Forget Password?</button>',confirmButtonText:"Login",focusConfirm:!1,showLoaderOnConfirm:!0,preConfirm:function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Swal.getPopup().querySelector("#email").value,n=Swal.getPopup().querySelector("#password").value,t&&n||Swal.showValidationMessage("Please enter email and password"),e.next=5,signIn(t,n);case 5:if(!e.sent){e.next=9;break}return e.abrupt("return",!0);case 9:Swal.showValidationMessage("Username or Password Not Correct!");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),showClass:{popup:"\n            animate__animated\n            animate__fadeInUp\n            animate__faster\n            "},hideClass:{popup:"\n            animate__animated\n            animate__fadeOutDown\n            animate__faster\n            "},customClass:{container:"p-1.5",htmlContainer:"m-0 max-w-full flex flex-col spacep-y-2",popup:"max-w-lg"},allowOutsideClick:!1}).then((function(e){showMessage("Login Successful")}));case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)}))),window.addTeam=function(){Swal.fire({title:"Add Team",text:"enter team number",input:"number",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Search",showLoaderOnConfirm:!0,preConfirm:function(e){return"onLine"in navigator&&!navigator.onLine?{requireName:!0,number:e}:axios.get("https://www.thebluealliance.com/api/v3/team/frc"+e,{headers:{accept:"application/json","X-TBA-Auth-Key":(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}}).then((function(e){if(200==e.status)return e.data;Swal.showValidationMessage("Request failed")})).catch((function(e){Swal.showValidationMessage("Request failed: ".concat(e))}))},allowOutsideClick:function(){return!Swal.isLoading()}}).then((function(e){e.isConfirmed&&(e.value.requireName?Swal.fire({title:"Enter Team Name",input:"text",inputAttributes:{autocapitalize:"off"},preConfirm:function(e){return e},showCancelButton:!0,confirmButtonText:"Add",showLoaderOnConfirm:!0}).then((function(t){t.isConfirmed&&Swal.fire({title:"Adding FRC # ".concat(e.value.number,'\n(aka "').concat(t.value,'") ?'),showCancelButton:!0,confirmButtonText:"Add"}).then((function(n){n.isConfirmed&&storeTeam(e.value.number.toString(),{info:{team_number:e.value.number.toString(),nickname:t.value},rankingPoint:0,offline:!0}),getTeamIndex()}))})):Swal.fire({title:"Adding FRC # ".concat(e.value.team_number,'\n(aka "').concat(e.value.nickname,'") ?'),showCancelButton:!0,confirmButtonText:"Add"}).then((function(t){var n=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("https://www.thebluealliance.com/api/v3/team/frc".concat(e.value.team_number,"/awards"),{headers:{accept:"application/json","X-TBA-Auth-Key":(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}}).then((function(e){return console.table(e.data),200==e.status?e.data:[]})).catch((function(e){return console.log(e),[]}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();n().then((function(n){var r={rankingPoint:0,info:e.value,awards:n};console.log(r),t.isConfirmed&&storeTeam(e.value.team_number.toString(),r),getTeamIndex()}))})))}))},window.recordCreate=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,i,s,o,a=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:null,r={},null==(n=a.length>1&&void 0!==a[1]?a[1]:null)){e.next=8;break}return e.next=6,getRecord(n);case 6:r=null!=(r=e.sent)?r.data().parameters:{};case 8:if(null!=t){e.next=14;break}return e.next=11,Swal.fire({title:"Start Record",text:"enter team numbers(separate by comma)",input:"text",inputAttributes:{autocapitalize:"off",pattern:"^[0-9]{1,}(?:,[0-9]{1,})*$"},validationMessage:"Please enter valid team numbers(Check if you leave blank there or use ZH comma)",confirmButtonText:"Start",showCancelButton:"Cancel"}).then((function(e){if(e.isConfirmed)return e.value}));case 11:if(void 0!==(t=e.sent)){e.next=14;break}return e.abrupt("return");case 14:i="",s="",o=t.split(","),document.getElementById("recordTabContainer").setAttribute("current",o[0]),o.forEach((function(e){s+='<button class="flex-1 py-3 border-b-0 border-blue-500 text-blue-800 tab-button" team-number="'.concat(e,'">\n        # ').concat(e,"\n        </button>"),i+='<form class="space-y-4 px-4 py-5 sm:p-6 teamRecordForm hidden" team-number="'.concat(e,'">\n        <h1 class="text-lg lg:text-xl font-bold">Record of #').concat(e,"</h1>"),JSON.parse((0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"parameters").asString()).forEach((function(t){switch(t.type){case"textarea":i+='<div>\n                            <label for="'.concat(e,"-").concat(t.alias,'" class="block font-medium text-gray-700">').concat(t.name,'</label>\n                            <div class="mt-1">\n                                <textarea id="').concat(e,"-").concat(t.alias,'" name="').concat(t.alias,'" rows="5" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2" placeholder="').concat(t.name,'">').concat(void 0!==r[t.alias]?r[t.alias]:"","</textarea>\n                            </div>\n                        </div>");break;case"checkbox":i+='<div>\n                            <label for="'.concat(e,"-").concat(t.alias,'" class="block font-medium text-gray-700 text-center">').concat(t.name,'</label>\n                            <div class="mt-1">\n                                <input id="').concat(e,"-").concat(t.alias,'" name="').concat(t.alias,'" class="mt-1 mx-auto block w-28 h-16 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2" ').concat(void 0!==r[t.alias]&&"1"==r[t.alias]?"checked":"",' placeholder="').concat(t.name,'" type="').concat(t.type,'"/>\n                            </div>\n                        </div>');break;case"heading":i+='<div>\n                            <div class="mt-1">\n                                <h'.concat(t.size,' class="').concat(["text-4xl","text-3xl","text-2xl","text-xl","text-lg","text-base"][t.size-1],' font-bold">').concat(t.name,"</h").concat(t.size,">\n                            </div>\n                        </div>");break;case"hr":i+="<";break;case"select":var n="";t.options.forEach((function(e){n+='<option value="'.concat(e.value,'" ').concat(void 0!==r[t.alias]&&r[t.alias]==e.value?"selected":"",">").concat(e.name,"</option>")})),i+='<div>\n                            <div class="mt-1">\n                                <label for="'.concat(e,"-").concat(t.alias,'" class="block font-medium text-gray-700">').concat(t.name,'</label>\n                                <select id="').concat(e,"-").concat(t.alias,'" name="').concat(t.alias,'" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2" placeholder="').concat(t.name,'">\n                                <option value="" disabled>Select the "').concat(t.name,'"...</option>\n                                ').concat(n,"\n                                </select>\n                            </div>\n                        </div>");break;default:"number"==t.type?i+='<div>\n                            <label for="'.concat(e,"-").concat(t.alias,'" class="block font-medium text-center text-gray-700">').concat(t.name,'</label>\n                            <div class="mt-1 w-full flex items-center justify-around">\n                                    <button \n                                        onclick="num_dec(\'').concat(e,"-").concat(t.alias,'\')"\n                                        type="button"\n                                        class="inline-flex justify-center rounded-md border-transparent bg-teal-600 py-3 px-6 text-4xl font-bold text-white shadow-sm hover:bg-teal-700 focus:outline-none border-teal-500 border-2 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2"\n                                    >-</button>\n                                    <input id="').concat(e,"-").concat(t.alias,'" name="').concat(t.alias,'" class="mt-1 block rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm p-2" value="').concat(void 0!==r[t.alias]?r[t.alias]:"number"==t.type?0:"",'" placeholder="').concat(t.name,'" type="').concat(t.type,'"/>\n                                    <button \n                                        onclick="num_inc(\'').concat(e,"-").concat(t.alias,'\')"\n                                        type="button"\n                                        class="inline-flex justify-center rounded-md border-transparent bg-teal-600 py-3 px-6 text-4xl font-bold text-white shadow-sm hover:bg-teal-700 focus:outline-none border-teal-500 border-2 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2"\n                                    >+</button>\n                                </div>\n                            </div>\n                        </div>'):i+='<div>\n                            <label for="'.concat(e,"-").concat(t.alias,'" class="block font-medium text-gray-700">').concat(t.name,'</label>\n                            <div class="mt-1">\n                                <input id="').concat(e,"-").concat(t.alias,'" name="').concat(t.alias,'" class="mt-1 block rounded-md border-gray-300 shadow-sm w-full focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2" value="').concat(void 0!==r[t.alias]?r[t.alias]:"number"==t.type?0:"",'" placeholder="').concat(t.name,'" type="').concat(t.type,'"/>\n                            </div>\n                        </div>')}})),null!=n&&(i+='<input id="'.concat(e,'-uuid" value="').concat(n,'"  hidden disabled />')),i+="</form>"})),updateEleHTML("recordTabContainer",s),updateEleHTML("form_content",i),document.querySelector('.tab-button[team-number="'.concat(document.getElementById("recordTabContainer").getAttribute("current"),'"]')).classList.replace("border-b-0","border-b-2"),document.querySelector('.teamRecordForm[team-number="'.concat(document.getElementById("recordTabContainer").getAttribute("current"),'"]')).classList.toggle("hidden"),showPage("recordCreateScreen");case 24:case"end":return e.stop()}}),e)}))),window.recordSave=function(){document.querySelectorAll(".teamRecordForm").forEach((function(e){var t={team_number:e.getAttribute("team-number").toString(),parameters:{},timestamp:firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.EK.now(),userId:auth.currentUser.uid};JSON.parse((0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"parameters").asString()).forEach((function(e){"number"==e.type?t.parameters[e.alias]=Number(document.getElementById("".concat(t.team_number,"-").concat(e.alias)).value):"checkbox"==e.type?t.parameters[e.alias]=document.getElementById("".concat(t.team_number,"-").concat(e.alias)).checked?1:0:"heading"!=e.type&&(t.parameters[e.alias]=document.getElementById("".concat(t.team_number,"-").concat(e.alias)).value.replace(/\s+/g,"\\n"))})),null!=document.getElementById("".concat(t.team_number,"-uuid"))?storeRecord(document.getElementById("".concat(t.team_number,"-uuid")).value,t):storeRecord(_uuid(),t)}))},window.deleteRecord=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,isOnline();case 2:r=e.sent,Swal.fire({icon:"warning",title:"Delete Confirm",text:"Delete Record '".concat(t,"'?"),confirmButtonText:"Delete",showCancelButton:!0}).then((function(e){e.isConfirmed&&(showMessage("Deleting record..."),r||showTeam(n),(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.oe)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.JU)(db,"records",t)).then((function(){showMessage("Record successfully deleted!"),r&&showTeam(n)})).catch((function(e){showMessage("FAILED to delete record(".concat(e,")"),!0,"error")})))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),window.addTeamViaTBA=function(){isOnline()?_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=axios.get("https://www.thebluealliance.com/api/v3/team/frc7589/events/keys",{headers:{accept:"application/json","X-TBA-Auth-Key":(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}}).then((function(e){if(200==e.status){var t={};return e.data.forEach((function(e){t[e]=e})),t}})).catch((function(e){Swal.showValidationMessage("Request failed: ".concat(e))})),Swal.fire({title:"Choose the Event Key:",input:"select",inputOptions:t,inputValue:(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"eventKey").asString(),showCancelButton:!0,confirmButtonText:"Selete",showLoaderOnConfirm:!0,preConfirm:function(e){return axios.get("https://www.thebluealliance.com/api/v3/event/"+e+"/teams/keys",{headers:{accept:"application/json","X-TBA-Auth-Key":(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}}).then((function(e){if(200==e.status)return e.data})).catch((function(e){console.log(e.toJSON())}))},customClass:{input:"px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 focus:outline-none focus:border-sky-500 focus:ring-sky-500 rounded-md sm:text-sm focus:ring-1 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500 disabled:shadow-none"},allowOutsideClick:function(){return!Swal.isLoading()}}).then((function(e){var t;e.isConfirmed&&Swal.fire({title:"Add ".concat(e.value.length," teams include?"),showCancelButton:!0,confirmButtonText:"Add",showLoaderOnConfirm:!0,preConfirm:(t=_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.value.forEach(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("https://www.thebluealliance.com/api/v3/team/".concat(t),{headers:{accept:"application/json","X-TBA-Auth-Key":(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}}).then((function(e){return console.table(e.data),200==e.status?e.data:[]})).catch((function(e){return console.log(e),[]}));case 2:return n=e.sent,e.next=5,axios.get("https://www.thebluealliance.com/api/v3/team/".concat(t,"/awards"),{headers:{accept:"application/json","X-TBA-Auth-Key":(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}}).then((function(e){return console.table(e.data),200==e.status?e.data:[]})).catch((function(e){return console.log(e),[]}));case 5:r=e.sent,i={rankingPoint:0,info:n,awards:r},console.log(i),storeTeam(n.team_number.toString(),i,!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),allowOutsideClick:function(){return!Swal.isLoading()}}).then((function(e){e.isConfirmed&&getTeamIndex()}))}));case 2:case"end":return e.stop()}}),e)})))():Swal.fire({icon:"warning",title:"Internet Connection Required!",text:"Please connect to the Internet before using this function."})},window.searchTeam=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Swal.fire({title:"Enter Team Number",input:"number",inputAttributes:{autocapitalize:"off"},confirmButtonText:"Search",showCancelButton:!0}).then((function(e){e.isConfirmed&&showTeam(e.value)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)}))),window.num_dec=function(e){var t=document.getElementById(e);Number(t.value)>0&&(t.value=Number(t.value)-1)},window.num_inc=function(e){var t=document.getElementById(e);t.value=Number(t.value)+1},window.addEventListener("load",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"onLine"in window.navigator&&(changeDBMode(window.navigator.onLine,!0),window.navigator.onLine&&fetchSettings(!0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.addEventListener("offline",(function(){changeDBMode(!1)})),window.addEventListener("online",(function(){changeDBMode(!0),fetchSettings()})),(0,firebase_auth__WEBPACK_IMPORTED_MODULE_4__.Aj)(auth,function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}t.uid,getTeamIndex(),e.next=9;break;case 5:return e.next=7,userLogin();case 7:if(!e.sent){e.next=9;break}getTeamIndex();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.getElementById("teamContainer").addEventListener("click",(function(e){e.target.classList.contains("tab-button")&&document.getElementById("teamContainer").getAttribute("current")!=e.target.getAttribute("page")&&(document.getElementById(document.getElementById("teamContainer").getAttribute("current")).classList.toggle("hidden"),document.getElementById(e.target.getAttribute("page")).classList.toggle("hidden"),e.target.classList.replace("border-b-0","border-b-2"),document.querySelector("[page=".concat(document.getElementById("teamContainer").getAttribute("current"),"]")).classList.replace("border-b-2","border-b-0"),document.getElementById("teamContainer").setAttribute("current",e.target.getAttribute("page")))})),document.getElementById("recordTabContainer").addEventListener("click",(function(e){e.target.classList.contains("tab-button")&&document.getElementById("recordTabContainer").getAttribute("current")!=e.target.getAttribute("team-number")&&(document.querySelector('.teamRecordForm[team-number="'.concat(document.getElementById("recordTabContainer").getAttribute("current"),'"]')).classList.toggle("hidden"),document.querySelector('.teamRecordForm[team-number="'.concat(e.target.getAttribute("team-number"),'"]')).classList.toggle("hidden"),e.target.classList.replace("border-b-0","border-b-2"),document.querySelector('.tab-button[team-number="'.concat(document.getElementById("recordTabContainer").getAttribute("current"),'"]')).classList.replace("border-b-2","border-b-0"),document.getElementById("recordTabContainer").setAttribute("current",e.target.getAttribute("team-number")))}))},141:()=>{},155:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,c=[],u=!1,l=-1;function h(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&d())}function d(){if(!u){var e=o(h);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},455:function(e){e.exports=function(){"use strict";var e={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const t="swal2-",n=e=>{const n={};for(const r in e)n[e[r]]=t+e[r];return n},r=n(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),i=n(["success","warning","info","question","error"]),s="SweetAlert2:",o=e=>{const t=[];for(let n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t},a=e=>e.charAt(0).toUpperCase()+e.slice(1),c=e=>{console.warn(`${s} ${"object"==typeof e?e.join(" "):e}`)},u=e=>{console.error(`${s} ${e}`)},l=[],h=e=>{l.includes(e)||(l.push(e),c(e))},d=(e,t)=>{h(`"${e}" is deprecated and will be removed in the next major release. Please use "${t}" instead.`)},f=e=>"function"==typeof e?e():e,p=e=>e&&"function"==typeof e.toPromise,m=e=>p(e)?e.toPromise():Promise.resolve(e),g=e=>e&&Promise.resolve(e)===e,y=()=>document.body.querySelector(`.${r.container}`),w=e=>{const t=y();return t?t.querySelector(e):null},v=e=>w(`.${e}`),b=()=>v(r.popup),_=()=>v(r.icon),I=()=>v(r["icon-content"]),E=()=>v(r.title),T=()=>v(r["html-container"]),k=()=>v(r.image),x=()=>v(r["progress-steps"]),C=()=>v(r["validation-message"]),S=()=>w(`.${r.actions} .${r.confirm}`),A=()=>w(`.${r.actions} .${r.cancel}`),D=()=>w(`.${r.actions} .${r.deny}`),O=()=>v(r["input-label"]),N=()=>w(`.${r.loader}`),R=()=>v(r.actions),L=()=>v(r.footer),P=()=>v(r["timer-progress-bar"]),M=()=>v(r.close),F='\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n',B=()=>{const e=Array.from(b().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort(((e,t)=>{const n=parseInt(e.getAttribute("tabindex")),r=parseInt(t.getAttribute("tabindex"));return n>r?1:n<r?-1:0})),t=Array.from(b().querySelectorAll(F)).filter((e=>"-1"!==e.getAttribute("tabindex")));return o(e.concat(t)).filter((e=>ie(e)))},U=()=>K(document.body,r.shown)&&!K(document.body,r["toast-shown"])&&!K(document.body,r["no-backdrop"]),V=()=>b()&&K(b(),r.toast),j=()=>b().hasAttribute("data-loading"),q={previousBodyPadding:null},$=(e,t)=>{if(e.textContent="",t){const n=(new DOMParser).parseFromString(t,"text/html");Array.from(n.querySelector("head").childNodes).forEach((t=>{e.appendChild(t)})),Array.from(n.querySelector("body").childNodes).forEach((t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},K=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let t=0;t<n.length;t++)if(!e.classList.contains(n[t]))return!1;return!0},z=(e,t)=>{Array.from(e.classList).forEach((n=>{Object.values(r).includes(n)||Object.values(i).includes(n)||Object.values(t.showClass).includes(n)||e.classList.remove(n)}))},G=(e,t,n)=>{if(z(e,t),t.customClass&&t.customClass[n]){if("string"!=typeof t.customClass[n]&&!t.customClass[n].forEach)return void c(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof t.customClass[n]}"`);X(e,t.customClass[n])}},H=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${r.popup} > .${r[t]}`);case"checkbox":return e.querySelector(`.${r.popup} > .${r.checkbox} input`);case"radio":return e.querySelector(`.${r.popup} > .${r.radio} input:checked`)||e.querySelector(`.${r.popup} > .${r.radio} input:first-child`);case"range":return e.querySelector(`.${r.popup} > .${r.range} input`);default:return e.querySelector(`.${r.popup} > .${r.input}`)}},W=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},Q=(e,t,n)=>{e&&t&&("string"==typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((t=>{Array.isArray(e)?e.forEach((e=>{n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},X=(e,t)=>{Q(e,t,!0)},Y=(e,t)=>{Q(e,t,!1)},J=(e,t)=>{const n=Array.from(e.children);for(let e=0;e<n.length;e++){const r=n[e];if(r instanceof HTMLElement&&K(r,t))return r}},Z=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?e.style[t]="number"==typeof n?`${n}px`:n:e.style.removeProperty(t)},ee=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e.style.display=t},te=e=>{e.style.display="none"},ne=(e,t,n,r)=>{const i=e.querySelector(t);i&&(i.style[n]=r)},re=function(e,t){t?ee(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):te(e)},ie=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),se=()=>!ie(S())&&!ie(D())&&!ie(A()),oe=e=>!!(e.scrollHeight>e.clientHeight),ae=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},ce=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=P();ie(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"}),10))},ue=()=>{const e=P(),t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width=`${n}%`},le=100,he={},de=()=>{he.previousActiveElement instanceof HTMLElement?(he.previousActiveElement.focus(),he.previousActiveElement=null):document.body&&document.body.focus()},fe=e=>new Promise((t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;he.restoreFocusTimeout=setTimeout((()=>{de(),t()}),le),window.scrollTo(n,r)})),pe=()=>"undefined"==typeof window||"undefined"==typeof document,me=`\n <div aria-labelledby="${r.title}" aria-describedby="${r["html-container"]}" class="${r.popup}" tabindex="-1">\n   <button type="button" class="${r.close}"></button>\n   <ul class="${r["progress-steps"]}"></ul>\n   <div class="${r.icon}"></div>\n   <img class="${r.image}" />\n   <h2 class="${r.title}" id="${r.title}"></h2>\n   <div class="${r["html-container"]}" id="${r["html-container"]}"></div>\n   <input class="${r.input}" />\n   <input type="file" class="${r.file}" />\n   <div class="${r.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${r.select}"></select>\n   <div class="${r.radio}"></div>\n   <label for="${r.checkbox}" class="${r.checkbox}">\n     <input type="checkbox" />\n     <span class="${r.label}"></span>\n   </label>\n   <textarea class="${r.textarea}"></textarea>\n   <div class="${r["validation-message"]}" id="${r["validation-message"]}"></div>\n   <div class="${r.actions}">\n     <div class="${r.loader}"></div>\n     <button type="button" class="${r.confirm}"></button>\n     <button type="button" class="${r.deny}"></button>\n     <button type="button" class="${r.cancel}"></button>\n   </div>\n   <div class="${r.footer}"></div>\n   <div class="${r["timer-progress-bar-container"]}">\n     <div class="${r["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),ge=()=>{const e=y();return!!e&&(e.remove(),Y([document.documentElement,document.body],[r["no-backdrop"],r["toast-shown"],r["has-column"]]),!0)},ye=()=>{he.currentInstance.resetValidationMessage()},we=()=>{const e=b(),t=J(e,r.input),n=J(e,r.file),i=e.querySelector(`.${r.range} input`),s=e.querySelector(`.${r.range} output`),o=J(e,r.select),a=e.querySelector(`.${r.checkbox} input`),c=J(e,r.textarea);t.oninput=ye,n.onchange=ye,o.onchange=ye,a.onchange=ye,c.oninput=ye,i.oninput=()=>{ye(),s.value=i.value},i.onchange=()=>{ye(),s.value=i.value}},ve=e=>"string"==typeof e?document.querySelector(e):e,be=e=>{const t=b();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},_e=e=>{"rtl"===window.getComputedStyle(e).direction&&X(y(),r.rtl)},Ie=e=>{const t=ge();if(pe())return void u("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=r.container,t&&X(n,r["no-transition"]),$(n,me);const i=ve(e.target);i.appendChild(n),be(e),_e(i),we()},Ee=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"==typeof e?Te(e,t):e&&$(t,e)},Te=(e,t)=>{e.jquery?ke(t,e):$(t,e.toString())},ke=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},xe=(()=>{if(pe())return!1;const e=document.createElement("div"),t={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&void 0!==e.style[n])return t[n];return!1})(),Ce=()=>{const e=document.createElement("div");e.className=r["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},Se=(e,t)=>{const n=R(),r=N();t.showConfirmButton||t.showDenyButton||t.showCancelButton?ee(n):te(n),G(n,t,"actions"),Ae(n,r,t),$(r,t.loaderHtml),G(r,t,"loader")};function Ae(e,t,n){const r=S(),i=D(),s=A();Oe(r,"confirm",n),Oe(i,"deny",n),Oe(s,"cancel",n),De(r,i,s,n),n.reverseButtons&&(n.toast?(e.insertBefore(s,r),e.insertBefore(i,r)):(e.insertBefore(s,t),e.insertBefore(i,t),e.insertBefore(r,t)))}function De(e,t,n,i){i.buttonsStyling?(X([e,t,n],r.styled),i.confirmButtonColor&&(e.style.backgroundColor=i.confirmButtonColor,X(e,r["default-outline"])),i.denyButtonColor&&(t.style.backgroundColor=i.denyButtonColor,X(t,r["default-outline"])),i.cancelButtonColor&&(n.style.backgroundColor=i.cancelButtonColor,X(n,r["default-outline"]))):Y([e,t,n],r.styled)}function Oe(e,t,n){re(e,n[`show${a(t)}Button`],"inline-block"),$(e,n[`${t}ButtonText`]),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]),e.className=r[t],G(e,n,`${t}Button`),X(e,n[`${t}ButtonClass`])}const Ne=(e,t)=>{const n=M();$(n,t.closeButtonHtml),G(n,t,"closeButton"),re(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel)},Re=(e,t)=>{const n=y();n&&(Le(n,t.backdrop),Pe(n,t.position),Me(n,t.grow),G(n,t,"container"))};function Le(e,t){"string"==typeof t?e.style.background=t:t||X([document.documentElement,document.body],r["no-backdrop"])}function Pe(e,t){t in r?X(e,r[t]):(c('The "position" parameter is not valid, defaulting to "center"'),X(e,r.center))}function Me(e,t){if(t&&"string"==typeof t){const n=`grow-${t}`;n in r&&X(e,r[n])}}const Fe=["input","file","range","select","radio","checkbox","textarea"],Be=(t,n)=>{const i=b(),s=e.innerParams.get(t),o=!s||n.input!==s.input;Fe.forEach((e=>{const t=J(i,r[e]);je(e,n.inputAttributes),t.className=r[e],o&&te(t)})),n.input&&(o&&Ue(n),qe(n))},Ue=e=>{if(!He[e.input])return void u(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${e.input}"`);const t=ze(e.input),n=He[e.input](t,e);ee(t),e.inputAutoFocus&&setTimeout((()=>{W(n)}))},Ve=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["type","value","style"].includes(n)||e.removeAttribute(n)}},je=(e,t)=>{const n=H(b(),e);if(n){Ve(n);for(const e in t)n.setAttribute(e,t[e])}},qe=e=>{const t=ze(e.input);"object"==typeof e.customClass&&X(t,e.customClass.input)},$e=(e,t)=>{e.placeholder&&!t.inputPlaceholder||(e.placeholder=t.inputPlaceholder)},Ke=(e,t,n)=>{if(n.inputLabel){e.id=r.input;const i=document.createElement("label"),s=r["input-label"];i.setAttribute("for",e.id),i.className=s,"object"==typeof n.customClass&&X(i,n.customClass.inputLabel),i.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",i)}},ze=e=>J(b(),r[e]||r.input),Ge=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:g(t)||c(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},He={};He.text=He.email=He.password=He.number=He.tel=He.url=(e,t)=>(Ge(e,t.inputValue),Ke(e,e,t),$e(e,t),e.type=t.input,e),He.file=(e,t)=>(Ke(e,e,t),$e(e,t),e),He.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return Ge(n,t.inputValue),n.type=t.input,Ge(r,t.inputValue),Ke(n,e,t),e},He.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");$(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Ke(e,e,t),e},He.radio=e=>(e.textContent="",e),He.checkbox=(e,t)=>{const n=H(b(),"checkbox");n.value="1",n.id=r.checkbox,n.checked=Boolean(t.inputValue);const i=e.querySelector("span");return $(i,t.inputPlaceholder),n},He.textarea=(e,t)=>{Ge(e,t.inputValue),$e(e,t),Ke(e,e,t);const n=e=>parseInt(window.getComputedStyle(e).marginLeft)+parseInt(window.getComputedStyle(e).marginRight);return setTimeout((()=>{if("MutationObserver"in window){const t=parseInt(window.getComputedStyle(b()).width);new MutationObserver((()=>{const r=e.offsetWidth+n(e);b().style.width=r>t?`${r}px`:null})).observe(e,{attributes:!0,attributeFilter:["style"]})}})),e};const We=(e,t)=>{const n=T();G(n,t,"htmlContainer"),t.html?(Ee(t.html,n),ee(n,"block")):t.text?(n.textContent=t.text,ee(n,"block")):te(n),Be(e,t)},Qe=(e,t)=>{const n=L();re(n,t.footer),t.footer&&Ee(t.footer,n),G(n,t,"footer")},Xe=(t,n)=>{const r=e.innerParams.get(t),s=_();if(r&&n.icon===r.icon)return tt(s,n),void Ye(s,n);if(n.icon||n.iconHtml){if(n.icon&&-1===Object.keys(i).indexOf(n.icon))return u(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${n.icon}"`),void te(s);ee(s),tt(s,n),Ye(s,n),X(s,n.showClass.icon)}else te(s)},Ye=(e,t)=>{for(const n in i)t.icon!==n&&Y(e,i[n]);X(e,i[t.icon]),nt(e,t),Je(),G(e,t,"icon")},Je=()=>{const e=b(),t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let e=0;e<n.length;e++)n[e].style.backgroundColor=t},Ze='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',et='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n',tt=(e,t)=>{let n,r=e.innerHTML;t.iconHtml?n=rt(t.iconHtml):"success"===t.icon?(n=Ze,r=r.replace(/ style=".*?"/g,"")):n="error"===t.icon?et:rt({question:"?",warning:"!",info:"i"}[t.icon]),r.trim()!==n.trim()&&$(e,n)},nt=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])ne(e,n,"backgroundColor",t.iconColor);ne(e,".swal2-success-ring","borderColor",t.iconColor)}},rt=e=>`<div class="${r["icon-content"]}">${e}</div>`,it=(e,t)=>{const n=k();t.imageUrl?(ee(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt),Z(n,"width",t.imageWidth),Z(n,"height",t.imageHeight),n.className=r.image,G(n,t,"image")):te(n)},st=(e,t)=>{const n=y(),r=b();t.toast?(Z(n,"width",t.width),r.style.width="100%",r.insertBefore(N(),_())):Z(r,"width",t.width),Z(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),te(C()),ot(r,t)},ot=(e,t)=>{e.className=`${r.popup} ${ie(e)?t.showClass.popup:""}`,t.toast?(X([document.documentElement,document.body],r["toast-shown"]),X(e,r.toast)):X(e,r.modal),G(e,t,"popup"),"string"==typeof t.customClass&&X(e,t.customClass),t.icon&&X(e,r[`icon-${t.icon}`])},at=(e,t)=>{const n=x();t.progressSteps&&0!==t.progressSteps.length?(ee(n),n.textContent="",t.currentProgressStep>=t.progressSteps.length&&c("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),t.progressSteps.forEach(((e,i)=>{const s=ct(e);if(n.appendChild(s),i===t.currentProgressStep&&X(s,r["active-progress-step"]),i!==t.progressSteps.length-1){const e=ut(t);n.appendChild(e)}}))):te(n)},ct=e=>{const t=document.createElement("li");return X(t,r["progress-step"]),$(t,e),t},ut=e=>{const t=document.createElement("li");return X(t,r["progress-step-line"]),e.progressStepsDistance&&Z(t,"width",e.progressStepsDistance),t},lt=(e,t)=>{const n=E();re(n,t.title||t.titleText,"block"),t.title&&Ee(t.title,n),t.titleText&&(n.innerText=t.titleText),G(n,t,"title")},ht=(e,t)=>{st(e,t),Re(e,t),at(e,t),Xe(e,t),it(e,t),lt(e,t),Ne(e,t),We(e,t),Se(e,t),Qe(e,t),"function"==typeof t.didRender&&t.didRender(b())};function dt(){const t=e.innerParams.get(this);if(!t)return;const n=e.domCache.get(this);te(n.loader),V()?t.icon&&ee(_()):ft(n),Y([n.popup,n.actions],r.loading),n.popup.removeAttribute("aria-busy"),n.popup.removeAttribute("data-loading"),n.confirmButton.disabled=!1,n.denyButton.disabled=!1,n.cancelButton.disabled=!1}const ft=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?ee(t[0],"inline-block"):se()&&te(e.actions)};function pt(t){const n=e.innerParams.get(t||this),r=e.domCache.get(t||this);return r?H(r.popup,n.input):null}const mt=()=>ie(b()),gt=()=>S()&&S().click(),yt=()=>D()&&D().click(),wt=()=>A()&&A().click(),vt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),bt=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},_t=(e,t,n,r)=>{bt(t),n.toast||(t.keydownHandler=t=>kt(e,t,r),t.keydownTarget=n.keydownListenerCapture?window:b(),t.keydownListenerCapture=n.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},It=(e,t)=>{const n=B();if(n.length)return(e+=t)===n.length?e=0:-1===e&&(e=n.length-1),void n[e].focus();b().focus()},Et=["ArrowRight","ArrowDown"],Tt=["ArrowLeft","ArrowUp"],kt=(t,n,r)=>{const i=e.innerParams.get(t);i&&(n.isComposing||229===n.keyCode||(i.stopKeydownPropagation&&n.stopPropagation(),"Enter"===n.key?xt(t,n,i):"Tab"===n.key?Ct(n):[...Et,...Tt].includes(n.key)?St(n.key):"Escape"===n.key&&At(n,i,r)))},xt=(e,t,n)=>{if(f(n.allowEnterKey)&&t.target&&e.getInput()&&t.target instanceof HTMLElement&&t.target.outerHTML===e.getInput().outerHTML){if(["textarea","file"].includes(n.input))return;gt(),t.preventDefault()}},Ct=e=>{const t=e.target,n=B();let r=-1;for(let e=0;e<n.length;e++)if(t===n[e]){r=e;break}e.shiftKey?It(r,-1):It(r,1),e.stopPropagation(),e.preventDefault()},St=e=>{const t=[S(),D(),A()];if(document.activeElement instanceof HTMLElement&&!t.includes(document.activeElement))return;const n=Et.includes(e)?"nextElementSibling":"previousElementSibling";let r=document.activeElement;for(let e=0;e<R().children.length;e++){if(r=r[n],!r)return;if(r instanceof HTMLButtonElement&&ie(r))break}r instanceof HTMLButtonElement&&r.focus()},At=(e,t,n)=>{f(t.allowEscapeKey)&&(e.preventDefault(),n(vt.esc))};var Dt={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Ot=()=>{Array.from(document.body.children).forEach((e=>{e===y()||e.contains(y())||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}))},Nt=()=>{Array.from(document.body.children).forEach((e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))},Rt=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!K(document.body,r.iosfix)){const e=document.body.scrollTop;document.body.style.top=-1*e+"px",X(document.body,r.iosfix),Pt(),Lt()}},Lt=()=>{const e=navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),n=!!e.match(/WebKit/i);if(t&&n&&!e.match(/CriOS/i)){const e=44;b().scrollHeight>window.innerHeight-e&&(y().style.paddingBottom=`${e}px`)}},Pt=()=>{const e=y();let t;e.ontouchstart=e=>{t=Mt(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},Mt=e=>{const t=e.target,n=y();return!(Ft(e)||Bt(e)||t!==n&&(oe(n)||!(t instanceof HTMLElement)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||oe(T())&&T().contains(t)))},Ft=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,Bt=e=>e.touches&&e.touches.length>1,Ut=()=>{if(K(document.body,r.iosfix)){const e=parseInt(document.body.style.top,10);Y(document.body,r.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}},Vt=()=>{null===q.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(q.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${q.previousBodyPadding+Ce()}px`)},jt=()=>{null!==q.previousBodyPadding&&(document.body.style.paddingRight=`${q.previousBodyPadding}px`,q.previousBodyPadding=null)};function qt(e,t,n,r){V()?Jt(e,r):(fe(n).then((()=>Jt(e,r))),bt(he)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),U()&&(jt(),Ut(),Nt()),$t()}function $t(){Y([document.documentElement,document.body],[r.shown,r["height-auto"],r["no-backdrop"],r["toast-shown"]])}function Kt(e){e=Qt(e);const t=Dt.swalPromiseResolve.get(this),n=Gt(this);this.isAwaitingPromise()?e.isDismissed||(Wt(this),t(e)):n&&t(e)}function zt(){return!!e.awaitingPromise.get(this)}const Gt=t=>{const n=b();if(!n)return!1;const r=e.innerParams.get(t);if(!r||K(n,r.hideClass.popup))return!1;Y(n,r.showClass.popup),X(n,r.hideClass.popup);const i=y();return Y(i,r.showClass.backdrop),X(i,r.hideClass.backdrop),Xt(t,n,r),!0};function Ht(e){const t=Dt.swalPromiseReject.get(this);Wt(this),t&&t(e)}const Wt=t=>{t.isAwaitingPromise()&&(e.awaitingPromise.delete(t),e.innerParams.get(t)||t._destroy())},Qt=e=>void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),Xt=(e,t,n)=>{const r=y(),i=xe&&ae(t);"function"==typeof n.willClose&&n.willClose(t),i?Yt(e,t,r,n.returnFocus,n.didClose):qt(e,r,n.returnFocus,n.didClose)},Yt=(e,t,n,r,i)=>{he.swalCloseEventFinishedCallback=qt.bind(null,e,n,r,i),t.addEventListener(xe,(function(e){e.target===t&&(he.swalCloseEventFinishedCallback(),delete he.swalCloseEventFinishedCallback)}))},Jt=(e,t)=>{setTimeout((()=>{"function"==typeof t&&t.bind(e.params)(),e._destroy()}))};function Zt(t,n,r){const i=e.domCache.get(t);n.forEach((e=>{i[e].disabled=r}))}function en(e,t){if(e)if("radio"===e.type){const n=e.parentNode.parentNode.querySelectorAll("input");for(let e=0;e<n.length;e++)n[e].disabled=t}else e.disabled=t}function tn(){Zt(this,["confirmButton","denyButton","cancelButton"],!1)}function nn(){Zt(this,["confirmButton","denyButton","cancelButton"],!0)}function rn(){en(this.getInput(),!1)}function sn(){en(this.getInput(),!0)}function on(t){const n=e.domCache.get(this),i=e.innerParams.get(this);$(n.validationMessage,t),n.validationMessage.className=r["validation-message"],i.customClass&&i.customClass.validationMessage&&X(n.validationMessage,i.customClass.validationMessage),ee(n.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid",!0),s.setAttribute("aria-describedby",r["validation-message"]),W(s),X(s,r.inputerror))}function an(){const t=e.domCache.get(this);t.validationMessage&&te(t.validationMessage);const n=this.getInput();n&&(n.removeAttribute("aria-invalid"),n.removeAttribute("aria-describedby"),Y(n,r.inputerror))}const cn={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},un=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],ln={},hn=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],dn=e=>Object.prototype.hasOwnProperty.call(cn,e),fn=e=>-1!==un.indexOf(e),pn=e=>ln[e],mn=e=>{dn(e)||c(`Unknown parameter "${e}"`)},gn=e=>{hn.includes(e)&&c(`The parameter "${e}" is incompatible with toasts`)},yn=e=>{pn(e)&&d(e,pn(e))},wn=e=>{!1===e.backdrop&&e.allowOutsideClick&&c('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)mn(t),e.toast&&gn(t),yn(t)};function vn(t){const n=b(),r=e.innerParams.get(this);if(!n||K(n,r.hideClass.popup))return void c("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const i=bn(t),s=Object.assign({},r,i);ht(this,s),e.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const bn=e=>{const t={};return Object.keys(e).forEach((n=>{fn(n)?t[n]=e[n]:c(`Invalid parameter to update: ${n}`)})),t};function _n(){const t=e.domCache.get(this),n=e.innerParams.get(this);n?(t.popup&&he.swalCloseEventFinishedCallback&&(he.swalCloseEventFinishedCallback(),delete he.swalCloseEventFinishedCallback),"function"==typeof n.didDestroy&&n.didDestroy(),In(this)):En(this)}const In=e=>{En(e),delete e.params,delete he.keydownHandler,delete he.keydownTarget,delete he.currentInstance},En=t=>{t.isAwaitingPromise()?(Tn(e,t),e.awaitingPromise.set(t,!0)):(Tn(Dt,t),Tn(e,t))},Tn=(e,t)=>{for(const n in e)e[n].delete(t)};var kn=Object.freeze({__proto__:null,_destroy:_n,close:Kt,closeModal:Kt,closePopup:Kt,closeToast:Kt,disableButtons:nn,disableInput:sn,disableLoading:dt,enableButtons:tn,enableInput:rn,getInput:pt,handleAwaitingPromise:Wt,hideLoading:dt,isAwaitingPromise:zt,rejectPromise:Ht,resetValidationMessage:an,showValidationMessage:on,update:vn});const xn=e=>{let t=b();t||new Hr,t=b();const n=N();V()?te(_()):Cn(t,e),ee(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},Cn=(e,t)=>{const n=R(),i=N();!t&&ie(S())&&(t=S()),ee(n),t&&(te(t),i.setAttribute("data-button-to-replace",t.className)),i.parentNode.insertBefore(i,t),X([e,n],r.loading)},Sn=(e,t)=>{"select"===t.input||"radio"===t.input?Rn(e,t):["text","email","number","tel","textarea"].includes(t.input)&&(p(t.inputValue)||g(t.inputValue))&&(xn(S()),Ln(e,t))},An=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return Dn(n);case"radio":return On(n);case"file":return Nn(n);default:return t.inputAutoTrim?n.value.trim():n.value}},Dn=e=>e.checked?1:0,On=e=>e.checked?e.value:null,Nn=e=>e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,Rn=(e,t)=>{const n=b(),r=e=>{Pn[t.input](n,Mn(e),t)};p(t.inputOptions)||g(t.inputOptions)?(xn(S()),m(t.inputOptions).then((t=>{e.hideLoading(),r(t)}))):"object"==typeof t.inputOptions?r(t.inputOptions):u("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof t.inputOptions)},Ln=(e,t)=>{const n=e.getInput();te(n),m(t.inputValue).then((r=>{n.value="number"===t.input?`${parseFloat(r)||0}`:`${r}`,ee(n),n.focus(),e.hideLoading()})).catch((t=>{u(`Error in inputValue promise: ${t}`),n.value="",ee(n),n.focus(),e.hideLoading()}))},Pn={select:(e,t,n)=>{const i=J(e,r.select),s=(e,t,r)=>{const i=document.createElement("option");i.value=r,$(i,t),i.selected=Fn(r,n.inputValue),e.appendChild(i)};t.forEach((e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,i.appendChild(e),n.forEach((t=>s(e,t[1],t[0])))}else s(i,n,t)})),i.focus()},radio:(e,t,n)=>{const i=J(e,r.radio);t.forEach((e=>{const t=e[0],s=e[1],o=document.createElement("input"),a=document.createElement("label");o.type="radio",o.name=r.radio,o.value=t,Fn(t,n.inputValue)&&(o.checked=!0);const c=document.createElement("span");$(c,s),c.className=r.label,a.appendChild(o),a.appendChild(c),i.appendChild(a)}));const s=i.querySelectorAll("input");s.length&&s[0].focus()}},Mn=e=>{const t=[];return"undefined"!=typeof Map&&e instanceof Map?e.forEach(((e,n)=>{let r=e;"object"==typeof r&&(r=Mn(r)),t.push([n,r])})):Object.keys(e).forEach((n=>{let r=e[n];"object"==typeof r&&(r=Mn(r)),t.push([n,r])})),t},Fn=(e,t)=>t&&t.toString()===e.toString(),Bn=t=>{const n=e.innerParams.get(t);t.disableButtons(),n.input?jn(t,"confirm"):Gn(t,!0)},Un=t=>{const n=e.innerParams.get(t);t.disableButtons(),n.returnInputValueOnDeny?jn(t,"deny"):$n(t,!1)},Vn=(e,t)=>{e.disableButtons(),t(vt.cancel)},jn=(t,n)=>{const r=e.innerParams.get(t);if(!r.input)return void u(`The "input" parameter is needed to be set when using returnInputValueOn${a(n)}`);const i=An(t,r);r.inputValidator?qn(t,i,n):t.getInput().checkValidity()?"deny"===n?$n(t,i):Gn(t,i):(t.enableButtons(),t.showValidationMessage(r.validationMessage))},qn=(t,n,r)=>{const i=e.innerParams.get(t);t.disableInput(),Promise.resolve().then((()=>m(i.inputValidator(n,i.validationMessage)))).then((e=>{t.enableButtons(),t.enableInput(),e?t.showValidationMessage(e):"deny"===r?$n(t,n):Gn(t,n)}))},$n=(t,n)=>{const r=e.innerParams.get(t||void 0);r.showLoaderOnDeny&&xn(D()),r.preDeny?(e.awaitingPromise.set(t||void 0,!0),Promise.resolve().then((()=>m(r.preDeny(n,r.validationMessage)))).then((e=>{!1===e?(t.hideLoading(),Wt(t)):t.close({isDenied:!0,value:void 0===e?n:e})})).catch((e=>zn(t||void 0,e)))):t.close({isDenied:!0,value:n})},Kn=(e,t)=>{e.close({isConfirmed:!0,value:t})},zn=(e,t)=>{e.rejectPromise(t)},Gn=(t,n)=>{const r=e.innerParams.get(t||void 0);r.showLoaderOnConfirm&&xn(),r.preConfirm?(t.resetValidationMessage(),e.awaitingPromise.set(t||void 0,!0),Promise.resolve().then((()=>m(r.preConfirm(n,r.validationMessage)))).then((e=>{ie(C())||!1===e?(t.hideLoading(),Wt(t)):Kn(t,void 0===e?n:e)})).catch((e=>zn(t||void 0,e)))):Kn(t,n)},Hn=(t,n,r)=>{e.innerParams.get(t).toast?Wn(t,n,r):(Yn(n),Jn(n),Zn(t,n,r))},Wn=(t,n,r)=>{n.popup.onclick=()=>{const n=e.innerParams.get(t);n&&(Qn(n)||n.timer||n.input)||r(vt.close)}},Qn=e=>e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton;let Xn=!1;const Yn=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=void 0,t.target===e.container&&(Xn=!0)}}},Jn=e=>{e.container.onmousedown=()=>{e.popup.onmouseup=function(t){e.popup.onmouseup=void 0,(t.target===e.popup||e.popup.contains(t.target))&&(Xn=!0)}}},Zn=(t,n,r)=>{n.container.onclick=i=>{const s=e.innerParams.get(t);Xn?Xn=!1:i.target===n.container&&f(s.allowOutsideClick)&&r(vt.backdrop)}},er=e=>"object"==typeof e&&e.jquery,tr=e=>e instanceof Element||er(e),nr=e=>{const t={};return"object"!=typeof e[0]||tr(e[0])?["title","html","icon"].forEach(((n,r)=>{const i=e[r];"string"==typeof i||tr(i)?t[n]=i:void 0!==i&&u(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)})):Object.assign(t,e[0]),t};function rr(){const e=this;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(...n)}function ir(e){class t extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}return t}const sr=()=>he.timeout&&he.timeout.getTimerLeft(),or=()=>{if(he.timeout)return ue(),he.timeout.stop()},ar=()=>{if(he.timeout){const e=he.timeout.start();return ce(e),e}},cr=()=>{const e=he.timeout;return e&&(e.running?or():ar())},ur=e=>{if(he.timeout){const t=he.timeout.increase(e);return ce(t,!0),t}},lr=()=>he.timeout&&he.timeout.isRunning();let hr=!1;const dr={};function fr(){dr[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,hr||(document.body.addEventListener("click",pr),hr=!0)}const pr=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in dr){const n=t.getAttribute(e);if(n)return void dr[e].fire({template:n})}};var mr=Object.freeze({__proto__:null,argsToParams:nr,bindClickHandler:fr,clickCancel:wt,clickConfirm:gt,clickDeny:yt,enableLoading:xn,fire:rr,getActions:R,getCancelButton:A,getCloseButton:M,getConfirmButton:S,getContainer:y,getDenyButton:D,getFocusableElements:B,getFooter:L,getHtmlContainer:T,getIcon:_,getIconContent:I,getImage:k,getInputLabel:O,getLoader:N,getPopup:b,getProgressSteps:x,getTimerLeft:sr,getTimerProgressBar:P,getTitle:E,getValidationMessage:C,increaseTimer:ur,isDeprecatedParameter:pn,isLoading:j,isTimerRunning:lr,isUpdatableParameter:fn,isValidParameter:dn,isVisible:mt,mixin:ir,resumeTimer:ar,showLoading:xn,stopTimer:or,toggleTimer:cr});class gr{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const yr=["swal-title","swal-html","swal-footer"],wr=e=>{const t="string"==typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return xr(n),Object.assign(vr(n),br(n),_r(n),Ir(n),Er(n),Tr(n),kr(n,yr))},vr=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach((e=>{Cr(e,["name","value"]);const n=e.getAttribute("name"),r=e.getAttribute("value");"boolean"==typeof cn[n]?t[n]="false"!==r:"object"==typeof cn[n]?t[n]=JSON.parse(r):t[n]=r})),t},br=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach((e=>{const n=e.getAttribute("name"),r=e.getAttribute("value");t[n]=new Function(`return ${r}`)()})),t},_r=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach((e=>{Cr(e,["type","color","aria-label"]);const n=e.getAttribute("type");t[`${n}ButtonText`]=e.innerHTML,t[`show${a(n)}Button`]=!0,e.hasAttribute("color")&&(t[`${n}ButtonColor`]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t[`${n}ButtonAriaLabel`]=e.getAttribute("aria-label"))})),t},Ir=e=>{const t={},n=e.querySelector("swal-image");return n&&(Cr(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt"))),t},Er=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Cr(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},Tr=e=>{const t={},n=e.querySelector("swal-input");n&&(Cr(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach((e=>{Cr(e,["value"]);const n=e.getAttribute("value"),r=e.innerHTML;t.inputOptions[n]=r}))),t},kr=(e,t)=>{const n={};for(const r in t){const i=t[r],s=e.querySelector(i);s&&(Cr(s,[]),n[i.replace(/^swal-/,"")]=s.innerHTML.trim())}return n},xr=e=>{const t=yr.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach((e=>{const n=e.tagName.toLowerCase();t.includes(n)||c(`Unrecognized element <${n}>`)}))},Cr=(e,t)=>{Array.from(e.attributes).forEach((n=>{-1===t.indexOf(n.name)&&c([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."])}))},Sr=10,Ar=e=>{const t=y(),n=b();"function"==typeof e.willOpen&&e.willOpen(n);const i=window.getComputedStyle(document.body).overflowY;Rr(t,n,e),setTimeout((()=>{Or(t,n)}),Sr),U()&&(Nr(t,e.scrollbarPadding,i),Ot()),V()||he.previousActiveElement||(he.previousActiveElement=document.activeElement),"function"==typeof e.didOpen&&setTimeout((()=>e.didOpen(n))),Y(t,r["no-transition"])},Dr=e=>{const t=b();if(e.target!==t)return;const n=y();t.removeEventListener(xe,Dr),n.style.overflowY="auto"},Or=(e,t)=>{xe&&ae(t)?(e.style.overflowY="hidden",t.addEventListener(xe,Dr)):e.style.overflowY="auto"},Nr=(e,t,n)=>{Rt(),t&&"hidden"!==n&&Vt(),setTimeout((()=>{e.scrollTop=0}))},Rr=(e,t,n)=>{X(e,n.showClass.backdrop),t.style.setProperty("opacity","0","important"),ee(t,"grid"),setTimeout((()=>{X(t,n.showClass.popup),t.style.removeProperty("opacity")}),Sr),X([document.documentElement,document.body],r.shown),n.heightAuto&&n.backdrop&&!n.toast&&X([document.documentElement,document.body],r["height-auto"])};var Lr={email:(e,t)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function Pr(e){e.inputValidator||Object.keys(Lr).forEach((t=>{e.input===t&&(e.inputValidator=Lr[t])}))}function Mr(e){(!e.target||"string"==typeof e.target&&!document.querySelector(e.target)||"string"!=typeof e.target&&!e.target.appendChild)&&(c('Target parameter is not valid, defaulting to "body"'),e.target="body")}function Fr(e){Pr(e),e.showLoaderOnConfirm&&!e.preConfirm&&c("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),Mr(e),"string"==typeof e.title&&(e.title=e.title.split("\n").join("<br />")),Ie(e)}let Br;class Ur{constructor(){if("undefined"==typeof window)return;Br=this;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const i=Object.freeze(this.constructor.argsToParams(n));Object.defineProperties(this,{params:{value:i,writable:!1,enumerable:!0,configurable:!0}});const s=Br._main(Br.params);e.promise.set(this,s)}_main(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wn(Object.assign({},n,t)),he.currentInstance&&(he.currentInstance._destroy(),U()&&Nt()),he.currentInstance=Br;const r=jr(t,n);Fr(r),Object.freeze(r),he.timeout&&(he.timeout.stop(),delete he.timeout),clearTimeout(he.restoreFocusTimeout);const i=qr(Br);return ht(Br,r),e.innerParams.set(Br,r),Vr(Br,i,r)}then(t){return e.promise.get(this).then(t)}finally(t){return e.promise.get(this).finally(t)}}const Vr=(e,t,n)=>new Promise(((r,i)=>{const s=t=>{e.close({isDismissed:!0,dismiss:t})};Dt.swalPromiseResolve.set(e,r),Dt.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{Bn(e)},t.denyButton.onclick=()=>{Un(e)},t.cancelButton.onclick=()=>{Vn(e,s)},t.closeButton.onclick=()=>{s(vt.close)},Hn(e,t,s),_t(e,he,n,s),Sn(e,n),Ar(n),$r(he,n,s),Kr(t,n),setTimeout((()=>{t.container.scrollTop=0}))})),jr=(e,t)=>{const n=wr(e),r=Object.assign({},cn,t,n,e);return r.showClass=Object.assign({},cn.showClass,r.showClass),r.hideClass=Object.assign({},cn.hideClass,r.hideClass),r},qr=t=>{const n={popup:b(),container:y(),actions:R(),confirmButton:S(),denyButton:D(),cancelButton:A(),loader:N(),closeButton:M(),validationMessage:C(),progressSteps:x()};return e.domCache.set(t,n),n},$r=(e,t,n)=>{const r=P();te(r),t.timer&&(e.timeout=new gr((()=>{n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(ee(r),G(r,t,"timerProgressBar"),setTimeout((()=>{e.timeout&&e.timeout.running&&ce(t.timer)}))))},Kr=(e,t)=>{t.toast||(f(t.allowEnterKey)?zr(e,t)||It(-1,1):Gr())},zr=(e,t)=>t.focusDeny&&ie(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&ie(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!ie(e.confirmButton)||(e.confirmButton.focus(),0)),Gr=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!=typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents="none";const e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout((()=>{e.play().catch((()=>{}))}),2500)}),500):localStorage.setItem("swal-initiation",`${e}`)}Object.assign(Ur.prototype,kn),Object.assign(Ur,mr),Object.keys(kn).forEach((e=>{Ur[e]=function(){if(Br)return Br[e](...arguments)}})),Ur.DismissReason=vt,Ur.version="11.7.2";const Hr=Ur;return Hr.default=Hr,Hr}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},238:(e,t,n)=>{"use strict";n.d(t,{Jn:()=>_,KN:()=>T,Mq:()=>E,Xd:()=>g,ZF:()=>I,qX:()=>y});var r=n(463),i=n(333),s=n(444),o=n(531);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const c="@firebase/app",u="0.9.3",l=new i.Yd("@firebase/app"),h="[DEFAULT]",d={[c]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},f=new Map,p=new Map;function m(e,t){try{e.container.addComponent(t)}catch(n){l.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function g(e){const t=e.name;if(p.has(t))return l.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const t of f.values())m(t,e);return!0}function y(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const w={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},v=new s.LL("app","Firebase",w);class b{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw v.create("app-deleted",{appName:this._name})}}const _="9.17.1";function I(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const i=Object.assign({name:h,automaticDataCollectionEnabled:!1},t),o=i.name;if("string"!=typeof o||!o)throw v.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.aH)()),!n)throw v.create("no-options");const a=f.get(o);if(a){if((0,s.vZ)(n,a.options)&&(0,s.vZ)(i,a.config))return a;throw v.create("duplicate-app",{appName:o})}const c=new r.H0(o);for(const e of p.values())c.addComponent(e);const u=new b(n,i,c);return f.set(o,u),u}function E(e=h){const t=f.get(e);if(!t&&e===h)return I();if(!t)throw v.create("no-app",{appName:e});return t}function T(e,t,n){var i;let s=null!==(i=d[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void l.warn(e.join(" "))}g(new r.wA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const k="firebase-heartbeat-database",x=1,C="firebase-heartbeat-store";let S=null;function A(){return S||(S=(0,o.X3)(k,x,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(C)}}).catch((e=>{throw v.create("idb-open",{originalErrorMessage:e.message})}))),S}async function D(e,t){try{const n=(await A()).transaction(C,"readwrite"),r=n.objectStore(C);return await r.put(t,O(e)),n.done}catch(e){if(e instanceof s.ZR)l.warn(e.message);else{const t=v.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});l.warn(t.message)}}}function O(e){return`${e.name}!${e.options.appId}`}const N=1024;class R{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new P(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=L();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=L(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=N){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),M(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),M(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,s.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function L(){return(new Date).toISOString().substring(0,10)}class P{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.hl)()&&(0,s.eu)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{return(await A()).transaction(C).objectStore(C).get(O(e))}catch(e){if(e instanceof s.ZR)l.warn(e.message);else{const t=v.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});l.warn(t.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return D(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return D(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function M(e){return(0,s.L)(JSON.stringify({version:2,heartbeats:e})).length}var F;F="",g(new r.wA("platform-logger",(e=>new a(e)),"PRIVATE")),g(new r.wA("heartbeat",(e=>new R(e)),"PRIVATE")),T(c,u,F),T(c,u,"esm2017"),T("fire-js","")},463:(e,t,n)=>{"use strict";n.d(t,{H0:()=>a,wA:()=>i});var r=n(444);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===s?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},578:(e,t,n)=>{"use strict";var r=n(238),i=n(463),s=n(444),o=n(531);const a="@firebase/installations",c="0.6.3",u=1e4,l=`w:${c}`,h="FIS_v2",d="https://firebaseinstallations.googleapis.com/v1",f=36e5,p={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},m=new s.LL("installations","Installations",p);function g(e){return e instanceof s.ZR&&e.code.includes("request-failed")}function y({projectId:e}){return`${d}/projects/${e}/installations`}function w(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function v(e,t){const n=(await t.json()).error;return m.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function b({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function _(e,{refreshToken:t}){const n=b(e);return n.append("Authorization",function(e){return`${h} ${e}`}(t)),n}async function I(e){const t=await e();return t.status>=500&&t.status<600?e():t}function E(e){return new Promise((t=>{setTimeout(t,e)}))}const T=/^[cdef][\w-]{21}$/,k="";function x(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return T.test(t)?t:k}catch(e){return k}}function C(e){return`${e.appName}!${e.appId}`}const S=new Map;function A(e,t){const n=C(e);D(n,t),function(e,t){const n=N();n&&n.postMessage({key:e,fid:t});R()}(n,t)}function D(e,t){const n=S.get(e);if(n)for(const e of n)e(t)}let O=null;function N(){return!O&&"BroadcastChannel"in self&&(O=new BroadcastChannel("[Firebase] FID Change"),O.onmessage=e=>{D(e.data.key,e.data.fid)}),O}function R(){0===S.size&&O&&(O.close(),O=null)}const L="firebase-installations-database",P=1,M="firebase-installations-store";let F=null;function B(){return F||(F=(0,o.X3)(L,P,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(M)}})),F}async function U(e,t){const n=C(e),r=(await B()).transaction(M,"readwrite"),i=r.objectStore(M),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||A(e,t.fid),t}async function V(e){const t=C(e),n=(await B()).transaction(M,"readwrite");await n.objectStore(M).delete(t),await n.done}async function j(e,t){const n=C(e),r=(await B()).transaction(M,"readwrite"),i=r.objectStore(M),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||A(e,o.fid),o}async function q(e){let t;const n=await j(e.appConfig,(n=>{const r=function(e){const t=e||{fid:x(),registrationStatus:0};return z(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(m.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=y(e),i=b(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={fid:n,authVersion:h,appId:e.appId,sdkVersion:l},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await I((()=>fetch(r,a)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:w(e.authToken)}}throw await v("Create Installation",c)}(e,t);return U(e.appConfig,n)}catch(n){throw g(n)&&409===n.customData.serverCode?await V(e.appConfig):await U(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:$(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===k?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function $(e){let t=await K(e.appConfig);for(;1===t.registrationStatus;)await E(100),t=await K(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await q(e);return n||t}return t}function K(e){return j(e,(e=>{if(!e)throw m.create("installation-not-found");return z(e)}))}function z(e){return 1===(t=e).registrationStatus&&t.registrationTime+u<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function G({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${y(e)}/${t}/authTokens:generate`}(e,n),i=_(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:l,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await I((()=>fetch(r,a)));if(c.ok){return w(await c.json())}throw await v("Generate Auth Token",c)}async function H(e,t=!1){let n;const r=await j(e.appConfig,(r=>{if(!Q(r))throw m.create("not-registered");const i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+f}(e)}(i))return r;if(1===i.requestStatus)return n=async function(e,t){let n=await W(e.appConfig);for(;1===n.authToken.requestStatus;)await E(100),n=await W(e.appConfig);const r=n.authToken;return 0===r.requestStatus?H(e,t):r}(e,t),r;{if(!navigator.onLine)throw m.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await G(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await U(e.appConfig,r),n}catch(n){if(!g(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await U(e.appConfig,n)}else await V(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function W(e){return j(e,(e=>{if(!Q(e))throw m.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+u<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function Q(e){return void 0!==e&&2===e.registrationStatus}async function X(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await q(e);t&&await t}(n);return(await H(n,t)).token}function Y(e){return m.create("missing-app-config-values",{valueName:e})}const J="installations",Z="installations-internal",ee=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Y("App Configuration");if(!e.name)throw Y("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Y(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,r.qX)(t,"heartbeat"),_delete:()=>Promise.resolve()}},te=e=>{const t=e.getProvider("app").getImmediate(),n=(0,r.qX)(t,J).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await q(t);return r?r.catch(console.error):H(t).catch(console.error),n.fid}(n),getToken:e=>X(n,e)}};(0,r.Xd)(new i.wA(J,ee,"PUBLIC")),(0,r.Xd)(new i.wA(Z,te,"PRIVATE")),(0,r.KN)(a,c),(0,r.KN)(a,c,"esm2017")},333:(e,t,n)=>{"use strict";n.d(t,{Yd:()=>u,in:()=>i});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}},261:(e,t,n)=>{"use strict";n.d(t,{IH:()=>U});var r=n(238),i=n(333),s=n(444),o=n(463);n(578);const a="analytics",c="firebase_id",u="origin",l=6e4,h="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",d="https://www.googletagmanager.com/gtag/js",f=new i.Yd("@firebase/analytics");function p(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function m(e,t,n,r){return async function(i,s,o){try{"event"===i?await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await p(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(e){f.error(e)}}(e,t,n,s,o):"config"===i?await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await p(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(e){f.error(e)}e("config",i,s)}(e,t,n,r,s,o):"consent"===i?e("consent","update",o):e("set",s)}catch(e){f.error(e)}}}const g={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},y=new s.LL("analytics","Analytics",g),w=30;const v=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function b(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function _(e,t=v,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw y.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw y.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new E;return setTimeout((async()=>{a.abort()}),void 0!==n?n:l),I({appId:r,apiKey:i,measurementId:s},o,a,t)}async function I(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=v){var o;const{appId:a,measurementId:c}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(y.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(c)return f.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:a,measurementId:c};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:b(r)},s=h.replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw y.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return i.deleteThrottleMetadata(a),t}catch(t){const u=t;if(!function(e){if(!(e instanceof s.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(u)){if(i.deleteThrottleMetadata(a),c)return f.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==u?void 0:u.message}]`),{appId:a,measurementId:c};throw t}const l=503===Number(null===(o=null==u?void 0:u.customData)||void 0===o?void 0:o.httpStatus)?(0,s.$s)(n,i.intervalMillis,w):(0,s.$s)(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(a,h),f.debug(`Calling attemptFetch again in ${l} millis`),I(e,h,r,i)}}class E{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let T,k;function x(e){k=e}function C(e){T=e}async function S(e,t,n,r,i,o,a){var l;const h=_(e);h.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&f.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>f.error(e))),t.push(h);const p=async function(){if(!(0,s.hl)())return f.warn(y.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,s.eu)()}catch(e){return f.warn(y.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[m,g]=await Promise.all([h,p]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(d)&&n.src.includes(e))return n;return null})(o)||function(e,t){const n=document.createElement("script");n.src=`${d}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(o,m.measurementId),k&&(i("consent","default",k),x(void 0)),i("js",new Date);const w=null!==(l=null==a?void 0:a.config)&&void 0!==l?l:{};return w[u]="firebase",w.update=!0,null!=g&&(w[c]=g),i("config",m.measurementId,w),T&&(i("set",T),C(void 0)),m.measurementId}class A{constructor(e){this.app=e}_delete(){return delete D[this.app.options.appId],Promise.resolve()}}let D={},O=[];const N={};let R,L,P="dataLayer",M="gtag",F=!1;function B(e,t,n){!function(){const e=[];if((0,s.ru)()&&e.push("This is a browser extension environment."),(0,s.zI)()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=y.create("invalid-analytics-context",{errorInfo:t});f.warn(n.message)}}();const r=e.options.appId;if(!r)throw y.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw y.create("no-api-key");f.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=D[r])throw y.create("already-exists",{id:r});if(!F){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(P);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=m(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(D,O,N,P,M);L=e,R=t,F=!0}D[r]=S(e,O,N,t,R,P,n);return new A(e)}function U(e=(0,r.Mq)()){e=(0,s.m9)(e);const t=(0,r.qX)(e,a);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=(0,r.qX)(e,a);if(n.isInitialized()){const e=n.getImmediate();if((0,s.vZ)(t,n.getOptions()))return e;throw y.create("already-initialized")}const i=n.initialize({options:t});return i}(e)}function V(e,t,n,r){e=(0,s.m9)(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(L,D[e.app.options.appId],t,n,r).catch((e=>f.error(e)))}const j="@firebase/analytics",q="0.9.3";(0,r.Xd)(new o.wA(a,((e,{options:t})=>B(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),(0,r.Xd)(new o.wA("analytics-internal",(function(e){try{const t=e.getProvider(a).getImmediate();return{logEvent:(e,n,r)=>V(t,e,n,r)}}catch(e){throw y.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),(0,r.KN)(j,q),(0,r.KN)(j,q,"esm2017")},977:(e,t,n)=>{"use strict";n.d(t,{ZF:()=>r.ZF});var r=n(238);(0,r.KN)("firebase","9.17.1","app")},962:(e,t,n)=>{"use strict";n.d(t,{v0:()=>fn,Aj:()=>qe,LS:()=>Ve,e5:()=>je});var r=n(444),i=n(238),s=n(333);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var a=n(463);function c(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u=c,l=new r.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),h=new s.Yd("@firebase/auth");function d(e,...t){h.logLevel<=s.in.ERROR&&h.error(`Auth (${i.Jn}): ${e}`,...t)}function f(e,...t){throw g(e,...t)}function p(e,...t){return g(e,...t)}function m(e,t,n){const i=Object.assign(Object.assign({},u()),{[t]:n});return new r.LL("auth","Firebase",i).create(t,{appName:e.name})}function g(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return l.create(e,...t)}function y(e,t,...n){if(!e)throw g(t,...n)}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function v(e,t){e||w(t)}const b=new Map;function _(e){v(e instanceof Function,"Expected a class definition");let t=b.get(e);return t?(v(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,b.set(e,t),t)}function I(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===T()||"https:"===T()}function T(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,v(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.uI)()||(0,r.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(E()||(0,r.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function x(e,t){v(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class C{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const S={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},A=new k(3e4,6e4);function D(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function O(e,t,n,i,s={}){return N(e,s,(async()=>{let s={},o={};i&&("GET"===t?o=i:s={body:JSON.stringify(i)});const a=(0,r.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),C.fetch()(L(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))}))}async function N(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},S),t);try{const t=new P(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw M(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw M(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw M(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw M(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);f(e,a)}}catch(t){if(t instanceof r.ZR)throw t;f(e,"network-request-failed")}}async function R(e,t,n,r,i={}){const s=await O(e,t,n,r,i);return"mfaPendingCredential"in s&&f(e,"multi-factor-auth-required",{_serverResponse:s}),s}function L(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?x(e.config,i):`${e.config.apiScheme}://${i}`}class P{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(p(this.auth,"network-request-failed"))),A.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function M(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=p(e,t,r);return i.customData._tokenResponse=n,i}function F(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function B(e){return 1e3*Number(e)}function U(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return d("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.tV)(n);return e?JSON.parse(e):(d("Failed to decode base64 JWT payload"),null)}catch(e){return d("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function V(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof r.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class j{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class q{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=F(this.lastLoginAt),this.creationTime=F(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $(e){var t;const n=e.auth,r=await e.getIdToken(),i=await V(e,async function(e,t){return O(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));y(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const c=(u=e.providerData,l=a,[...u.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var u,l;const h=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==c?void 0:c.length)),f=!!h&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new q(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(e,p)}class K{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y(void 0!==e.idToken,"internal-error"),y(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=U(e);return y(t,"internal-error"),y(void 0!==t.exp,"internal-error"),y(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return y(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await N(e,{},(async()=>{const n=(0,r.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=L(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",C.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new K;return n&&(y("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(y("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(y("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new K,this.toJSON())}_performRefresh(){return w("not implemented")}}function z(e,t){y("string"==typeof e||void 0===e,"internal-error",{appName:t})}class G{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new q(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await V(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=(0,r.m9)(e),i=await n.getIdToken(t),s=U(i);y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:F(B(s.auth_time)),issuedAtTime:F(B(s.iat)),expirationTime:F(B(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,r.m9)(e);await $(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new G(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await $(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await V(this,async function(e,t){return O(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,w=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:I,stsTokenManager:E}=t;y(v&&E,e,"internal-error");const T=K.fromJSON(this.name,E);y("string"==typeof v,e,"internal-error"),z(l,e.name),z(h,e.name),y("boolean"==typeof b,e,"internal-error"),y("boolean"==typeof _,e,"internal-error"),z(d,e.name),z(f,e.name),z(p,e.name),z(m,e.name),z(g,e.name),z(w,e.name);const k=new G({uid:v,auth:e,email:h,emailVerified:b,displayName:l,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:w});return I&&Array.isArray(I)&&(k.providerData=I.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new K;r.updateFromServerResponse(t);const i=new G({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await $(i),i}}class H{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}H.type="NONE";const W=H;function Q(e,t,n){return`firebase:${e}:${t}:${n}`}class X{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Q(this.userKey,r.apiKey,i),this.fullPersistenceKey=Q("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?G._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new X(_(W),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||_(W);const s=Q(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=G._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new X(i,e,n)):new X(i,e,n)}}function Y(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(te(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(J(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(re(t))return"Blackberry";if(ie(t))return"Webos";if(Z(t))return"Safari";if((t.includes("chrome/")||ee(t))&&!t.includes("edge/"))return"Chrome";if(ne(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function J(e=(0,r.z$)()){return/firefox\//i.test(e)}function Z(e=(0,r.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ee(e=(0,r.z$)()){return/crios\//i.test(e)}function te(e=(0,r.z$)()){return/iemobile/i.test(e)}function ne(e=(0,r.z$)()){return/android/i.test(e)}function re(e=(0,r.z$)()){return/blackberry/i.test(e)}function ie(e=(0,r.z$)()){return/webos/i.test(e)}function se(e=(0,r.z$)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function oe(e=(0,r.z$)()){return se(e)||ne(e)||ie(e)||re(e)||/windows phone/i.test(e)||te(e)}function ae(e,t=[]){let n;switch(e){case"Browser":n=Y((0,r.z$)());break;case"Worker":n=`${Y((0,r.z$)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.Jn}/${s}`}class ce{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class ue{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new he(this),this.idTokenSubscription=new he(this),this.beforeStateQueue=new ce(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await X.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,r.m9)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(_(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await X.create(this,[_(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return y(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function le(e){return(0,r.m9)(e)}class he{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.ne)((e=>this.observer=e))}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function de(e,t,n){const r=le(e);y(r._canInitEmulator,r,"emulator-config-failed"),y(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=fe(t),{host:o,port:a}=function(e){const t=fe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:pe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:pe(t)}}}(t),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class me{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}async function ge(e,t){return O(e,"POST","/v1/accounts:update",t)}async function ye(e,t){return O(e,"POST","/v1/accounts:sendOobCode",D(e,t))}class we extends me{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new we(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new we(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPassword",D(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))}(e,{email:this._email,oobCode:this._password});default:f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ge(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ve(e,t){return R(e,"POST","/v1/accounts:signInWithIdp",D(e,t))}class be extends me{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new be(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new be(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return ve(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ve(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ve(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.xO)(t)}return e}}const _e={USER_NOT_FOUND:"user-not-found"};class Ie extends me{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ie({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ie({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await R(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t));if(n.temporaryProof)throw M(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),_e)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ie({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ee{constructor(e){var t,n,i,s,o,a;const c=(0,r.zd)((0,r.pd)(e)),u=null!==(t=c.apiKey)&&void 0!==t?t:null,l=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);y(u&&l&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=l,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,r.zd)((0,r.pd)(e)).link,n=t?(0,r.zd)((0,r.pd)(t)).deep_link_id:null,i=(0,r.zd)((0,r.pd)(e)).deep_link_id;return(i?(0,r.zd)((0,r.pd)(i)).link:null)||i||n||t||e}(e);try{return new Ee(t)}catch(e){return null}}}class Te{constructor(){this.providerId=Te.PROVIDER_ID}static credential(e,t){return we._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ee.parseLink(t);return y(n,"argument-error"),we._fromEmailAndCode(e,n.code,n.tenantId)}}Te.PROVIDER_ID="password",Te.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Te.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ke{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class xe extends ke{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ce extends xe{constructor(){super("facebook.com")}static credential(e){return be._fromParams({providerId:Ce.PROVIDER_ID,signInMethod:Ce.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ce.credentialFromTaggedObject(e)}static credentialFromError(e){return Ce.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ce.credential(e.oauthAccessToken)}catch(e){return null}}}Ce.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ce.PROVIDER_ID="facebook.com";class Se extends xe{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return be._fromParams({providerId:Se.PROVIDER_ID,signInMethod:Se.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Se.credentialFromTaggedObject(e)}static credentialFromError(e){return Se.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Se.credential(t,n)}catch(e){return null}}}Se.GOOGLE_SIGN_IN_METHOD="google.com",Se.PROVIDER_ID="google.com";class Ae extends xe{constructor(){super("github.com")}static credential(e){return be._fromParams({providerId:Ae.PROVIDER_ID,signInMethod:Ae.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ae.credentialFromTaggedObject(e)}static credentialFromError(e){return Ae.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ae.credential(e.oauthAccessToken)}catch(e){return null}}}Ae.GITHUB_SIGN_IN_METHOD="github.com",Ae.PROVIDER_ID="github.com";class De extends xe{constructor(){super("twitter.com")}static credential(e,t){return be._fromParams({providerId:De.PROVIDER_ID,signInMethod:De.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return De.credentialFromTaggedObject(e)}static credentialFromError(e){return De.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return De.credential(t,n)}catch(e){return null}}}De.TWITTER_SIGN_IN_METHOD="twitter.com",De.PROVIDER_ID="twitter.com";class Oe{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await G._fromIdTokenResponse(e,n,r),s=Ne(n);return new Oe({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ne(n);return new Oe({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ne(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Re extends r.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Re.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Re(e,t,n,r)}}function Le(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Re._fromErrorAndOperation(e,n,t,r);throw n}))}async function Pe(e,t,n=!1){const r=await V(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Oe._forOperation(e,"link",r)}async function Me(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await V(e,Le(r,i,t,e),n);y(s.idToken,r,"internal-error");const o=U(s.idToken);y(o,r,"internal-error");const{sub:a}=o;return y(e.uid===a,r,"user-mismatch"),Oe._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&f(r,"user-mismatch"),e}}async function Fe(e,t,n=!1){const r="signIn",i=await Le(e,r,t),s=await Oe._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Be(e,t){return Fe(le(e),t)}function Ue(e,t,n){var r;y((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),y(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(y(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(y(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Ve(e,t,n){const i=(0,r.m9)(e),s={requestType:"PASSWORD_RESET",email:t};n&&Ue(i,s,n),await async function(e,t){return ye(e,t)}(i,s)}function je(e,t,n){return Be((0,r.m9)(e),Te.credential(t,n))}function qe(e,t,n,i){return(0,r.m9)(e).onAuthStateChanged(t,n,i)}new WeakMap;const $e="__sak";class Ke{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($e,"1"),this.storage.removeItem($e),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ze extends Ke{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.z$)();return Z(e)||se(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=oe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,r.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ze.type="LOCAL";const Ge=ze;class He extends Ke{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}He.type="SESSION";const We=He;class Qe{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Qe(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Xe(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Qe.receivers=[];class Ye{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Xe("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Je(){return window}function Ze(){return void 0!==Je().WorkerGlobalScope&&"function"==typeof Je().importScripts}const et="firebaseLocalStorageDb",tt=1,nt="firebaseLocalStorage",rt="fbase_key";class it{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function st(e,t){return e.transaction([nt],t?"readwrite":"readonly").objectStore(nt)}function ot(){const e=indexedDB.open(et,tt);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(nt,{keyPath:rt})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(nt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(et);return new it(e).toPromise()}(),t(await ot()))}))}))}async function at(e,t,n){const r=st(e,!0).put({[rt]:t,value:n});return new it(r).toPromise()}function ct(e,t){const n=st(e,!0).delete(t);return new it(n).toPromise()}class ut{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ot()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ze()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qe._getInstance(Ze()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ye(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ot();return await at(e,$e,"1"),await ct(e,$e),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>at(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=st(e,!1).get(t),r=await new it(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ct(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=st(e,!1).getAll();return new it(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ut.type="LOCAL";const lt=ut;function ht(e){return new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=p("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)}))}function dt(e){return`__${e}${Math.floor(1e6*Math.random())}`}dt("rcb"),new k(3e4,6e4);const ft="recaptcha";async function pt(e,t,n){var r;const i=await n.verify();try{let s;if(y("string"==typeof i,e,"argument-error"),y(n.type===ft,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){y("enroll"===t.type,e,"internal-error");const n=await function(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:start",D(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;y(n,e,"missing-multi-factor-info");const o=await function(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:start",D(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return O(e,"POST","/v1/accounts:sendVerificationCode",D(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class mt{constructor(e){this.providerId=mt.PROVIDER_ID,this.auth=le(e)}verifyPhoneNumber(e,t){return pt(this.auth,e,(0,r.m9)(t))}static credential(e,t){return Ie._fromVerification(e,t)}static credentialFromResult(e){const t=e;return mt.credentialFromTaggedObject(t)}static credentialFromError(e){return mt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ie._fromTokenResponse(t,n):null}}function gt(e,t){return t?_(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}mt.PROVIDER_ID="phone",mt.PHONE_SIGN_IN_METHOD="phone";class yt extends me{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ve(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ve(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ve(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wt(e){return Fe(e.auth,new yt(e),e.bypassAuthState)}function vt(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),Me(n,new yt(e),e.bypassAuthState)}async function bt(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),Pe(n,new yt(e),e.bypassAuthState)}class _t{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wt;case"linkViaPopup":case"linkViaRedirect":return bt;case"reauthViaPopup":case"reauthViaRedirect":return vt;default:f(this.auth,"internal-error")}}resolve(e){v(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){v(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const It=new k(2e3,1e4);class Et extends _t{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Et.currentPopupAction&&Et.currentPopupAction.cancel(),Et.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){v(1===this.filter.length,"Popup operations only handle one event");const e=Xe();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(p(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Et.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(p(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,It.get())};e()}}Et.currentPopupAction=null;const Tt="pendingRedirect",kt=new Map;class xt extends _t{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=kt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=At(t),r=St(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}kt.set(this.auth._key(),e)}return this.bypassAuthState||kt.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ct(e,t){kt.set(e._key(),t)}function St(e){return _(e._redirectPersistence)}function At(e){return Q(Tt,e.config.apiKey,e.name)}async function Dt(e,t,n=!1){const r=le(e),i=gt(r,t),s=new xt(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Ot{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Rt(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(p(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nt(e))}saveEventToCache(e){this.cachedEventUids.add(Nt(e)),this.lastProcessedEventTime=Date.now()}}function Nt(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Rt({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const Lt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pt=/^https?/;async function Mt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return O(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Ft(e))return}catch(e){}f(e,"unauthorized-domain")}function Ft(e){const t=I(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Pt.test(n))return!1;if(Lt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Bt=new k(3e4,6e4);function Ut(){const e=Je().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Vt=null;function jt(e){return Vt=Vt||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){Ut(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ut(),n(p(e,"network-request-failed"))},timeout:Bt.get()})}if(null===(i=null===(r=Je().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Je().gapi)||void 0===s?void 0:s.load)){const t=dt("iframefcb");return Je()[t]=()=>{gapi.load?o():n(p(e,"network-request-failed"))},ht(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Vt=null,e}))}(e),Vt}const qt=new k(5e3,15e3),$t="__/auth/iframe",Kt="emulator/auth/iframe",zt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ht(e){const t=e.config;y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?x(t,Kt):`https://${e.config.authDomain}/${$t}`,s={apiKey:t.apiKey,appName:e.name,v:i.Jn},o=Gt.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,r.xO)(s).slice(1)}`}const Wt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qt=500,Xt=600,Yt="_blank",Jt="http://localhost";class Zt{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function en(e,t,n,i=Qt,s=Xt){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Wt),{width:i.toString(),height:s.toString(),top:o,left:a}),l=(0,r.z$)().toLowerCase();n&&(c=ee(l)?Yt:n),J(l)&&(t=t||Jt,u.scrollbars="yes");const h=Object.entries(u).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=(0,r.z$)()){var t;return se(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new Zt(null);const d=window.open(t||"",c,h);y(d,e,"popup-blocked");try{d.focus()}catch(e){}return new Zt(d)}const tn="__/auth/handler",nn="emulator/auth/handler";function rn(e,t,n,s,o,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.Jn,eventId:o};if(t instanceof ke){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,r.xb)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof xe){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const u=c;for(const e of Object.keys(u))void 0===u[e]&&delete u[e];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${tn}`;return x(e,nn)}(e)}?${(0,r.xO)(u).slice(1)}`}const sn="webStorageSupport";const on=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=We,this._completeRedirectFn=Dt,this._overrideRedirectResult=Ct}async _openPopup(e,t,n,r){var i;v(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return en(e,rn(e,t,n,I(),r),Xe())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=rn(e,t,n,I(),r),Je().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(v(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await jt(e),n=Je().gapi;return y(n,e,"internal-error"),t.open({where:document.body,url:Ht(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zt,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=p(e,"network-request-failed"),s=Je().setTimeout((()=>{r(i)}),qt.get());function o(){Je().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Ot(e);return t.register("authEvent",(t=>{y(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sn,{type:sn},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[sn];void 0!==i&&t(!!i),f(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Mt(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oe()||Z()||se()}};var an="@firebase/auth",cn="0.21.3";class un{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ln=(0,r.Pz)("authIdTokenMaxAge")||300;let hn=null;const dn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ln)return;const i=null==n?void 0:n.token;hn!==i&&(hn=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fn(e=(0,i.Mq)()){const t=(0,i.qX)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,i.qX)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),i=n.getOptions();if((0,r.vZ)(i,null!=t?t:{}))return e;f(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:on,persistence:[lt,Ge,We]}),s=(0,r.Pz)("authTokenSyncURL");if(s){const e=dn(s);!function(e,t,n){(0,r.m9)(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,i){(0,r.m9)(e).onIdTokenChanged(t,n,i)}(n,(t=>e(t)))}const o=(0,r.q4)("auth");return o&&de(n,`http://${o}`),n}var pn;pn="Browser",(0,i.Xd)(new a.wA("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:i,authDomain:s}=n.options;return((e,n)=>{y(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),y(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const r={apiKey:i,authDomain:s,clientPlatform:pn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ae(pn)},o=new ue(e,n,r);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,i.Xd)(new a.wA("auth-internal",(e=>(e=>new un(e))(le(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.KN)(an,cn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(pn)),(0,i.KN)(an,cn,"esm2017")},247:(e,t,n)=>{"use strict";n.d(t,{EK:()=>Ur,hJ:()=>fd,oe:()=>Of,AK:()=>Lf,TF:()=>Pd,JU:()=>pd,ST:()=>Nd,Ix:()=>Ld,QT:()=>Cf,PL:()=>Af,ad:()=>Ad,IO:()=>df,pl:()=>Df,ar:()=>pf});var r,i=n(238),s=n(463),o=n(333),a=n(444),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},u={},l=l||{},h=c||self;function d(){}function f(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function v(e,t,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:w).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function I(){this.s=this.s,this.o=this.o}I.prototype.s=!1,I.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,m)&&e[m]||(e[m]=++g))},I.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function T(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(f(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function x(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{h.addEventListener("test",d,t),h.removeEventListener("test",d,t)}catch(e){}return e}();function S(e){return/^[\s\xa0]*$/.test(e)}var A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function D(e,t){return e<t?-1:e>t?1:0}function O(){var e=h.navigator;return e&&(e=e.userAgent)?e:""}function N(e){return-1!=O().indexOf(e)}function R(e){return R[" "](e),e}R[" "]=d;var L,P,M=N("Opera"),F=N("Trident")||N("MSIE"),B=N("Edge"),U=B||F,V=N("Gecko")&&!(-1!=O().toLowerCase().indexOf("webkit")&&!N("Edge"))&&!(N("Trident")||N("MSIE"))&&!N("Edge"),j=-1!=O().toLowerCase().indexOf("webkit")&&!N("Edge");function q(){var e=h.document;return e?e.documentMode:void 0}e:{var $="",K=(P=O(),V?/rv:([^\);]+)(\)|;)/.exec(P):B?/Edge\/([\d\.]+)/.exec(P):F?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(P):j?/WebKit\/(\S+)/.exec(P):M?/(?:Version)[ \/]?(\S+)/.exec(P):void 0);if(K&&($=K?K[1]:""),F){var z=q();if(null!=z&&z>parseFloat($)){L=String(z);break e}}L=$}var G,H={};function W(){return function(e){var t=H;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){let e=0;const t=A(String(L)).split("."),n=A("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=D(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==i[2].length,0==s[2].length)||D(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}))}if(h.document&&F){var Q=q();G=Q||(parseInt(L,10)||void 0)}else G=void 0;var X=G;function Y(e,t){if(x.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(V){e:{try{R(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:J[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Y.X.h.call(this)}}_(Y,x);var J={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),ee=0;function te(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ee,this.ba=this.ea=!1}function ne(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function re(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ie(e){const t={};for(const n in e)t[n]=e[n];return t}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<se.length;t++)n=se[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ae(e){this.src=e,this.g={},this.h=0}function ce(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=E(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ne(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ue(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ba&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}ae.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ue(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new te(t,this.src,s,!!r,i)).ea=n,e.push(t)),t};var le="closure_lm_"+(1e6*Math.random()|0),he={};function de(e,t,n,r,i){if(r&&r.once)return pe(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)de(e,t[s],n,r,i);return null}return n=_e(n),e&&e[Z]?e.N(t,n,p(r)?!!r.capture:!!r,i):fe(e,t,n,!1,r,i)}function fe(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=p(i)?!!i.capture:!!i,a=ve(e);if(a||(e[le]=a=new ae(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=we;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)C||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ye(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function pe(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)pe(e,t[s],n,r,i);return null}return n=_e(n),e&&e[Z]?e.O(t,n,p(r)?!!r.capture:!!r,i):fe(e,t,n,!0,r,i)}function me(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)me(e,t[s],n,r,i);else r=p(r)?!!r.capture:!!r,n=_e(n),e&&e[Z]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ue(s=e.g[t],n,r,i))&&(ne(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ve(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ue(t,n,r,i)),(n=-1<e?t[e]:null)&&ge(n))}function ge(e){if("number"!=typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Z])ce(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ye(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ve(t))?(ce(n,e),0==n.h&&(n.src=null,t[le]=null)):ne(e)}}}function ye(e){return e in he?he[e]:he[e]="on"+e}function we(e,t){if(e.ba)e=!0;else{t=new Y(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&ge(e),e=n.call(r,t)}return e}function ve(e){return(e=e[le])instanceof ae?e:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function _e(e){return"function"==typeof e?e:(e[be]||(e[be]=function(t){return e.handleEvent(t)}),e[be])}function Ie(){I.call(this),this.i=new ae(this),this.P=this,this.I=null}function Ee(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new x(t,e);else if(t instanceof x)t.target=t.target||e;else{var i=t;oe(t=new x(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Te(o,r,!0,t)&&i}if(i=Te(o=t.g=e,r,!0,t)&&i,i=Te(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Te(o=t.g=n[s],r,!1,t)&&i}function Te(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.ea&&ce(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}_(Ie,I),Ie.prototype[Z]=!0,Ie.prototype.removeEventListener=function(e,t,n,r){me(this,e,t,n,r)},Ie.prototype.M=function(){if(Ie.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ne(n[r]);delete t.g[e],t.h--}}this.I=null},Ie.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ie.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ke=h.JSON.stringify;function xe(){var e=Re;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ce,Se=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Ae),(e=>e.reset()));class Ae{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function De(e){h.setTimeout((()=>{throw e}),0)}function Oe(e,t){Ce||function(){var e=h.Promise.resolve(void 0);Ce=function(){e.then(Le)}}(),Ne||(Ce(),Ne=!0),Re.add(e,t)}var Ne=!1,Re=new class{constructor(){this.h=this.g=null}add(e,t){const n=Se.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Le(){for(var e;e=xe();){try{e.h.call(e.g)}catch(e){De(e)}var t=Se;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ne=!1}function Pe(e,t){Ie.call(this),this.h=e||1,this.g=t||h,this.j=v(this.lb,this),this.l=Date.now()}function Me(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Fe(e,t,n){if("function"==typeof e)n&&(e=v(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=v(e.handleEvent,e)}return 2147483647<Number(t)?-1:h.setTimeout(e,t||0)}function Be(e){e.g=Fe((()=>{e.g=null,e.i&&(e.i=!1,Be(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}_(Pe,Ie),(r=Pe.prototype).ca=!1,r.R=null,r.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ee(this,"tick"),this.ca&&(Me(this),this.start()))}},r.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Pe.X.M.call(this),Me(this),delete this.g};class Ue extends I{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Be(this)}M(){super.M(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ve(e){I.call(this),this.h=e,this.g={}}_(Ve,I);var je=[];function qe(e,t,n,r){Array.isArray(n)||(n&&(je[0]=n.toString()),n=je);for(var i=0;i<n.length;i++){var s=de(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function $e(e){re(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ge(e)}),e),e.g={}}function Ke(){this.g=!0}function ze(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ke(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Ve.prototype.M=function(){Ve.X.M.call(this),$e(this)},Ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ke.prototype.Aa=function(){this.g=!1},Ke.prototype.info=function(){};var Ge={},He=null;function We(){return He=He||new Ie}function Qe(e){x.call(this,Ge.Pa,e)}function Xe(e){const t=We();Ee(t,new Qe(t))}function Ye(e,t){x.call(this,Ge.STAT_EVENT,e),this.stat=t}function Je(e){const t=We();Ee(t,new Ye(t,e))}function Ze(e,t){x.call(this,Ge.Qa,e),this.size=t}function et(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){e()}),t)}Ge.Pa="serverreachability",_(Qe,x),Ge.STAT_EVENT="statevent",_(Ye,x),Ge.Qa="timingevent",_(Ze,x);var tt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},nt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function rt(){}function it(e){return e.h||(e.h=e.i())}function st(){}rt.prototype.h=null;var ot,at={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ct(){x.call(this,"d")}function ut(){x.call(this,"c")}function lt(){}function ht(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Ve(this),this.O=ft,e=U?125:void 0,this.T=new Pe(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new dt}function dt(){this.i=null,this.g="",this.h=!1}_(ct,x),_(ut,x),_(lt,rt),lt.prototype.g=function(){return new XMLHttpRequest},lt.prototype.i=function(){return{}},ot=new lt;var ft=45e3,pt={},mt={};function gt(e,t,n){e.K=1,e.v=Pt(Dt(t)),e.s=n,e.P=!0,yt(e,null)}function yt(e,t){e.F=Date.now(),_t(e),e.A=Dt(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Wt(n.i,"t",r),e.C=0,n=e.l.H,e.h=new dt,e.g=Wn(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Ue(v(e.La,e,e.g),e.N)),qe(e.S,e.g,"readystatechange",e.ib),t=e.H?ie(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Xe(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function wt(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function vt(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=bt(e,n),r==mt){4==t&&(e.o=4,Je(14),i=!1),ze(e.j,e.m,null,"[Incomplete Response]");break}if(r==pt){e.o=4,Je(15),ze(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ze(e.j,e.m,r,null),xt(e,r)}wt(e)&&r!=mt&&r!=pt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Je(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vn(t),t.K=!0,Je(11))):(ze(e.j,e.m,n,"[Invalid Chunked Response]"),kt(e),Tt(e))}function bt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?mt:(n=Number(t.substring(n,r)),isNaN(n)?pt:(r+=1)+n>t.length?mt:(t=t.substr(r,n),e.C=r+n,t))}function _t(e){e.V=Date.now()+e.O,It(e,e.O)}function It(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=et(v(e.gb,e),t)}function Et(e){e.B&&(h.clearTimeout(e.B),e.B=null)}function Tt(e){0==e.l.G||e.I||$n(e.l,e)}function kt(e){Et(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Me(e.T),$e(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function xt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||en(n.h,e)))if(!e.J&&en(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;qn(n),Nn(n)}Un(n),Je(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=et(v(n.cb,n),6e3));if(1>=Zt(n.h)&&n.ja){try{n.ja()}catch(e){}n.ja=void 0}}else zn(n,11)}else if((e.J||n.g==e)&&qn(n),!S(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.I=u[1],n.ka=u[2];const t=u[3];null!=t&&(n.ma=t,n.j.info("VER="+n.ma));const i=u[4];null!=i&&(n.Ca=i,n.j.info("SVER="+n.Ca));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(tn(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.za=e,Lt(r.F,r.D,e))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=e;if((r=n).sa=Hn(r,r.H?r.ka:null,r.V),o.J){nn(r.h,o);var a=o,c=r.J;c&&a.setTimeout(c),a.B&&(Et(a),_t(a)),r.g=o}else Bn(r);0<n.i.length&&Ln(n)}else"stop"!=u[0]&&"close"!=u[0]||zn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?zn(n,7):On(n):"noop"!=u[0]&&n.l&&n.l.wa(u),n.A=0)}Xe()}catch(e){}}function Ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(f(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(r=ht.prototype).setTimeout=function(e){this.O=e},r.ib=function(e){e=e.target;const t=this.L;t&&3==kn(e)?t.l():this.La(e)},r.La=function(e){try{if(e==this.g)e:{const l=kn(this.g);var t=this.g.Ea();this.g.aa();if(!(3>l)&&(3!=l||U||this.g&&(this.h.h||this.g.fa()||xn(this.g)))){this.I||4!=l||7==t||Xe(),Et(this);var n=this.g.aa();this.Y=n;t:if(wt(this)){var r=xn(this.g);e="";var i=r.length,s=4==kn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){kt(this),Tt(this);var o="";break t}this.h.i=new h.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.U,l,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Je(12),kt(this),Tt(this);break e}ze(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xt(this,n)}this.P?(vt(this,l,o),U&&this.i&&3==l&&(qe(this.S,this.T,"tick",this.hb),this.T.start())):(ze(this.j,this.m,o,null),xt(this,o)),4==l&&kt(this),this.i&&!this.I&&(4==l?$n(this.l,this):(this.i=!1,_t(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Je(12)):(this.o=0,Je(13)),kt(this),Tt(this)}}}catch(e){}},r.hb=function(){if(this.g){var e=kn(this.g),t=this.g.fa();this.C<t.length&&(Et(this),vt(this,e,t),this.i&&4!=e&&_t(this))}},r.cancel=function(){this.I=!0,kt(this)},r.gb=function(){this.B=null;const e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Xe(),Je(17)),kt(this),this.o=2,Tt(this)):It(this,this.V-e)};var St=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function At(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof At){this.h=void 0!==t?t:e.h,Ot(this,e.j),this.s=e.s,this.g=e.g,Nt(this,e.m),this.l=e.l,t=e.i;var n=new Kt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Rt(this,n),this.o=e.o}else e&&(n=String(e).match(St))?(this.h=!!t,Ot(this,n[1]||"",!0),this.s=Mt(n[2]||""),this.g=Mt(n[3]||"",!0),Nt(this,n[4]),this.l=Mt(n[5]||"",!0),Rt(this,n[6]||"",!0),this.o=Mt(n[7]||"")):(this.h=!!t,this.i=new Kt(null,this.h))}function Dt(e){return new At(e)}function Ot(e,t,n){e.j=n?Mt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Nt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Rt(e,t,n){t instanceof Kt?(e.i=t,function(e,t){t&&!e.j&&(zt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Gt(this,t),Wt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ft(t,qt)),e.i=new Kt(t,e.h))}function Lt(e,t,n){e.i.set(t,n)}function Pt(e){return Lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Mt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ft(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Bt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}At.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ft(t,Ut,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ft(t,Ut,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ft(n,"/"==n.charAt(0)?jt:Vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ft(n,$t)),e.join("")};var Ut=/[#\/\?@]/g,Vt=/[#\?:]/g,jt=/[#\?]/g,qt=/[#\?@]/g,$t=/#/g;function Kt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function zt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Gt(e,t){zt(e),t=Qt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ht(e,t){return zt(e),t=Qt(e,t),e.g.has(t)}function Wt(e,t,n){Gt(e,t),0<n.length&&(e.i=null,e.g.set(Qt(e,t),T(n)),e.h+=n.length)}function Qt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Kt.prototype).add=function(e,t){zt(this),this.i=null,e=Qt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){zt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},r.oa=function(){zt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},r.W=function(e){zt(this);let t=[];if("string"==typeof e)Ht(this,e)&&(t=t.concat(this.g.get(Qt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},r.set=function(e,t){return zt(this),this.i=null,Ht(this,e=Qt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function Xt(e){this.l=e||Yt,h.PerformanceNavigationTiming?e=0<(e=h.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(h.g&&h.g.Ga&&h.g.Ga()&&h.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Yt=10;function Jt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Zt(e){return e.h?1:e.g?e.g.size:0}function en(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function tn(e,t){e.g?e.g.add(t):e.h=t}function nn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function rn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return T(e.i)}function sn(){}function on(){this.g=new sn}function an(e,t,n){const r=n||"";try{Ct(e,(function(e,n){let i=e;p(e)&&(i=ke(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function cn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function un(e){this.l=e.ac||null,this.j=e.jb||!1}function ln(e,t){Ie.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=hn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xt.prototype.cancel=function(){if(this.i=rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},sn.prototype.stringify=function(e){return h.JSON.stringify(e,void 0)},sn.prototype.parse=function(e){return h.JSON.parse(e,void 0)},_(un,rt),un.prototype.g=function(){return new ln(this.l,this.j)},un.prototype.i=function(e){return function(){return e}}({}),_(ln,Ie);var hn=0;function dn(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function fn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,pn(e)}function pn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=ln.prototype).open=function(e,t){if(this.readyState!=hn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,pn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||h).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fn(this)),this.readyState=hn},r.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,pn(this)),this.g&&(this.readyState=3,pn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==h.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dn(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},r.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?fn(this):pn(this),3==this.readyState&&dn(this)}},r.Va=function(e){this.g&&(this.response=this.responseText=e,fn(this))},r.Ua=function(e){this.g&&(this.response=e,fn(this))},r.ga=function(){this.g&&fn(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ln.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var mn=h.JSON.parse;function gn(e){Ie.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yn,this.K=this.L=!1}_(gn,Ie);var yn="",wn=/^https?$/i,vn=["POST","PUT"];function bn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_n(e),En(e)}function _n(e){e.D||(e.D=!0,Ee(e,"complete"),Ee(e,"error"))}function In(e){if(e.h&&void 0!==l&&(!e.C[1]||4!=kn(e)||2!=e.aa()))if(e.v&&4==kn(e))Fe(e.Ha,0,e);else if(Ee(e,"readystatechange"),4==kn(e)){e.h=!1;try{const a=e.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.H).match(St)[1]||null;if(!i&&h.self&&h.self.location){var s=h.self.location.protocol;i=s.substr(0,s.length-1)}r=!wn.test(i?i.toLowerCase():"")}n=r}if(n)Ee(e,"complete"),Ee(e,"success");else{e.m=6;try{var o=2<kn(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.aa()+"]",_n(e)}}finally{En(e)}}}function En(e,t){if(e.g){Tn(e);const n=e.g,r=e.C[0]?d:null;e.g=null,e.C=null,t||Ee(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Tn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(h.clearTimeout(e.A),e.A=null)}function kn(e){return e.g?e.g.readyState:0}function xn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case yn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Cn(e){let t="";return re(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Sn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Cn(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Lt(e,t,n))}function An(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Dn(e){this.Ca=0,this.i=[],this.j=new Ke,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=An("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=An("baseRetryDelayMs",5e3,e),this.bb=An("retryDelaySeedMs",1e4,e),this.$a=An("forwardChannelMaxRetries",2,e),this.ta=An("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Xt(e&&e.concurrentRequestLimit),this.Fa=new on,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function On(e){if(Rn(e),3==e.G){var t=e.U++,n=Dt(e.F);Lt(n,"SID",e.I),Lt(n,"RID",t),Lt(n,"TYPE","terminate"),Mn(e,n),(t=new ht(e,e.j,t,void 0)).K=2,t.v=Pt(Dt(n)),n=!1,h.navigator&&h.navigator.sendBeacon&&(n=h.navigator.sendBeacon(t.v.toString(),"")),!n&&h.Image&&((new Image).src=t.v,n=!0),n||(t.g=Wn(t.l,null),t.g.da(t.v)),t.F=Date.now(),_t(t)}Gn(e)}function Nn(e){e.g&&(Vn(e),e.g.cancel(),e.g=null)}function Rn(e){Nn(e),e.u&&(h.clearTimeout(e.u),e.u=null),qn(e),e.h.cancel(),e.m&&("number"==typeof e.m&&h.clearTimeout(e.m),e.m=null)}function Ln(e){Jt(e.h)||e.m||(e.m=!0,Oe(e.Ja,e),e.C=0)}function Pn(e,t){var n;n=t?t.m:e.U++;const r=Dt(e.F);Lt(r,"SID",e.I),Lt(r,"RID",n),Lt(r,"AID",e.T),Mn(e,r),e.o&&e.s&&Sn(r,e.o,e.s),n=new ht(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Fn(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),tn(e.h,n),gt(n,r,t)}function Mn(e,t){e.ia&&re(e.ia,(function(e,n){Lt(t,n,e)})),e.l&&Ct({},(function(e,n){Lt(t,n,e)}))}function Fn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?v(e.l.Ra,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{an(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function Bn(e){e.g||e.u||(e.Z=1,Oe(e.Ia,e),e.A=0)}function Un(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=et(v(e.Ia,e),Kn(e,e.A)),e.A++,!0)}function Vn(e){null!=e.B&&(h.clearTimeout(e.B),e.B=null)}function jn(e){e.g=new ht(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Dt(e.sa);Lt(t,"RID","rpc"),Lt(t,"SID",e.I),Lt(t,"CI",e.L?"0":"1"),Lt(t,"AID",e.T),Lt(t,"TYPE","xmlhttp"),Mn(e,t),e.o&&e.s&&Sn(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Pt(Dt(t)),n.s=null,n.P=!0,yt(n,e)}function qn(e){null!=e.v&&(h.clearTimeout(e.v),e.v=null)}function $n(e,t){var n=null;if(e.g==t){qn(e),Vn(e),e.g=null;var r=2}else{if(!en(e.h,t))return;n=t.D,nn(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ee(r=We(),new Ze(r,n)),Ln(e)}else Bn(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Zt(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.C>=(e.Za?0:e.$a)||(e.m=et(v(e.Ja,e,t),Kn(e,e.C)),e.C++,0)))}(e,t)||2==r&&Un(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:zn(e,5);break;case 4:zn(e,10);break;case 3:zn(e,6);break;default:zn(e,2)}}function Kn(e,t){let n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function zn(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=v(e.kb,e);n||(n=new At("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Ot(n,"https"),Pt(n)),function(e,t){const n=new Ke;if(h.Image){const r=new Image;r.onload=b(cn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(cn,n,r,"TestLoadImage: error",!1,t),r.onabort=b(cn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(cn,n,r,"TestLoadImage: timeout",!1,t),h.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Je(2);e.G=0,e.l&&e.l.va(t),Gn(e),Rn(e)}function Gn(e){if(e.G=0,e.la=[],e.l){const t=rn(e.h);0==t.length&&0==e.i.length||(k(e.la,t),k(e.la,e.i),e.h.i.length=0,T(e.i),e.i.length=0),e.l.ua()}}function Hn(e,t,n){var r=n instanceof At?Dt(n):new At(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Nt(r,r.m);else{var i=h.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new At(null,void 0);r&&Ot(s,r),t&&(s.g=t),i&&Nt(s,i),n&&(s.l=n),r=s}return n=e.D,t=e.za,n&&t&&Lt(r,n,t),Lt(r,"VER",e.ma),Mn(e,r),r}function Wn(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new gn(new un({jb:!0})):new gn(e.ra)).Ka(e.H),t}function Qn(){}function Xn(){if(F&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function Yn(e,t){Ie.call(this),this.g=new Dn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!S(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!S(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new er(this)}function Jn(e){ct.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Zn(){ut.call(this),this.status=1}function er(e){this.g=e}(r=gn.prototype).Ka=function(e){this.L=e},r.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ot.g(),this.C=this.u?it(this.u):it(ot),this.g.onreadystatechange=v(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void bn(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=h.FormData&&e instanceof h.FormData,!(0<=E(vn,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Tn(this),0<this.B&&((this.K=function(e){return F&&W()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=v(this.qa,this)):this.A=Fe(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){bn(this,e)}},r.qa=function(){void 0!==l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ee(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ee(this,"complete"),Ee(this,"abort"),En(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),En(this,!0)),gn.X.M.call(this)},r.Ha=function(){this.s||(this.F||this.v||this.l?In(this):this.fb())},r.fb=function(){In(this)},r.aa=function(){try{return 2<kn(this)?this.g.status:-1}catch(e){return-1}},r.fa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),mn(t)}},r.Ea=function(){return this.m},r.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=Dn.prototype).ma=8,r.G=1,r.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new ht(this,this.j,e,void 0);let s=this.s;if(this.S&&(s?(s=ie(s),oe(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Fn(this,i,t),Lt(n=Dt(this.F),"RID",e),Lt(n,"CVER",22),this.D&&Lt(n,"X-HTTP-Session-Id",this.D),Mn(this,n),s&&(this.N?t="headers="+encodeURIComponent(String(Cn(s)))+"&"+t:this.o&&Sn(n,this.o,s)),tn(this.h,i),this.Ya&&Lt(n,"TYPE","init"),this.O?(Lt(n,"$req",t),Lt(n,"SID","null"),i.Z=!0,gt(i,n,null)):gt(i,n,t),this.G=2}}else 3==this.G&&(e?Pn(this,e):0==this.i.length||Jt(this.h)||Pn(this))},r.Ia=function(){if(this.u=null,jn(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=et(v(this.eb,this),e)}},r.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Je(10),Nn(this),jn(this))},r.cb=function(){null!=this.v&&(this.v=null,Nn(this),Un(this),Je(19))},r.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))},(r=Qn.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Ra=function(){},Xn.prototype.g=function(e,t){return new Yn(e,t)},_(Yn,Ie),Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Je(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Hn(e,null,e.V),Ln(e)},Yn.prototype.close=function(){On(this.g)},Yn.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ke(e),e=n);t.i.push(new class{constructor(e,t){this.h=e,this.g=t}}(t.ab++,e)),3==t.G&&Ln(t)},Yn.prototype.M=function(){this.g.l=null,delete this.j,On(this.g),delete this.g,Yn.X.M.call(this)},_(Jn,ct),_(Zn,ut),_(er,Qn),er.prototype.xa=function(){Ee(this.g,"a")},er.prototype.wa=function(e){Ee(this.g,new Jn(e))},er.prototype.va=function(e){Ee(this.g,new Zn)},er.prototype.ua=function(){Ee(this.g,"b")},Xn.prototype.createWebChannel=Xn.prototype.g,Yn.prototype.send=Yn.prototype.u,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,tt.NO_ERROR=0,tt.TIMEOUT=8,tt.HTTP_ERROR=6,nt.COMPLETE="complete",st.EventType=at,at.OPEN="a",at.CLOSE="b",at.ERROR="c",at.MESSAGE="d",Ie.prototype.listen=Ie.prototype.N,gn.prototype.listenOnce=gn.prototype.O,gn.prototype.getLastError=gn.prototype.Oa,gn.prototype.getLastErrorCode=gn.prototype.Ea,gn.prototype.getStatus=gn.prototype.aa,gn.prototype.getResponseJson=gn.prototype.Sa,gn.prototype.getResponseText=gn.prototype.fa,gn.prototype.send=gn.prototype.da,gn.prototype.setWithCredentials=gn.prototype.Ka;var tr=u.createWebChannelTransport=function(){return new Xn},nr=u.getStatEventTarget=function(){return We()},rr=u.ErrorCode=tt,ir=u.EventType=nt,sr=u.Event=Ge,or=u.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ar=u.FetchXmlHttpFactory=un,cr=u.WebChannel=st,ur=u.XhrIo=gn,lr=n(155);const hr="@firebase/firestore";class dr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dr.UNAUTHENTICATED=new dr(null),dr.GOOGLE_CREDENTIALS=new dr("google-credentials-uid"),dr.FIRST_PARTY=new dr("first-party-uid"),dr.MOCK_USER=new dr("mock-user");let fr="9.17.1";const pr=new o.Yd("@firebase/firestore");function mr(){return pr.logLevel}function gr(e,...t){if(pr.logLevel<=o.in.DEBUG){const n=t.map(vr);pr.debug(`Firestore (${fr}): ${e}`,...n)}}function yr(e,...t){if(pr.logLevel<=o.in.ERROR){const n=t.map(vr);pr.error(`Firestore (${fr}): ${e}`,...n)}}function wr(e,...t){if(pr.logLevel<=o.in.WARN){const n=t.map(vr);pr.warn(`Firestore (${fr}): ${e}`,...n)}}function vr(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function br(e="Unexpected state"){const t=`FIRESTORE (${fr}) INTERNAL ASSERTION FAILED: `+e;throw yr(t),new Error(t)}function _r(e,t){e||br()}function Ir(e,t){return e}const Er={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tr extends a.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class xr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(dr.UNAUTHENTICATED)))}shutdown(){}}class Sr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ar{constructor(e){this.t=e,this.currentUser=dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kr,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{gr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(gr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kr)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(gr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(_r("string"==typeof t.accessToken),new xr(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _r(null===e||"string"==typeof e),new dr(e)}}class Dr{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r,this.type="FirstParty",this.user=dr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(_r(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Or{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r}getToken(){return Promise.resolve(new Dr(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable((()=>t(dr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rr{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const n=e=>{null!=e.error&&gr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.A;return this.A=e.token,gr("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{gr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.T.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.T.getImmediate({optional:!0});e?r(e):gr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(_r("string"==typeof e.token),this.A=e.token,new Nr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Lr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class Pr{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Lr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Mr(e,t){return e<t?-1:e>t?1:0}function Fr(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Br(e){return e+"\0"}class Ur{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Tr(Er.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Tr(Er.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Tr(Er.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tr(Er.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ur(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mr(this.nanoseconds,e.nanoseconds):Mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vr(e)}static min(){return new Vr(new Ur(0,0))}static max(){return new Vr(new Ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class jr{constructor(e,t,n){void 0===t?t=0:t>e.length&&br(),void 0===n?n=e.length-t:n>e.length-t&&br(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===jr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jr?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qr extends jr{construct(e,t,n){return new qr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Tr(Er.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new qr(t)}static emptyPath(){return new qr([])}}const $r=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kr extends jr{construct(e,t,n){return new Kr(e,t,n)}static isValidIdentifier(e){return $r.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kr(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Tr(Er.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Tr(Er.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Tr(Er.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Tr(Er.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kr(t)}static emptyPath(){return new Kr([])}}class zr{constructor(e){this.path=e}static fromPath(e){return new zr(qr.fromString(e))}static fromName(e){return new zr(qr.fromString(e).popFirst(5))}static empty(){return new zr(qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zr(new qr(e.slice()))}}class Gr{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Hr(e){return e.fields.find((e=>2===e.kind))}function Wr(e){return e.fields.filter((e=>2!==e.kind))}Gr.UNKNOWN_ID=-1;class Qr{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xr{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xr(0,Zr.min())}}function Yr(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Vr.fromTimestamp(1e9===r?new Ur(n+1,0):new Ur(n,r));return new Zr(i,zr.empty(),t)}function Jr(e){return new Zr(e.readTime,e.key,-1)}class Zr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Zr(Vr.min(),zr.empty(),-1)}static max(){return new Zr(Vr.max(),zr.empty(),-1)}}function ei(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zr.comparator(e.documentKey,t.documentKey),0!==n?n:Mr(e.largestBatchId,t.largestBatchId))}const ti="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ni{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ri(e){if(e.code!==Er.FAILED_PRECONDITION||e.message!==ti)throw e;gr("LocalStore","Unexpectedly lost primary lease")}class ii{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&br(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ii(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ii?t:ii.resolve(t)}catch(e){return ii.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ii.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ii.reject(t)}static resolve(e){return new ii(((t,n)=>{t(e)}))}static reject(e){return new ii(((t,n)=>{n(e)}))}static waitFor(e){return new ii(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ii.resolve(!1);for(const n of e)t=t.next((e=>e?ii.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ii(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ii(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class si{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new kr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ci(e,t.error)):this.P.resolve()},this.transaction.onerror=t=>{const n=fi(t.target.error);this.P.reject(new ci(e,n))}}static open(e,t,n,r){try{return new si(t,e.transaction(r,n))}catch(e){throw new ci(t,e)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(gr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new li(t)}}class oi{constructor(e,t,n){this.name=e,this.version=t,this.S=n,12.2===oi.D((0,a.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return gr("SimpleDb","Removing database:",e),hi(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,a.hl)())return!1;if(oi.N())return!0;const e=(0,a.z$)(),t=oi.D(e),n=0<t&&t<10,r=oi.k(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static N(){var e;return void 0!==lr&&"YES"===(null===(e=lr.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static k(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async F(e){return this.db||(gr("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new ci(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Tr(Er.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Tr(Er.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ci(e,r))},r.onupgradeneeded=e=>{gr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.S.$(t,r.transaction,e.oldVersion,this.version).next((()=>{gr("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.F(e);const t=si.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.V(),e))).catch((e=>(t.abort(e),ii.reject(e)))).toPromise();return s.catch((()=>{})),await t.v,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(gr("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ai{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return hi(this.q.delete())}}class ci extends Tr{constructor(e,t){super(Er.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ui(e){return"IndexedDbTransactionError"===e.name}class li{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(gr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(gr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),hi(n)}add(e){return gr("SimpleDb","ADD",this.store.name,e,e),hi(this.store.add(e))}get(e){return hi(this.store.get(e)).next((t=>(void 0===t&&(t=null),gr("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return gr("SimpleDb","DELETE",this.store.name,e),hi(this.store.delete(e))}count(){return gr("SimpleDb","COUNT",this.store.name),hi(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.H(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new ii(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}J(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ii(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}Y(e,t){gr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const r=this.cursor(n);return this.H(r,((e,t,n)=>n.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.H(r,t)}tt(e){const t=this.cursor({});return new ii(((n,r)=>{t.onerror=e=>{const t=fi(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}H(e,t){const n=[];return new ii(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new ai(i),o=t(i.primaryKey,i.value,s);if(o instanceof ii){const e=o.catch((e=>(s.done(),ii.reject(e))));n.push(e)}s.isDone?r():null===s.G?i.continue():i.continue(s.G)}})).next((()=>ii.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hi(e){return new ii(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=fi(e.target.error);n(t)}}))}let di=!1;function fi(e){const t=oi.D((0,a.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Tr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return di||(di=!0,setTimeout((()=>{throw e}),0)),e}}return e}class pi{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){gr("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{gr("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(e){ui(e)?gr("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await ri(e)}await this.nt(6e4)}))}}class mi{constructor(e,t){this.localStore=e,this.persistence=t}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.it(t,e)))}it(e,t){const n=new Set;let r=t,i=!0;return ii.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return gr("IndexBackiller",`Processing collection: ${t}`),this.rt(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}rt(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ot(r,n))).next((n=>(gr("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ot(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Jr(t);ei(r,n)>0&&(n=r)})),new Zr(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class gi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ut(e),this.ct=e=>t.writeSequenceNumber(e))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}gi.at=-1;class yi{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class wi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wi&&e.projectId===this.projectId&&e.database===this.database}}function vi(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bi(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _i(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ii(e){return null==e}function Ei(e){return 0===e&&1/e==-1/0}function Ti(e){return"number"==typeof e&&Number.isInteger(e)&&!Ei(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class ki{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ki(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ki(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ki.EMPTY_BYTE_STRING=new ki("");const xi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(e){if(_r(!!e),"string"==typeof e){let t=0;const n=xi.exec(e);if(_r(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Si(e.seconds),nanos:Si(e.nanos)}}function Si(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ai(e){return"string"==typeof e?ki.fromBase64String(e):ki.fromUint8Array(e)}function Di(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Oi(e){const t=e.mapValue.fields.__previous_value__;return Di(t)?Oi(t):t}function Ni(e){const t=Ci(e.mapValue.fields.__local_write_time__.timestampValue);return new Ur(t.seconds,t.nanos)}const Ri={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Li={nullValue:"NULL_VALUE"};function Pi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Di(e)?4:Qi(e)?9007199254740991:10:br()}function Mi(e,t){if(e===t)return!0;const n=Pi(e);if(n!==Pi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ni(e).isEqual(Ni(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ci(e.timestampValue),r=Ci(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ai(e.bytesValue).isEqual(Ai(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Si(e.geoPointValue.latitude)===Si(t.geoPointValue.latitude)&&Si(e.geoPointValue.longitude)===Si(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Si(e.integerValue)===Si(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Si(e.doubleValue),r=Si(t.doubleValue);return n===r?Ei(n)===Ei(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Fr(e.arrayValue.values||[],t.arrayValue.values||[],Mi);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(vi(n)!==vi(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Mi(n[e],r[e])))return!1;return!0}(e,t);default:return br()}}function Fi(e,t){return void 0!==(e.values||[]).find((e=>Mi(e,t)))}function Bi(e,t){if(e===t)return 0;const n=Pi(e),r=Pi(t);if(n!==r)return Mr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Si(e.integerValue||e.doubleValue),r=Si(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ui(e.timestampValue,t.timestampValue);case 4:return Ui(Ni(e),Ni(t));case 5:return Mr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ai(e),r=Ai(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=Mr(n[e],r[e]);if(0!==t)return t}return Mr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Mr(Si(e.latitude),Si(t.latitude));return 0!==n?n:Mr(Si(e.longitude),Si(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Bi(n[e],r[e]);if(t)return t}return Mr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ri.mapValue&&t===Ri.mapValue)return 0;if(e===Ri.mapValue)return 1;if(t===Ri.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=Mr(r[e],s[e]);if(0!==t)return t;const o=Bi(n[r[e]],i[s[e]]);if(0!==o)return o}return Mr(r.length,s.length)}(e.mapValue,t.mapValue);default:throw br()}}function Ui(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Mr(e,t);const n=Ci(e),r=Ci(t),i=Mr(n.seconds,r.seconds);return 0!==i?i:Mr(n.nanos,r.nanos)}function Vi(e){return ji(e)}function ji(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ci(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ai(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,zr.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ji(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${ji(e.fields[i])}`;return n+"}"}(e.mapValue):br();var t,n}function qi(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function $i(e){return!!e&&"integerValue"in e}function Ki(e){return!!e&&"arrayValue"in e}function zi(e){return!!e&&"nullValue"in e}function Gi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hi(e){return!!e&&"mapValue"in e}function Wi(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return bi(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Wi(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Wi(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Qi(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Xi(e){return"nullValue"in e?Li:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?qi(wi.empty(),zr.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:br()}function Yi(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?qi(wi.empty(),zr.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ri:br()}function Ji(e,t){const n=Bi(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Zi(e,t){const n=Bi(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class es{constructor(e,t){this.position=e,this.inclusive=t}}function ts(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?zr.comparator(zr.fromName(o.referenceValue),n.key):Bi(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ns(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Mi(e.position[n],t.position[n]))return!1;return!0}class rs{}class is extends rs{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ps(e,t,n):"array-contains"===t?new ws(e,n):"in"===t?new vs(e,n):"not-in"===t?new bs(e,n):"array-contains-any"===t?new _s(e,n):new is(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ms(e,n):new gs(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Bi(t,this.value)):null!==t&&Pi(this.value)===Pi(t)&&this.matchesComparison(Bi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return br()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ss extends rs{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new ss(e,t)}matches(e){return os(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt((e=>e.isInequality()));return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function os(e){return"and"===e.op}function as(e){return"or"===e.op}function cs(e){return us(e)&&os(e)}function us(e){for(const t of e.filters)if(t instanceof ss)return!1;return!0}function ls(e){if(e instanceof is)return e.field.canonicalString()+e.op.toString()+Vi(e.value);if(cs(e))return e.filters.map((e=>ls(e))).join(",");{const t=e.filters.map((e=>ls(e))).join(",");return`${e.op}(${t})`}}function hs(e,t){return e instanceof is?function(e,t){return t instanceof is&&e.op===t.op&&e.field.isEqual(t.field)&&Mi(e.value,t.value)}(e,t):e instanceof ss?function(e,t){return t instanceof ss&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&hs(n,t.filters[r])),!0)}(e,t):void br()}function ds(e,t){const n=e.filters.concat(t);return ss.create(n,e.op)}function fs(e){return e instanceof is?function(e){return`${e.field.canonicalString()} ${e.op} ${Vi(e.value)}`}(e):e instanceof ss?function(e){return e.op.toString()+" {"+e.getFilters().map(fs).join(" ,")+"}"}(e):"Filter"}class ps extends is{constructor(e,t,n){super(e,t,n),this.key=zr.fromName(n.referenceValue)}matches(e){const t=zr.comparator(e.key,this.key);return this.matchesComparison(t)}}class ms extends is{constructor(e,t){super(e,"in",t),this.keys=ys("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gs extends is{constructor(e,t){super(e,"not-in",t),this.keys=ys("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ys(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>zr.fromName(e.referenceValue)))}class ws extends is{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ki(t)&&Fi(t.arrayValue,this.value)}}class vs extends is{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fi(this.value.arrayValue,t)}}class bs extends is{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fi(this.value.arrayValue,t)}}class _s extends is{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ki(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Fi(this.value.arrayValue,e)))}}class Is{constructor(e,t="asc"){this.field=e,this.dir=t}}function Es(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ts{constructor(e,t){this.comparator=e,this.root=t||xs.EMPTY}insert(e,t){return new Ts(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xs.BLACK,null,null))}remove(e){return new Ts(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ks(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ks(this.root,e,this.comparator,!1)}getReverseIterator(){return new ks(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ks(this.root,e,this.comparator,!0)}}class ks{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xs{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:xs.RED,this.left=null!=r?r:xs.EMPTY,this.right=null!=i?i:xs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new xs(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return xs.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw br();if(this.right.isRed())throw br();const e=this.left.check();if(e!==this.right.check())throw br();return e+(this.isRed()?0:1)}}xs.EMPTY=null,xs.RED=!0,xs.BLACK=!1,xs.EMPTY=new class{constructor(){this.size=0}get key(){throw br()}get value(){throw br()}get color(){throw br()}get left(){throw br()}get right(){throw br()}copy(e,t,n,r,i){return this}insert(e,t,n){return new xs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cs{constructor(e){this.comparator=e,this.data=new Ts(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ss(this.data.getIterator())}getIteratorFrom(e){return new Ss(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Cs))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Cs(this.comparator);return t.data=e,t}}class Ss{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function As(e){return e.hasNext()?e.getNext():void 0}class Ds{constructor(e){this.fields=e,e.sort(Kr.comparator)}static empty(){return new Ds([])}unionWith(e){let t=new Cs(Kr.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Os{constructor(e){this.value=e}static empty(){return new Os({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Hi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wi(t)}setAll(e){let t=Kr.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Wi(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Hi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Hi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){bi(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Os(Wi(this.value))}}function Ns(e){const t=[];return bi(e.fields,((e,n)=>{const r=new Kr([e]);if(Hi(n)){const e=Ns(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ds(t)}class Rs{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Rs(e,0,Vr.min(),Vr.min(),Vr.min(),Os.empty(),0)}static newFoundDocument(e,t,n,r){return new Rs(e,1,t,Vr.min(),n,r,0)}static newNoDocument(e,t){return new Rs(e,2,t,Vr.min(),Vr.min(),Os.empty(),0)}static newUnknownDocument(e,t){return new Rs(e,3,t,Vr.min(),Vr.min(),Os.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Vr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Os.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ls{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ft=null}}function Ps(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Ls(e,t,n,r,i,s,o)}function Ms(e){const t=Ir(e);if(null===t.ft){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ls(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ii(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Vi(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Vi(e))).join(",")),t.ft=e}return t.ft}function Fs(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Es(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hs(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ns(e.startAt,t.startAt)&&ns(e.endAt,t.endAt)}function Bs(e){return zr.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Us(e,t){return e.filters.filter((e=>e instanceof is&&e.field.isEqual(t)))}function Vs(e,t,n){let r=Li,i=!0;for(const n of Us(e,t)){let e=Li,t=!0;switch(n.op){case"<":case"<=":e=Xi(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=Li}Ji({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ji({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function js(e,t,n){let r=Ri,i=!0;for(const n of Us(e,t)){let e=Ri,t=!0;switch(n.op){case">=":case">":e=Yi(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=Ri}Zi({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Zi({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class qs{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.dt=null,this._t=null,this.startAt,this.endAt}}function $s(e,t,n,r,i,s,o,a){return new qs(e,t,n,r,i,s,o,a)}function Ks(e){return new qs(e)}function zs(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Gs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Hs(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Ws(e){return null!==e.collectionGroup}function Qs(e){const t=Ir(e);if(null===t.dt){t.dt=[];const e=Hs(t),n=Gs(t);if(null!==e&&null===n)e.isKeyField()||t.dt.push(new Is(e)),t.dt.push(new Is(Kr.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.dt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Is(Kr.keyField(),e))}}}return t.dt}function Xs(e){const t=Ir(e);if(!t._t)if("F"===t.limitType)t._t=Ps(t.path,t.collectionGroup,Qs(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of Qs(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Is(n.field,t))}const n=t.endAt?new es(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new es(t.startAt.position,t.startAt.inclusive):null;t._t=Ps(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Ys(e,t){t.getFirstInequalityField(),Hs(e);const n=e.filters.concat([t]);return new qs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Js(e,t,n){return new qs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zs(e,t){return Fs(Xs(e),Xs(t))&&e.limitType===t.limitType}function eo(e){return`${Ms(Xs(e))}|lt:${e.limitType}`}function to(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>fs(e))).join(", ")}]`),Ii(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Vi(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Vi(e))).join(",")),`Target(${t})`}(Xs(e))}; limitType=${e.limitType})`}function no(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zr.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Qs(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ts(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Qs(e),t))&&!(e.endAt&&!function(e,t,n){const r=ts(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Qs(e),t))}(e,t)}function ro(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function io(e){return(t,n)=>{let r=!1;for(const i of Qs(e)){const e=so(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function so(e,t,n){const r=e.field.isKeyField()?zr.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Bi(r,i):br()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return br()}}function oo(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ei(t)?"-0":t}}function ao(e){return{integerValue:""+e}}function co(e,t){return Ti(t)?ao(t):oo(e,t)}class uo{constructor(){this._=void 0}}function lo(e,t,n){return e instanceof po?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof mo?go(e,t):e instanceof yo?wo(e,t):function(e,t){const n=fo(e,t),r=bo(n)+bo(e.gt);return $i(n)&&$i(e.gt)?ao(r):oo(e.yt,r)}(e,t)}function ho(e,t,n){return e instanceof mo?go(e,t):e instanceof yo?wo(e,t):n}function fo(e,t){return e instanceof vo?$i(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class po extends uo{}class mo extends uo{constructor(e){super(),this.elements=e}}function go(e,t){const n=_o(t);for(const t of e.elements)n.some((e=>Mi(e,t)))||n.push(t);return{arrayValue:{values:n}}}class yo extends uo{constructor(e){super(),this.elements=e}}function wo(e,t){let n=_o(t);for(const t of e.elements)n=n.filter((e=>!Mi(e,t)));return{arrayValue:{values:n}}}class vo extends uo{constructor(e,t){super(),this.yt=e,this.gt=t}}function bo(e){return Si(e.integerValue||e.doubleValue)}function _o(e){return Ki(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Io{constructor(e,t){this.field=e,this.transform=t}}class Eo{constructor(e,t){this.version=e,this.transformResults=t}}class To{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new To}static exists(e){return new To(void 0,e)}static updateTime(e){return new To(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ko(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class xo{}function Co(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Fo(e.key,To.none()):new No(e.key,e.data,To.none());{const n=e.data,r=Os.empty();let i=new Cs(Kr.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ro(e.key,r,new Ds(i.toArray()),To.none())}}function So(e,t,n){e instanceof No?function(e,t,n){const r=e.value.clone(),i=Po(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ro?function(e,t,n){if(!ko(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Po(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Lo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ao(e,t,n,r){return e instanceof No?function(e,t,n,r){if(!ko(e.precondition,t))return n;const i=e.value.clone(),s=Mo(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ro?function(e,t,n,r){if(!ko(e.precondition,t))return n;const i=Mo(e.fieldTransforms,r,t),s=t.data;return s.setAll(Lo(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ko(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Do(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=fo(r.transform,e||null);null!=i&&(null===n&&(n=Os.empty()),n.set(r.field,i))}return n||null}function Oo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Fr(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof mo&&t instanceof mo||e instanceof yo&&t instanceof yo?Fr(e.elements,t.elements,Mi):e instanceof vo&&t instanceof vo?Mi(e.gt,t.gt):e instanceof po&&t instanceof po}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class No extends xo{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ro extends xo{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lo(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Po(e,t,n){const r=new Map;_r(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,ho(o,a,n[i]))}return r}function Mo(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,lo(e,s,t))}return r}class Fo extends xo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bo extends xo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Uo{constructor(e){this.count=e}}var Vo,jo;function qo(e){switch(e){default:return br();case Er.CANCELLED:case Er.UNKNOWN:case Er.DEADLINE_EXCEEDED:case Er.RESOURCE_EXHAUSTED:case Er.INTERNAL:case Er.UNAVAILABLE:case Er.UNAUTHENTICATED:return!1;case Er.INVALID_ARGUMENT:case Er.NOT_FOUND:case Er.ALREADY_EXISTS:case Er.PERMISSION_DENIED:case Er.FAILED_PRECONDITION:case Er.ABORTED:case Er.OUT_OF_RANGE:case Er.UNIMPLEMENTED:case Er.DATA_LOSS:return!0}}function $o(e){if(void 0===e)return yr("GRPC error has no .code"),Er.UNKNOWN;switch(e){case Vo.OK:return Er.OK;case Vo.CANCELLED:return Er.CANCELLED;case Vo.UNKNOWN:return Er.UNKNOWN;case Vo.DEADLINE_EXCEEDED:return Er.DEADLINE_EXCEEDED;case Vo.RESOURCE_EXHAUSTED:return Er.RESOURCE_EXHAUSTED;case Vo.INTERNAL:return Er.INTERNAL;case Vo.UNAVAILABLE:return Er.UNAVAILABLE;case Vo.UNAUTHENTICATED:return Er.UNAUTHENTICATED;case Vo.INVALID_ARGUMENT:return Er.INVALID_ARGUMENT;case Vo.NOT_FOUND:return Er.NOT_FOUND;case Vo.ALREADY_EXISTS:return Er.ALREADY_EXISTS;case Vo.PERMISSION_DENIED:return Er.PERMISSION_DENIED;case Vo.FAILED_PRECONDITION:return Er.FAILED_PRECONDITION;case Vo.ABORTED:return Er.ABORTED;case Vo.OUT_OF_RANGE:return Er.OUT_OF_RANGE;case Vo.UNIMPLEMENTED:return Er.UNIMPLEMENTED;case Vo.DATA_LOSS:return Er.DATA_LOSS;default:return br()}}(jo=Vo||(Vo={}))[jo.OK=0]="OK",jo[jo.CANCELLED=1]="CANCELLED",jo[jo.UNKNOWN=2]="UNKNOWN",jo[jo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jo[jo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jo[jo.NOT_FOUND=5]="NOT_FOUND",jo[jo.ALREADY_EXISTS=6]="ALREADY_EXISTS",jo[jo.PERMISSION_DENIED=7]="PERMISSION_DENIED",jo[jo.UNAUTHENTICATED=16]="UNAUTHENTICATED",jo[jo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jo[jo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jo[jo.ABORTED=10]="ABORTED",jo[jo.OUT_OF_RANGE=11]="OUT_OF_RANGE",jo[jo.UNIMPLEMENTED=12]="UNIMPLEMENTED",jo[jo.INTERNAL=13]="INTERNAL",jo[jo.UNAVAILABLE=14]="UNAVAILABLE",jo[jo.DATA_LOSS=15]="DATA_LOSS";class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return _i(this.inner)}size(){return this.innerSize}}const zo=new Ts(zr.comparator);function Go(){return zo}const Ho=new Ts(zr.comparator);function Wo(...e){let t=Ho;for(const n of e)t=t.insert(n.key,n);return t}function Qo(e){let t=Ho;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Xo(){return Jo()}function Yo(){return Jo()}function Jo(){return new Ko((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Zo=new Ts(zr.comparator),ea=new Cs(zr.comparator);function ta(...e){let t=ea;for(const n of e)t=t.add(n);return t}const na=new Cs(Mr);function ra(){return na}class ia{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ia(Vr.min(),r,ra(),Go(),ta())}}class sa{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new sa(n,t,ta(),ta(),ta())}}class oa{constructor(e,t,n,r){this.It=e,this.removedTargetIds=t,this.key=n,this.Tt=r}}class aa{constructor(e,t){this.targetId=e,this.Et=t}}class ca{constructor(e,t,n=ki.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ua{constructor(){this.At=0,this.Rt=da(),this.bt=ki.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=ta(),t=ta(),n=ta();return this.Rt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:br()}})),new sa(this.bt,this.Pt,e,t,n)}xt(){this.vt=!1,this.Rt=da()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class la{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Go(),this.qt=ha(),this.Ut=new Cs(Mr)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,(t=>{const n=this.Wt(t);switch(e.state){case 0:this.zt(t)&&n.Dt(e.resumeToken);break;case 1:n.Mt(),n.Vt||n.xt(),n.Dt(e.resumeToken);break;case 2:n.Mt(),n.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(n.Ft(),n.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),n.Dt(e.resumeToken));break;default:br()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach(((e,n)=>{this.zt(n)&&t(n)}))}Jt(e){const t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){const e=r.target;if(Bs(e))if(0===n){const n=new zr(e.path);this.Qt(t,n,Rs.newNoDocument(n,Vr.min()))}else _r(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach(((n,r)=>{const i=this.Yt(r);if(i){if(n.current&&Bs(i.target)){const t=new zr(i.target.path);null!==this.Lt.get(t)||this.te(r,t)||this.Qt(r,t,Rs.newNoDocument(t,e))}n.St&&(t.set(r,n.Ct()),n.xt())}}));let n=ta();this.qt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Yt(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Lt.forEach(((t,n)=>n.setReadTime(e)));const r=new ia(e,t,this.Ut,this.Lt,n);return this.Lt=Go(),this.qt=ha(),this.Ut=new Cs(Mr),r}Gt(e,t){if(!this.zt(e))return;const n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,n){if(!this.zt(e))return;const r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new ua,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Cs(Mr),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||gr("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new ua),this.$t.getRemoteKeysForTarget(e).forEach((t=>{this.Qt(e,t,null)}))}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function ha(){return new Ts(zr.comparator)}function da(){return new Ts(zr.comparator)}const fa={asc:"ASCENDING",desc:"DESCENDING"},pa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ma={and:"AND",or:"OR"};class ga{constructor(e,t){this.databaseId=e,this.wt=t}}function ya(e,t){return e.wt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function wa(e,t){return e.wt?t.toBase64():t.toUint8Array()}function va(e,t){return ya(e,t.toTimestamp())}function ba(e){return _r(!!e),Vr.fromTimestamp(function(e){const t=Ci(e);return new Ur(t.seconds,t.nanos)}(e))}function _a(e,t){return function(e){return new qr(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ia(e){const t=qr.fromString(e);return _r(Ka(t)),t}function Ea(e,t){return _a(e.databaseId,t.path)}function Ta(e,t){const n=Ia(t);if(n.get(1)!==e.databaseId.projectId)throw new Tr(Er.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Tr(Er.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zr(Sa(n))}function ka(e,t){return _a(e.databaseId,t)}function xa(e){const t=Ia(e);return 4===t.length?qr.emptyPath():Sa(t)}function Ca(e){return new qr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Sa(e){return _r(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Aa(e,t,n){return{name:Ea(e,t),fields:n.value.mapValue.fields}}function Da(e,t,n){const r=Ta(e,t.name),i=ba(t.updateTime),s=t.createTime?ba(t.createTime):Vr.min(),o=new Os({mapValue:{fields:t.fields}}),a=Rs.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Oa(e,t){let n;if(t instanceof No)n={update:Aa(e,t.key,t.value)};else if(t instanceof Fo)n={delete:Ea(e,t.key)};else if(t instanceof Ro)n={update:Aa(e,t.key,t.data),updateMask:$a(t.fieldMask)};else{if(!(t instanceof Bo))return br();n={verify:Ea(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof po)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof mo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yo)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof vo)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw br()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:va(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:br()}(e,t.precondition)),n}function Na(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?To.updateTime(ba(e.updateTime)):void 0!==e.exists?To.exists(e.exists):To.none()}(t.currentDocument):To.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)_r("REQUEST_TIME"===t.setToServerValue),n=new po;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new mo(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new yo(e)}else"increment"in t?n=new vo(e,t.increment):br();const r=Kr.fromServerFormat(t.fieldPath);return new Io(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Ta(e,t.update.name),s=new Os({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ds(t.map((e=>Kr.fromServerFormat(e))))}(t.updateMask);return new Ro(i,s,e,n,r)}return new No(i,s,n,r)}if(t.delete){const r=Ta(e,t.delete);return new Fo(r,n)}if(t.verify){const r=Ta(e,t.verify);return new Bo(r,n)}return br()}function Ra(e,t){return{documents:[ka(e,t.path)]}}function La(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ka(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ka(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return qa(ss.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Va(e.field),direction:Fa(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.wt||Ii(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Pa(e){let t=xa(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_r(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ma(e);return t instanceof ss&&cs(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Is(ja(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ii(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new es(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new es(n,t)}(n.endAt)),$s(t,i,o,s,a,"F",c,u)}function Ma(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ja(e.unaryFilter.field);return is.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ja(e.unaryFilter.field);return is.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ja(e.unaryFilter.field);return is.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ja(e.unaryFilter.field);return is.create(i,"!=",{nullValue:"NULL_VALUE"});default:return br()}}(e):void 0!==e.fieldFilter?function(e){return is.create(ja(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return br()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ss.create(e.compositeFilter.filters.map((e=>Ma(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return br()}}(e.compositeFilter.op))}(e):br()}function Fa(e){return fa[e]}function Ba(e){return pa[e]}function Ua(e){return ma[e]}function Va(e){return{fieldPath:e.canonicalString()}}function ja(e){return Kr.fromServerFormat(e.fieldPath)}function qa(e){return e instanceof is?function(e){if("=="===e.op){if(Gi(e.value))return{unaryFilter:{field:Va(e.field),op:"IS_NAN"}};if(zi(e.value))return{unaryFilter:{field:Va(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gi(e.value))return{unaryFilter:{field:Va(e.field),op:"IS_NOT_NAN"}};if(zi(e.value))return{unaryFilter:{field:Va(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(e.field),op:Ba(e.op),value:e.value}}}(e):e instanceof ss?function(e){const t=e.getFilters().map((e=>qa(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ua(e.op),filters:t}}}(e):br()}function $a(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ka(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function za(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ha(t)),t=Ga(e.get(n),t);return Ha(t)}function Ga(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Ha(e){return e+""}function Wa(e){const t=e.length;if(_r(t>=2),2===t)return _r(""===e.charAt(0)&&""===e.charAt(1)),qr.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&br(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:br()}s=t+2}return new qr(r)}const Qa=["userId","batchId"];function Xa(e,t){return[e,za(t)]}function Ya(e,t,n){return[e,za(t),n]}const Ja={},Za=["prefixPath","collectionGroup","readTime","documentId"],ec=["prefixPath","collectionGroup","documentId"],tc=["collectionGroup","readTime","prefixPath","documentId"],nc=["canonicalId","targetId"],rc=["targetId","path"],ic=["path","targetId"],sc=["collectionId","parent"],oc=["indexId","uid"],ac=["uid","sequenceNumber"],cc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uc=["indexId","uid","orderedDocumentKey"],lc=["userId","collectionPath","documentId"],hc=["userId","collectionPath","largestBatchId"],dc=["userId","collectionGroup","largestBatchId"],fc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pc=[...fc,"documentOverlays"],mc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gc=mc,yc=[...gc,"indexConfiguration","indexState","indexEntries"];class wc extends ni{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function vc(e,t){const n=Ir(e);return oi.M(n.se,t)}class bc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&So(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ao(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ao(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Yo();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Co(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Vr.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ta())}isEqual(e){return this.batchId===e.batchId&&Fr(this.mutations,e.mutations,((e,t)=>Oo(e,t)))&&Fr(this.baseMutations,e.baseMutations,((e,t)=>Oo(e,t)))}}class _c{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){_r(e.mutations.length===n.length);let r=Zo;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new _c(e,t,n,r)}}class Ic{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ec{constructor(e,t,n,r,i=Vr.min(),s=Vr.min(),o=ki.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Ec(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ec(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ec(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Tc{constructor(e){this.ie=e}}function kc(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xc(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ea(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ya(e,t.version.toTimestamp()),createTime:ya(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Cc(t.version)};else{if(!t.isUnknownDocument())return br();r.unknownDocument={path:n.path.toArray(),version:Cc(t.version)}}return r}function xc(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Cc(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Sc(e){const t=new Ur(e.seconds,e.nanoseconds);return Vr.fromTimestamp(t)}function Ac(e,t){const n=(t.baseMutations||[]).map((t=>Na(e.ie,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>Na(e.ie,t))),i=Ur.fromMillis(t.localWriteTimeMs);return new bc(t.batchId,i,n,r)}function Dc(e){const t=Sc(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Sc(e.lastLimboFreeSnapshotVersion):Vr.min();let r;var i;return void 0!==e.query.documents?(_r(1===(i=e.query).documents.length),r=Xs(Ks(xa(i.documents[0])))):r=function(e){return Xs(Pa(e))}(e.query),new Ec(r,e.targetId,0,e.lastListenSequenceNumber,t,n,ki.fromBase64String(e.resumeToken))}function Oc(e,t){const n=Cc(t.snapshotVersion),r=Cc(t.lastLimboFreeSnapshotVersion);let i;i=Bs(t.target)?Ra(e.ie,t.target):La(e.ie,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ms(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Nc(e){const t=Pa({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Js(t,t.limit,"L"):t}function Rc(e,t){return new Ic(t.largestBatchId,Na(e.ie,t.overlayMutation))}function Lc(e,t){const n=t.path.lastSegment();return[e,za(t.path.popLast()),n]}function Pc(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Cc(r.readTime),documentKey:za(r.documentKey.path),largestBatchId:r.largestBatchId}}class Mc{getBundleMetadata(e,t){return Fc(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Sc(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return Fc(e).put({bundleId:(n=t).id,createTime:Cc(ba(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Bc(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:Nc(t.bundledQuery),readTime:Sc(t.readTime)};var t}))}saveNamedQuery(e,t){return Bc(e).put(function(e){return{name:e.name,readTime:Cc(ba(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Fc(e){return vc(e,"bundles")}function Bc(e){return vc(e,"namedQueries")}class Uc{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){const n=t.uid||"";return new Uc(e,n)}getOverlay(e,t){return Vc(e).get(Lc(this.userId,t)).next((e=>e?Rc(this.yt,e):null))}getOverlays(e,t){const n=Xo();return ii.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Ic(t,i);r.push(this.oe(e,s))})),ii.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(za(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Vc(e).Y("collectionPathOverlayIndex",r))})),ii.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Xo(),i=za(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Vc(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Rc(this.yt,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Xo();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vc(e).Z({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Rc(this.yt,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}oe(e,t){return Vc(e).put(function(e,t,n){const[r,i,s]=Lc(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Oa(e.ie,n.mutation)}}(this.yt,this.userId,t))}}function Vc(e){return vc(e,"documentOverlays")}class jc{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Si(e.integerValue));else if("doubleValue"in e){const n=Si(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),Ei(n)?t.le(0):t.le(n))}else if("timestampValue"in e){const n=e.timestampValue;this.he(t,20),"string"==typeof n?t.fe(n):(t.fe(`${n.seconds||""}`),t.le(n.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Ai(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.he(t,45),t.le(n.latitude||0),t.le(n.longitude||0)}else"mapValue"in e?Qi(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):br()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const n=e.fields||{};this.he(t,55);for(const e of Object.keys(n))this.de(e,t),this.ce(n[e],t)}ye(e,t){const n=e.values||[];this.he(t,50);for(const e of n)this.ce(e,t)}me(e,t){this.he(t,37),zr.fromName(e).path.forEach((e=>{this.he(t,60),this.pe(e,t)}))}he(e,t){e.le(t)}_e(e){e.le(2)}}function qc(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function $c(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=qc(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}jc.Ie=new jc;class Kc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ee(n.value),n=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.be(n.value),n=t.next();this.Pe()}ve(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ee(e);else if(e<2048)this.Ee(960|e>>>6),this.Ee(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|e>>>12),this.Ee(128|63&e>>>6),this.Ee(128|63&e);else{const e=t.codePointAt(0);this.Ee(240|e>>>18),this.Ee(128|63&e>>>12),this.Ee(128|63&e>>>6),this.Ee(128|63&e)}}this.Ae()}Ve(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.be(e);else if(e<2048)this.be(960|e>>>6),this.be(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.be(480|e>>>12),this.be(128|63&e>>>6),this.be(128|63&e);else{const e=t.codePointAt(0);this.be(240|e>>>18),this.be(128|63&e>>>12),this.be(128|63&e>>>6),this.be(128|63&e)}}this.Pe()}Se(e){const t=this.De(e),n=$c(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}xe(e){const t=this.De(e),n=$c(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class zc{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class Gc{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Hc{constructor(){this.$e=new Kc,this.Be=new zc(this.$e),this.Le=new Gc(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Wc{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Wc(this.indexId,this.documentKey,this.arrayValue,n)}}function Qc(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Xc(e.arrayValue,t.arrayValue),0!==n?n:(n=Xc(e.directionalValue,t.directionalValue),0!==n?n:zr.comparator(e.documentKey,t.documentKey)))}function Xc(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Yc{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const e=t;e.isInequality()?this.Qe=e:this.Ge.push(e)}}je(e){_r(e.collectionGroup===this.collectionId);const t=Hr(e);if(void 0!==t&&!this.We(t))return!1;const n=Wr(e);let r=0,i=0;for(;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){const e=n[r];if(!this.ze(this.Qe,e)||!this.He(this.Ke[i++],e))return!1;++r}for(;r<n.length;++r){const e=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],e))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Jc(e){var t,n;if(_r(e instanceof is||e instanceof ss),e instanceof is){if(e instanceof vs){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>is.create(e.field,"==",t))))||[];return ss.create(r,"or")}return e}const r=e.filters.map((e=>Jc(e)));return ss.create(r,e.op)}function Zc(e){if(0===e.getFilters().length)return[];const t=ru(Jc(e));return _r(nu(t)),eu(t)||tu(t)?[t]:t.getFilters()}function eu(e){return e instanceof is}function tu(e){return e instanceof ss&&cs(e)}function nu(e){return eu(e)||tu(e)||function(e){if(e instanceof ss&&as(e)){for(const t of e.getFilters())if(!eu(t)&&!tu(t))return!1;return!0}return!1}(e)}function ru(e){if(_r(e instanceof is||e instanceof ss),e instanceof is)return e;if(1===e.filters.length)return ru(e.filters[0]);const t=e.filters.map((e=>ru(e)));let n=ss.create(t,e.op);return n=ou(n),nu(n)?n:(_r(n instanceof ss),_r(os(n)),_r(n.filters.length>1),n.filters.reduce(((e,t)=>iu(e,t))))}function iu(e,t){let n;return _r(e instanceof is||e instanceof ss),_r(t instanceof is||t instanceof ss),n=e instanceof is?t instanceof is?function(e,t){return ss.create([e,t],"and")}(e,t):su(e,t):t instanceof is?su(t,e):function(e,t){if(_r(e.filters.length>0&&t.filters.length>0),os(e)&&os(t))return ds(e,t.getFilters());const n=as(e)?e:t,r=as(e)?t:e,i=n.filters.map((e=>iu(e,r)));return ss.create(i,"or")}(e,t),ou(n)}function su(e,t){if(os(t))return ds(t,e.getFilters());{const n=t.filters.map((t=>iu(e,t)));return ss.create(n,"or")}}function ou(e){if(_r(e instanceof is||e instanceof ss),e instanceof is)return e;const t=e.getFilters();if(1===t.length)return ou(t[0]);if(us(e))return e;const n=t.map((e=>ou(e))),r=[];return n.forEach((t=>{t instanceof is?r.push(t):t instanceof ss&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:ss.create(r,e.op)}class au{constructor(){this.Je=new cu}addToCollectionParentIndex(e,t){return this.Je.add(t),ii.resolve()}getCollectionParents(e,t){return ii.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ii.resolve()}deleteFieldIndex(e,t){return ii.resolve()}getDocumentsMatchingTarget(e,t){return ii.resolve(null)}getIndexType(e,t){return ii.resolve(0)}getFieldIndexes(e,t){return ii.resolve([])}getNextCollectionGroupToUpdate(e){return ii.resolve(null)}getMinOffset(e,t){return ii.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,t){return ii.resolve(Zr.min())}updateCollectionGroup(e,t,n){return ii.resolve()}updateIndexEntries(e,t){return ii.resolve()}}class cu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Cs(qr.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Cs(qr.comparator)).toArray()}}const uu=new Uint8Array(0);class lu{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new cu,this.Xe=new Ko((e=>Ms(e)),((e,t)=>Fs(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.Ye.add(t)}));const i={collectionId:n,parent:za(r)};return hu(e).put(i)}return ii.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Br(t),""],!1,!0);return hu(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Wa(r.parent))}return n}))}addFieldIndex(e,t){const n=fu(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=pu(e);return i.next((e=>{n.put(Pc(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=fu(e),r=pu(e),i=du(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=du(e);let r=!0;const i=new Map;return ii.forEach(this.Ze(t),(t=>this.tn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=ta();const r=[];return ii.forEach(i,((i,s)=>{var o;gr("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`} to execute ${Ms(t)}`);const a=function(e,t){const n=Hr(t);if(void 0===n)return null;for(const t of Us(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(s,i),c=function(e,t){const n=new Map;for(const r of Wr(t))for(const t of Us(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Wr(t)){const t=0===i.kind?Vs(e,i.fieldPath,e.startAt):js(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new es(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Wr(t)){const t=0===i.kind?js(e,i.fieldPath,e.endAt):Vs(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new es(n,r)}(s,i),h=this.en(i,s,u),d=this.en(i,s,l),f=this.nn(i,s,c),p=this.sn(i.indexId,a,h,u.inclusive,d,l.inclusive,f);return ii.forEach(p,(i=>n.J(i,t.limit).next((t=>{t.forEach((t=>{const n=zr.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return ii.resolve(null)}))}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Zc(ss.create(e.filters,"and")).map((t=>Ps(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.Xe.set(e,t),t)}sn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.rn(t[l/c]):uu,h=this.on(e,a,n[l%c],r),d=this.un(e,a,i[l%c],s),f=o.map((t=>this.on(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}on(e,t,n,r){const i=new Wc(e,zr.empty(),t,n);return r?i:i.Ue()}un(e,t,n,r){const i=new Wc(e,zr.empty(),t,n);return r?i.Ue():i}tn(e,t){const n=new Yc(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.je(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.Ze(t);return ii.forEach(r,(t=>this.tn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Cs(Kr.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}cn(e,t){const n=new Hc;for(const r of Wr(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.qe(r.kind);jc.Ie.ue(e,i)}return n.Fe()}rn(e){const t=new Hc;return jc.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const n=new Hc;return jc.Ie.ue(qi(this.databaseId,t),n.qe(function(e){const t=Wr(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}nn(e,t,n){if(null===n)return[];let r=[];r.push(new Hc);let i=0;for(const s of Wr(e)){const e=n[i++];for(const n of r)if(this.hn(t,s.fieldPath)&&Ki(e))r=this.ln(r,s,e);else{const t=n.qe(s.kind);jc.Ie.ue(e,t)}}return this.fn(r)}en(e,t,n){return this.nn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Fe();return t}ln(e,t,n){const r=[...e],i=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new Hc;r.seed(n.Fe()),jc.Ie.ue(e,r.qe(t.kind)),i.push(r)}return i}hn(e,t){return!!e.filters.find((e=>e instanceof is&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=fu(e),r=pu(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return ii.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Xr(t.sequenceNumber,new Zr(Sc(t.readTime),new zr(Wa(t.documentKey)),t.largestBatchId)):Xr.empty(),r=e.fields.map((([e,t])=>new Qr(Kr.fromServerFormat(e),t)));return new Gr(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Mr(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=fu(e),i=pu(e);return this.dn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>ii.forEach(t,(t=>i.put(Pc(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return ii.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?ii.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),ii.forEach(i,(n=>this._n(e,t,n).next((t=>{const i=this.wn(r,n);return t.isEqual(i)?ii.resolve():this.mn(e,r,n,t,i)})))))))}))}gn(e,t,n,r){return du(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}yn(e,t,n,r){return du(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}_n(e,t,n){const r=du(e);let i=new Cs(Qc);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},((e,r)=>{i=i.add(new Wc(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}wn(e,t){let n=new Cs(Qc);const r=this.cn(t,e);if(null==r)return n;const i=Hr(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Ki(s))for(const i of s.arrayValue.values||[])n=n.add(new Wc(t.indexId,e.key,this.rn(i),r))}else n=n.add(new Wc(t.indexId,e.key,uu,r));return n}mn(e,t,n,r,i){gr("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=As(s),c=As(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=As(o)):t?(i(a),a=As(s)):(a=As(s),c=As(o))}}(r,i,Qc,(r=>{s.push(this.gn(e,t,n,r))}),(r=>{s.push(this.yn(e,t,n,r))})),ii.waitFor(s)}dn(e){let t=1;return pu(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Qc(e,t))).filter(((e,t,n)=>!t||0!==Qc(e,n[t-1])));const r=[];r.push(e);for(const i of n){const n=Qc(i,e),s=Qc(i,t);if(0===n)r[0]=e.Ue();else if(n>0&&s<0)r.push(i),r.push(i.Ue());else if(s>0)break}r.push(t);const i=[];for(let e=0;e<r.length;e+=2){if(this.pn(r[e],r[e+1]))return[];const t=[r[e].indexId,this.uid,r[e].arrayValue,r[e].directionalValue,uu,[]],n=[r[e+1].indexId,this.uid,r[e+1].arrayValue,r[e+1].directionalValue,uu,[]];i.push(IDBKeyRange.bound(t,n))}return i}pn(e,t){return Qc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mu)}getMinOffset(e,t){return ii.mapArray(this.Ze(t),(t=>this.tn(e,t).next((e=>e||br())))).next(mu)}}function hu(e){return vc(e,"collectionParents")}function du(e){return vc(e,"indexEntries")}function fu(e){return vc(e,"indexConfiguration")}function pu(e){return vc(e,"indexState")}function mu(e){_r(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;ei(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Zr(t.readTime,t.documentKey,n)}const gu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yu{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new yu(e,yu.DEFAULT_COLLECTION_PERCENTILE,yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wu(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Z({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{_r(1===a)})));const u=[];for(const e of n.mutations){const r=Ya(t,e.key.path,n.batchId);s.push(i.delete(r)),u.push(e.key)}return ii.waitFor(s).next((()=>u))}function vu(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw br();t=e.noDocument}return JSON.stringify(t).length}yu.DEFAULT_COLLECTION_PERCENTILE=10,yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yu.DEFAULT=new yu(41943040,yu.DEFAULT_COLLECTION_PERCENTILE,yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yu.DISABLED=new yu(-1,0,0);class bu{constructor(e,t,n,r){this.userId=e,this.yt=t,this.indexManager=n,this.referenceDelegate=r,this.In={}}static re(e,t,n,r){_r(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new bu(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Iu(e).Z({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Eu(e),s=Iu(e);return s.add({}).next((o=>{_r("number"==typeof o);const a=new bc(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Oa(e.ie,t))),i=n.mutations.map((t=>Oa(e.ie,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.yt,this.userId,a),u=[];let l=new Cs(((e,t)=>Mr(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Ya(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,Ja))}return l.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.In[o]=a.keys()})),ii.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Iu(e).get(t).next((e=>e?(_r(e.userId===this.userId),Ac(this.yt,e)):null))}Tn(e,t){return this.In[t]?ii.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.In[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Iu(e).Z({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(_r(t.batchId>=n),i=Ac(this.yt,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Iu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Iu(e).W("userMutationsIndex",t).next((e=>e.map((e=>Ac(this.yt,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Xa(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Eu(e).Z({range:r},((n,r,s)=>{const[o,a,c]=n,u=Wa(a);if(o===this.userId&&t.path.isEqual(u))return Iu(e).get(c).next((e=>{if(!e)throw br();_r(e.userId===this.userId),i.push(Ac(this.yt,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cs(Mr);const r=[];return t.forEach((t=>{const i=Xa(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Eu(e).Z({range:s},((e,r,i)=>{const[s,o,a]=e,c=Wa(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),ii.waitFor(r).next((()=>this.En(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Xa(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Cs(Mr);return Eu(e).Z({range:s},((e,t,i)=>{const[s,a,c]=e,u=Wa(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()})).next((()=>this.En(e,o)))}En(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Iu(e).get(t).next((e=>{if(null===e)throw br();_r(e.userId===this.userId),n.push(Ac(this.yt,e))})))})),ii.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return wu(e.se,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.An(t.batchId)})),ii.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ii.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Eu(e).Z({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Wa(e[1]);r.push(t)}else n.done()})).next((()=>{_r(0===r.length)}))}))}containsKey(e,t){return _u(e,this.userId,t)}Rn(e){return Tu(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function _u(e,t,n){const r=Xa(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Eu(e).Z({range:s,X:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Iu(e){return vc(e,"mutations")}function Eu(e){return vc(e,"documentMutations")}function Tu(e){return vc(e,"mutationQueues")}class ku{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ku(0)}static vn(){return new ku(-1)}}class xu{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next((t=>{const n=new ku(t.highestTargetId);return t.highestTargetId=n.next(),this.Sn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Vn(e).next((e=>Vr.fromTimestamp(new Ur(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Vn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Vn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Sn(e,r))))}addTargetData(e,t){return this.Dn(e,t).next((()=>this.Vn(e).next((n=>(n.targetCount+=1,this.Cn(t,n),this.Sn(e,n))))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Cu(e).delete(t.targetId))).next((()=>this.Vn(e))).next((t=>(_r(t.targetCount>0),t.targetCount-=1,this.Sn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Cu(e).Z(((s,o)=>{const a=Dc(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>ii.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Cu(e).Z(((e,n)=>{const r=Dc(n);t(r)}))}Vn(e){return Su(e).get("targetGlobalKey").next((e=>(_r(null!==e),e)))}Sn(e,t){return Su(e).put("targetGlobalKey",t)}Dn(e,t){return Cu(e).put(Oc(this.yt,t))}Cn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Vn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Ms(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Cu(e).Z({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Dc(n);Fs(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Au(e);return t.forEach((t=>{const s=za(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),ii.waitFor(r)}removeMatchingKeys(e,t,n){const r=Au(e);return ii.forEach(t,(t=>{const i=za(t.path);return ii.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Au(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Au(e);let i=ta();return r.Z({range:n,X:!0},((e,t,n)=>{const r=Wa(e[1]),s=new zr(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=za(t.path),r=IDBKeyRange.bound([n],[Br(n)],!1,!0);let i=0;return Au(e).Z({index:"documentTargetsIndex",X:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}ne(e,t){return Cu(e).get(t).next((e=>e?Dc(e):null))}}function Cu(e){return vc(e,"targets")}function Su(e){return vc(e,"targetGlobal")}function Au(e){return vc(e,"targetDocuments")}function Du([e,t],[n,r]){const i=Mr(e,n);return 0===i?Mr(t,r):i}class Ou{constructor(e){this.xn=e,this.buffer=new Cs(Du),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Du(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Nu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){gr("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Mn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ui(e)?gr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ri(e)}await this.Fn(3e5)}))}}class Ru{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ii.resolve(gi.at);const n=new Ou(t);return this.$n.forEachTarget(e,(e=>n.On(e.sequenceNumber))).next((()=>this.$n.Ln(e,(e=>n.On(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.$n.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(gr("LruGarbageCollector","Garbage collection skipped; disabled"),ii.resolve(gu)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(gr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gu):this.qn(e,t)))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let n,r,i,s,a,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(gr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,c=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(u=Date.now(),mr()<=o.in.DEBUG&&gr("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${r} in `+(a-s)+"ms\n"+`\tRemoved ${i} targets in `+(c-a)+"ms\n"+`\tRemoved ${e} documents in `+(u-c)+"ms\n"+`Total Duration: ${u-l}ms`),ii.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Lu{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Ru(e,t)}(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Un(e){let t=0;return this.Ln(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,((e,n)=>t(n)))}addReference(e,t,n){return Pu(e,n)}removeReference(e,t,n){return Pu(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Pu(e,t)}Gn(e,t){return function(e,t){let n=!1;return Tu(e).tt((r=>_u(e,r,t).next((e=>(e&&(n=!0),ii.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Kn(e,((s,o)=>{if(o<=t){const t=this.Gn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Vr.min()),Au(e).delete([0,za(s.path)]))))}));r.push(t)}})).next((()=>ii.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Pu(e,t)}Kn(e,t){const n=Au(e);let r,i=gi.at;return n.Z({index:"documentTargetsIndex"},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==gi.at&&t(new zr(Wa(r)),i),i=o,r=s):i=gi.at})).next((()=>{i!==gi.at&&t(new zr(Wa(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pu(e,t){return Au(e).put(function(e,t){return{targetId:0,path:za(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Mu{constructor(){this.changes=new Ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ii.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Fu{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ju(e).put(n)}removeEntry(e,t,n){return ju(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],xc(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Qn(e,n))))}getEntry(e,t){let n=Rs.newInvalidDocument(t);return ju(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(qu(t))},((e,r)=>{n=this.jn(t,r)})).next((()=>n))}Wn(e,t){let n={size:0,document:Rs.newInvalidDocument(t)};return ju(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(qu(t))},((e,r)=>{n={document:this.jn(t,r),size:vu(r)}})).next((()=>n))}getEntries(e,t){let n=Go();return this.zn(e,t,((e,t)=>{const r=this.jn(e,t);n=n.insert(e,r)})).next((()=>n))}Hn(e,t){let n=Go(),r=new Ts(zr.comparator);return this.zn(e,t,((e,t)=>{const i=this.jn(e,t);n=n.insert(e,i),r=r.insert(e,vu(t))})).next((()=>({documents:n,Jn:r})))}zn(e,t,n){if(t.isEmpty())return ii.resolve();let r=new Cs(Ku);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(qu(r.first()),qu(r.last())),s=r.getIterator();let o=s.getNext();return ju(e).Z({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=zr.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Ku(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.j(qu(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),xc(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ju(e).W(IDBKeyRange.bound(s,o,!0)).next((e=>{let n=Go();for(const i of e){const e=this.jn(zr.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(no(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Go();const s=$u(t,n),o=$u(t,Zr.max());return ju(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.jn(zr.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Uu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Vu(e).get("remoteDocumentGlobalKey").next((e=>(_r(!!e),e)))}Qn(e,t){return Vu(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Da(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=zr.fromSegments(t.noDocument.path),r=Sc(t.noDocument.readTime);n=Rs.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return br();{const e=zr.fromSegments(t.unknownDocument.path),r=Sc(t.unknownDocument.version);n=Rs.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Ur(e[0],e[1]);return Vr.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!e.isNoDocument()||!e.version.isEqual(Vr.min()))return e}return Rs.newInvalidDocument(e)}}function Bu(e){return new Fu(e)}class Uu extends Mu{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ko((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Cs(((e,t)=>Mr(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Xn.get(i);if(t.push(this.Yn.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=kc(this.Yn.yt,s);r=r.add(i.path.popLast());const c=vu(a);n+=c-o.size,t.push(this.Yn.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=kc(this.Yn.yt,s.convertToNoDocument(Vr.min()));t.push(this.Yn.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Yn.updateMetadata(e,n)),ii.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next((e=>(this.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next((({documents:e,Jn:t})=>(t.forEach(((t,n)=>{this.Xn.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function Vu(e){return vc(e,"remoteDocumentGlobal")}function ju(e){return vc(e,"remoteDocumentsV14")}function qu(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $u(e,t){const n=t.documentKey.path.toArray();return[e,xc(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ku(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=Mr(n[e],r[e]),i)return i;return i=Mr(n.length,r.length),i||(i=Mr(n[n.length-2],r[r.length-2]),i||Mr(n[n.length-1],r[r.length-1]))}class zu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Gu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ao(n.mutation,e,Ds.empty(),Ur.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,ta()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=ta()){const r=Xo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Wo();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Xo();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ta())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Go();const s=Jo(),o=Jo();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ro)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ao(o.mutation,t,o.mutation.getFieldMask(),Ur.now())):s.set(t.key,Ds.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new zu(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Jo();let r=new Ts(((e,t)=>e-t)),i=ta();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Ds.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ta()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=Yo();c.forEach((e=>{if(!i.has(e)){const r=Co(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return ii.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return zr.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ws(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ii.resolve(Xo());let o=-1,a=i;return s.next((t=>ii.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ii.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,ta()))).next((e=>({batchId:o,changes:Qo(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zr(t)).next((e=>{let t=Wo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Wo();return this.indexManager.getCollectionParents(e,r).next((s=>ii.forEach(s,(s=>{const o=function(e,t){return new qs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Rs.newInvalidDocument(r)))}));let n=Wo();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Ao(s.mutation,i,Ds.empty(),Ur.now()),no(t,i)&&(n=n.insert(e,i))})),n}))}}class Hu{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ii.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:ba(n.createTime)}),ii.resolve()}getNamedQuery(e,t){return ii.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Nc(e.bundledQuery),readTime:ba(e.readTime)}}(t)),ii.resolve()}}class Wu{constructor(){this.overlays=new Ts(zr.comparator),this.es=new Map}getOverlay(e,t){return ii.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Xo();return ii.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.oe(e,t,r)})),ii.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.es.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.es.delete(n)),ii.resolve()}getOverlaysForCollection(e,t,n){const r=Xo(),i=t.length+1,s=new zr(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ii.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ts(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Xo(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Xo(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return ii.resolve(o)}oe(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ic(t,n));let i=this.es.get(t);void 0===i&&(i=ta(),this.es.set(t,i)),this.es.set(t,i.add(n.key))}}class Qu{constructor(){this.ns=new Cs(Xu.ss),this.rs=new Cs(Xu.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const n=new Xu(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.cs(new Xu(e,t))}hs(e,t){e.forEach((e=>this.removeReference(e,t)))}ls(e){const t=new zr(new qr([])),n=new Xu(t,e),r=new Xu(t,e+1),i=[];return this.rs.forEachInRange([n,r],(e=>{this.cs(e),i.push(e.key)})),i}fs(){this.ns.forEach((e=>this.cs(e)))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new zr(new qr([])),n=new Xu(t,e),r=new Xu(t,e+1);let i=ta();return this.rs.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Xu(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Xu{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return zr.comparator(e.key,t.key)||Mr(e._s,t._s)}static os(e,t){return Mr(e._s,t._s)||zr.comparator(e.key,t.key)}}class Yu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Cs(Xu.ss)}checkEmpty(e){return ii.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new bc(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.gs=this.gs.add(new Xu(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ii.resolve(s)}lookupMutationBatch(e,t){return ii.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ps(n),i=r<0?0:r;return ii.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ii.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ii.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Xu(t,0),r=new Xu(t,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([n,r],(e=>{const t=this.ys(e._s);i.push(t)})),ii.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cs(Mr);return t.forEach((e=>{const t=new Xu(e,0),r=new Xu(e,Number.POSITIVE_INFINITY);this.gs.forEachInRange([t,r],(e=>{n=n.add(e._s)}))})),ii.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;zr.isDocumentKey(i)||(i=i.child(""));const s=new Xu(new zr(i),0);let o=new Cs(Mr);return this.gs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),s),ii.resolve(this.Is(o))}Is(e){const t=[];return e.forEach((e=>{const n=this.ys(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){_r(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let n=this.gs;return ii.forEach(t.mutations,(r=>{const i=new Xu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.gs=n}))}An(e){}containsKey(e,t){const n=new Xu(t,0),r=this.gs.firstAfterOrEqual(n);return ii.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ii.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ju{constructor(e){this.Es=e,this.docs=new Ts(zr.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ii.resolve(n?n.document.mutableCopy():Rs.newInvalidDocument(t))}getEntries(e,t){let n=Go();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Rs.newInvalidDocument(e))})),ii.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Go();const s=t.path,o=new zr(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ei(Jr(o),n)<=0||(r.has(o.key)||no(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ii.resolve(i)}getAllFromCollectionGroup(e,t,n,r){br()}As(e,t){return ii.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Zu(this)}getSize(e){return ii.resolve(this.size)}}class Zu extends Mu{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(n)})),ii.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class el{constructor(e){this.persistence=e,this.Rs=new Ko((e=>Ms(e)),Fs),this.lastRemoteSnapshotVersion=Vr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Qu,this.targetCount=0,this.vs=ku.Pn()}forEachTarget(e,t){return this.Rs.forEach(((e,n)=>t(n))),ii.resolve()}getLastRemoteSnapshotVersion(e){return ii.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ii.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ii.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),ii.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new ku(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ii.resolve()}updateTargetData(e,t){return this.Dn(t),ii.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ii.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Rs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Rs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),ii.waitFor(i).next((()=>r))}getTargetCount(e){return ii.resolve(this.targetCount)}getTargetData(e,t){const n=this.Rs.get(t)||null;return ii.resolve(n)}addMatchingKeys(e,t,n){return this.Ps.us(t,n),ii.resolve()}removeMatchingKeys(e,t,n){this.Ps.hs(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ii.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ii.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ps.ds(t);return ii.resolve(n)}containsKey(e,t){return ii.resolve(this.Ps.containsKey(t))}}class tl{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new gi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new el(this),this.indexManager=new au,this.remoteDocumentCache=function(e){return new Ju(e)}((e=>this.referenceDelegate.xs(e))),this.yt=new Tc(t),this.Ns=new Hu(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Vs[e.toKey()];return n||(n=new Yu(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,n){gr("MemoryPersistence","Starting transaction:",e);const r=new nl(this.Ss.next());return this.referenceDelegate.ks(),n(r).next((e=>this.referenceDelegate.Os(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ms(e,t){return ii.or(Object.values(this.Vs).map((n=>()=>n.containsKey(e,t))))}}class nl extends ni{constructor(e){super(),this.currentSequenceNumber=e}}class rl{constructor(e){this.persistence=e,this.Fs=new Qu,this.$s=null}static Bs(e){return new rl(e)}get Ls(){if(this.$s)return this.$s;throw br()}addReference(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),ii.resolve()}removeReference(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),ii.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ii.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach((e=>this.Ls.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ls.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ii.forEach(this.Ls,(n=>{const r=zr.fromPath(n);return this.qs(e,r).next((e=>{e||t.removeEntry(r,Vr.min())}))})).next((()=>(this.$s=null,t.apply(e))))}updateLimboDocument(e,t){return this.qs(e,t).next((e=>{e?this.Ls.delete(t.toString()):this.Ls.add(t.toString())}))}xs(e){return 0}qs(e,t){return ii.or([()=>ii.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class il{constructor(e){this.yt=e}$(e,t,n,r){const i=new si("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qa,{unique:!0}),e.createObjectStore("documentMutations")}(e),sl(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=ii.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),sl(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vr.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qa,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return ii.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Us(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(i))))),n<7&&r>=7&&(s=s.next((()=>this.Gs(i)))),n<8&&r>=8&&(s=s.next((()=>this.Qs(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.js(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:lc});t.createIndex("collectionPathOverlayIndex",hc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",dc,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Za});t.createIndex("documentKeyIndex",ec),t.createIndex("collectionGroupIndex",tc)}(e))).next((()=>this.Ws(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.zs(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:oc}).createIndex("sequenceNumberIndex",ac,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:cc}).createIndex("documentKeyIndex",uc,{unique:!1})}(e)))),s}Ks(e){let t=0;return e.store("remoteDocuments").Z(((e,n)=>{t+=vu(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Us(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>ii.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>ii.forEach(n,(n=>{_r(n.userId===t.userId);const r=Ac(this.yt,n);return wu(e,t.userId,r).next((()=>{}))}))))}))))}Gs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Z(((n,i)=>{const s=new qr(n),o=function(e){return[0,za(e)]}(s);r.push(t.get(o).next((n=>n?ii.resolve():(n=>t.put({targetId:0,path:za(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>ii.waitFor(r)))}))}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:sc});const n=t.store("collectionParents"),r=new cu,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:za(r)})}};return t.store("remoteDocuments").Z({X:!0},((e,t)=>{const n=new qr(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Z({X:!0},(([e,t,n],r)=>{const s=Wa(t);return i(s.popLast())}))))}js(e){const t=e.store("targets");return t.Z(((e,n)=>{const r=Dc(n),i=Oc(this.yt,r);return t.put(i)}))}Ws(e,t){const n=t.store("remoteDocuments"),r=[];return n.Z(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new zr(qr.fromString(o.document.name).popFirst(5)):o.noDocument?zr.fromSegments(o.noDocument.path):o.unknownDocument?zr.fromSegments(o.unknownDocument.path):br()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>ii.waitFor(r)))}zs(e,t){const n=t.store("mutations"),r=Bu(this.yt),i=new tl(rl.Bs,this.yt.ie);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:ta();Ac(this.yt,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),ii.forEach(n,((e,n)=>{const s=new dr(n),o=Uc.re(this.yt,s),a=i.getIndexManager(s),c=bu.re(s,this.yt,a,i.referenceDelegate);return new Gu(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new wc(t,gi.at),e).next()}))}))}}function sl(e){e.createObjectStore("targetDocuments",{keyPath:rc}).createIndex("documentTargetsIndex",ic,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nc,{unique:!0}),e.createObjectStore("targetGlobal")}const ol="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class al{constructor(e,t,n,r,i,s,o,a,c,u,l=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Hs=i,this.window=s,this.document=o,this.Js=c,this.Ys=u,this.Xs=l,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=e=>Promise.resolve(),!al.C())throw new Tr(Er.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lu(this,r),this.ii=t+"main",this.yt=new Tc(a),this.ri=new oi(this.ii,this.Xs,new il(this.yt)),this.Cs=new xu(this.referenceDelegate,this.yt),this.remoteDocumentCache=Bu(this.yt),this.Ns=new Mc,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===u&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Tr(Er.FAILED_PRECONDITION,ol);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Cs.getHighestSequenceNumber(e)))})).then((e=>{this.Ss=new gi(e,this.Js)})).then((()=>{this.Ds=!0})).catch((e=>(this.ri&&this.ri.close(),Promise.reject(e))))}li(e){return this.si=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((async()=>{this.started&&await this.ui()})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ul(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable((()=>this.si(!1))))}))})).next((()=>this.di(e))).next((t=>this.isPrimary&&!t?this._i(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(ui(e))return gr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return gr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable((()=>this.si(e))),this.isPrimary=e}))}fi(e){return cl(e).get("owner").next((e=>ii.resolve(this.mi(e))))}gi(e){return ul(e).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=vc(e,"clientMetadata");return t.W().next((e=>{const n=this.Ii(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return ii.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.oi)for(const t of e)this.oi.removeItem(this.Ti(t.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.ui().then((()=>this.yi())).then((()=>this.hi()))))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ii.resolve(!0):cl(e).get("owner").next((t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Tr(Er.FAILED_PRECONDITION,ol);return!1}}return!(!this.networkEnabled||!this.inForeground)||ul(e).W().next((e=>void 0===this.Ii(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&gr("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new wc(e,gi.at);return this._i(t).next((()=>this.gi(t)))})),this.ri.close(),this.Pi()}Ii(e,t){return e.filter((e=>this.pi(e.updateTimeMs,t)&&!this.Ei(e.clientId)))}vi(){return this.runTransaction("getActiveClients","readonly",(e=>ul(e).W().next((e=>this.Ii(e,18e5).map((e=>e.clientId))))))}get started(){return this.Ds}getMutationQueue(e,t){return bu.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lu(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Uc.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,n){gr("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.Xs)?yc:14===s?gc:13===s?mc:12===s?pc:11===s?fc:void br();var s;let o;return this.ri.runTransaction(e,r,i,(r=>(o=new wc(r,this.Ss?this.Ss.next():gi.at),"readwrite-primary"===t?this.fi(o).next((e=>!!e||this.di(o))).next((t=>{if(!t)throw yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable((()=>this.si(!1))),new Tr(Er.FAILED_PRECONDITION,ti);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.Vi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Vi(e){return cl(e).get("owner").next((e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Tr(Er.FAILED_PRECONDITION,ol)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cl(e).put("owner",t)}static C(){return oi.C()}_i(e){const t=cl(e);return t.get("owner").next((e=>this.mi(e)?(gr("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ii.resolve()))}pi(e,t){const n=Date.now();return!(e<n-t||e>n&&(yr(`Detected an update time that is in the future: ${e} > ${n}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.ui())))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,a.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return gr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return yr("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){yr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cl(e){return vc(e,"owner")}function ul(e){return vc(e,"clientMetadata")}function ll(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class hl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Si=n,this.Di=r}static Ci(e,t){let n=ta(),r=ta();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new hl(e,t.fromCache,n,r)}}class dl{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.ki(e,t).next((i=>i||this.Oi(e,t,r,n))).next((n=>n||this.Mi(e,t)))}ki(e,t){if(zs(t))return ii.resolve(null);let n=Xs(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Js(t,null,"F"),n=Xs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=ta(...r);return this.Ni.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Fi(t,r);return this.$i(t,s,i,n.readTime)?this.ki(e,Js(t,null,"F")):this.Bi(e,s,t,n)}))))})))))}Oi(e,t,n,r){return zs(t)||r.isEqual(Vr.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((i=>{const s=this.Fi(t,i);return this.$i(t,s,n,r)?this.Mi(e,t):(mr()<=o.in.DEBUG&&gr("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),to(t)),this.Bi(e,s,t,Yr(r,-1)))}))}Fi(e,t){let n=new Cs(io(e));return t.forEach(((t,r)=>{no(e,r)&&(n=n.add(r))})),n}$i(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mi(e,t){return mr()<=o.in.DEBUG&&gr("QueryEngine","Using full collection scan to execute query:",to(t)),this.Ni.getDocumentsMatchingQuery(e,t,Zr.min())}Bi(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class fl{constructor(e,t,n,r){this.persistence=e,this.Li=t,this.yt=r,this.qi=new Ts(Mr),this.Ui=new Ko((e=>Ms(e)),Fs),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(n)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gu(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.qi)))}}function pl(e,t,n,r){return new fl(e,t,n,r)}async function ml(e,t){const n=Ir(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Qi(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=ta();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ji:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function gl(e){const t=Ir(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Cs.getLastRemoteSnapshotVersion(e)))}function yl(e,t,n){let r=ta(),i=ta();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Go();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Vr.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):gr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Wi:r,zi:i}}))}function wl(e,t){const n=Ir(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function vl(e,t){const n=Ir(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Cs.getTargetData(e,t).next((i=>i?(r=i,ii.resolve(r)):n.Cs.allocateTargetId(e).next((i=>(r=new Ec(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}async function bl(e,t,n){const r=Ir(e),i=r.qi.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ui(e))throw e;gr("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.qi=r.qi.remove(t),r.Ui.delete(i.target)}function _l(e,t,n){const r=Ir(e);let i=Vr.min(),s=ta();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Ir(e),i=r.Ui.get(n);return void 0!==i?ii.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,Xs(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Li.getDocumentsMatchingQuery(e,t,n?i:Vr.min(),n?s:ta()))).next((e=>(Il(r,ro(t),e),{documents:e,Hi:s})))))}function Il(e,t,n){let r=e.Ki.get(t)||Vr.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}class El{constructor(){this.activeTargetIds=ra()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tl{constructor(){this.Lr=new El,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,n){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new El,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kl{Ur(e){}shutdown(){}}class xl{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){gr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){gr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Cl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sl{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Al extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,n,r,i){const s=this.ho(e,t);gr("RestConnection","Sending: ",s,n);const o={};return this.lo(o,r,i),this.fo(e,s,o,n).then((e=>(gr("RestConnection","Received: ",e),e)),(t=>{throw wr("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t}))}_o(e,t,n,r,i,s){return this.ao(e,t,n,r,i)}lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+fr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}ho(e,t){const n=Cl[e];return`${this.oo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,n,r){return new Promise(((i,s)=>{const o=new ur;o.setWithCredentials(!0),o.listenOnce(ir.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case rr.NO_ERROR:const t=o.getResponseJson();gr("Connection","XHR received:",JSON.stringify(t)),i(t);break;case rr.TIMEOUT:gr("Connection",'RPC "'+e+'" timed out'),s(new Tr(Er.DEADLINE_EXCEEDED,"Request time out"));break;case rr.HTTP_ERROR:const n=o.getStatus();if(gr("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Er).indexOf(t)>=0?t:Er.UNKNOWN}(t.status);s(new Tr(e,t.message))}else s(new Tr(Er.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Tr(Er.UNAVAILABLE,"Connection failed."));break;default:br()}}finally{gr("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}wo(e,t,n){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=tr(),s=nr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ar({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const a=r.join("");gr("Connection","Creating WebChannel: "+a,o);const c=i.createWebChannel(a,o);let u=!1,l=!1;const h=new Sl({Hr:e=>{l?gr("Connection","Not sending because WebChannel is closed:",e):(u||(gr("Connection","Opening WebChannel transport."),c.open(),u=!0),gr("Connection","WebChannel sending:",e),c.send(e))},Jr:()=>c.close()}),d=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return d(c,cr.EventType.OPEN,(()=>{l||gr("Connection","WebChannel transport opened.")})),d(c,cr.EventType.CLOSE,(()=>{l||(l=!0,gr("Connection","WebChannel transport closed"),h.io())})),d(c,cr.EventType.ERROR,(e=>{l||(l=!0,wr("Connection","WebChannel transport errored:",e),h.io(new Tr(Er.UNAVAILABLE,"The operation could not be completed")))})),d(c,cr.EventType.MESSAGE,(e=>{var t;if(!l){const n=e.data[0];_r(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){gr("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Vo[e];if(void 0!==t)return $o(t)}(e),n=i.message;void 0===t&&(t=Er.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),l=!0,h.io(new Tr(t,n)),c.close()}else gr("Connection","WebChannel received:",n),h.ro(n)}})),d(s,sr.STAT_EVENT,(e=>{e.stat===or.PROXY?gr("Connection","Detected buffering proxy"):e.stat===or.NOPROXY&&gr("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.so()}),0),h}}function Dl(){return"undefined"!=typeof window?window:null}function Ol(){return"undefined"!=typeof document?document:null}function Nl(e){return new ga(e,!0)}class Rl{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Hs=e,this.timerId=t,this.mo=n,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-n);r>0&&gr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,(()=>(this.Eo=Date.now(),e()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Ll{constructor(e,t,n,r,i,s,o,a){this.Hs=e,this.vo=n,this.Vo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Rl(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(()=>this.$o())))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,t){this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==e?this.xo.reset():t&&t.code===Er.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):t&&t.code===Er.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.So===t&&this.Go(e,n)}),(t=>{e((()=>{const e=new Tr(Er.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Qo(e)}))}))}Go(e,t){const n=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((()=>{n((()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,(()=>(this.ko()&&(this.state=3),Promise.resolve()))),this.listener.Yr())))})),this.stream.Zr((e=>{n((()=>this.Qo(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Oo(){this.state=5,this.xo.Ro((async()=>{this.state=0,this.start()}))}Qo(e){return gr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget((()=>this.So===e?t():(gr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Pl extends Ll{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.yt=i}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:br()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.wt?(_r(void 0===t||"string"==typeof t),ki.fromBase64String(t||"")):(_r(void 0===t||t instanceof Uint8Array),ki.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Er.UNKNOWN:$o(e.code);return new Tr(t,e.message||"")}(o);n=new ca(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ta(e,r.document.name),s=ba(r.document.updateTime),o=r.document.createTime?ba(r.document.createTime):Vr.min(),a=new Os({mapValue:{fields:r.document.fields}}),c=Rs.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new oa(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ta(e,r.document),s=r.readTime?ba(r.readTime):Vr.min(),o=Rs.newNoDocument(i,s),a=r.removedTargetIds||[];n=new oa([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ta(e,r.document),s=r.removedTargetIds||[];n=new oa([],s,i,null)}else{if(!("filter"in t))return br();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new Uo(r),s=e.targetId;n=new aa(s,i)}}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return Vr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Vr.min():t.readTime?ba(t.readTime):Vr.min()}(e);return this.listener.Wo(t,n)}zo(e){const t={};t.database=Ca(this.yt),t.addTarget=function(e,t){let n;const r=t.target;return n=Bs(r)?{documents:Ra(e,r)}:{query:La(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=wa(e,t.resumeToken):t.snapshotVersion.compareTo(Vr.min())>0&&(n.readTime=ya(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return br()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}Ho(e){const t={};t.database=Ca(this.yt),t.removeTarget=e,this.Bo(t)}}class Ml extends Ll{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.yt=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(_r(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function(e,t){return e&&e.length>0?(_r(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ba(e.updateTime):ba(t);return n.isEqual(Vr.min())&&(n=ba(t)),new Eo(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ba(e.commitTime);return this.listener.Zo(n,t)}return _r(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Ca(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Oa(this.yt,e)))};this.Bo(t)}}class Fl extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.yt=r,this.nu=!1}su(){if(this.nu)throw new Tr(Er.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.ao(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Er.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Tr(Er.UNKNOWN,e.toString())}))}_o(e,t,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection._o(e,t,n,i,s,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Er.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Tr(Er.UNKNOWN,e.toString())}))}terminate(){this.nu=!0}}class Bl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve()))))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(yr(t),this.ou=!1):gr("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Ul{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.Ur((e=>{n.enqueueAndForget((async()=>{Wl(this)&&(gr("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ir(e);t._u.add(4),await jl(t),t.gu.set("Unknown"),t._u.delete(4),await Vl(t)}(this))}))})),this.gu=new Bl(n,r)}}async function Vl(e){if(Wl(e))for(const t of e.wu)await t(!0)}async function jl(e){for(const t of e.wu)await t(!1)}function ql(e,t){const n=Ir(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),Hl(n)?Gl(n):dh(n).ko()&&Kl(n,t))}function $l(e,t){const n=Ir(e),r=dh(n);n.du.delete(t),r.ko()&&zl(n,t),0===n.du.size&&(r.ko()?r.Fo():Wl(n)&&n.gu.set("Unknown"))}function Kl(e,t){e.yu.Ot(t.targetId),dh(e).zo(t)}function zl(e,t){e.yu.Ot(t),dh(e).Ho(t)}function Gl(e){e.yu=new la({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ne:t=>e.du.get(t)||null}),dh(e).start(),e.gu.uu()}function Hl(e){return Wl(e)&&!dh(e).No()&&e.du.size>0}function Wl(e){return 0===Ir(e)._u.size}function Ql(e){e.yu=void 0}async function Xl(e){e.du.forEach(((t,n)=>{Kl(e,t)}))}async function Yl(e,t){Ql(e),Hl(e)?(e.gu.hu(t),Gl(e)):e.gu.set("Unknown")}async function Jl(e,t,n){if(e.gu.set("Online"),t instanceof ca&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.du.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.du.delete(r),e.yu.removeTarget(r))}(e,t)}catch(n){gr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Zl(e,n)}else if(t instanceof oa?e.yu.Kt(t):t instanceof aa?e.yu.Jt(t):e.yu.jt(t),!n.isEqual(Vr.min()))try{const t=await gl(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.yu.Zt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.du.get(t);if(!n)return;e.du.set(t,n.withResumeToken(ki.EMPTY_BYTE_STRING,n.snapshotVersion)),zl(e,t);const r=new Ec(n.target,t,1,n.sequenceNumber);Kl(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){gr("RemoteStore","Failed to raise snapshot:",t),await Zl(e,t)}}async function Zl(e,t,n){if(!ui(t))throw t;e._u.add(1),await jl(e),e.gu.set("Offline"),n||(n=()=>gl(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{gr("RemoteStore","Retrying IndexedDB access"),await n(),e._u.delete(1),await Vl(e)}))}function eh(e,t){return t().catch((n=>Zl(e,n,t)))}async function th(e){const t=Ir(e),n=fh(t);let r=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;nh(t);)try{const e=await wl(t.localStore,r);if(null===e){0===t.fu.length&&n.Fo();break}r=e.batchId,rh(t,e)}catch(e){await Zl(t,e)}ih(t)&&sh(t)}function nh(e){return Wl(e)&&e.fu.length<10}function rh(e,t){e.fu.push(t);const n=fh(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function ih(e){return Wl(e)&&!fh(e).No()&&e.fu.length>0}function sh(e){fh(e).start()}async function oh(e){fh(e).eu()}async function ah(e){const t=fh(e);for(const n of e.fu)t.Xo(n.mutations)}async function ch(e,t,n){const r=e.fu.shift(),i=_c.from(r,t,n);await eh(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await th(e)}async function uh(e,t){t&&fh(e).Yo&&await async function(e,t){if(qo(n=t.code)&&n!==Er.ABORTED){const n=e.fu.shift();fh(e).Mo(),await eh(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await th(e)}var n}(e,t),ih(e)&&sh(e)}async function lh(e,t){const n=Ir(e);n.asyncQueue.verifyOperationInProgress(),gr("RemoteStore","RemoteStore received new credentials");const r=Wl(n);n._u.add(3),await jl(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n._u.delete(3),await Vl(n)}async function hh(e,t){const n=Ir(e);t?(n._u.delete(2),await Vl(n)):t||(n._u.add(2),await jl(n),n.gu.set("Unknown"))}function dh(e){return e.pu||(e.pu=function(e,t,n){const r=Ir(e);return r.su(),new Pl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Xl.bind(null,e),Zr:Yl.bind(null,e),Wo:Jl.bind(null,e)}),e.wu.push((async t=>{t?(e.pu.Mo(),Hl(e)?Gl(e):e.gu.set("Unknown")):(await e.pu.stop(),Ql(e))}))),e.pu}function fh(e){return e.Iu||(e.Iu=function(e,t,n){const r=Ir(e);return r.su(),new Ml(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:oh.bind(null,e),Zr:uh.bind(null,e),tu:ah.bind(null,e),Zo:ch.bind(null,e)}),e.wu.push((async t=>{t?(e.Iu.Mo(),await th(e)):(await e.Iu.stop(),e.fu.length>0&&(gr("RemoteStore",`Stopping write stream with ${e.fu.length} pending writes`),e.fu=[]))}))),e.Iu}class ph{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ph(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Tr(Er.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mh(e,t){if(yr("AsyncQueue",`${t}: ${e}`),ui(e))return new Tr(Er.UNAVAILABLE,`${t}: ${e}`);throw e}class gh{constructor(e){this.comparator=e?(t,n)=>e(t,n)||zr.comparator(t.key,n.key):(e,t)=>zr.comparator(e.key,t.key),this.keyedMap=Wo(),this.sortedSet=new Ts(this.comparator)}static emptySet(e){return new gh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new gh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class yh{constructor(){this.Tu=new Ts(zr.comparator)}track(e){const t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):br():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class wh{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new wh(e,t,gh.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class vh{constructor(){this.Au=void 0,this.listeners=[]}}class bh{constructor(){this.queries=new Ko((e=>eo(e)),Zs),this.onlineState="Unknown",this.Ru=new Set}}async function _h(e,t){const n=Ir(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new vh),i)try{s.Au=await n.onListen(r)}catch(e){const n=mh(e,`Initialization of query '${to(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.bu(n.onlineState),s.Au&&t.Pu(s.Au)&&kh(n)}async function Ih(e,t){const n=Ir(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Eh(e,t){const n=Ir(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.Pu(e)&&(r=!0);i.Au=e}}r&&kh(n)}function Th(e,t,n){const r=Ir(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function kh(e){e.Ru.forEach((e=>{e.next()}))}class xh{constructor(e,t,n){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new wh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){if(e.docChanges.length>0)return!0;const t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}xu(e){e=wh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Ch{constructor(e){this.key=e}}class Sh{constructor(e){this.key=e}}class Ah{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ta(),this.mutatedKeys=ta(),this.Gu=io(e),this.Qu=new gh(this.Gu)}get ju(){return this.qu}Wu(e,t){const n=t?t.zu:new yh,r=t?t.Qu:this.Qu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),l=no(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Hu(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Gu(l,a)>0||c&&this.Gu(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Qu:s,zu:n,$i:o,mutatedKeys:i}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return br()}};return n(e)-n(t)}(e.type,t.type)||this.Gu(e.doc,t.doc))),this.Ju(n);const s=t?this.Yu():[],o=0===this.Ku.size&&this.current?1:0,a=o!==this.Uu;return this.Uu=o,0!==i.length||a?{snapshot:new wh(this.query,e.Qu,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:s}:{Xu:s}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new yh,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach((e=>this.qu=this.qu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qu=this.qu.delete(e))),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=ta(),this.Qu.forEach((e=>{this.Zu(e.key)&&(this.Ku=this.Ku.add(e.key))}));const t=[];return e.forEach((e=>{this.Ku.has(e)||t.push(new Sh(e))})),this.Ku.forEach((n=>{e.has(n)||t.push(new Ch(n))})),t}tc(e){this.qu=e.Hi,this.Ku=ta();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return wh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Dh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Oh{constructor(e){this.key=e,this.nc=!1}}class Nh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.sc={},this.ic=new Ko((e=>eo(e)),Zs),this.rc=new Map,this.oc=new Set,this.uc=new Ts(zr.comparator),this.cc=new Map,this.ac=new Qu,this.hc={},this.lc=new Map,this.fc=ku.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}async function Rh(e,t){const n=Yh(e);let r,i;const s=n.ic.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const e=await vl(n.localStore,Xs(t));n.isPrimaryClient&&ql(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Lh(n,t,r,"current"===s,e.resumeToken)}return i}async function Lh(e,t,n,r,i){e._c=(t,n,r)=>async function(e,t,n,r){let i=t.view.Wu(n);i.$i&&(i=await _l(e.localStore,t.query,!1).then((({documents:e})=>t.view.Wu(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return zh(e,t.targetId,o.Xu),o.snapshot}(e,t,n,r);const s=await _l(e.localStore,t,!0),o=new Ah(t,s.Hi),a=o.Wu(s.documents),c=sa.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,c);zh(e,n,u.Xu);const l=new Dh(t,n,o);return e.ic.set(t,l),e.rc.has(n)?e.rc.get(n).push(t):e.rc.set(n,[t]),u.snapshot}async function Ph(e,t){const n=Ir(e),r=n.ic.get(t),i=n.rc.get(r.targetId);if(i.length>1)return n.rc.set(r.targetId,i.filter((e=>!Zs(e,t)))),void n.ic.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await bl(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),$l(n.remoteStore,r.targetId),$h(n,r.targetId)})).catch(ri)):($h(n,r.targetId),await bl(n.localStore,r.targetId,!0))}async function Mh(e,t){const n=Ir(e);try{const e=await function(e,t){const n=Ir(e),r=t.snapshotVersion;let i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Cs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Cs.addMatchingKeys(e,s.addedDocuments,a))));let u=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?u=u.withResumeToken(ki.EMPTY_BYTE_STRING,Vr.min()).withLastLimboFreeSnapshotVersion(Vr.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.Cs.updateTargetData(e,u))}));let a=Go(),c=ta();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(yl(e,s,t.documentUpdates).next((e=>{a=e.Wi,c=e.zi}))),!r.isEqual(Vr.min())){const t=n.Cs.getLastRemoteSnapshotVersion(e).next((t=>n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return ii.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.qi=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.cc.get(t);r&&(_r(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.nc=!0:e.modifiedDocuments.size>0?_r(r.nc):e.removedDocuments.size>0&&(_r(r.nc),r.nc=!1))})),await Wh(n,e,t)}catch(e){await ri(e)}}function Fh(e,t,n){const r=Ir(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ic.forEach(((n,r)=>{const i=r.view.bu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ir(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.bu(t)&&(r=!0)})),r&&kh(n)}(r.eventManager,t),e.length&&r.sc.Wo(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Bh(e,t,n){const r=Ir(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.cc.get(t),s=i&&i.key;if(s){let e=new Ts(zr.comparator);e=e.insert(s,Rs.newNoDocument(s,Vr.min()));const n=ta().add(s),i=new ia(Vr.min(),new Map,new Cs(Mr),e,n);await Mh(r,i),r.uc=r.uc.remove(s),r.cc.delete(t),Hh(r)}else await bl(r.localStore,t,!1).then((()=>$h(r,t,n))).catch(ri)}async function Uh(e,t){const n=Ir(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ir(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ii.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);_r(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ta();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);qh(n,r,null),jh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wh(n,e)}catch(e){await ri(e)}}async function Vh(e,t,n){const r=Ir(e);try{const e=await function(e,t){const n=Ir(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(_r(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);qh(r,t,n),jh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Wh(r,e)}catch(n){await ri(n)}}function jh(e,t){(e.lc.get(t)||[]).forEach((e=>{e.resolve()})),e.lc.delete(t)}function qh(e,t,n){const r=Ir(e);let i=r.hc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function $h(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.rc.get(t))e.ic.delete(r),n&&e.sc.wc(r,n);e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((t=>{e.ac.containsKey(t)||Kh(e,t)}))}function Kh(e,t){e.oc.delete(t.path.canonicalString());const n=e.uc.get(t);null!==n&&($l(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),Hh(e))}function zh(e,t,n){for(const r of n)r instanceof Ch?(e.ac.addReference(r.key,t),Gh(e,r)):r instanceof Sh?(gr("SyncEngine","Document no longer in limbo: "+r.key),e.ac.removeReference(r.key,t),e.ac.containsKey(r.key)||Kh(e,r.key)):br()}function Gh(e,t){const n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(gr("SyncEngine","New document in limbo: "+n),e.oc.add(r),Hh(e))}function Hh(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){const t=e.oc.values().next().value;e.oc.delete(t);const n=new zr(qr.fromString(t)),r=e.fc.next();e.cc.set(r,new Oh(n)),e.uc=e.uc.insert(n,r),ql(e.remoteStore,new Ec(Xs(Ks(n.path)),r,2,gi.at))}}async function Wh(e,t,n){const r=Ir(e),i=[],s=[],o=[];r.ic.isEmpty()||(r.ic.forEach(((e,a)=>{o.push(r._c(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=hl.Ci(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.sc.Wo(i),await async function(e,t){const n=Ir(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ii.forEach(t,(t=>ii.forEach(t.Si,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ii.forEach(t.Di,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ui(e))throw e;gr("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.qi.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.qi=n.qi.insert(t,i)}}}(r.localStore,s))}async function Qh(e,t){const n=Ir(e);if(!n.currentUser.isEqual(t)){gr("SyncEngine","User change. New user:",t.toKey());const e=await ml(n.localStore,t);n.currentUser=t,function(e,t){e.lc.forEach((e=>{e.forEach((e=>{e.reject(new Tr(Er.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Wh(n,e.ji)}}function Xh(e,t){const n=Ir(e),r=n.cc.get(t);if(r&&r.nc)return ta().add(r.key);{let e=ta();const r=n.rc.get(t);if(!r)return e;for(const t of r){const r=n.ic.get(t);e=e.unionWith(r.view.ju)}return e}}function Yh(e){const t=Ir(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Mh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Bh.bind(null,t),t.sc.Wo=Eh.bind(null,t.eventManager),t.sc.wc=Th.bind(null,t.eventManager),t}function Jh(e){const t=Ir(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Uh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vh.bind(null,t),t}class Zh{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=Nl(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return pl(this.persistence,new dl,e.initialUser,this.yt)}yc(e){return new tl(rl.Bs,this.yt)}gc(e){return new Tl}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ed extends Zh{constructor(e,t,n){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ac.initialize(this,e),await Jh(this.Ac.syncEngine),await th(this.Ac.remoteStore),await this.persistence.li((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}Ic(e){return pl(this.persistence,new dl,e.initialUser,this.yt)}Tc(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Nu(n,e.asyncQueue,t)}Ec(e,t){const n=new mi(t,this.persistence);return new pi(e.asyncQueue,n)}yc(e){const t=ll(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?yu.withCacheSize(this.cacheSizeBytes):yu.DEFAULT;return new al(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Dl(),Ol(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Tl}}class td{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Fh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qh.bind(null,this.syncEngine),await hh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new bh}createDatastore(e){const t=Nl(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Al(r));var r;return function(e,t,n,r){return new Fl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Fh(this.syncEngine,e,0),s=xl.C()?new xl:new kl,new Ul(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Nh(e,t,n,r,i,s);return o&&(a.dc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Ir(e);gr("RemoteStore","RemoteStore shutting down."),t._u.add(5),await jl(t),t.mu.shutdown(),t.gu.set("Unknown")}(this.remoteStore)}}function nd(e,t,n){if(!n)throw new Tr(Er.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function rd(e){if(!zr.isDocumentKey(e))throw new Tr(Er.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function id(e){if(zr.isDocumentKey(e))throw new Tr(Er.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function sd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":br()}function od(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Tr(Er.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sd(e);throw new Tr(Er.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const ad=new Map;class cd{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Tr(Er.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Tr(Er.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Tr(Er.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ud{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Tr(Er.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Tr(Er.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Cr;switch(e.type){case"gapi":const t=e.client;return new Or(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Tr(Er.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ad.get(e);t&&(gr("ComponentProvider","Removing Datastore"),ad.delete(e),t.terminate())}(this),Promise.resolve()}}class ld{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ld(this.firestore,e,this._key)}}class hd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new hd(this.firestore,e,this._query)}}class dd extends hd{constructor(e,t,n){super(e,t,Ks(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ld(this.firestore,null,new zr(e))}withConverter(e){return new dd(this.firestore,e,this._path)}}function fd(e,t,...n){if(e=(0,a.m9)(e),nd("collection","path",t),e instanceof ud){const r=qr.fromString(t,...n);return id(r),new dd(e,null,r)}{if(!(e instanceof ld||e instanceof dd))throw new Tr(Er.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(qr.fromString(t,...n));return id(r),new dd(e.firestore,null,r)}}function pd(e,t,...n){if(e=(0,a.m9)(e),1===arguments.length&&(t=Pr.R()),nd("doc","path",t),e instanceof ud){const r=qr.fromString(t,...n);return rd(r),new ld(e,null,new zr(r))}{if(!(e instanceof ld||e instanceof dd))throw new Tr(Er.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(qr.fromString(t,...n));return rd(r),new ld(e.firestore,e instanceof dd?e.converter:null,new zr(r))}}class md{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class gd{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=dr.UNAUTHENTICATED,this.clientId=Pr.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{gr("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(gr("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Tr(Er.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=mh(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function yd(e,t){e.asyncQueue.verifyOperationInProgress(),gr("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await ml(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function wd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await vd(e);gr("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>lh(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>lh(t.remoteStore,n))),e.onlineComponents=t}async function vd(e){return e.offlineComponents||(gr("FirestoreClient","Using default OfflineComponentProvider"),await yd(e,new Zh)),e.offlineComponents}async function bd(e){return e.onlineComponents||(gr("FirestoreClient","Using default OnlineComponentProvider"),await wd(e,new td)),e.onlineComponents}function _d(e){return vd(e).then((e=>e.persistence))}function Id(e){return bd(e).then((e=>e.remoteStore))}function Ed(e){return bd(e).then((e=>e.syncEngine))}async function Td(e){const t=await bd(e),n=t.eventManager;return n.onListen=Rh.bind(null,t.syncEngine),n.onUnlisten=Ph.bind(null,t.syncEngine),n}function kd(e,t,n={}){const r=new kr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new md({next:s=>{t.enqueueAndForget((()=>Ih(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Tr(Er.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Tr(Er.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new xh(Ks(n.path),s,{includeMetadataChanges:!0,Nu:!0});return _h(e,o)}(await Td(e),e.asyncQueue,t,n,r))),r.promise}function xd(e,t,n={}){const r=new kr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new md({next:n=>{t.enqueueAndForget((()=>Ih(e,o))),n.fromCache&&"server"===r.source?i.reject(new Tr(Er.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new xh(n,s,{includeMetadataChanges:!0,Nu:!0});return _h(e,o)}(await Td(e),e.asyncQueue,t,n,r))),r.promise}class Cd{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Rl(this,"async_queue_retry"),this.Wc=()=>{const e=Ol();e&&gr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const e=Ol();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Ol();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise((()=>{}));const t=new kr;return this.Hc((()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Lc.push(e),this.Jc())))}async Jc(){if(0!==this.Lc.length){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!ui(e))throw e;gr("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro((()=>this.Jc()))}}Hc(e){const t=this.Bc.then((()=>(this.Gc=!0,e().catch((e=>{this.Kc=e,this.Gc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw yr("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Gc=!1,e))))));return this.Bc=t,t}enqueueAfterDelay(e,t,n){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=ph.createAndSchedule(this,e,t,n,(e=>this.Yc(e)));return this.Uc.push(r),r}zc(){this.Kc&&br()}verifyOperationInProgress(){}async Xc(){let e;do{e=this.Bc,await e}while(e!==this.Bc)}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then((()=>{this.Uc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()}))}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}class Sd extends ud{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Cd,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Od(this),this._firestoreClient.terminate()}}function Ad(e,t){const n="object"==typeof e?e:(0,i.Mq)(),r="string"==typeof e?e:t||"(default)",s=(0,i.qX)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,a.P0)("firestore");e&&function(e,t,n,r={}){var i;const s=(e=od(e,ud))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&wr("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=dr.MOCK_USER;else{t=(0,a.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Tr(Er.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new dr(s)}e._authCredentials=new Sr(new xr(t,n))}}(s,...e)}return s}function Dd(e){return e._firestoreClient||Od(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Od(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new yi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new gd(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Nd(e,t){Md(e=od(e,Sd));const n=Dd(e),r=e._freezeSettings(),i=new td;return Rd(n,i,new ed(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function Rd(e,t,n){const r=new kr;return e.asyncQueue.enqueue((async()=>{try{await yd(e,n),await wd(e,t),r.resolve()}catch(e){const t=e;if(!function(e){return"FirebaseError"===e.name?e.code===Er.FAILED_PRECONDITION||e.code===Er.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(t))throw t;wr("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.reject(t)}})).then((()=>r.promise))}function Ld(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await _d(e),n=await Id(e);return t.setNetworkEnabled(!0),function(e){const t=Ir(e);return t._u.delete(0),Vl(t)}(n)}))}(Dd(e=od(e,Sd)))}function Pd(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await _d(e),n=await Id(e);return t.setNetworkEnabled(!1),async function(e){const t=Ir(e);t._u.add(0),await jl(t),t.gu.set("Offline")}(n)}))}(Dd(e=od(e,Sd)))}function Md(e){if(e._initialized||e._terminated)throw new Tr(Er.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fd(ki.fromBase64String(e))}catch(e){throw new Tr(Er.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Fd(ki.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Tr(Er.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ud{constructor(e){this._methodName=e}}class Vd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Tr(Er.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Tr(Er.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mr(this._lat,e._lat)||Mr(this._long,e._long)}}const jd=/^__.*__$/;class qd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ro(e,this.data,this.fieldMask,t,this.fieldTransforms):new No(e,this.data,t,this.fieldTransforms)}}function $d(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw br()}}class Kd{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.yt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.na(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Kd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}ca(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return rf(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if($d(this.sa)&&jd.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class zd{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=n||Nl(e)}da(e,t,n,r=!1){return new Kd({sa:e,methodName:t,fa:n,path:Kr.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Gd(e){const t=e._freezeSettings(),n=Nl(e._databaseId);return new zd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Hd(e,t,n,r,i,s={}){const o=e.da(s.merge||s.mergeFields?2:0,t,n,i);Zd("Data must be an object, but it was:",o,r);const a=Yd(r,o);let c,u;if(s.merge)c=new Ds(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ef(t,r,n);if(!o.contains(i))throw new Tr(Er.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);sf(e,i)||e.push(i)}c=new Ds(e),u=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,u=o.fieldTransforms;return new qd(new Os(a),c,u)}class Wd extends Ud{_toFieldTransform(e){if(2!==e.sa)throw 1===e.sa?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wd}}function Qd(e,t,n,r=!1){return Xd(n,e.da(r?4:3,t))}function Xd(e,t){if(Jd(e=(0,a.m9)(e)))return Zd("Unsupported field value:",t,e),Yd(e,t);if(e instanceof Ud)return function(e,t){if(!$d(t.sa))throw t.ha(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ha(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Xd(i,t.aa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,a.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return co(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ur.fromDate(e);return{timestampValue:ya(t.yt,n)}}if(e instanceof Ur){const n=new Ur(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ya(t.yt,n)}}if(e instanceof Vd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fd)return{bytesValue:wa(t.yt,e._byteString)};if(e instanceof ld){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:_a(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha(`Unsupported field value: ${sd(e)}`)}(e,t)}function Yd(e,t){const n={};return _i(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bi(e,((e,r)=>{const i=Xd(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Jd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ur||e instanceof Vd||e instanceof Fd||e instanceof ld||e instanceof Ud)}function Zd(e,t,n){if(!Jd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=sd(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function ef(e,t,n){if((t=(0,a.m9)(t))instanceof Bd)return t._internalPath;if("string"==typeof t)return nf(e,t);throw rf("Field path arguments must be of type string or ",e,!1,void 0,n)}const tf=new RegExp("[~\\*/\\[\\]]");function nf(e,t,n){if(t.search(tf)>=0)throw rf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Bd(...t.split("."))._internalPath}catch(r){throw rf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function rf(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Tr(Er.INVALID_ARGUMENT,a+e+c)}function sf(e,t){return e.some((e=>e.isEqual(t)))}class of{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ld(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new af(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class af extends of{data(){return super.data()}}function cf(e,t){return"string"==typeof t?nf(e,t):t instanceof Bd?t._internalPath:t._delegate._internalPath}function uf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Tr(Er.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lf{}class hf extends lf{}function df(e,t,...n){let r=[];t instanceof lf&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof mf)).length,n=e.filter((e=>e instanceof ff)).length;if(t>1||t>0&&n>0)throw new Tr(Er.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e}class ff extends hf{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ff(e,t,n)}_apply(e){const t=this._parse(e);return wf(e._query,t),new hd(e.firestore,e.converter,Ys(e._query,t))}_parse(e){const t=Gd(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Tr(Er.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){yf(o,s);const t=[];for(const n of o)t.push(gf(r,e,n));a={arrayValue:{values:t}}}else a=gf(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||yf(o,s),a=Qd(n,"where",o,"in"===s||"not-in"===s);return is.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function pf(e,t,n){const r=t,i=cf("where",e);return ff._create(i,r,n)}class mf extends lf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mf(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ss.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)wf(n,e),n=Ys(n,e)}(e._query,t),new hd(e.firestore,e.converter,Ys(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function gf(e,t,n){if("string"==typeof(n=(0,a.m9)(n))){if(""===n)throw new Tr(Er.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ws(t)&&-1!==n.indexOf("/"))throw new Tr(Er.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(qr.fromString(n));if(!zr.isDocumentKey(r))throw new Tr(Er.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qi(e,new zr(r))}if(n instanceof ld)return qi(e,n._key);throw new Tr(Er.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sd(n)}.`)}function yf(e,t){if(!Array.isArray(e)||0===e.length)throw new Tr(Er.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Tr(Er.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function wf(e,t){if(t.isInequality()){const n=Hs(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Tr(Er.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=Gs(e);null!==i&&vf(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Tr(Er.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Tr(Er.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function vf(e,t,n){if(!n.isEqual(t))throw new Tr(Er.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class bf{convertValue(e,t="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw br()}}convertObject(e,t){const n={};return bi(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Vd(Si(e.latitude),Si(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Oi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ni(e));default:return null}}convertTimestamp(e){const t=Ci(e);return new Ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=qr.fromString(e);_r(Ka(n));const r=new wi(n.get(1),n.get(3)),i=new zr(n.popFirst(5));return r.isEqual(t)||yr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function _f(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class If{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ef extends of{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(cf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Tf extends Ef{data(e={}){return super.data(e)}}class kf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new If(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Tf(this._firestore,this._userDataWriter,n.key,n,new If(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Tr(Er.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Tf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new If(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Tf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new If(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:xf(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return br()}}function Cf(e){e=od(e,ld);const t=od(e.firestore,Sd);return kd(Dd(t),e._key).then((n=>Rf(t,e,n)))}class Sf extends bf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ld(this.firestore,null,t)}}function Af(e){e=od(e,hd);const t=od(e.firestore,Sd),n=Dd(t),r=new Sf(t);return uf(e._query),xd(n,e._query).then((n=>new kf(t,r,e,n)))}function Df(e,t,n){e=od(e,ld);const r=od(e.firestore,Sd),i=_f(e.converter,t,n);return Nf(r,[Hd(Gd(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,To.none())])}function Of(e){return Nf(od(e.firestore,Sd),[new Fo(e._key,To.none())])}function Nf(e,t){return function(e,t){const n=new kr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Jh(e);try{const e=await function(e,t){const n=Ir(e),r=Ur.now(),i=t.reduce(((e,t)=>e.add(t.key)),ta());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Go(),c=ta();return n.Gi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Do(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Ro(e.key,t,Ns(t.value.mapValue),To.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Qo(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.hc[e.currentUser.toKey()];r||(r=new Ts(Mr)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Wh(r,e.changes),await th(r.remoteStore)}catch(e){const t=mh(e,"Failed to persist write");n.reject(t)}}(await Ed(e),t,n))),n.promise}(Dd(e),t)}function Rf(e,t,n){const r=n.docs.get(t._key),i=new Sf(e);return new Ef(e,i,t._key,r,new If(n.hasPendingWrites,n.fromCache),t.converter)}function Lf(){return new Wd("deleteField")}!function(e,t=!0){!function(e){fr=e}(i.Jn),(0,i.Xd)(new s.wA("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new Sd(new Ar(e.getProvider("auth-internal")),new Rr(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Tr(Er.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wi(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),(0,i.KN)(hr,"3.8.3",e),(0,i.KN)(hr,"3.8.3","esm2017")}()},135:(e,t,n)=>{"use strict";n.d(t,{xS:()=>A,sN:()=>m,NA:()=>y});var r=n(238),i=n(444),s=n(463),o=n(333);n(578);const a="@firebase/remote-config",c="0.4.3";class u{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}const l="remote-config",h={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},d=new i.LL("remoteconfig","Remote Config",h);const f=["1","true","t","yes","y","on"];class p{constructor(e,t=""){this._source=e,this._value=t}asString(){return this._value}asBoolean(){return"static"!==this._source&&f.indexOf(this._value.toLowerCase())>=0}asNumber(){if("static"===this._source)return 0;let e=Number(this._value);return isNaN(e)&&(e=0),e}getSource(){return this._source}}function m(e=(0,r.Mq)()){e=(0,i.m9)(e);return(0,r.qX)(e,l).getImmediate()}async function g(e){const t=(0,i.m9)(e),n=new u;setTimeout((async()=>{n.abort()}),t.settings.fetchTimeoutMillis);try{await t._client.fetch({cacheMaxAgeMillis:t.settings.minimumFetchIntervalMillis,signal:n}),await t._storageCache.setLastFetchStatus("success")}catch(e){const n=function(e,t){return e instanceof i.ZR&&-1!==e.code.indexOf(t)}(e,"fetch-throttle")?"throttle":"failure";throw await t._storageCache.setLastFetchStatus(n),e}}function y(e,t){const n=(0,i.m9)(e);n._isInitializationComplete||n._logger.debug(`A value was requested for key "${t}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const r=n._storageCache.getActiveConfig();return r&&void 0!==r[t]?new p("remote",r[t]):n.defaultConfig&&void 0!==n.defaultConfig[t]?new p("default",String(n.defaultConfig[t])):(n._logger.debug(`Returning static value for key "${t}". Define a default or remote value if this is unintentional.`),new p("static"))}class w{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}async fetch(e){const[t,n]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return n;e.eTag=n&&n.eTag;const r=await this.client.fetch(e),i=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===r.status&&i.push(this.storage.setLastSuccessfulFetchResponse(r)),await Promise.all(i),r}}function v(e=navigator){return e.languages&&e.languages[0]||e.language}class b{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}async fetch(e){const[t,n]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,i={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:n,app_id:this.appId,language_code:v()},o={method:"POST",headers:i,body:JSON.stringify(s)},a=fetch(r,o),c=new Promise(((t,n)=>{e.signal.addEventListener((()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))}));let u;try{await Promise.race([a,c]),u=await a}catch(e){let t="fetch-client-network";throw"AbortError"===(null==e?void 0:e.name)&&(t="fetch-timeout"),d.create(t,{originalErrorMessage:null==e?void 0:e.message})}let l=u.status;const h=u.headers.get("ETag")||void 0;let f,p;if(200===u.status){let e;try{e=await u.json()}catch(e){throw d.create("fetch-client-parse",{originalErrorMessage:null==e?void 0:e.message})}f=e.entries,p=e.state}if("INSTANCE_STATE_UNSPECIFIED"===p?l=500:"NO_CHANGE"===p?l=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==l&&200!==l)throw d.create("fetch-status",{httpStatus:l});return{status:l,eTag:h,config:f}}}class _{constructor(e,t){this.client=e,this.storage=t}async fetch(e){const t=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)}async attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(d.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(e.signal,t);try{const t=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),t}catch(t){if(!function(e){if(!(e instanceof i.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t))throw t;const r={throttleEndTimeMillis:Date.now()+(0,i.$s)(n),backoffCount:n+1};return await this.storage.setThrottleMetadata(r),this.attemptFetch(e,r)}}}class I{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function E(e,t){const n=e.target.error||void 0;return d.create(t,{originalErrorMessage:n&&(null==n?void 0:n.message)})}const T="app_namespace_store",k="firebase_remote_config",x=1;class C{constructor(e,t,n,r=function(){return new Promise(((e,t)=>{try{const n=indexedDB.open(k,x);n.onerror=e=>{t(E(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;0===e.oldVersion&&t.createObjectStore(T,{keyPath:"compositeKey"})}}catch(e){t(d.create("storage-open",{originalErrorMessage:null==e?void 0:e.message}))}}))}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(e){const t=await this.openDbPromise;return new Promise(((n,r)=>{const i=t.transaction([T],"readonly").objectStore(T),s=this.createCompositeKey(e);try{const e=i.get(s);e.onerror=e=>{r(E(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;n(t?t.value:void 0)}}catch(e){r(d.create("storage-get",{originalErrorMessage:null==e?void 0:e.message}))}}))}async set(e,t){const n=await this.openDbPromise;return new Promise(((r,i)=>{const s=n.transaction([T],"readwrite").objectStore(T),o=this.createCompositeKey(e);try{const e=s.put({compositeKey:o,value:t});e.onerror=e=>{i(E(e,"storage-set"))},e.onsuccess=()=>{r()}}catch(e){i(d.create("storage-set",{originalErrorMessage:null==e?void 0:e.message}))}}))}async delete(e){const t=await this.openDbPromise;return new Promise(((n,r)=>{const i=t.transaction([T],"readwrite").objectStore(T),s=this.createCompositeKey(e);try{const e=i.delete(s);e.onerror=e=>{r(E(e,"storage-delete"))},e.onsuccess=()=>{n()}}catch(e){r(d.create("storage-delete",{originalErrorMessage:null==e?void 0:e.message}))}}))}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class S{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),r=await e;r&&(this.lastFetchStatus=r);const i=await t;i&&(this.lastSuccessfulFetchTimestampMillis=i);const s=await n;s&&(this.activeConfig=s)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}async function A(e){return e=(0,i.m9)(e),await g(e),async function(e){const t=(0,i.m9)(e),[n,r]=await Promise.all([t._storage.getLastSuccessfulFetchResponse(),t._storage.getActiveConfigEtag()]);return!!(n&&n.config&&n.eTag&&n.eTag!==r)&&(await Promise.all([t._storageCache.setActiveConfig(n.config),t._storage.setActiveConfigEtag(n.eTag)]),!0)}(e)}(0,r.Xd)(new s.wA(l,(function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw d.create("registration-window");if(!(0,i.hl)())throw d.create("indexed-db-unavailable");const{projectId:c,apiKey:u,appId:l}=n.options;if(!c)throw d.create("registration-project-id");if(!u)throw d.create("registration-api-key");if(!l)throw d.create("registration-app-id");t=t||"firebase";const h=new C(l,n.name,t),f=new S(h),p=new o.Yd(a);p.logLevel=o.in.ERROR;const m=new b(s,r.Jn,t,c,u,l),g=new _(m,h),y=new w(g,h,f,p),v=new I(n,y,f,h,p);return function(e){const t=(0,i.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then((()=>{t._isInitializationComplete=!0}))),t._initializePromise}(v),v}),"PUBLIC").setMultipleInstances(!0)),(0,r.KN)(a,c),(0,r.KN)(a,c,"esm2017")},531:(e,t,n)=>{"use strict";n.d(t,{X3:()=>g});const r=(e,t)=>t.some((t=>e instanceof t));let i,s;const o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),p(o.get(this))}:function(...t){return p(e.apply(m(this),t))}:function(t,...n){const r=e.call(m(this),t,...n);return c.set(r,t.sort?t.sort():[t]),p(r)}}function f(e){return"function"==typeof e?d(e):(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));a.set(e,t)}(e),r(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(p(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&o.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),l.set(t,e)),t}const m=e=>l.get(e);function g(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=p(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(p(o.result),e.oldVersion,e.newVersion,p(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}const y=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],v=new Map;function b(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(v.get(t))return v.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return v.set(t,s),s}h=(e=>({...e,get:(t,n,r)=>b(t,n)||e.get(t,n,r),has:(t,n)=>!!b(t,n)||e.has(t,n)}))(h)}},__webpack_module_cache__={},deferred;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,n,r)=>{if(!t){var i=1/0;for(c=0;c<deferred.length;c++){for(var[t,n,r]=deferred[c],s=!0,o=0;o<t.length;o++)(!1&r||i>=r)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[o])))?t.splice(o--,1):(s=!1,r<i&&(i=r));if(s){deferred.splice(c--,1);var a=n();void 0!==a&&(e=a)}}return e}r=r||0;for(var c=deferred.length;c>0&&deferred[c-1][2]>r;c--)deferred[c]=deferred[c-1];deferred[c]=[t,n,r]},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={177:0,879:0};__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[s,o,a]=n,c=0;if(s.some((t=>0!==e[t]))){for(r in o)__webpack_require__.o(o,r)&&(__webpack_require__.m[r]=o[r]);if(a)var u=a(__webpack_require__)}for(t&&t(n);c<s.length;c++)i=s[c],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.O(void 0,[879],(()=>__webpack_require__(641)));var __webpack_exports__=__webpack_require__.O(void 0,[879],(()=>__webpack_require__(141)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();