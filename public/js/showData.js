/*! For license information please see showData.js.LICENSE.txt */
(()=>{var __webpack_modules__={444:(t,e,n)=>{"use strict";n.d(e,{$s:()=>U,BH:()=>p,G6:()=>_,L:()=>o,LL:()=>k,P0:()=>h,Pz:()=>f,Sg:()=>g,ZR:()=>T,aH:()=>d,b$:()=>w,eu:()=>I,hl:()=>x,m9:()=>z,ne:()=>L,pd:()=>P,q4:()=>u,ru:()=>b,tV:()=>a,uI:()=>y,vZ:()=>A,w1:()=>v,xO:()=>M,xb:()=>C,z$:()=>m,zI:()=>E,zd:()=>O});var i=n(155);const s=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=63&s|128):55296==(64512&s)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=63&s|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=63&s|128)}return e},r={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const s=t[e],r=e+1<t.length,o=r?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=s>>2,u=(3&s)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,r||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(r>>10)),e[i++]=String.fromCharCode(56320+(1023&r))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],r=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==r||null==o||null==a)throw Error();const c=s<<2|r>>4;if(i.push(c),64!==o){const t=r<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},o=function(t){return function(t){const e=s(t);return r.encodeByteArray(e,!0)}(t).replace(/\./g,"")},a=function(t){try{return r.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const c=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,l=()=>{try{return c()||(()=>{if(void 0===i||void 0===i.env)return;const t=i.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&a(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},u=t=>{var e,n;return null===(n=null===(e=l())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},h=t=>{const e=u(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},d=()=>{var t;return null===(t=l())||void 0===t?void 0:t.config},f=t=>{var e;return null===(e=l())||void 0===e?void 0:e[`_${t}`]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function g(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(r)),""].join(".")}function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function b(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function w(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function v(){const t=m();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _(){return!function(){var t;const e=null===(t=l())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x(){try{return"object"==typeof indexedDB}catch(t){return!1}}function I(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function E(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class T extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.create)}}class k{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],r=s?function(t,e){return t.replace(S,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${r} (${i}).`;return new T(i,o,n)}}const S=/\{\$([^}]+)}/g;function C(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function A(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const n=t[s],r=e[s];if(D(n)&&D(r)){if(!A(n,r))return!1}else if(n!==r)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function D(t){return null!==t&&"object"==typeof t}function M(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function O(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function P(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function L(t,e){const n=new R(t,e);return n.subscribe.bind(n)}class R{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=N),void 0===i.error&&(i.error=N),void 0===i.complete&&(i.complete=N);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),s}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function N(){}const F=1e3,B=2,V=144e5,j=.5;function U(t,e=F,n=B){const i=e*Math.pow(n,t),s=Math.round(j*i*(Math.random()-.5)*2);return Math.min(V,i+s)}function z(t){return t&&t._delegate?t._delegate:t}},669:(t,e,n)=>{t.exports=n(609)},448:(t,e,n)=>{"use strict";var i=n(867),s=n(26),r=n(372),o=n(327),a=n(97),c=n(109),l=n(985),u=n(61),h=n(655),d=n(263);t.exports=function(t){return new Promise((function(e,n){var f,p=t.data,g=t.headers,m=t.responseType;function y(){t.cancelToken&&t.cancelToken.unsubscribe(f),t.signal&&t.signal.removeEventListener("abort",f)}i.isFormData(p)&&delete g["Content-Type"];var b=new XMLHttpRequest;if(t.auth){var w=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";g.Authorization="Basic "+btoa(w+":"+v)}var _=a(t.baseURL,t.url);function x(){if(b){var i="getAllResponseHeaders"in b?c(b.getAllResponseHeaders()):null,r={data:m&&"text"!==m&&"json"!==m?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:i,config:t,request:b};s((function(t){e(t),y()}),(function(t){n(t),y()}),r),b=null}}if(b.open(t.method.toUpperCase(),o(_,t.params,t.paramsSerializer),!0),b.timeout=t.timeout,"onloadend"in b?b.onloadend=x:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(x)},b.onabort=function(){b&&(n(u("Request aborted",t,"ECONNABORTED",b)),b=null)},b.onerror=function(){n(u("Network Error",t,null,b)),b=null},b.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",i=t.transitional||h.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(u(e,t,i.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},i.isStandardBrowserEnv()){var I=(t.withCredentials||l(_))&&t.xsrfCookieName?r.read(t.xsrfCookieName):void 0;I&&(g[t.xsrfHeaderName]=I)}"setRequestHeader"in b&&i.forEach(g,(function(t,e){void 0===p&&"content-type"===e.toLowerCase()?delete g[e]:b.setRequestHeader(e,t)})),i.isUndefined(t.withCredentials)||(b.withCredentials=!!t.withCredentials),m&&"json"!==m&&(b.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&b.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(f=function(t){b&&(n(!t||t&&t.type?new d("canceled"):t),b.abort(),b=null)},t.cancelToken&&t.cancelToken.subscribe(f),t.signal&&(t.signal.aborted?f():t.signal.addEventListener("abort",f))),p||(p=null),b.send(p)}))}},609:(t,e,n)=>{"use strict";var i=n(867),s=n(849),r=n(321),o=n(185);var a=function t(e){var n=new r(e),a=s(r.prototype.request,n);return i.extend(a,r.prototype,n),i.extend(a,n),a.create=function(n){return t(o(e,n))},a}(n(655));a.Axios=r,a.Cancel=n(263),a.CancelToken=n(972),a.isCancel=n(502),a.VERSION=n(288).version,a.all=function(t){return Promise.all(t)},a.spread=n(713),a.isAxiosError=n(268),t.exports=a,t.exports.default=a},263:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},972:(t,e,n)=>{"use strict";var i=n(263);function s(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,i=n._listeners.length;for(e=0;e<i;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,i=new Promise((function(t){n.subscribe(t),e=t})).then(t);return i.cancel=function(){n.unsubscribe(e)},i},t((function(t){n.reason||(n.reason=new i(t),e(n.reason))}))}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},s.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},s.source=function(){var t;return{token:new s((function(e){t=e})),cancel:t}},t.exports=s},502:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:(t,e,n)=>{"use strict";var i=n(867),s=n(327),r=n(782),o=n(572),a=n(185),c=n(875),l=c.validators;function u(t){this.defaults=t,this.interceptors={request:new r,response:new r}}u.prototype.request=function(t,e){if("string"==typeof t?(e=e||{}).url=t:e=t||{},!e.url)throw new Error("Provided config url is not valid");(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(s=s&&t.synchronous,i.unshift(t.fulfilled,t.rejected))}));var r,u=[];if(this.interceptors.response.forEach((function(t){u.push(t.fulfilled,t.rejected)})),!s){var h=[o,void 0];for(Array.prototype.unshift.apply(h,i),h=h.concat(u),r=Promise.resolve(e);h.length;)r=r.then(h.shift(),h.shift());return r}for(var d=e;i.length;){var f=i.shift(),p=i.shift();try{d=f(d)}catch(t){p(t);break}}try{r=o(d)}catch(t){return Promise.reject(t)}for(;u.length;)r=r.then(u.shift(),u.shift());return r},u.prototype.getUri=function(t){if(!t.url)throw new Error("Provided config url is not valid");return t=a(this.defaults,t),s(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,n){return this.request(a(n||{},{method:t,url:e,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,n,i){return this.request(a(i||{},{method:t,url:e,data:n}))}})),t.exports=u},782:(t,e,n)=>{"use strict";var i=n(867);function s(){this.handlers=[]}s.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},s.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},s.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=s},97:(t,e,n)=>{"use strict";var i=n(793),s=n(303);t.exports=function(t,e){return t&&!i(e)?s(t,e):e}},61:(t,e,n)=>{"use strict";var i=n(481);t.exports=function(t,e,n,s,r){var o=new Error(t);return i(o,e,n,s,r)}},572:(t,e,n)=>{"use strict";var i=n(867),s=n(527),r=n(502),o=n(655),a=n(263);function c(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new a("canceled")}t.exports=function(t){return c(t),t.headers=t.headers||{},t.data=s.call(t,t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||o.adapter)(t).then((function(e){return c(t),e.data=s.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return r(e)||(c(t),e&&e.response&&(e.response.data=s.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:t=>{"use strict";t.exports=function(t,e,n,i,s){return t.config=e,n&&(t.code=n),t.request=i,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}},185:(t,e,n)=>{"use strict";var i=n(867);t.exports=function(t,e){e=e||{};var n={};function s(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function r(n){return i.isUndefined(e[n])?i.isUndefined(t[n])?void 0:s(void 0,t[n]):s(t[n],e[n])}function o(t){if(!i.isUndefined(e[t]))return s(void 0,e[t])}function a(n){return i.isUndefined(e[n])?i.isUndefined(t[n])?void 0:s(void 0,t[n]):s(void 0,e[n])}function c(n){return n in e?s(t[n],e[n]):n in t?s(void 0,t[n]):void 0}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return i.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=l[t]||r,s=e(t);i.isUndefined(s)&&e!==c||(n[t]=s)})),n}},26:(t,e,n)=>{"use strict";var i=n(61);t.exports=function(t,e,n){var s=n.config.validateStatus;n.status&&s&&!s(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},527:(t,e,n)=>{"use strict";var i=n(867),s=n(655);t.exports=function(t,e,n){var r=this||s;return i.forEach(n,(function(n){t=n.call(r,t,e)})),t}},655:(t,e,n)=>{"use strict";var i=n(155),s=n(867),r=n(16),o=n(481),a={"Content-Type":"application/x-www-form-urlencoded"};function c(t,e){!s.isUndefined(t)&&s.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var l,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==i&&"[object process]"===Object.prototype.toString.call(i))&&(l=n(448)),l),transformRequest:[function(t,e){return r(e,"Accept"),r(e,"Content-Type"),s.isFormData(t)||s.isArrayBuffer(t)||s.isBuffer(t)||s.isStream(t)||s.isFile(t)||s.isBlob(t)?t:s.isArrayBufferView(t)?t.buffer:s.isURLSearchParams(t)?(c(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):s.isObject(t)||e&&"application/json"===e["Content-Type"]?(c(e,"application/json"),function(t,e,n){if(s.isString(t))try{return(e||JSON.parse)(t),s.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||u.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,r=!n&&"json"===this.responseType;if(r||i&&s.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(r){if("SyntaxError"===t.name)throw o(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};s.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),s.forEach(["post","put","patch"],(function(t){u.headers[t]=s.merge(a)})),t.exports=u},288:t=>{t.exports={version:"0.25.0"}},849:t=>{"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},327:(t,e,n)=>{"use strict";var i=n(867);function s(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(i.isURLSearchParams(e))r=e.toString();else{var o=[];i.forEach(e,(function(t,e){null!=t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),o.push(s(e)+"="+s(t))})))})),r=o.join("&")}if(r){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}},303:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},372:(t,e,n)=>{"use strict";var i=n(867);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,s,r,o){var a=[];a.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(s)&&a.push("path="+s),i.isString(r)&&a.push("domain="+r),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},268:(t,e,n)=>{"use strict";var i=n(867);t.exports=function(t){return i.isObject(t)&&!0===t.isAxiosError}},985:(t,e,n)=>{"use strict";var i=n(867);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function s(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=s(window.location.href),function(e){var n=i.isString(e)?s(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},16:(t,e,n)=>{"use strict";var i=n(867);t.exports=function(t,e){i.forEach(t,(function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])}))}},109:(t,e,n)=>{"use strict";var i=n(867),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,r,o={};return t?(i.forEach(t.split("\n"),(function(t){if(r=t.indexOf(":"),e=i.trim(t.substr(0,r)).toLowerCase(),n=i.trim(t.substr(r+1)),e){if(o[e]&&s.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}})),o):o}},713:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},875:(t,e,n)=>{"use strict";var i=n(288).version,s={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){s[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var r={};s.transitional=function(t,e,n){function s(t,e){return"[Axios v"+i+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,i,o){if(!1===t)throw new Error(s(i," has been removed"+(e?" in "+e:"")));return e&&!r[i]&&(r[i]=!0,console.warn(s(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,o)}},t.exports={assertOptions:function(t,e,n){if("object"!=typeof t)throw new TypeError("options must be an object");for(var i=Object.keys(t),s=i.length;s-- >0;){var r=i[s],o=e[r];if(o){var a=t[r],c=void 0===a||o(a,r,t);if(!0!==c)throw new TypeError("option "+r+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+r)}},validators:s}},867:(t,e,n)=>{"use strict";var i=n(849),s=Object.prototype.toString;function r(t){return Array.isArray(t)}function o(t){return void 0===t}function a(t){return"[object ArrayBuffer]"===s.call(t)}function c(t){return null!==t&&"object"==typeof t}function l(t){if("[object Object]"!==s.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function u(t){return"[object Function]"===s.call(t)}function h(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),r(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}t.exports={isArray:r,isArrayBuffer:a,isBuffer:function(t){return null!==t&&!o(t)&&null!==t.constructor&&!o(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"[object FormData]"===s.call(t)},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&a(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:c,isPlainObject:l,isUndefined:o,isDate:function(t){return"[object Date]"===s.call(t)},isFile:function(t){return"[object File]"===s.call(t)},isBlob:function(t){return"[object Blob]"===s.call(t)},isFunction:u,isStream:function(t){return c(t)&&u(t.pipe)},isURLSearchParams:function(t){return"[object URLSearchParams]"===s.call(t)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:h,merge:function t(){var e={};function n(n,i){l(e[i])&&l(n)?e[i]=t(e[i],n):l(n)?e[i]=t({},n):r(n)?e[i]=n.slice():e[i]=n}for(var i=0,s=arguments.length;i<s;i++)h(arguments[i],n);return e},extend:function(t,e,n){return h(e,(function(e,s){t[s]=n&&"function"==typeof e?i(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},155:t=>{var e,n,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:s}catch(t){e=s}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(t){n=r}}();var a,c=[],l=!1,u=-1;function h(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&d())}function d(){if(!l){var t=o(h);l=!0;for(var e=c.length;e;){for(a=c,c=[];++u<e;)a&&a[u].run();u=-1,e=c.length}a=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||l||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},455:function(t){t.exports=function(){"use strict";var t={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const e="swal2-",n=t=>{const n={};for(const i in t)n[t[i]]=e+t[i];return n},i=n(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),s=n(["success","warning","info","question","error"]),r="SweetAlert2:",o=t=>{const e=[];for(let n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e},a=t=>t.charAt(0).toUpperCase()+t.slice(1),c=t=>{console.warn(`${r} ${"object"==typeof t?t.join(" "):t}`)},l=t=>{console.error(`${r} ${t}`)},u=[],h=t=>{u.includes(t)||(u.push(t),c(t))},d=(t,e)=>{h(`"${t}" is deprecated and will be removed in the next major release. Please use "${e}" instead.`)},f=t=>"function"==typeof t?t():t,p=t=>t&&"function"==typeof t.toPromise,g=t=>p(t)?t.toPromise():Promise.resolve(t),m=t=>t&&Promise.resolve(t)===t,y=()=>document.body.querySelector(`.${i.container}`),b=t=>{const e=y();return e?e.querySelector(t):null},w=t=>b(`.${t}`),v=()=>w(i.popup),_=()=>w(i.icon),x=()=>w(i["icon-content"]),I=()=>w(i.title),E=()=>w(i["html-container"]),T=()=>w(i.image),k=()=>w(i["progress-steps"]),S=()=>w(i["validation-message"]),C=()=>b(`.${i.actions} .${i.confirm}`),A=()=>b(`.${i.actions} .${i.cancel}`),D=()=>b(`.${i.actions} .${i.deny}`),M=()=>w(i["input-label"]),O=()=>b(`.${i.loader}`),P=()=>w(i.actions),L=()=>w(i.footer),R=()=>w(i["timer-progress-bar"]),N=()=>w(i.close),F='\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n',B=()=>{const t=Array.from(v().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort(((t,e)=>{const n=parseInt(t.getAttribute("tabindex")),i=parseInt(e.getAttribute("tabindex"));return n>i?1:n<i?-1:0})),e=Array.from(v().querySelectorAll(F)).filter((t=>"-1"!==t.getAttribute("tabindex")));return o(t.concat(e)).filter((t=>st(t)))},V=()=>q(document.body,i.shown)&&!q(document.body,i["toast-shown"])&&!q(document.body,i["no-backdrop"]),j=()=>v()&&q(v(),i.toast),U=()=>v().hasAttribute("data-loading"),z={previousBodyPadding:null},$=(t,e)=>{if(t.textContent="",e){const n=(new DOMParser).parseFromString(e,"text/html");Array.from(n.querySelector("head").childNodes).forEach((e=>{t.appendChild(e)})),Array.from(n.querySelector("body").childNodes).forEach((e=>{e instanceof HTMLVideoElement||e instanceof HTMLAudioElement?t.appendChild(e.cloneNode(!0)):t.appendChild(e)}))}},q=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let e=0;e<n.length;e++)if(!t.classList.contains(n[e]))return!1;return!0},H=(t,e)=>{Array.from(t.classList).forEach((n=>{Object.values(i).includes(n)||Object.values(s).includes(n)||Object.values(e.showClass).includes(n)||t.classList.remove(n)}))},W=(t,e,n)=>{if(H(t,e),e.customClass&&e.customClass[n]){if("string"!=typeof e.customClass[n]&&!e.customClass[n].forEach)return void c(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof e.customClass[n]}"`);X(t,e.customClass[n])}},K=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${i.popup} > .${i[e]}`);case"checkbox":return t.querySelector(`.${i.popup} > .${i.checkbox} input`);case"radio":return t.querySelector(`.${i.popup} > .${i.radio} input:checked`)||t.querySelector(`.${i.popup} > .${i.radio} input:first-child`);case"range":return t.querySelector(`.${i.popup} > .${i.range} input`);default:return t.querySelector(`.${i.popup} > .${i.input}`)}},G=t=>{if(t.focus(),"file"!==t.type){const e=t.value;t.value="",t.value=e}},Y=(t,e,n)=>{t&&e&&("string"==typeof e&&(e=e.split(/\s+/).filter(Boolean)),e.forEach((e=>{Array.isArray(t)?t.forEach((t=>{n?t.classList.add(e):t.classList.remove(e)})):n?t.classList.add(e):t.classList.remove(e)})))},X=(t,e)=>{Y(t,e,!0)},Q=(t,e)=>{Y(t,e,!1)},J=(t,e)=>{const n=Array.from(t.children);for(let t=0;t<n.length;t++){const i=n[t];if(i instanceof HTMLElement&&q(i,e))return i}},Z=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?t.style[e]="number"==typeof n?`${n}px`:n:t.style.removeProperty(e)},tt=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";t.style.display=e},et=t=>{t.style.display="none"},nt=(t,e,n,i)=>{const s=t.querySelector(e);s&&(s.style[n]=i)},it=function(t,e){e?tt(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):et(t)},st=t=>!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),rt=()=>!st(C())&&!st(D())&&!st(A()),ot=t=>!!(t.scrollHeight>t.clientHeight),at=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),i=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||i>0},ct=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=R();st(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"}),10))},lt=()=>{const t=R(),e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=e/parseInt(window.getComputedStyle(t).width)*100;t.style.width=`${n}%`},ut=100,ht={},dt=()=>{ht.previousActiveElement instanceof HTMLElement?(ht.previousActiveElement.focus(),ht.previousActiveElement=null):document.body&&document.body.focus()},ft=t=>new Promise((e=>{if(!t)return e();const n=window.scrollX,i=window.scrollY;ht.restoreFocusTimeout=setTimeout((()=>{dt(),e()}),ut),window.scrollTo(n,i)})),pt=()=>"undefined"==typeof window||"undefined"==typeof document,gt=`\n <div aria-labelledby="${i.title}" aria-describedby="${i["html-container"]}" class="${i.popup}" tabindex="-1">\n   <button type="button" class="${i.close}"></button>\n   <ul class="${i["progress-steps"]}"></ul>\n   <div class="${i.icon}"></div>\n   <img class="${i.image}" />\n   <h2 class="${i.title}" id="${i.title}"></h2>\n   <div class="${i["html-container"]}" id="${i["html-container"]}"></div>\n   <input class="${i.input}" />\n   <input type="file" class="${i.file}" />\n   <div class="${i.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${i.select}"></select>\n   <div class="${i.radio}"></div>\n   <label for="${i.checkbox}" class="${i.checkbox}">\n     <input type="checkbox" />\n     <span class="${i.label}"></span>\n   </label>\n   <textarea class="${i.textarea}"></textarea>\n   <div class="${i["validation-message"]}" id="${i["validation-message"]}"></div>\n   <div class="${i.actions}">\n     <div class="${i.loader}"></div>\n     <button type="button" class="${i.confirm}"></button>\n     <button type="button" class="${i.deny}"></button>\n     <button type="button" class="${i.cancel}"></button>\n   </div>\n   <div class="${i.footer}"></div>\n   <div class="${i["timer-progress-bar-container"]}">\n     <div class="${i["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),mt=()=>{const t=y();return!!t&&(t.remove(),Q([document.documentElement,document.body],[i["no-backdrop"],i["toast-shown"],i["has-column"]]),!0)},yt=()=>{ht.currentInstance.resetValidationMessage()},bt=()=>{const t=v(),e=J(t,i.input),n=J(t,i.file),s=t.querySelector(`.${i.range} input`),r=t.querySelector(`.${i.range} output`),o=J(t,i.select),a=t.querySelector(`.${i.checkbox} input`),c=J(t,i.textarea);e.oninput=yt,n.onchange=yt,o.onchange=yt,a.onchange=yt,c.oninput=yt,s.oninput=()=>{yt(),r.value=s.value},s.onchange=()=>{yt(),r.value=s.value}},wt=t=>"string"==typeof t?document.querySelector(t):t,vt=t=>{const e=v();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},_t=t=>{"rtl"===window.getComputedStyle(t).direction&&X(y(),i.rtl)},xt=t=>{const e=mt();if(pt())return void l("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=i.container,e&&X(n,i["no-transition"]),$(n,gt);const s=wt(t.target);s.appendChild(n),vt(t),_t(s),bt()},It=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):"object"==typeof t?Et(t,e):t&&$(e,t)},Et=(t,e)=>{t.jquery?Tt(e,t):$(e,t.toString())},Tt=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},kt=(()=>{if(pt())return!1;const t=document.createElement("div"),e={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&void 0!==t.style[n])return e[n];return!1})(),St=()=>{const t=document.createElement("div");t.className=i["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},Ct=(t,e)=>{const n=P(),i=O();e.showConfirmButton||e.showDenyButton||e.showCancelButton?tt(n):et(n),W(n,e,"actions"),At(n,i,e),$(i,e.loaderHtml),W(i,e,"loader")};function At(t,e,n){const i=C(),s=D(),r=A();Mt(i,"confirm",n),Mt(s,"deny",n),Mt(r,"cancel",n),Dt(i,s,r,n),n.reverseButtons&&(n.toast?(t.insertBefore(r,i),t.insertBefore(s,i)):(t.insertBefore(r,e),t.insertBefore(s,e),t.insertBefore(i,e)))}function Dt(t,e,n,s){s.buttonsStyling?(X([t,e,n],i.styled),s.confirmButtonColor&&(t.style.backgroundColor=s.confirmButtonColor,X(t,i["default-outline"])),s.denyButtonColor&&(e.style.backgroundColor=s.denyButtonColor,X(e,i["default-outline"])),s.cancelButtonColor&&(n.style.backgroundColor=s.cancelButtonColor,X(n,i["default-outline"]))):Q([t,e,n],i.styled)}function Mt(t,e,n){it(t,n[`show${a(e)}Button`],"inline-block"),$(t,n[`${e}ButtonText`]),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]),t.className=i[e],W(t,n,`${e}Button`),X(t,n[`${e}ButtonClass`])}const Ot=(t,e)=>{const n=N();$(n,e.closeButtonHtml),W(n,e,"closeButton"),it(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel)},Pt=(t,e)=>{const n=y();n&&(Lt(n,e.backdrop),Rt(n,e.position),Nt(n,e.grow),W(n,e,"container"))};function Lt(t,e){"string"==typeof e?t.style.background=e:e||X([document.documentElement,document.body],i["no-backdrop"])}function Rt(t,e){e in i?X(t,i[e]):(c('The "position" parameter is not valid, defaulting to "center"'),X(t,i.center))}function Nt(t,e){if(e&&"string"==typeof e){const n=`grow-${e}`;n in i&&X(t,i[n])}}const Ft=["input","file","range","select","radio","checkbox","textarea"],Bt=(e,n)=>{const s=v(),r=t.innerParams.get(e),o=!r||n.input!==r.input;Ft.forEach((t=>{const e=J(s,i[t]);Ut(t,n.inputAttributes),e.className=i[t],o&&et(e)})),n.input&&(o&&Vt(n),zt(n))},Vt=t=>{if(!Kt[t.input])return void l(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${t.input}"`);const e=Ht(t.input),n=Kt[t.input](e,t);tt(e),t.inputAutoFocus&&setTimeout((()=>{G(n)}))},jt=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["type","value","style"].includes(n)||t.removeAttribute(n)}},Ut=(t,e)=>{const n=K(v(),t);if(n){jt(n);for(const t in e)n.setAttribute(t,e[t])}},zt=t=>{const e=Ht(t.input);"object"==typeof t.customClass&&X(e,t.customClass.input)},$t=(t,e)=>{t.placeholder&&!e.inputPlaceholder||(t.placeholder=e.inputPlaceholder)},qt=(t,e,n)=>{if(n.inputLabel){t.id=i.input;const s=document.createElement("label"),r=i["input-label"];s.setAttribute("for",t.id),s.className=r,"object"==typeof n.customClass&&X(s,n.customClass.inputLabel),s.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",s)}},Ht=t=>J(v(),i[t]||i.input),Wt=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:m(e)||c(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Kt={};Kt.text=Kt.email=Kt.password=Kt.number=Kt.tel=Kt.url=(t,e)=>(Wt(t,e.inputValue),qt(t,t,e),$t(t,e),t.type=e.input,t),Kt.file=(t,e)=>(qt(t,t,e),$t(t,e),t),Kt.range=(t,e)=>{const n=t.querySelector("input"),i=t.querySelector("output");return Wt(n,e.inputValue),n.type=e.input,Wt(i,e.inputValue),qt(n,t,e),t},Kt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");$(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return qt(t,t,e),t},Kt.radio=t=>(t.textContent="",t),Kt.checkbox=(t,e)=>{const n=K(v(),"checkbox");n.value="1",n.id=i.checkbox,n.checked=Boolean(e.inputValue);const s=t.querySelector("span");return $(s,e.inputPlaceholder),n},Kt.textarea=(t,e)=>{Wt(t,e.inputValue),$t(t,e),qt(t,t,e);const n=t=>parseInt(window.getComputedStyle(t).marginLeft)+parseInt(window.getComputedStyle(t).marginRight);return setTimeout((()=>{if("MutationObserver"in window){const e=parseInt(window.getComputedStyle(v()).width);new MutationObserver((()=>{const i=t.offsetWidth+n(t);v().style.width=i>e?`${i}px`:null})).observe(t,{attributes:!0,attributeFilter:["style"]})}})),t};const Gt=(t,e)=>{const n=E();W(n,e,"htmlContainer"),e.html?(It(e.html,n),tt(n,"block")):e.text?(n.textContent=e.text,tt(n,"block")):et(n),Bt(t,e)},Yt=(t,e)=>{const n=L();it(n,e.footer),e.footer&&It(e.footer,n),W(n,e,"footer")},Xt=(e,n)=>{const i=t.innerParams.get(e),r=_();if(i&&n.icon===i.icon)return ee(r,n),void Qt(r,n);if(n.icon||n.iconHtml){if(n.icon&&-1===Object.keys(s).indexOf(n.icon))return l(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${n.icon}"`),void et(r);tt(r),ee(r,n),Qt(r,n),X(r,n.showClass.icon)}else et(r)},Qt=(t,e)=>{for(const n in s)e.icon!==n&&Q(t,s[n]);X(t,s[e.icon]),ne(t,e),Jt(),W(t,e,"icon")},Jt=()=>{const t=v(),e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let t=0;t<n.length;t++)n[t].style.backgroundColor=e},Zt='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',te='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n',ee=(t,e)=>{let n,i=t.innerHTML;e.iconHtml?n=ie(e.iconHtml):"success"===e.icon?(n=Zt,i=i.replace(/ style=".*?"/g,"")):n="error"===e.icon?te:ie({question:"?",warning:"!",info:"i"}[e.icon]),i.trim()!==n.trim()&&$(t,n)},ne=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])nt(t,n,"backgroundColor",e.iconColor);nt(t,".swal2-success-ring","borderColor",e.iconColor)}},ie=t=>`<div class="${i["icon-content"]}">${t}</div>`,se=(t,e)=>{const n=T();e.imageUrl?(tt(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt),Z(n,"width",e.imageWidth),Z(n,"height",e.imageHeight),n.className=i.image,W(n,e,"image")):et(n)},re=(t,e)=>{const n=y(),i=v();e.toast?(Z(n,"width",e.width),i.style.width="100%",i.insertBefore(O(),_())):Z(i,"width",e.width),Z(i,"padding",e.padding),e.color&&(i.style.color=e.color),e.background&&(i.style.background=e.background),et(S()),oe(i,e)},oe=(t,e)=>{t.className=`${i.popup} ${st(t)?e.showClass.popup:""}`,e.toast?(X([document.documentElement,document.body],i["toast-shown"]),X(t,i.toast)):X(t,i.modal),W(t,e,"popup"),"string"==typeof e.customClass&&X(t,e.customClass),e.icon&&X(t,i[`icon-${e.icon}`])},ae=(t,e)=>{const n=k();e.progressSteps&&0!==e.progressSteps.length?(tt(n),n.textContent="",e.currentProgressStep>=e.progressSteps.length&&c("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),e.progressSteps.forEach(((t,s)=>{const r=ce(t);if(n.appendChild(r),s===e.currentProgressStep&&X(r,i["active-progress-step"]),s!==e.progressSteps.length-1){const t=le(e);n.appendChild(t)}}))):et(n)},ce=t=>{const e=document.createElement("li");return X(e,i["progress-step"]),$(e,t),e},le=t=>{const e=document.createElement("li");return X(e,i["progress-step-line"]),t.progressStepsDistance&&Z(e,"width",t.progressStepsDistance),e},ue=(t,e)=>{const n=I();it(n,e.title||e.titleText,"block"),e.title&&It(e.title,n),e.titleText&&(n.innerText=e.titleText),W(n,e,"title")},he=(t,e)=>{re(t,e),Pt(t,e),ae(t,e),Xt(t,e),se(t,e),ue(t,e),Ot(t,e),Gt(t,e),Ct(t,e),Yt(t,e),"function"==typeof e.didRender&&e.didRender(v())};function de(){const e=t.innerParams.get(this);if(!e)return;const n=t.domCache.get(this);et(n.loader),j()?e.icon&&tt(_()):fe(n),Q([n.popup,n.actions],i.loading),n.popup.removeAttribute("aria-busy"),n.popup.removeAttribute("data-loading"),n.confirmButton.disabled=!1,n.denyButton.disabled=!1,n.cancelButton.disabled=!1}const fe=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?tt(e[0],"inline-block"):rt()&&et(t.actions)};function pe(e){const n=t.innerParams.get(e||this),i=t.domCache.get(e||this);return i?K(i.popup,n.input):null}const ge=()=>st(v()),me=()=>C()&&C().click(),ye=()=>D()&&D().click(),be=()=>A()&&A().click(),we=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),ve=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},_e=(t,e,n,i)=>{ve(e),n.toast||(e.keydownHandler=e=>Te(t,e,i),e.keydownTarget=n.keydownListenerCapture?window:v(),e.keydownListenerCapture=n.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},xe=(t,e)=>{const n=B();if(n.length)return(t+=e)===n.length?t=0:-1===t&&(t=n.length-1),void n[t].focus();v().focus()},Ie=["ArrowRight","ArrowDown"],Ee=["ArrowLeft","ArrowUp"],Te=(e,n,i)=>{const s=t.innerParams.get(e);s&&(n.isComposing||229===n.keyCode||(s.stopKeydownPropagation&&n.stopPropagation(),"Enter"===n.key?ke(e,n,s):"Tab"===n.key?Se(n):[...Ie,...Ee].includes(n.key)?Ce(n.key):"Escape"===n.key&&Ae(n,s,i)))},ke=(t,e,n)=>{if(f(n.allowEnterKey)&&e.target&&t.getInput()&&e.target instanceof HTMLElement&&e.target.outerHTML===t.getInput().outerHTML){if(["textarea","file"].includes(n.input))return;me(),e.preventDefault()}},Se=t=>{const e=t.target,n=B();let i=-1;for(let t=0;t<n.length;t++)if(e===n[t]){i=t;break}t.shiftKey?xe(i,-1):xe(i,1),t.stopPropagation(),t.preventDefault()},Ce=t=>{const e=[C(),D(),A()];if(document.activeElement instanceof HTMLElement&&!e.includes(document.activeElement))return;const n=Ie.includes(t)?"nextElementSibling":"previousElementSibling";let i=document.activeElement;for(let t=0;t<P().children.length;t++){if(i=i[n],!i)return;if(i instanceof HTMLButtonElement&&st(i))break}i instanceof HTMLButtonElement&&i.focus()},Ae=(t,e,n)=>{f(e.allowEscapeKey)&&(t.preventDefault(),n(we.esc))};var De={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Me=()=>{Array.from(document.body.children).forEach((t=>{t===y()||t.contains(y())||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))}))},Oe=()=>{Array.from(document.body.children).forEach((t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")}))},Pe=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!q(document.body,i.iosfix)){const t=document.body.scrollTop;document.body.style.top=-1*t+"px",X(document.body,i.iosfix),Re(),Le()}},Le=()=>{const t=navigator.userAgent,e=!!t.match(/iPad/i)||!!t.match(/iPhone/i),n=!!t.match(/WebKit/i);if(e&&n&&!t.match(/CriOS/i)){const t=44;v().scrollHeight>window.innerHeight-t&&(y().style.paddingBottom=`${t}px`)}},Re=()=>{const t=y();let e;t.ontouchstart=t=>{e=Ne(t)},t.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}},Ne=t=>{const e=t.target,n=y();return!(Fe(t)||Be(t)||e!==n&&(ot(n)||!(e instanceof HTMLElement)||"INPUT"===e.tagName||"TEXTAREA"===e.tagName||ot(E())&&E().contains(e)))},Fe=t=>t.touches&&t.touches.length&&"stylus"===t.touches[0].touchType,Be=t=>t.touches&&t.touches.length>1,Ve=()=>{if(q(document.body,i.iosfix)){const t=parseInt(document.body.style.top,10);Q(document.body,i.iosfix),document.body.style.top="",document.body.scrollTop=-1*t}},je=()=>{null===z.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(z.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${z.previousBodyPadding+St()}px`)},Ue=()=>{null!==z.previousBodyPadding&&(document.body.style.paddingRight=`${z.previousBodyPadding}px`,z.previousBodyPadding=null)};function ze(t,e,n,i){j()?Je(t,i):(ft(n).then((()=>Je(t,i))),ve(ht)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),V()&&(Ue(),Ve(),Oe()),$e()}function $e(){Q([document.documentElement,document.body],[i.shown,i["height-auto"],i["no-backdrop"],i["toast-shown"]])}function qe(t){t=Ye(t);const e=De.swalPromiseResolve.get(this),n=We(this);this.isAwaitingPromise()?t.isDismissed||(Ge(this),e(t)):n&&e(t)}function He(){return!!t.awaitingPromise.get(this)}const We=e=>{const n=v();if(!n)return!1;const i=t.innerParams.get(e);if(!i||q(n,i.hideClass.popup))return!1;Q(n,i.showClass.popup),X(n,i.hideClass.popup);const s=y();return Q(s,i.showClass.backdrop),X(s,i.hideClass.backdrop),Xe(e,n,i),!0};function Ke(t){const e=De.swalPromiseReject.get(this);Ge(this),e&&e(t)}const Ge=e=>{e.isAwaitingPromise()&&(t.awaitingPromise.delete(e),t.innerParams.get(e)||e._destroy())},Ye=t=>void 0===t?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),Xe=(t,e,n)=>{const i=y(),s=kt&&at(e);"function"==typeof n.willClose&&n.willClose(e),s?Qe(t,e,i,n.returnFocus,n.didClose):ze(t,i,n.returnFocus,n.didClose)},Qe=(t,e,n,i,s)=>{ht.swalCloseEventFinishedCallback=ze.bind(null,t,n,i,s),e.addEventListener(kt,(function(t){t.target===e&&(ht.swalCloseEventFinishedCallback(),delete ht.swalCloseEventFinishedCallback)}))},Je=(t,e)=>{setTimeout((()=>{"function"==typeof e&&e.bind(t.params)(),t._destroy()}))};function Ze(e,n,i){const s=t.domCache.get(e);n.forEach((t=>{s[t].disabled=i}))}function tn(t,e){if(t)if("radio"===t.type){const n=t.parentNode.parentNode.querySelectorAll("input");for(let t=0;t<n.length;t++)n[t].disabled=e}else t.disabled=e}function en(){Ze(this,["confirmButton","denyButton","cancelButton"],!1)}function nn(){Ze(this,["confirmButton","denyButton","cancelButton"],!0)}function sn(){tn(this.getInput(),!1)}function rn(){tn(this.getInput(),!0)}function on(e){const n=t.domCache.get(this),s=t.innerParams.get(this);$(n.validationMessage,e),n.validationMessage.className=i["validation-message"],s.customClass&&s.customClass.validationMessage&&X(n.validationMessage,s.customClass.validationMessage),tt(n.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid",!0),r.setAttribute("aria-describedby",i["validation-message"]),G(r),X(r,i.inputerror))}function an(){const e=t.domCache.get(this);e.validationMessage&&et(e.validationMessage);const n=this.getInput();n&&(n.removeAttribute("aria-invalid"),n.removeAttribute("aria-describedby"),Q(n,i.inputerror))}const cn={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},ln=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],un={},hn=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],dn=t=>Object.prototype.hasOwnProperty.call(cn,t),fn=t=>-1!==ln.indexOf(t),pn=t=>un[t],gn=t=>{dn(t)||c(`Unknown parameter "${t}"`)},mn=t=>{hn.includes(t)&&c(`The parameter "${t}" is incompatible with toasts`)},yn=t=>{pn(t)&&d(t,pn(t))},bn=t=>{!1===t.backdrop&&t.allowOutsideClick&&c('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const e in t)gn(e),t.toast&&mn(e),yn(e)};function wn(e){const n=v(),i=t.innerParams.get(this);if(!n||q(n,i.hideClass.popup))return void c("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const s=vn(e),r=Object.assign({},i,s);he(this,r),t.innerParams.set(this,r),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const vn=t=>{const e={};return Object.keys(t).forEach((n=>{fn(n)?e[n]=t[n]:c(`Invalid parameter to update: ${n}`)})),e};function _n(){const e=t.domCache.get(this),n=t.innerParams.get(this);n?(e.popup&&ht.swalCloseEventFinishedCallback&&(ht.swalCloseEventFinishedCallback(),delete ht.swalCloseEventFinishedCallback),"function"==typeof n.didDestroy&&n.didDestroy(),xn(this)):In(this)}const xn=t=>{In(t),delete t.params,delete ht.keydownHandler,delete ht.keydownTarget,delete ht.currentInstance},In=e=>{e.isAwaitingPromise()?(En(t,e),t.awaitingPromise.set(e,!0)):(En(De,e),En(t,e))},En=(t,e)=>{for(const n in t)t[n].delete(e)};var Tn=Object.freeze({__proto__:null,_destroy:_n,close:qe,closeModal:qe,closePopup:qe,closeToast:qe,disableButtons:nn,disableInput:rn,disableLoading:de,enableButtons:en,enableInput:sn,getInput:pe,handleAwaitingPromise:Ge,hideLoading:de,isAwaitingPromise:He,rejectPromise:Ke,resetValidationMessage:an,showValidationMessage:on,update:wn});const kn=t=>{let e=v();e||new Ki,e=v();const n=O();j()?et(_()):Sn(e,t),tt(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},Sn=(t,e)=>{const n=P(),s=O();!e&&st(C())&&(e=C()),tt(n),e&&(et(e),s.setAttribute("data-button-to-replace",e.className)),s.parentNode.insertBefore(s,e),X([t,n],i.loading)},Cn=(t,e)=>{"select"===e.input||"radio"===e.input?Pn(t,e):["text","email","number","tel","textarea"].includes(e.input)&&(p(e.inputValue)||m(e.inputValue))&&(kn(C()),Ln(t,e))},An=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return Dn(n);case"radio":return Mn(n);case"file":return On(n);default:return e.inputAutoTrim?n.value.trim():n.value}},Dn=t=>t.checked?1:0,Mn=t=>t.checked?t.value:null,On=t=>t.files.length?null!==t.getAttribute("multiple")?t.files:t.files[0]:null,Pn=(t,e)=>{const n=v(),i=t=>{Rn[e.input](n,Nn(t),e)};p(e.inputOptions)||m(e.inputOptions)?(kn(C()),g(e.inputOptions).then((e=>{t.hideLoading(),i(e)}))):"object"==typeof e.inputOptions?i(e.inputOptions):l("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof e.inputOptions)},Ln=(t,e)=>{const n=t.getInput();et(n),g(e.inputValue).then((i=>{n.value="number"===e.input?`${parseFloat(i)||0}`:`${i}`,tt(n),n.focus(),t.hideLoading()})).catch((e=>{l(`Error in inputValue promise: ${e}`),n.value="",tt(n),n.focus(),t.hideLoading()}))},Rn={select:(t,e,n)=>{const s=J(t,i.select),r=(t,e,i)=>{const s=document.createElement("option");s.value=i,$(s,e),s.selected=Fn(i,n.inputValue),t.appendChild(s)};e.forEach((t=>{const e=t[0],n=t[1];if(Array.isArray(n)){const t=document.createElement("optgroup");t.label=e,t.disabled=!1,s.appendChild(t),n.forEach((e=>r(t,e[1],e[0])))}else r(s,n,e)})),s.focus()},radio:(t,e,n)=>{const s=J(t,i.radio);e.forEach((t=>{const e=t[0],r=t[1],o=document.createElement("input"),a=document.createElement("label");o.type="radio",o.name=i.radio,o.value=e,Fn(e,n.inputValue)&&(o.checked=!0);const c=document.createElement("span");$(c,r),c.className=i.label,a.appendChild(o),a.appendChild(c),s.appendChild(a)}));const r=s.querySelectorAll("input");r.length&&r[0].focus()}},Nn=t=>{const e=[];return"undefined"!=typeof Map&&t instanceof Map?t.forEach(((t,n)=>{let i=t;"object"==typeof i&&(i=Nn(i)),e.push([n,i])})):Object.keys(t).forEach((n=>{let i=t[n];"object"==typeof i&&(i=Nn(i)),e.push([n,i])})),e},Fn=(t,e)=>e&&e.toString()===t.toString(),Bn=e=>{const n=t.innerParams.get(e);e.disableButtons(),n.input?Un(e,"confirm"):Wn(e,!0)},Vn=e=>{const n=t.innerParams.get(e);e.disableButtons(),n.returnInputValueOnDeny?Un(e,"deny"):$n(e,!1)},jn=(t,e)=>{t.disableButtons(),e(we.cancel)},Un=(e,n)=>{const i=t.innerParams.get(e);if(!i.input)return void l(`The "input" parameter is needed to be set when using returnInputValueOn${a(n)}`);const s=An(e,i);i.inputValidator?zn(e,s,n):e.getInput().checkValidity()?"deny"===n?$n(e,s):Wn(e,s):(e.enableButtons(),e.showValidationMessage(i.validationMessage))},zn=(e,n,i)=>{const s=t.innerParams.get(e);e.disableInput(),Promise.resolve().then((()=>g(s.inputValidator(n,s.validationMessage)))).then((t=>{e.enableButtons(),e.enableInput(),t?e.showValidationMessage(t):"deny"===i?$n(e,n):Wn(e,n)}))},$n=(e,n)=>{const i=t.innerParams.get(e||void 0);i.showLoaderOnDeny&&kn(D()),i.preDeny?(t.awaitingPromise.set(e||void 0,!0),Promise.resolve().then((()=>g(i.preDeny(n,i.validationMessage)))).then((t=>{!1===t?(e.hideLoading(),Ge(e)):e.close({isDenied:!0,value:void 0===t?n:t})})).catch((t=>Hn(e||void 0,t)))):e.close({isDenied:!0,value:n})},qn=(t,e)=>{t.close({isConfirmed:!0,value:e})},Hn=(t,e)=>{t.rejectPromise(e)},Wn=(e,n)=>{const i=t.innerParams.get(e||void 0);i.showLoaderOnConfirm&&kn(),i.preConfirm?(e.resetValidationMessage(),t.awaitingPromise.set(e||void 0,!0),Promise.resolve().then((()=>g(i.preConfirm(n,i.validationMessage)))).then((t=>{st(S())||!1===t?(e.hideLoading(),Ge(e)):qn(e,void 0===t?n:t)})).catch((t=>Hn(e||void 0,t)))):qn(e,n)},Kn=(e,n,i)=>{t.innerParams.get(e).toast?Gn(e,n,i):(Qn(n),Jn(n),Zn(e,n,i))},Gn=(e,n,i)=>{n.popup.onclick=()=>{const n=t.innerParams.get(e);n&&(Yn(n)||n.timer||n.input)||i(we.close)}},Yn=t=>t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton;let Xn=!1;const Qn=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=void 0,e.target===t.container&&(Xn=!0)}}},Jn=t=>{t.container.onmousedown=()=>{t.popup.onmouseup=function(e){t.popup.onmouseup=void 0,(e.target===t.popup||t.popup.contains(e.target))&&(Xn=!0)}}},Zn=(e,n,i)=>{n.container.onclick=s=>{const r=t.innerParams.get(e);Xn?Xn=!1:s.target===n.container&&f(r.allowOutsideClick)&&i(we.backdrop)}},ti=t=>"object"==typeof t&&t.jquery,ei=t=>t instanceof Element||ti(t),ni=t=>{const e={};return"object"!=typeof t[0]||ei(t[0])?["title","html","icon"].forEach(((n,i)=>{const s=t[i];"string"==typeof s||ei(s)?e[n]=s:void 0!==s&&l(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof s}`)})):Object.assign(e,t[0]),e};function ii(){const t=this;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new t(...n)}function si(t){class e extends(this){_main(e,n){return super._main(e,Object.assign({},t,n))}}return e}const ri=()=>ht.timeout&&ht.timeout.getTimerLeft(),oi=()=>{if(ht.timeout)return lt(),ht.timeout.stop()},ai=()=>{if(ht.timeout){const t=ht.timeout.start();return ct(t),t}},ci=()=>{const t=ht.timeout;return t&&(t.running?oi():ai())},li=t=>{if(ht.timeout){const e=ht.timeout.increase(t);return ct(e,!0),e}},ui=()=>ht.timeout&&ht.timeout.isRunning();let hi=!1;const di={};function fi(){di[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,hi||(document.body.addEventListener("click",pi),hi=!0)}const pi=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const t in di){const n=e.getAttribute(t);if(n)return void di[t].fire({template:n})}};var gi=Object.freeze({__proto__:null,argsToParams:ni,bindClickHandler:fi,clickCancel:be,clickConfirm:me,clickDeny:ye,enableLoading:kn,fire:ii,getActions:P,getCancelButton:A,getCloseButton:N,getConfirmButton:C,getContainer:y,getDenyButton:D,getFocusableElements:B,getFooter:L,getHtmlContainer:E,getIcon:_,getIconContent:x,getImage:T,getInputLabel:M,getLoader:O,getPopup:v,getProgressSteps:k,getTimerLeft:ri,getTimerProgressBar:R,getTitle:I,getValidationMessage:S,increaseTimer:li,isDeprecatedParameter:pn,isLoading:U,isTimerRunning:ui,isUpdatableParameter:fn,isValidParameter:dn,isVisible:ge,mixin:si,resumeTimer:ai,showLoading:kn,stopTimer:oi,toggleTimer:ci});class mi{constructor(t,e){this.callback=t,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(t){const e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const yi=["swal-title","swal-html","swal-footer"],bi=t=>{const e="string"==typeof t.template?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return ki(n),Object.assign(wi(n),vi(n),_i(n),xi(n),Ii(n),Ei(n),Ti(n,yi))},wi=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach((t=>{Si(t,["name","value"]);const n=t.getAttribute("name"),i=t.getAttribute("value");"boolean"==typeof cn[n]?e[n]="false"!==i:"object"==typeof cn[n]?e[n]=JSON.parse(i):e[n]=i})),e},vi=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach((t=>{const n=t.getAttribute("name"),i=t.getAttribute("value");e[n]=new Function(`return ${i}`)()})),e},_i=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach((t=>{Si(t,["type","color","aria-label"]);const n=t.getAttribute("type");e[`${n}ButtonText`]=t.innerHTML,e[`show${a(n)}Button`]=!0,t.hasAttribute("color")&&(e[`${n}ButtonColor`]=t.getAttribute("color")),t.hasAttribute("aria-label")&&(e[`${n}ButtonAriaLabel`]=t.getAttribute("aria-label"))})),e},xi=t=>{const e={},n=t.querySelector("swal-image");return n&&(Si(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt"))),e},Ii=t=>{const e={},n=t.querySelector("swal-icon");return n&&(Si(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},Ei=t=>{const e={},n=t.querySelector("swal-input");n&&(Si(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const i=Array.from(t.querySelectorAll("swal-input-option"));return i.length&&(e.inputOptions={},i.forEach((t=>{Si(t,["value"]);const n=t.getAttribute("value"),i=t.innerHTML;e.inputOptions[n]=i}))),e},Ti=(t,e)=>{const n={};for(const i in e){const s=e[i],r=t.querySelector(s);r&&(Si(r,[]),n[s.replace(/^swal-/,"")]=r.innerHTML.trim())}return n},ki=t=>{const e=yi.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach((t=>{const n=t.tagName.toLowerCase();e.includes(n)||c(`Unrecognized element <${n}>`)}))},Si=(t,e)=>{Array.from(t.attributes).forEach((n=>{-1===e.indexOf(n.name)&&c([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."])}))},Ci=10,Ai=t=>{const e=y(),n=v();"function"==typeof t.willOpen&&t.willOpen(n);const s=window.getComputedStyle(document.body).overflowY;Pi(e,n,t),setTimeout((()=>{Mi(e,n)}),Ci),V()&&(Oi(e,t.scrollbarPadding,s),Me()),j()||ht.previousActiveElement||(ht.previousActiveElement=document.activeElement),"function"==typeof t.didOpen&&setTimeout((()=>t.didOpen(n))),Q(e,i["no-transition"])},Di=t=>{const e=v();if(t.target!==e)return;const n=y();e.removeEventListener(kt,Di),n.style.overflowY="auto"},Mi=(t,e)=>{kt&&at(e)?(t.style.overflowY="hidden",e.addEventListener(kt,Di)):t.style.overflowY="auto"},Oi=(t,e,n)=>{Pe(),e&&"hidden"!==n&&je(),setTimeout((()=>{t.scrollTop=0}))},Pi=(t,e,n)=>{X(t,n.showClass.backdrop),e.style.setProperty("opacity","0","important"),tt(e,"grid"),setTimeout((()=>{X(e,n.showClass.popup),e.style.removeProperty("opacity")}),Ci),X([document.documentElement,document.body],i.shown),n.heightAuto&&n.backdrop&&!n.toast&&X([document.documentElement,document.body],i["height-auto"])};var Li={email:(t,e)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function Ri(t){t.inputValidator||Object.keys(Li).forEach((e=>{t.input===e&&(t.inputValidator=Li[e])}))}function Ni(t){(!t.target||"string"==typeof t.target&&!document.querySelector(t.target)||"string"!=typeof t.target&&!t.target.appendChild)&&(c('Target parameter is not valid, defaulting to "body"'),t.target="body")}function Fi(t){Ri(t),t.showLoaderOnConfirm&&!t.preConfirm&&c("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),Ni(t),"string"==typeof t.title&&(t.title=t.title.split("\n").join("<br />")),xt(t)}let Bi;class Vi{constructor(){if("undefined"==typeof window)return;Bi=this;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const s=Object.freeze(this.constructor.argsToParams(n));Object.defineProperties(this,{params:{value:s,writable:!1,enumerable:!0,configurable:!0}});const r=Bi._main(Bi.params);t.promise.set(this,r)}_main(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bn(Object.assign({},n,e)),ht.currentInstance&&(ht.currentInstance._destroy(),V()&&Oe()),ht.currentInstance=Bi;const i=Ui(e,n);Fi(i),Object.freeze(i),ht.timeout&&(ht.timeout.stop(),delete ht.timeout),clearTimeout(ht.restoreFocusTimeout);const s=zi(Bi);return he(Bi,i),t.innerParams.set(Bi,i),ji(Bi,s,i)}then(e){return t.promise.get(this).then(e)}finally(e){return t.promise.get(this).finally(e)}}const ji=(t,e,n)=>new Promise(((i,s)=>{const r=e=>{t.close({isDismissed:!0,dismiss:e})};De.swalPromiseResolve.set(t,i),De.swalPromiseReject.set(t,s),e.confirmButton.onclick=()=>{Bn(t)},e.denyButton.onclick=()=>{Vn(t)},e.cancelButton.onclick=()=>{jn(t,r)},e.closeButton.onclick=()=>{r(we.close)},Kn(t,e,r),_e(t,ht,n,r),Cn(t,n),Ai(n),$i(ht,n,r),qi(e,n),setTimeout((()=>{e.container.scrollTop=0}))})),Ui=(t,e)=>{const n=bi(t),i=Object.assign({},cn,e,n,t);return i.showClass=Object.assign({},cn.showClass,i.showClass),i.hideClass=Object.assign({},cn.hideClass,i.hideClass),i},zi=e=>{const n={popup:v(),container:y(),actions:P(),confirmButton:C(),denyButton:D(),cancelButton:A(),loader:O(),closeButton:N(),validationMessage:S(),progressSteps:k()};return t.domCache.set(e,n),n},$i=(t,e,n)=>{const i=R();et(i),e.timer&&(t.timeout=new mi((()=>{n("timer"),delete t.timeout}),e.timer),e.timerProgressBar&&(tt(i),W(i,e,"timerProgressBar"),setTimeout((()=>{t.timeout&&t.timeout.running&&ct(e.timer)}))))},qi=(t,e)=>{e.toast||(f(e.allowEnterKey)?Hi(t,e)||xe(-1,1):Wi())},Hi=(t,e)=>e.focusDeny&&st(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&st(t.cancelButton)?(t.cancelButton.focus(),!0):!(!e.focusConfirm||!st(t.confirmButton)||(t.confirmButton.focus(),0)),Wi=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!=typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents="none";const t=document.createElement("audio");t.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",t.loop=!0,document.body.appendChild(t),setTimeout((()=>{t.play().catch((()=>{}))}),2500)}),500):localStorage.setItem("swal-initiation",`${t}`)}Object.assign(Vi.prototype,Tn),Object.assign(Vi,gi),Object.keys(Tn).forEach((t=>{Vi[t]=function(){if(Bi)return Bi[t](...arguments)}})),Vi.DismissReason=we,Vi.version="11.7.2";const Ki=Vi;return Ki.default=Ki,Ki}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch(t){n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},238:(t,e,n)=>{"use strict";n.d(e,{Jn:()=>_,KN:()=>E,Mq:()=>I,Xd:()=>m,ZF:()=>x,qX:()=>y});var i=n(463),s=n(333),r=n(444),o=n(531);class a{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const c="@firebase/app",l="0.9.3",u=new s.Yd("@firebase/app"),h="[DEFAULT]",d={[c]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},f=new Map,p=new Map;function g(t,e){try{t.container.addComponent(e)}catch(n){u.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function m(t){const e=t.name;if(p.has(e))return u.debug(`There were multiple attempts to register component ${e}.`),!1;p.set(e,t);for(const e of f.values())g(e,t);return!0}function y(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const b={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},w=new r.LL("app","Firebase",b);class v{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw w.create("app-deleted",{appName:this._name})}}const _="9.17.1";function x(t,e={}){let n=t;if("object"!=typeof e){e={name:e}}const s=Object.assign({name:h,automaticDataCollectionEnabled:!1},e),o=s.name;if("string"!=typeof o||!o)throw w.create("bad-app-name",{appName:String(o)});if(n||(n=(0,r.aH)()),!n)throw w.create("no-options");const a=f.get(o);if(a){if((0,r.vZ)(n,a.options)&&(0,r.vZ)(s,a.config))return a;throw w.create("duplicate-app",{appName:o})}const c=new i.H0(o);for(const t of p.values())c.addComponent(t);const l=new v(n,s,c);return f.set(o,l),l}function I(t=h){const e=f.get(t);if(!e&&t===h)return x();if(!e)throw w.create("no-app",{appName:t});return e}function E(t,e,n){var s;let r=null!==(s=d[t])&&void 0!==s?s:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${r}" with version "${e}":`];return o&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void u.warn(t.join(" "))}m(new i.wA(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const T="firebase-heartbeat-database",k=1,S="firebase-heartbeat-store";let C=null;function A(){return C||(C=(0,o.X3)(T,k,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(S)}}).catch((t=>{throw w.create("idb-open",{originalErrorMessage:t.message})}))),C}async function D(t,e){try{const n=(await A()).transaction(S,"readwrite"),i=n.objectStore(S);return await i.put(e,M(t)),n.done}catch(t){if(t instanceof r.ZR)u.warn(t.message);else{const e=w.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});u.warn(e.message)}}}function M(t){return`${t.name}!${t.options.appId}`}const O=1024;class P{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new R(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=L();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=L(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=O){const n=[];let i=t.slice();for(const s of t){const t=n.find((t=>t.agent===s.agent));if(t){if(t.dates.push(s.date),N(n)>e){t.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),N(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=(0,r.L)(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function L(){return(new Date).toISOString().substring(0,10)}class R{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,r.hl)()&&(0,r.eu)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(t){try{return(await A()).transaction(S).objectStore(S).get(M(t))}catch(t){if(t instanceof r.ZR)u.warn(t.message);else{const e=w.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});u.warn(e.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return D(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return D(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function N(t){return(0,r.L)(JSON.stringify({version:2,heartbeats:t})).length}var F;F="",m(new i.wA("platform-logger",(t=>new a(t)),"PRIVATE")),m(new i.wA("heartbeat",(t=>new P(t)),"PRIVATE")),E(c,l,F),E(c,l,"esm2017"),E("fire-js","")},463:(t,e,n)=>{"use strict";n.d(e,{H0:()=>a,wA:()=>s});var i=n(444);class s{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const r="[DEFAULT]";class o{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new i.BH;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:r})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=r){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=r){return this.instances.has(t)}getOptions(t=r){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(t)&&e.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===r?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=r){return this.component?this.component.multipleInstances?t:r:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new o(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},578:(t,e,n)=>{"use strict";var i=n(238),s=n(463),r=n(444),o=n(531);const a="@firebase/installations",c="0.6.3",l=1e4,u=`w:${c}`,h="FIS_v2",d="https://firebaseinstallations.googleapis.com/v1",f=36e5,p={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},g=new r.LL("installations","Installations",p);function m(t){return t instanceof r.ZR&&t.code.includes("request-failed")}function y({projectId:t}){return`${d}/projects/${t}/installations`}function b(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function w(t,e){const n=(await e.json()).error;return g.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function v({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _(t,{refreshToken:e}){const n=v(t);return n.append("Authorization",function(t){return`${h} ${t}`}(e)),n}async function x(t){const e=await t();return e.status>=500&&e.status<600?t():e}function I(t){return new Promise((e=>{setTimeout(e,t)}))}const E=/^[cdef][\w-]{21}$/,T="";function k(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(n=t,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return e.substr(0,22)}(t);return E.test(e)?e:T}catch(t){return T}}function S(t){return`${t.appName}!${t.appId}`}const C=new Map;function A(t,e){const n=S(t);D(n,e),function(t,e){const n=O();n&&n.postMessage({key:t,fid:e});P()}(n,e)}function D(t,e){const n=C.get(t);if(n)for(const t of n)t(e)}let M=null;function O(){return!M&&"BroadcastChannel"in self&&(M=new BroadcastChannel("[Firebase] FID Change"),M.onmessage=t=>{D(t.data.key,t.data.fid)}),M}function P(){0===C.size&&M&&(M.close(),M=null)}const L="firebase-installations-database",R=1,N="firebase-installations-store";let F=null;function B(){return F||(F=(0,o.X3)(L,R,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(N)}})),F}async function V(t,e){const n=S(t),i=(await B()).transaction(N,"readwrite"),s=i.objectStore(N),r=await s.get(n);return await s.put(e,n),await i.done,r&&r.fid===e.fid||A(t,e.fid),e}async function j(t){const e=S(t),n=(await B()).transaction(N,"readwrite");await n.objectStore(N).delete(e),await n.done}async function U(t,e){const n=S(t),i=(await B()).transaction(N,"readwrite"),s=i.objectStore(N),r=await s.get(n),o=e(r);return void 0===o?await s.delete(n):await s.put(o,n),await i.done,!o||r&&r.fid===o.fid||A(t,o.fid),o}async function z(t){let e;const n=await U(t.appConfig,(n=>{const i=function(t){const e=t||{fid:k(),registrationStatus:0};return H(e)}(n),s=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(g.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=y(t),s=v(t),r=e.getImmediate({optional:!0});if(r){const t=await r.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const o={fid:n,authVersion:h,appId:t.appId,sdkVersion:u},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await x((()=>fetch(i,a)));if(c.ok){const t=await c.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:b(t.authToken)}}throw await w("Create Installation",c)}(t,e);return V(t.appConfig,n)}catch(n){throw m(n)&&409===n.customData.serverCode?await j(t.appConfig):await V(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:$(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry}));return n.fid===T?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function $(t){let e=await q(t.appConfig);for(;1===e.registrationStatus;)await I(100),e=await q(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await z(t);return n||e}return e}function q(t){return U(t,(t=>{if(!t)throw g.create("installation-not-found");return H(t)}))}function H(t){return 1===(e=t).registrationStatus&&e.registrationTime+l<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function W({appConfig:t,heartbeatServiceProvider:e},n){const i=function(t,{fid:e}){return`${y(t)}/${e}/authTokens:generate`}(t,n),s=_(t,n),r=e.getImmediate({optional:!0});if(r){const t=await r.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const o={installation:{sdkVersion:u,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await x((()=>fetch(i,a)));if(c.ok){return b(await c.json())}throw await w("Generate Auth Token",c)}async function K(t,e=!1){let n;const i=await U(t.appConfig,(i=>{if(!Y(i))throw g.create("not-registered");const s=i.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+f}(t)}(s))return i;if(1===s.requestStatus)return n=async function(t,e){let n=await G(t.appConfig);for(;1===n.authToken.requestStatus;)await I(100),n=await G(t.appConfig);const i=n.authToken;return 0===i.requestStatus?K(t,e):i}(t,e),i;{if(!navigator.onLine)throw g.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await W(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await V(t.appConfig,i),n}catch(n){if(!m(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await V(t.appConfig,n)}else await j(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function G(t){return U(t,(t=>{if(!Y(t))throw g.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+l<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n}))}function Y(t){return void 0!==t&&2===t.registrationStatus}async function X(t,e=!1){const n=t;await async function(t){const{registrationPromise:e}=await z(t);e&&await e}(n);return(await K(n,e)).token}function Q(t){return g.create("missing-app-config-values",{valueName:t})}const J="installations",Z="installations-internal",tt=t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw Q("App Configuration");if(!t.name)throw Q("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Q(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:(0,i.qX)(e,"heartbeat"),_delete:()=>Promise.resolve()}},et=t=>{const e=t.getProvider("app").getImmediate(),n=(0,i.qX)(e,J).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await z(e);return i?i.catch(console.error):K(e).catch(console.error),n.fid}(n),getToken:t=>X(n,t)}};(0,i.Xd)(new s.wA(J,tt,"PUBLIC")),(0,i.Xd)(new s.wA(Z,et,"PRIVATE")),(0,i.KN)(a,c),(0,i.KN)(a,c,"esm2017")},333:(t,e,n)=>{"use strict";n.d(e,{Yd:()=>l,in:()=>s});const i=[];var s;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={}));const r={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},o=s.INFO,a={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},c=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),s=a[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${i}]  ${t.name}:`,...n)};class l{constructor(t){this.name=t,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in s))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?r[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}},809:(t,e,n)=>{"use strict";function i(t){return t+.5|0}n.d(e,{kL:()=>As});const s=(t,e,n)=>Math.max(Math.min(t,n),e);function r(t){return s(i(2.55*t),0,255)}function o(t){return s(i(255*t),0,255)}function a(t){return s(i(t/2.55)/100,0,1)}function c(t){return s(i(100*t),0,100)}const l={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},u=[..."0123456789ABCDEF"],h=t=>u[15&t],d=t=>u[(240&t)>>4]+u[15&t],f=t=>(240&t)>>4==(15&t),p=t=>f(t.r)&&f(t.g)&&f(t.b)&&f(t.a);const g=(t,e)=>t<255?e(t):"";const m=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function y(t,e,n){const i=e*Math.min(n,1-n),s=(e,s=(e+t/30)%12)=>n-i*Math.max(Math.min(s-3,9-s,1),-1);return[s(0),s(8),s(4)]}function b(t,e,n){const i=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function w(t,e,n){const i=y(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function v(t){const e=t.r/255,n=t.g/255,i=t.b/255,s=Math.max(e,n,i),r=Math.min(e,n,i),o=(s+r)/2;let a,c,l;return s!==r&&(l=s-r,c=o>.5?l/(2-s-r):l/(s+r),a=function(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}(e,n,i,l,s),a=60*a+.5),[0|a,c||0,o]}function _(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(o)}function x(t,e,n){return _(y,t,e,n)}function I(t){return(t%360+360)%360}function E(t){const e=m.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?r(+e[5]):o(+e[5]));const s=I(+e[2]),a=+e[3]/100,c=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return _(w,t,e,n)}(s,a,c):"hsv"===e[1]?function(t,e,n){return _(b,t,e,n)}(s,a,c):x(s,a,c),{r:n[0],g:n[1],b:n[2],a:i}}const T={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},k={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let S;function C(t){S||(S=function(){const t={},e=Object.keys(k),n=Object.keys(T);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,T[r]);r=parseInt(k[o],16),t[a]=[r>>16&255,r>>8&255,255&r]}return t}(),S.transparent=[0,0,0,0]);const e=S[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const A=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const D=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,M=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function O(t,e,n){if(t){let i=v(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=x(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function P(t,e){return t?Object.assign(e||{},t):t}function L(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=o(t[3]))):(e=P(t,{r:0,g:0,b:0,a:1})).a=o(e.a),e}function R(t){return"r"===t.charAt(0)?function(t){const e=A.exec(t);let n,i,o,a=255;if(e){if(e[7]!==n){const t=+e[7];a=e[8]?r(t):s(255*t,0,255)}return n=+e[1],i=+e[3],o=+e[5],n=255&(e[2]?r(n):s(n,0,255)),i=255&(e[4]?r(i):s(i,0,255)),o=255&(e[6]?r(o):s(o,0,255)),{r:n,g:i,b:o,a}}}(t):E(t)}class N{constructor(t){if(t instanceof N)return t;const e=typeof t;let n;var i,s,r;"object"===e?n=L(t):"string"===e&&(r=(i=t).length,"#"===i[0]&&(4===r||5===r?s={r:255&17*l[i[1]],g:255&17*l[i[2]],b:255&17*l[i[3]],a:5===r?17*l[i[4]]:255}:7!==r&&9!==r||(s={r:l[i[1]]<<4|l[i[2]],g:l[i[3]]<<4|l[i[4]],b:l[i[5]]<<4|l[i[6]],a:9===r?l[i[7]]<<4|l[i[8]]:255})),n=s||C(t)||R(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=P(this._rgb);return t&&(t.a=a(t.a)),t}set rgb(t){this._rgb=L(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${a(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?(t=this._rgb,e=p(t)?h:d,t?"#"+e(t.r)+e(t.g)+e(t.b)+g(t.a,e):void 0):void 0;var t,e}hslString(){return this._valid?function(t){if(!t)return;const e=v(t),n=e[0],i=c(e[1]),s=c(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${a(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let s;const r=e===s?.5:e,o=2*r-1,a=n.a-i.a,c=((o*a==-1?o:(o+a)/(1+o*a))+1)/2;s=1-c,n.r=255&c*n.r+s*i.r+.5,n.g=255&c*n.g+s*i.g+.5,n.b=255&c*n.b+s*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=M(a(t.r)),s=M(a(t.g)),r=M(a(t.b));return{r:o(D(i+n*(M(a(e.r))-i))),g:o(D(s+n*(M(a(e.g))-s))),b:o(D(r+n*(M(a(e.b))-r))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new N(this.rgb)}alpha(t){return this._rgb.a=o(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=i(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return O(this._rgb,2,t),this}darken(t){return O(this._rgb,2,-t),this}saturate(t){return O(this._rgb,1,t),this}desaturate(t){return O(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=v(t);n[0]=I(n[0]+e),n=x(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function F(){}const B=(()=>{let t=0;return()=>t++})();function V(t){return null==t}function j(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function U(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function z(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function $(t,e){return z(t)?t:e}function q(t,e){return void 0===t?e:t}const H=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function W(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function K(t,e,n,i){let s,r,o;if(j(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(U(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function G(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Y(t){if(j(t))return t.map(Y);if(U(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=Y(t[n[s]]);return e}return t}function X(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function Q(t,e,n,i){if(!X(t))return;const s=e[t],r=n[t];U(s)&&U(r)?J(s,r,i):e[t]=Y(r)}function J(t,e,n){const i=j(e)?e:[e],s=i.length;if(!U(t))return t;const r=(n=n||{}).merger||Q;let o;for(let e=0;e<s;++e){if(o=i[e],!U(o))continue;const s=Object.keys(o);for(let e=0,i=s.length;e<i;++e)r(s[e],t,o,n)}return t}function Z(t,e){return J(t,e,{merger:tt})}function tt(t,e,n){if(!X(t))return;const i=e[t],s=n[t];U(i)&&U(s)?Z(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Y(s))}const et={"":t=>t,x:t=>t.x,y:t=>t.y};function nt(t,e){const n=et[e]||(et[e]=function(t){const e=function(t){const e=t.split("."),n=[];let i="";for(const t of e)i+=t,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function it(t){return t.charAt(0).toUpperCase()+t.slice(1)}const st=t=>void 0!==t,rt=t=>"function"==typeof t,ot=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const at=Math.PI,ct=2*at,lt=ct+at,ut=Number.POSITIVE_INFINITY,ht=at/180,dt=at/2,ft=at/4,pt=2*at/3,gt=Math.log10,mt=Math.sign;function yt(t,e,n){return Math.abs(t-e)<n}function bt(t){const e=Math.round(t);t=yt(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(gt(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function wt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function vt(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function _t(t){return t*(at/180)}function xt(t){return t*(180/at)}function It(t){if(!z(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Et(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*at&&(r+=ct),{angle:r,distance:s}}function Tt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function kt(t,e){return(t-e+lt)%ct-at}function St(t){return(t%ct+ct)%ct}function Ct(t,e,n,i){const s=St(t),r=St(e),o=St(n),a=St(r-s),c=St(o-s),l=St(s-r),u=St(s-o);return s===r||s===o||i&&r===o||a>c&&l<u}function At(t,e,n){return Math.max(e,Math.min(n,t))}function Dt(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Mt(t,e,n){n=n||(n=>t[n]<e);let i,s=t.length-1,r=0;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Ot=(t,e,n,i)=>Mt(t,n,i?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),Pt=(t,e,n)=>Mt(t,n,(i=>t[i][e]>=n));const Lt=["push","pop","shift","splice","unshift"];function Rt(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);-1!==s&&i.splice(s,1),i.length>0||(Lt.forEach((e=>{delete t[e]})),delete t._chartjs)}function Nt(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}const Ft="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function Bt(t,e){let n=[],i=!1;return function(...s){n=s,i||(i=!0,Ft.call(window,(()=>{i=!1,t.apply(e,n)})))}}const Vt=t=>"start"===t?"left":"end"===t?"right":"center",jt=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Ut(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,_parsed:a}=t,c=o.axis,{min:l,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(s=At(Math.min(Ot(a,o.axis,l).lo,n?i:Ot(e,c,o.getPixelForValue(l)).lo),0,i-1)),r=d?At(Math.max(Ot(a,o.axis,u,!0).hi+1,n?0:Ot(e,c,o.getPixelForValue(u),!0).hi+1),s,i)-s:i-s}return{start:s,count:r}}function zt(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const $t=t=>0===t||1===t,qt=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*ct/n),Ht=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ct/n)+1,Wt={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*dt),easeOutSine:t=>Math.sin(t*dt),easeInOutSine:t=>-.5*(Math.cos(at*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>$t(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>$t(t)?t:qt(t,.075,.3),easeOutElastic:t=>$t(t)?t:Ht(t,.075,.3),easeInOutElastic(t){const e=.1125;return $t(t)?t:t<.5?.5*qt(2*t,e,.45):.5+.5*Ht(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Wt.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Wt.easeInBounce(2*t):.5*Wt.easeOutBounce(2*t-1)+.5};function Kt(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Gt(t){return Kt(t)?t:new N(t)}function Yt(t){return Kt(t)?t:new N(t).saturate(.5).darken(.1).hexString()}const Xt=["x","y","borderWidth","radius","tension"],Qt=["color","borderColor","backgroundColor"];const Jt=new Map;function Zt(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Jt.get(n);return i||(i=new Intl.NumberFormat(t,e),Jt.set(n,i)),i}(e,n).format(t)}const te={values:t=>j(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(s="scientific"),r=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const o=gt(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Zt(t,i,c)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(gt(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?te.numeric.call(this,t,e,n):""}};var ee={formatters:te};const ne=Object.create(null),ie=Object.create(null);function se(t,e){if(!e)return t;const n=e.split(".");for(let e=0,i=n.length;e<i;++e){const i=n[e];t=t[i]||(t[i]=Object.create(null))}return t}function re(t,e,n){return"string"==typeof e?J(se(t,e),n):J(se(t,""),e)}class oe{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Yt(e.backgroundColor),this.hoverBorderColor=(t,e)=>Yt(e.borderColor),this.hoverColor=(t,e)=>Yt(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return re(this,t,e)}get(t){return se(this,t)}describe(t,e){return re(ie,t,e)}override(t,e){return re(ne,t,e)}route(t,e,n,i){const s=se(this,t),r=se(this,n),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=r[i];return U(t)?Object.assign({},e,t):q(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach((t=>t(this)))}}var ae=new oe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Qt},numbers:{type:"number",properties:Xt}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ee.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function ce(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function le(t,e,n,i){let s=(i=i||{}).data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let c,l,u,h,d;for(c=0;c<a;c++)if(h=n[c],null!=h&&!0!==j(h))o=ce(t,s,r,o,h);else if(j(h))for(l=0,u=h.length;l<u;l++)d=h[l],null==d||j(d)||(o=ce(t,s,r,o,d));t.restore();const f=r.length/2;if(f>n.length){for(c=0;c<f;c++)delete s[r[c]];r.splice(0,f)}return o}function ue(t,e,n){const i=t.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function he(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function de(t,e,n,i){fe(t,e,n,i,null)}function fe(t,e,n,i,s){let r,o,a,c,l,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*ht;if(f&&"object"==typeof f&&(r=f.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,i,s/2,g,0,0,ct):t.arc(n,i,g,0,ct),t.closePath();break;case"triangle":u=s?s/2:g,t.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=pt,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=pt,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),t.closePath();break;case"rectRounded":l=.516*g,c=g-l,o=Math.cos(m+ft)*c,h=Math.cos(m+ft)*(s?s/2-l:c),a=Math.sin(m+ft)*c,d=Math.sin(m+ft)*(s?s/2-l:c),t.arc(n-h,i-a,l,m-at,m-dt),t.arc(n+d,i-o,l,m-dt,m),t.arc(n+h,i+a,l,m,m+dt),t.arc(n-d,i+o,l,m+dt,m+at),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,u=s?s/2:c,t.rect(n-u,i-c,2*u,2*c);break}m+=ft;case"rectRot":h=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":m+=ft;case"cross":h=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),m+=ft,h=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=s?s/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(s?s/2:g),i+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function pe(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ge(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function me(t){t.restore()}function ye(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if("middle"===s){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===s!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function be(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function we(t,e,n,i,s,r={}){const o=j(e)?e:[e],a=r.strokeWidth>0&&""!==r.strokeColor;let c,l;for(t.save(),t.font=s.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);V(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,r),c=0;c<o.length;++c)l=o[c],r.backdrop&&_e(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),V(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(l,n,i,r.maxWidth)),t.fillText(l,n,i,r.maxWidth),ve(t,n,i,l,r),i+=s.lineHeight;t.restore()}function ve(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,c=n-r.actualBoundingBoxAscent,l=n+r.actualBoundingBoxDescent,u=s.strikethrough?(c+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function _e(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function xe(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-dt,at,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,at,dt,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,dt,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-dt,!0),t.lineTo(n+o.topLeft,i)}const Ie=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ee=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Te(t,e){const n=(""+t).match(Ie);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const ke=t=>+t||0;function Se(t,e){const n={},i=U(e),s=i?Object.keys(e):e,r=U(t)?i?n=>q(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of s)n[t]=ke(r(t));return n}function Ce(t){return Se(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ae(t){return Se(t,["topLeft","topRight","bottomLeft","bottomRight"])}function De(t){const e=Ce(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Me(t,e){t=t||{},e=e||ae.font;let n=q(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let i=q(t.style,e.style);i&&!(""+i).match(Ee)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:q(t.family,e.family),lineHeight:Te(q(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:q(t.weight,e.weight),string:""};return s.string=function(t){return!t||V(t.size)||V(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(s),s}function Oe(t,e,n,i){let s,r,o,a=!0;for(s=0,r=t.length;s<r;++s)if(o=t[s],void 0!==o&&(void 0!==e&&"function"==typeof o&&(o=o(e),a=!1),void 0!==n&&j(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function Pe(t,e){return Object.assign(Object.create(t),e)}function Le(t,e=[""],n=t,i,s=(()=>t[0])){st(i)||(i=He("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:s,override:s=>Le([s,...t],e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>Ve(n,i,(()=>function(t,e,n,i){let s;for(const r of e)if(s=He(Fe(r,t),n),st(s))return Be(t,s)?$e(n,i,t,s):s}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>We(t).includes(e),ownKeys:t=>We(t),set(t,e,n){const i=t._storage||(t._storage=s());return t[e]=i[e]=n,delete t._keys,!0}})}function Re(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Ne(t,i),setContext:e=>Re(t,e,n,i),override:s=>Re(t.override(s),e,n,i)};return new Proxy(s,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Ve(t,e,(()=>function(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];rt(a)&&o.isScriptable(e)&&(a=function(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t),e=e(r,o||i),a.delete(t),Be(t,e)&&(e=$e(s._scopes,s,t,e));return e}(e,a,t,n));j(a)&&a.length&&(a=function(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(st(r.index)&&i(t))e=e[r.index%e.length];else if(U(e[0])){const n=e,i=s._scopes.filter((t=>t!==n));e=[];for(const c of n){const n=$e(i,s,t,c);e.push(Re(n,r,o&&o[t],a))}}return e}(e,a,t,o.isIndexable));Be(e,a)&&(a=Re(a,s,r&&r[e],o));return a}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function Ne(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:rt(n)?n:()=>n,isIndexable:rt(i)?i:()=>i}}const Fe=(t,e)=>t?t+it(e):e,Be=(t,e)=>U(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Ve(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function je(t,e,n){return rt(t)?t(e,n):t}const Ue=(t,e)=>!0===t?e:"string"==typeof t?nt(e,t):void 0;function ze(t,e,n,i,s){for(const r of e){const e=Ue(n,r);if(e){t.add(e);const r=je(e._fallback,n,s);if(st(r)&&r!==n&&r!==i)return r}else if(!1===e&&st(i)&&n!==i)return null}return!1}function $e(t,e,n,i){const s=e._rootScopes,r=je(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let c=qe(a,o,n,r||n,i);return null!==c&&((!st(r)||r===n||(c=qe(a,o,r,c,i),null!==c))&&Le(Array.from(a),[""],s,r,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];if(j(s)&&U(n))return n;return s||{}}(e,n,i))))}function qe(t,e,n,i,s){for(;n;)n=ze(t,e,n,i,s);return n}function He(t,e){for(const n of e){if(!n)continue;const e=n[t];if(st(e))return e}}function We(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function Ke(t,e,n,i){const{iScale:s}=t,{key:r="r"}=this._parsing,o=new Array(i);let a,c,l,u;for(a=0,c=i;a<c;++a)l=a+n,u=e[l],o[a]={r:s.parse(nt(u,r),l)};return o}const Ge=Number.EPSILON||1e-14,Ye=(t,e)=>e<t.length&&!t[e].skip&&t[e],Xe=t=>"x"===t?"y":"x";function Qe(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=Tt(r,s),c=Tt(o,r);let l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;const h=i*l,d=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function Je(t,e="x"){const n=Xe(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,c,l=Ye(t,0);for(o=0;o<i;++o)if(a=c,c=l,l=Ye(t,o+1),c){if(l){const t=l[e]-c[e];s[o]=0!==t?(l[n]-c[n])/t:0}r[o]=a?l?mt(s[o-1])!==mt(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}!function(t,e,n){const i=t.length;let s,r,o,a,c,l=Ye(t,0);for(let u=0;u<i-1;++u)c=l,l=Ye(t,u+1),c&&l&&(yt(e[u],0,Ge)?n[u]=n[u+1]=0:(s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),a<=9||(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])))}(t,s,r),function(t,e,n="x"){const i=Xe(n),s=t.length;let r,o,a,c=Ye(t,0);for(let l=0;l<s;++l){if(o=a,a=c,c=Ye(t,l+1),!a)continue;const s=a[n],u=a[i];o&&(r=(s-o[n])/3,a[`cp1${n}`]=s-r,a[`cp1${i}`]=u-r*e[l]),c&&(r=(c[n]-s)/3,a[`cp2${n}`]=s+r,a[`cp2${i}`]=u+r*e[l])}}(t,r,e)}function Ze(t,e,n){return Math.max(Math.min(t,n),e)}function tn(t,e,n,i,s){let r,o,a,c;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)Je(t,s);else{let n=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],c=Qe(n,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,n=a}e.capBezierPoints&&function(t,e){let n,i,s,r,o,a=pe(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&pe(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=Ze(s.cp1x,e.left,e.right),s.cp1y=Ze(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Ze(s.cp2x,e.left,e.right),s.cp2y=Ze(s.cp2y,e.top,e.bottom)))}(t,n)}function en(){return"undefined"!=typeof window&&"undefined"!=typeof document}function nn(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function sn(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const rn=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const on=["top","right","bottom","left"];function an(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=on[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const cn=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function ln(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=rn(n),r="border-box"===s.boxSizing,o=an(s,"padding"),a=an(s,"border","width"),{x:c,y:l,box:u}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o,a,c=!1;if(cn(s,r,t.target))o=s,a=r;else{const t=e.getBoundingClientRect();o=i.clientX-t.left,a=i.clientY-t.top,c=!0}return{x:o,y:a,box:c}}(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-h)/f*n.width/i),y:Math.round((l-d)/p*n.height/i)}}const un=t=>Math.round(10*t)/10;function hn(t,e,n,i){const s=rn(t),r=an(s,"margin"),o=sn(s.maxWidth,t,"clientWidth")||ut,a=sn(s.maxHeight,t,"clientHeight")||ut,c=function(t,e,n){let i,s;if(void 0===e||void 0===n){const r=nn(t);if(r){const t=r.getBoundingClientRect(),o=rn(r),a=an(o,"border","width"),c=an(o,"padding");e=t.width-c.width-a.width,n=t.height-c.height-a.height,i=sn(o.maxWidth,r,"clientWidth"),s=sn(o.maxHeight,r,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||ut,maxHeight:s||ut}}(t,e,n);let{width:l,height:u}=c;if("content-box"===s.boxSizing){const t=an(s,"border","width"),e=an(s,"padding");l-=e.width+t.width,u-=e.height+t.height}l=Math.max(0,l-r.width),u=Math.max(0,i?l/i:u-r.height),l=un(Math.min(l,o,c.maxWidth)),u=un(Math.min(u,a,c.maxHeight)),l&&!u&&(u=un(l/2));return(void 0!==e||void 0!==n)&&i&&c.height&&u>c.height&&(u=c.height,l=un(Math.floor(u*i))),{width:l,height:u}}function dn(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r)&&(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0)}const fn=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function pn(t,e){const n=function(t,e){return rn(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function gn(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function mn(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function yn(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=gn(t,s,n),a=gn(s,r,n),c=gn(r,e,n),l=gn(o,a,n),u=gn(a,c,n);return gn(l,u,n)}const bn=function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}},wn=function(){return{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}};function vn(t,e,n){return t?bn(e,n):wn()}function _n(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function xn(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function In(t){return"angle"===t?{between:Ct,compare:kt,normalize:St}:{between:Dt,compare:(t,e)=>t-e,normalize:t=>t}}function En({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:s}}function Tn(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:c,normalize:l}=In(i),{start:u,end:h,loop:d,style:f}=function(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=In(i),c=e.length;let l,u,{start:h,end:d,loop:f}=t;if(f){for(h+=c,d+=c,l=0,u=c;l<u&&o(a(e[h%c][i]),s,r);++l)h--,d--;h%=c,d%=c}return d<h&&(d+=c),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,y,b=!1,w=null;const v=()=>b||c(s,y,g)&&0!==a(s,y),_=()=>!b||0===a(r,g)||c(r,y,g);for(let t=u,n=u;t<=h;++t)m=e[t%o],m.skip||(g=l(m[i]),g!==y&&(b=c(g,s,r),null===w&&v()&&(w=0===a(g,s)?t:n),null!==w&&_()&&(p.push(En({start:w,end:t,loop:d,count:o,style:f})),w=null),n=t,y=g));return null!==w&&p.push(En({start:w,end:h,loop:d,count:o,style:f})),p}function kn(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=Tn(i[s],t.points,e);r.length&&n.push(...r)}return n}function Sn(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const s=t._chart.getContext(),r=Cn(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=n.length,l=[];let u=r,h=e[0].start,d=h;function f(t,e,i,s){const r=a?-1:1;if(t!==e){for(t+=c;n[t%c].skip;)t-=r;for(;n[e%c].skip;)e+=r;t%c!=e%c&&(l.push({start:t%c,end:e%c,loop:i,style:s}),u=s,h=e%c)}}for(const t of e){h=a?h:t.start;let e,r=n[h%c];for(d=h+1;d<=t.end;d++){const a=n[d%c];e=Cn(i.setContext(Pe(s,{type:"segment",p0:r,p1:a,p0DataIndex:(d-1)%c,p1DataIndex:d%c,datasetIndex:o}))),An(e,u)&&f(h,d-1,t.loop,u),r=a,u=e}h<d-1&&f(h,d-1,t.loop,u)}return l}(t,e,n,i):e}function Cn(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function An(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}class Dn{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const s=e.listeners[i],r=e.duration;s.forEach((i=>i({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(n-e.start,r)})))}_refresh(){this._request||(this._running=!0,this._request=Ft.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const s=n.items;let r,o=s.length-1,a=!1;for(;o>=0;--o)r=s[o],r._active?(r._total>n.duration&&(n.duration=r._total),r.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),s.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=s.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Mn=new Dn;const On="transparent",Pn={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=Gt(t||On),s=i.valid&&Gt(e||On);return s&&s.valid?s.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class Ln{constructor(t,e,n,i){const s=e[n];i=Oe([t.to,i,s,t.from]);const r=Oe([t.from,s,i]);this._active=!0,this._fn=t.fn||Pn[t.type||typeof r],this._easing=Wt[t.easing]||Wt.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],s=n-this._start,r=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Oe([t.to,e,i,t.from]),this._from=Oe([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,s=this._from,r=this._loop,o=this._to;let a;if(this._active=s!==o&&(r||e<n),!this._active)return this._target[i]=o,void this._notify(!0);e<0?this._target[i]=s:(a=e/n%2,a=r&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(s,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class Rn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!U(t))return;const e=Object.keys(ae.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const s=t[i];if(!U(s))return;const r={};for(const t of e)r[t]=s[t];(j(s.properties)&&s.properties||[i]).forEach((t=>{t!==i&&n.has(t)||n.set(t,r)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const s=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const s=t[i[e]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),s}_createAnimations(t,e){const n=this._properties,i=[],s=t.$animations||(t.$animations={}),r=Object.keys(e),o=Date.now();let a;for(a=r.length-1;a>=0;--a){const c=r[a];if("$"===c.charAt(0))continue;if("options"===c){i.push(...this._animateOptions(t,e));continue}const l=e[c];let u=s[c];const h=n.get(c);if(u){if(h&&u.active()){u.update(h,l,o);continue}u.cancel()}h&&h.duration?(s[c]=u=new Ln(h,t,c,l),i.push(u)):t[c]=l}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Mn.add(this._chart,n),!0):void 0}}function Nn(t,e){const n=t&&t.options||{},i=n.reverse,s=void 0===n.min?e:0,r=void 0===n.max?e:0;return{start:i?r:s,end:i?s:r}}function Fn(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function Bn(t,e,n,i={}){const s=t.keys,r="single"===i.mode;let o,a,c,l;if(null!==e){for(o=0,a=s.length;o<a;++o){if(c=+s[o],c===n){if(i.all)continue;break}l=t.values[c],z(l)&&(r||0===e||mt(e)===mt(l))&&(e+=l)}return e}}function Vn(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function jn(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Un(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const e=t[s.index];if(n&&e>0||!n&&e<0)return s.index}return null}function zn(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,c=r.axis,l=o.axis,u=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(r,o,i),h=e.length;let d;for(let t=0;t<h;++t){const n=e[t],{[c]:r,[l]:h}=n;d=(n._stacks||(n._stacks={}))[l]=jn(s,u,r),d[a]=h,d._top=Un(d,o,!0,i.type),d._bottom=Un(d,o,!1,i.type);(d._visualValues||(d._visualValues={}))[a]=h}}function $n(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function qn(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const Hn=t=>"reset"===t||"none"===t,Wn=(t,e)=>e?t:Object.assign({},t);class Kn{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Vn(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&qn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,s=e.xAxisID=q(n.xAxisID,$n(t,"x")),r=e.yAxisID=q(n.yAxisID,$n(t,"y")),o=e.rAxisID=q(n.rAxisID,$n(t,"r")),a=e.indexAxis,c=e.iAxisID=i(a,s,r,o),l=e.vAxisID=i(a,r,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Rt(this._data,this),t._stacked&&qn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(U(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],n[i]={x:r,y:t[r]};return n}(e);else if(n!==e){if(n){Rt(n,this);const t=this._cachedMeta;qn(t),t._parsed=[]}e&&Object.isExtensible(e)&&(s=this,(i=e)._chartjs?i._chartjs.listeners.push(s):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),Lt.forEach((t=>{const e="_onData"+it(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...t){const s=n.apply(this,t);return i._chartjs.listeners.forEach((n=>{"function"==typeof n[e]&&n[e](...t)})),s}})})))),this._syncList=[],this._data=e}var i,s}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const s=e._stacked;e._stacked=Vn(e.vScale,e),e.stack!==n.stack&&(i=!0,qn(e),e.stack=n.stack),this._resyncElements(t),(i||s!==e._stacked)&&zn(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:s,_stacked:r}=n,o=s.axis;let a,c,l,u=0===t&&e===i.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,l=i;else{l=j(i[t])?this.parseArrayData(n,i,t,e):U(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const s=()=>null===c[o]||h&&c[o]<h[o];for(a=0;a<e;++a)n._parsed[a+t]=c=l[a],u&&(s()&&(u=!1),h=c);n._sorted=u}r&&zn(this,l)}parsePrimitiveData(t,e,n,i){const{iScale:s,vScale:r}=t,o=s.axis,a=r.axis,c=s.getLabels(),l=s===r,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[o]:l||s.parse(c[f],f),[a]:r.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:s,yScale:r}=t,o=new Array(i);let a,c,l,u;for(a=0,c=i;a<c;++a)l=a+n,u=e[l],o[a]={x:s.parse(u[0],l),y:r.parse(u[1],l)};return o}parseObjectData(t,e,n,i){const{xScale:s,yScale:r}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c=new Array(i);let l,u,h,d;for(l=0,u=i;l<u;++l)h=l+n,d=e[h],c[l]={x:s.parse(nt(d,o),h),y:r.parse(nt(d,a),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,s=this._cachedMeta,r=e[t.axis];return Bn({keys:Fn(i,!0),values:e._stacks[t.axis]._visualValues},r,s.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const s=n[e.axis];let r=null===s?NaN:s;const o=i&&n._stacks[e.axis];i&&o&&(i.values=o,r=Bn(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,s=n._sorted&&t===n.iScale,r=i.length,o=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Fn(n,!0),values:null})(e,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:u}=function(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=i[h];const e=d[o.axis];return!z(d[t.axis])||l>e||u<e}for(h=0;h<r&&(f()||(this.updateRangeFromParsed(c,t,d,a),!s));++h);if(s)for(h=r-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(c,t,d,a);break}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i][t.axis],z(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,s=this.getParsed(t);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,s;return U(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:!1===t}}(q(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=Nn(t,n),s=Nn(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],s=e.chartArea,r=[],o=this._drawStart||0,a=this._drawCount||i.length-o,c=this.options.drawActiveElementsOnTop;let l;for(n.dataset&&n.dataset.draw(t,s,o,a),l=o;l<o+a;++l){const e=i[l];e.hidden||(e.active&&c?r.push(e):e.draw(t,s))}for(l=0;l<r.length;++l)r[l].draw(t,s)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];s=e.$context||(e.$context=function(t,e,n){return Pe(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=function(t,e){return Pe(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=n,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,s=this._cachedDataOpts,r=t+"-"+e,o=s[r],a=this.enableOptionSharing&&st(n);if(o)return Wn(o,a);const c=this.chart.config,l=c.datasetElementScopeKeys(this._type,t),u=i?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),l),d=Object.keys(ae.elements[t]),f=c.resolveNamedOptions(h,d,(()=>this.getContext(n,i,e)),u);return f.$shared&&(f.$shared=a,s[r]=Object.freeze(Wn(f,a))),f}_resolveAnimations(t,e,n){const i=this.chart,s=this._cachedDataOpts,r=`animation-${e}`,o=s[r];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,s=i.datasetAnimationScopeKeys(this._type,e),r=i.getOptionScopes(this.getDataset(),s);a=i.createResolver(r,this.getContext(t,n,e))}const c=new Rn(i,a&&a.animations);return a&&a._cacheable&&(s[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Hn(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,s=this.getSharedOptions(n),r=this.includeOptions(e,s)||s!==i;return this.updateSharedOptions(s,e,n),{sharedOptions:s,includeOptions:r}}updateElement(t,e,n,i){Hn(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Hn(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const s=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const i=n.length,s=e.length,r=Math.min(s,i);r&&this.parse(0,r),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,e,n=!0){const i=this._cachedMeta,s=i.data,r=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=r;o--)t[o]=t[o-e]};for(a(s),o=t;o<r;++o)s[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(t,e),n&&this.updateElements(s,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&qn(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Gn(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,s=n.length;e<s;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=Nt(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,s,r,o,a=e._length;const c=()=>{32767!==r&&-32768!==r&&(st(o)&&(a=Math.min(a,Math.abs(r-o)||a)),o=r)};for(i=0,s=n.length;i<s;++i)r=e.getPixelForValue(n[i]),c();for(o=void 0,i=0,s=e.ticks.length;i<s;++i)r=e.getPixelForTick(i),c();return a}function Yn(t,e,n,i){return j(t)?function(t,e,n,i){const s=n.parse(t[0],i),r=n.parse(t[1],i),o=Math.min(s,r),a=Math.max(s,r);let c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[n.axis]=l,e._custom={barStart:c,barEnd:l,start:s,end:r,min:o,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Xn(t,e,n,i){const s=t.iScale,r=t.vScale,o=s.getLabels(),a=s===r,c=[];let l,u,h,d;for(l=n,u=n+i;l<u;++l)d=e[l],h={},h[s.axis]=a||s.parse(o[l],l),c.push(Yn(d,h,r,l));return c}function Qn(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Jn(t,e,n,i){let s=e.borderSkipped;const r={};if(!s)return void(t.borderSkipped=r);if(!0===s)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:c,top:l,bottom:u}=function(t){let e,n,i,s,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:e,top:s,bottom:r}}(t);"middle"===s&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?s=l:(n._bottom||0)===i?s=u:(r[Zn(u,o,a,c)]=!0,s=l)),r[Zn(s,o,a,c)]=!0,t.borderSkipped=r}function Zn(t,e,n,i){var s,r,o;return i?(o=n,t=ti(t=(s=t)===(r=e)?o:s===o?r:s,n,e)):t=ti(t,e,n),t}function ti(t,e,n){return"start"===t?e:"end"===t?n:t}function ei(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class ni extends Kn{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,s)=>{const r=t.getDatasetMeta(0).controller.getStyle(s);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:i,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let s,r,o=t=>+n[t];if(U(n[t])){const{key:t="value"}=this._parsing;o=e=>+nt(n[e],t)}for(s=t,r=t+e;s<r;++s)i._parsed[s]=o(s)}}_getRotation(){return _t(this.options.rotation-90)}_getCircumference(){return _t(this.options.circumference)}_getRotationExtents(){let t=ct,e=-ct;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,s=i._getRotation(),r=i._getCircumference();t=Math.min(t,s),e=Math.max(e,s+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,s=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-r)/2,0),a=Math.min((c=this.options.cutout,l=o,"string"==typeof c&&c.endsWith("%")?parseFloat(c)/100:+c/l),1);var c,l;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let i=1,s=1,r=0,o=0;if(e<ct){const a=t,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),d=Math.sin(c),f=(t,e,i)=>Ct(t,a,c,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>Ct(t,a,c,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,l,h),m=f(dt,u,d),y=p(at,l,h),b=p(at+dt,u,d);i=(g-y)/2,s=(m-b)/2,r=-(g+y)/2,o=-(m+b)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}(d,h,a),y=(n.width-r)/f,b=(n.height-r)/p,w=Math.max(Math.min(y,b)/2,0),v=H(this.options.radius,w),_=(v-Math.max(v*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=m*v,i.total=this.calculateTotal(),this.outerRadius=v-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,s=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/ct)}updateElements(t,e,n,i){const s="reset"===i,r=this.chart,o=r.chartArea,a=r.options.animation,c=(o.left+o.right)/2,l=(o.top+o.bottom)/2,u=s&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,i);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,s);for(g=e;g<e+n;++g){const e=this._circumference(g,s),n=t[g],r={x:c+this.offsetX,y:l+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:h};p&&(r.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=e,this.updateElement(n,g,r,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const s=t._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(s))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ct*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=Zt(e._parsed[t],n.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,s,r,o,a;if(!t)for(i=0,s=n.data.datasets.length;i<s;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),t=r.data,o=r.controller;break}if(!t)return 0;for(i=0,s=t.length;i<s;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(q(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ii extends Kn{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,s)=>{const r=t.getDatasetMeta(0).controller.getStyle(s);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:i,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=Zt(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:s}}parseObjectData(t,e,n,i){return Ke.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),s=Math.max(i/2,0),r=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=s-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(t,e,n,i){const s="reset"===i,r=this.chart,o=r.options.animation,a=this._cachedMeta.rScale,c=a.xCenter,l=a.yCenter,u=a.getIndexAngle(0)-.5*at;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,i,f);for(h=e;h<e+n;h++){const e=t[h];let n=d,p=d+this._computeAngle(h,i,f),g=r.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,s&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:c,y:l,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?_t(this.resolveDataElementOptions(t,e).angle||n):0}}var si=Object.freeze({__proto__:null,BarController:class extends Kn{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,i){return Xn(t,e,n,i)}parseArrayData(t,e,n,i){return Xn(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:s,vScale:r}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c="x"===s.axis?o:a,l="x"===r.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[s.axis]=s.parse(nt(p,c),h),u.push(Yn(nt(p,l),f,r,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const s=n._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,s=this.getParsed(t),r=s._custom,o=Qn(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const s="reset"===i,{index:r,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),c=o.isHorizontal(),l=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,i);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=s||V(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,l),p=(e._stacks||{})[o.axis],g={horizontal:c,base:n.base,enableBorderRadius:!p||Qn(e._custom)||r===p._top||r===p._bottom,x:c?n.head:f.center,y:c?f.center:n.head,height:c?f.size:Math.abs(n.size),width:c?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,t[d].active?"active":i));const m=g.options||t[d].options;Jn(g,m,p,r),ei(g,m,l.ratio),this.updateElement(t[d],d,g,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),s=n.options.stacked,r=[],o=t=>{const n=t.controller.getParsed(e),i=n&&n[t.vScale.axis];if(V(i)||isNaN(i))return!0};for(const n of i)if((void 0===e||!o(n))&&((!1===s||-1===r.indexOf(n.stack)||void 0===s&&void 0===n.stack)&&r.push(n.stack),n.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),s=void 0!==e?i.indexOf(e):-1;return-1===s?i.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let s,r;for(s=0,r=e.data.length;s<r;++s)i.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const o=t.barThickness;return{min:o||Gn(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:s,minBarLength:r}}=this,o=s||0,a=this.getParsed(t),c=a._custom,l=Qn(c);let u,h,d=a[e.axis],f=0,p=n?this.applyStack(e,a,n):d;p!==d&&(f=p-d,p=d),l&&(d=c.barStart,p=c.barEnd-c.barStart,0!==d&&mt(d)!==mt(c.barEnd)&&(f=0),f+=d);const g=V(s)||l?f:s;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<r){h=function(t,e,n){return 0!==t?mt(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(h,e,o)*r,d===o&&(m-=h/2);const t=e.getPixelForDecimal(0),s=e.getPixelForDecimal(1),c=Math.min(t,s),f=Math.max(t,s);m=Math.max(Math.min(m,f),c),u=m+h,n&&!l&&(a._stacks[e.axis]._visualValues[i]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(o)){const t=mt(h)*e.getLineWidthForValue(o)/2;m+=t,h-=t}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,s=i.skipNull,r=q(i.maxBarThickness,1/0);let o,a;if(e.grouped){const n=s?this._getStackCount(t):e.stackCount,c="flex"===i.barThickness?function(t,e,n,i){const s=e.pixels,r=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const c=n.categoryPercentage;null===o&&(o=r-(null===a?e.end-e.start:a-r)),null===a&&(a=r+r-o);const l=r-(r-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:n.barPercentage,start:l}}(t,e,i,n):function(t,e,n,i){const s=n.barThickness;let r,o;return V(s)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[t]-r/2}}(t,e,i,n),l=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);o=c.start+c.chunk*l+c.chunk/2,a=Math.min(r,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(r,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let s=0;for(;s<i;++s)null!==this.getParsed(s)[e.axis]&&n[s].draw(this._ctx)}},BubbleController:class extends Kn{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const s=super.parsePrimitiveData(t,e,n,i);for(let t=0;t<s.length;t++)s[t]._custom=this.resolveDataElementOptions(t+n).radius;return s}parseArrayData(t,e,n,i){const s=super.parseArrayData(t,e,n,i);for(let t=0;t<s.length;t++){const i=e[n+t];s[t]._custom=q(i[2],this.resolveDataElementOptions(t+n).radius)}return s}parseObjectData(t,e,n,i){const s=super.parseObjectData(t,e,n,i);for(let t=0;t<s.length;t++){const i=e[n+t];s[t]._custom=q(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:s}=e,r=this.getParsed(t),o=i.getLabelForValue(r.x),a=s.getLabelForValue(r.y),c=r._custom;return{label:n[t]||"",value:"("+o+", "+a+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const s="reset"===i,{iScale:r,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:c}=this._getSharedOptions(e,i),l=r.axis,u=o.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!s&&this.getParsed(h),d={},f=d[l]=s?r.getPixelForDecimal(.5):r.getPixelForValue(n[l]),p=d[u]=s?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),c&&(d.options=a||this.resolveDataElementOptions(h,e.active?"active":i),s&&(d.options.radius=0)),this.updateElement(e,h,d,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return"active"!==e&&(i.radius=0),i.radius+=q(n&&n._custom,s),i}},DoughnutController:ni,LineController:class extends Kn{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:s}=e,r=this.chart._animationsDisabled;let{start:o,count:a}=Ut(e,i,r);this._drawStart=o,this._drawCount=a,zt(e)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},t),this.updateElements(i,o,a,t)}updateElements(t,e,n,i){const s="reset"===i,{iScale:r,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(e,i),h=r.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=wt(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||"none"===i,y=e+n,b=t.length;let w=e>0&&this.getParsed(e-1);for(let n=0;n<b;++n){const f=t[n],b=m?f:{};if(n<e||n>=y){b.skip=!0;continue}const v=this.getParsed(n),_=V(v[d]),x=b[h]=r.getPixelForValue(v[h],n),I=b[d]=s||_?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],n);b.skip=isNaN(x)||isNaN(I)||_,b.stop=n>0&&Math.abs(v[h]-w[h])>g,p&&(b.parsed=v,b.raw=c.data[n]),u&&(b.options=l||this.resolveDataElementOptions(n,f.active?"active":i)),m||this.updateElement(f,n,b,i),w=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const s=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,s,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PolarAreaController:ii,PieController:class extends ni{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},RadarController:class extends Kn{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return Ke.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],s=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const r={_loop:!0,_fullLoop:s.length===i.length,options:e};this.updateElement(n,void 0,r,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const s=this._cachedMeta.rScale,r="reset"===i;for(let o=e;o<e+n;o++){const e=t[o],n=this.resolveDataElementOptions(o,e.active?"active":i),a=s.getPointPositionForValue(o,this.getParsed(o).r),c=r?s.xCenter:a.x,l=r?s.yCenter:a.y,u={x:c,y:l,angle:a.angle,skip:isNaN(c)||isNaN(l),options:n};this.updateElement(e,o,u,i)}}},ScatterController:class extends Kn{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:s}=e,r=this.getParsed(t),o=i.getLabelForValue(r.x),a=s.getLabelForValue(r.y);return{label:n[t]||"",value:"("+o+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:s,count:r}=Ut(e,n,i);if(this._drawStart=s,this._drawCount=r,zt(e)&&(s=0,r=n.length),this.options.showLine){const{dataset:s,_dataset:r}=e;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=n;const o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(s,void 0,{animated:!i,options:o},t)}this.updateElements(n,s,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const s="reset"===i,{iScale:r,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,l=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(l),h=this.includeOptions(i,u),d=r.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=wt(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||"none"===i;let b=e>0&&this.getParsed(e-1);for(let l=e;l<e+n;++l){const e=t[l],n=this.getParsed(l),p=y?e:{},w=V(n[f]),v=p[d]=r.getPixelForValue(n[d],l),_=p[f]=s||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],l);p.skip=isNaN(v)||isNaN(_)||w,p.stop=l>0&&Math.abs(n[d]-b[d])>m,g&&(p.parsed=n,p.raw=c.data[l]),h&&(p.options=u||this.resolveDataElementOptions(l,e.active?"active":i)),y||this.updateElement(e,l,p,i),b=n}this.updateSharedOptions(u,i,l)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const s=e[0].size(this.resolveDataElementOptions(0)),r=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,s,r)/2}}});function ri(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class oi{static override(t){Object.assign(oi.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return ri()}parse(){return ri()}format(){return ri()}add(){return ri()}diff(){return ri()}startOf(){return ri()}endOf(){return ri()}}var ai=oi;function ci(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&r.length){const t=a._reversePixels?Pt:Ot;if(!i)return t(r,e,n);if(s._sharedOptions){const i=r[0],s="function"==typeof i.getRange&&i.getRange(e);if(s){const i=t(r,e,n-s),o=t(r,e,n+s);return{lo:i.lo,hi:o.hi}}}}return{lo:0,hi:r.length-1}}function li(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let t=0,n=r.length;t<n;++t){const{index:n,data:a}=r[t],{lo:c,hi:l}=ci(r[t],e,o,s);for(let t=c;t<=l;++t){const e=a[t];e.skip||i(e,n,t)}}}function ui(t,e,n,i,s){const r=[];if(!s&&!t.isPointInArea(e))return r;return li(t,n,e,(function(n,o,a){(s||pe(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&r.push({element:n,datasetIndex:o,index:a})}),!0),r}function hi(t,e,n,i,s,r){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const s=e?Math.abs(t.x-i.x):0,r=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(r,2))}}(n);let c=Number.POSITIVE_INFINITY;return li(t,n,e,(function(n,l,u){const h=n.inRange(e.x,e.y,s);if(i&&!h)return;const d=n.getCenterPoint(s);if(!(!!r||t.isPointInArea(d))&&!h)return;const f=a(e,d);f<c?(o=[{element:n,datasetIndex:l,index:u}],c=f):f===c&&o.push({element:n,datasetIndex:l,index:u})})),o}function di(t,e,n,i,s,r){return r||t.isPointInArea(e)?"r"!==n||i?hi(t,e,n,i,s,r):function(t,e,n,i){let s=[];return li(t,n,e,(function(t,n,r){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],i),{angle:c}=Et(t,{x:e.x,y:e.y});Ct(c,o,a)&&s.push({element:t,datasetIndex:n,index:r})})),s}(t,e,n,s):[]}function fi(t,e,n,i,s){const r=[],o="x"===n?"inXRange":"inYRange";let a=!1;return li(t,n,e,((t,i,c)=>{t[o](e[n],s)&&(r.push({element:t,datasetIndex:i,index:c}),a=a||t.inRange(e.x,e.y,s))})),i&&!a?[]:r}var pi={evaluateInteractionItems:li,modes:{index(t,e,n,i){const s=ln(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ui(t,s,r,i,o):di(t,s,r,!1,i,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&c.push({element:n,datasetIndex:t.index,index:e})})),c):[]},dataset(t,e,n,i){const s=ln(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ui(t,s,r,i,o):di(t,s,r,!1,i,o);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,i)=>ui(t,ln(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const s=ln(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return di(t,s,r,n.intersect,i,o)},x:(t,e,n,i)=>fi(t,ln(e,t),"x",n.intersect,i),y:(t,e,n,i)=>fi(t,ln(e,t),"y",n.intersect,i)}};const gi=["left","top","right","bottom"];function mi(t,e){return t.filter((t=>t.pos===e))}function yi(t,e){return t.filter((t=>-1===gi.indexOf(t.pos)&&t.box.axis===e))}function bi(t,e){return t.sort(((t,n)=>{const i=e?n:t,s=e?t:n;return i.weight===s.weight?i.index-s.index:i.weight-s.weight}))}function wi(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:s}=n;if(!t||!gi.includes(i))continue;const r=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=s}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:o}=a.box,c=n[a.stack],l=c&&a.stackWeight/c.weight;a.horizontal?(a.width=l?l*i:o&&e.availableWidth,a.height=s):(a.width=i,a.height=l?l*s:o&&e.availableHeight)}return n}function vi(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function _i(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function xi(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!U(s)){n.size&&(t[s]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?r.height:r.width),n.size=e.size/e.count,t[s]+=n.size}r.getPadding&&_i(o,r.getPadding());const a=Math.max(0,e.outerWidth-vi(o,t,"left","right")),c=Math.max(0,e.outerHeight-vi(o,t,"top","bottom")),l=a!==t.w,u=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:l,other:u}:{same:u,other:l}}function Ii(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}return i(t?["left","right"]:["top","bottom"])}function Ei(t,e,n,i){const s=[];let r,o,a,c,l,u;for(r=0,o=t.length,l=0;r<o;++r){a=t[r],c=a.box,c.update(a.width||e.w,a.height||e.h,Ii(a.horizontal,e));const{same:o,other:h}=xi(e,n,a,i);l|=o&&s.length,u=u||h,c.fullSize||s.push(a)}return l&&Ei(s,e,n,i)||u}function Ti(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function ki(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const t=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},l=a.stackWeight/c.weight||1;if(a.horizontal){const i=e.w*l,r=c.size||t.height;st(c.start)&&(o=c.start),t.fullSize?Ti(t,s.left,o,n.outerWidth-s.right-s.left,r):Ti(t,e.left+c.placed,o,i,r),c.start=o,c.placed+=i,o=t.bottom}else{const i=e.h*l,o=c.size||t.width;st(c.start)&&(r=c.start),t.fullSize?Ti(t,r,s.top,o,n.outerHeight-s.bottom-s.top):Ti(t,r,e.top+c.placed,o,i),c.start=r,c.placed+=i,r=t.right}}e.x=r,e.y=o}var Si={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=De(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=function(t){const e=function(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],({position:r,options:{stack:o,stackWeight:a=1}}=s),e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}(t),n=bi(e.filter((t=>t.box.fullSize)),!0),i=bi(mi(e,"left"),!0),s=bi(mi(e,"right")),r=bi(mi(e,"top"),!0),o=bi(mi(e,"bottom")),a=yi(e,"x"),c=yi(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(c).concat(o).concat(a),chartArea:mi(e,"chartArea"),vertical:i.concat(s).concat(c),horizontal:r.concat(o).concat(a)}}(t.boxes),c=a.vertical,l=a.horizontal;K(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const u=c.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);_i(d,De(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),p=wi(c.concat(l),h);Ei(a.fullSize,f,h,p),Ei(c,f,h,p),Ei(l,f,h,p)&&Ei(c,f,h,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),ki(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,ki(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},K(a.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Ci{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class Ai extends Ci{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Di="$chartjs",Mi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Oi=t=>null===t||""===t;const Pi=!!fn&&{passive:!0};function Li(t,e,n){t.canvas.removeEventListener(e,n,Pi)}function Ri(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Ni(t,e,n){const i=t.canvas,s=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||Ri(n.addedNodes,i),e=e&&!Ri(n.removedNodes,i);e&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}function Fi(t,e,n){const i=t.canvas,s=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||Ri(n.removedNodes,i),e=e&&!Ri(n.addedNodes,i);e&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}const Bi=new Map;let Vi=0;function ji(){const t=window.devicePixelRatio;t!==Vi&&(Vi=t,Bi.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function Ui(t,e,n){const i=t.canvas,s=i&&nn(i);if(!s)return;const r=Bt(((t,e)=>{const i=s.clientWidth;n(t,e),i<s.clientWidth&&n()}),window),o=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||r(n,i)}));return o.observe(s),function(t,e){Bi.size||window.addEventListener("resize",ji),Bi.set(t,e)}(t,r),o}function zi(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Bi.delete(t),Bi.size||window.removeEventListener("resize",ji)}(t)}function $i(t,e,n){const i=t.canvas,s=Bt((e=>{null!==t.ctx&&n(function(t,e){const n=Mi[t.type]||t.type,{x:i,y:s}=ln(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==s?s:null}}(e,t))}),t);return function(t,e,n){t.addEventListener(e,n,Pi)}(i,e,s),s}class qi extends Ci{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[Di]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Oi(s)){const e=pn(t,"width");void 0!==e&&(t.width=e)}if(Oi(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=pn(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Di])return!1;const n=e[Di].initial;["height","width"].forEach((t=>{const i=n[t];V(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e[Di],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),s={attach:Ni,detach:Fi,resize:Ui}[e]||$i;i[e]=s(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:zi,detach:zi,resize:zi}[e]||Li)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return hn(t,e,n,i)}isAttached(t){const e=nn(t);return!(!e||!e.isConnected)}}class Hi{static defaults={};static defaultRoutes=void 0;active=!1;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return wt(this.x)&&wt(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}function Wi(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],o=r.length,a=r[0],c=r[o-1],l=[];if(o>s)return function(t,e,n,i){let s,r=0,o=n[0];for(i=Math.ceil(i),s=0;s<t.length;s++)s===o&&(e.push(t[s]),r++,o=n[r*i])}(e,l,r,o/s),l;const u=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),s=e.length/n;if(!i)return Math.max(s,1);const r=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(i);for(let t=0,e=r.length-1;t<e;t++){const e=r[t];if(e>s)return e}return Math.max(s,1)}(r,e,s);if(o>0){let t,n;const i=o>1?Math.round((c-a)/(o-1)):null;for(Ki(e,l,u,V(i)?0:a-i,a),t=0,n=o-1;t<n;t++)Ki(e,l,u,r[t],r[t+1]);return Ki(e,l,u,c,V(i)?e.length:c+i),l}return Ki(e,l,u),l}function Ki(t,e,n,i,s){const r=q(i,0),o=Math.min(q(s,t.length),t.length);let a,c,l,u=0;for(n=Math.ceil(n),s&&(a=s-i,n=a/Math.floor(a/n)),l=r;l<0;)u++,l=Math.round(r+u*n);for(c=Math.max(r,0);c<o;c++)c===l&&(e.push(t[c]),u++,l=Math.round(r+u*n))}const Gi=t=>"left"===t?"right":"right"===t?"left":t,Yi=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Xi=(t,e)=>Math.min(e||t,t);function Qi(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function Ji(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let c,l=t.getPixelForTick(s);if(!(n&&(c=1===i?Math.max(l-r,o-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function Zi(t){return t.drawTicks?t.tickLength:0}function ts(t,e){if(!t.display)return 0;const n=Me(t.font,e),i=De(t.padding);return(j(t.text)?t.text.length:1)*n.lineHeight+i.height}function es(t,e,n){let i=Vt(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=Gi(i)),i}class ns extends Hi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=$(t,Number.POSITIVE_INFINITY),e=$(e,Number.NEGATIVE_INFINITY),n=$(n,Number.POSITIVE_INFINITY),i=$(i,Number.NEGATIVE_INFINITY),{min:$(t,n),max:$(e,i),minDefined:z(t),maxDefined:z(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds();if(s&&r)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,c=o.length;a<c;++a)e=o[a].controller.getMinMax(this,t),s||(n=Math.min(n,e.min)),r||(i=Math.max(i,e.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:$(n,$(i,n)),max:$(i,$(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){W(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:s,ticks:r}=this.options,o=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:s}=t,r=H(e,(s-i)/2),o=(t,e)=>n&&0===t?0:t+e;return{min:o(i,-Math.abs(r)),max:o(s,r)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?Qi(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=Wi(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){W(this.options.afterUpdate,[this])}beforeSetDimensions(){W(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){W(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),W(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){W(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,s;for(n=0,i=t.length;n<i;n++)s=t[n],s.label=W(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){W(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){W(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Xi(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,s=e.maxRotation;let r,o,a,c=i;if(!this._isVisible()||!e.display||i>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const l=this._getLabelSizes(),u=l.widest.width,h=l.highest.height,d=At(this.chart.width-u,0,this.maxWidth);r=t.offset?this.maxWidth/n:d/(n-1),u+6>r&&(r=d/(n-(t.offset?.5:1)),o=this.maxHeight-Zi(t.grid)-e.padding-ts(t.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),c=xt(Math.min(Math.asin(At((l.highest.height+6)/r,-1,1)),Math.asin(At(o/a,-1,1))-Math.asin(At(h/a,-1,1)))),c=Math.max(i,Math.min(s,c))),this.labelRotation=c}afterCalculateLabelRotation(){W(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){W(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:s}}=this,r=this._isVisible(),o=this.isHorizontal();if(r){const r=ts(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=Zi(s)+r):(t.height=this.maxHeight,t.width=Zi(s)+r),n.display&&this.ticks.length){const{first:e,last:i,widest:s,highest:r}=this._getLabelSizes(),a=2*n.padding,c=_t(this.labelRotation),l=Math.cos(c),u=Math.sin(c);if(o){const e=n.mirror?0:u*s.width+l*r.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:l*s.width+u*r.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,i,u,l)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:s,padding:r},position:o}=this.options,a=0!==this.labelRotation,c="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?c?(u=i*t.width,h=n*e.height):(u=n*t.height,h=i*e.width):"start"===s?h=e.width:"end"===s?u=t.width:"inner"!==s&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-o+r)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-l+r)*this.width/(this.width-l),0)}else{let n=e.height/2,i=t.height/2;"start"===s?(n=0,i=t.height):"end"===s&&(n=e.height,i=0),this.paddingTop=n+r,this.paddingBottom=i+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){W(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)V(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Qi(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:s}=this,r=[],o=[],a=Math.floor(e/Xi(e,n));let c,l,u,h,d,f,p,g,m,y,b,w=0,v=0;for(c=0;c<e;c+=a){if(h=t[c].label,d=this._resolveTickFontOptions(c),i.font=f=d.string,p=s[f]=s[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,V(h)||j(h)){if(j(h))for(l=0,u=h.length;l<u;++l)b=h[l],V(b)||j(b)||(m=ce(i,p.data,p.gc,m,b),y+=g)}else m=ce(i,p.data,p.gc,m,h),y=g;r.push(m),o.push(y),w=Math.max(m,w),v=Math.max(y,v)}!function(t,e){K(t,(t=>{const n=t.gc,i=n.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[n[s]];n.splice(0,i)}}))}(s,e);const _=r.indexOf(w),x=o.indexOf(v),I=t=>({width:r[t]||0,height:o[t]||0});return{first:I(0),last:I(e-1),widest:I(_),highest:I(x),widths:r,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return At(this._alignToPixels?ue(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Pe(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Pe(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=_t(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),r=t.autoSkipPadding||0,o=s?s.widest.width+r:0,a=s?s.highest.height+r:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:s,position:r,border:o}=i,a=s.offset,c=this.isHorizontal(),l=this.ticks.length+(a?1:0),u=Zi(s),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(t){return ue(n,t,f)};let m,y,b,w,v,_,x,I,E,T,k,S;if("top"===r)m=g(this.bottom),_=this.bottom-u,I=m-p,T=g(t.top)+p,S=t.bottom;else if("bottom"===r)m=g(this.top),T=t.top,S=g(t.bottom)-p,_=m+p,I=this.top+u;else if("left"===r)m=g(this.right),v=this.right-u,x=m-p,E=g(t.left)+p,k=t.right;else if("right"===r)m=g(this.left),E=t.left,k=g(t.right)-p,v=m+p,x=this.left+u;else if("x"===e){if("center"===r)m=g((t.top+t.bottom)/2+.5);else if(U(r)){const t=Object.keys(r)[0],e=r[t];m=g(this.chart.scales[t].getPixelForValue(e))}T=t.top,S=t.bottom,_=m+p,I=_+u}else if("y"===e){if("center"===r)m=g((t.left+t.right)/2);else if(U(r)){const t=Object.keys(r)[0],e=r[t];m=g(this.chart.scales[t].getPixelForValue(e))}v=m-p,x=v-u,E=t.left,k=t.right}const C=q(i.ticks.maxTicksLimit,l),A=Math.max(1,Math.ceil(l/C));for(y=0;y<l;y+=A){const t=this.getContext(y),e=s.setContext(t),i=o.setContext(t),r=e.lineWidth,l=e.color,u=i.dash||[],d=i.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;b=Ji(this,y,a),void 0!==b&&(w=ue(n,b,r),c?v=x=E=k=w:_=I=T=S=w,h.push({tx1:v,ty1:_,tx2:x,ty2:I,x1:E,y1:T,x2:k,y2:S,width:r,color:l,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=l,this._borderValue=m,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:s}=n,r=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:c,padding:l,mirror:u}=s,h=Zi(n.grid),d=h+l,f=u?-l:d,p=-_t(this.labelRotation),g=[];let m,y,b,w,v,_,x,I,E,T,k,S,C="middle";if("top"===i)_=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===i)_=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,v=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,v=t.x}else if("x"===e){if("center"===i)_=(t.top+t.bottom)/2+d;else if(U(i)){const t=Object.keys(i)[0],e=i[t];_=this.chart.scales[t].getPixelForValue(e)+d}x=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)v=(t.left+t.right)/2-d;else if(U(i)){const t=Object.keys(i)[0],e=i[t];v=this.chart.scales[t].getPixelForValue(e)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===a?C="top":"end"===a&&(C="bottom"));const A=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){b=o[m],w=b.label;const t=s.setContext(this.getContext(m));I=this.getPixelForTick(m)+s.labelOffset,E=this._resolveTickFontOptions(m),T=E.lineHeight,k=j(w)?w.length:1;const e=k/2,n=t.color,a=t.textStrokeColor,l=t.textStrokeWidth;let h,d=x;if(r?(v=I,"inner"===x&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),S="top"===i?"near"===c||0!==p?-k*T+T/2:"center"===c?-A.highest.height/2-e*T+T:-A.highest.height+T/2:"near"===c||0!==p?T/2:"center"===c?A.highest.height/2-e*T:A.highest.height-k*T,u&&(S*=-1),0===p||t.showLabelBackdrop||(v+=T/2*Math.sin(p))):(_=I,S=(1-k)*T/2),t.showLabelBackdrop){const e=De(t.backdropPadding),n=A.heights[m],i=A.widths[m];let s=S-e.top,r=0-e.left;switch(C){case"middle":s-=n/2;break;case"bottom":s-=n}switch(x){case"center":r-=i/2;break;case"right":r-=i}h={left:r,top:s,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:w,font:E,textOffset:S,options:{rotation:p,color:n,strokeColor:a,strokeWidth:l,textAlign:d,textBaseline:C,translation:[v,_],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-_t(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:s}}=this.options,r=t+s,o=this._getLabelSizes().widest.width;let a,c;return"left"===e?i?(c=this.right+s,"near"===n?a="left":"center"===n?(a="center",c+=o/2):(a="right",c+=o)):(c=this.right-r,"near"===n?a="right":"center"===n?(a="center",c-=o/2):(a="left",c=this.left)):"right"===e?i?(c=this.left+s,"near"===n?a="right":"center"===n?(a="center",c-=o/2):(a="left",c-=o)):(c=this.left+r,"near"===n?a="left":"center"===n?(a="center",c+=o/2):(a="right",c=this.right)):a="right",{textAlign:a,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:s,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,s,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,r;const o=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(s=0,r=i.length;s<r;++s){const t=i[s];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,s=n.setContext(this.getContext()),r=n.display?s.width:0;if(!r)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let c,l,u,h;this.isHorizontal()?(c=ue(t,this.left,r)-r/2,l=ue(t,this.right,o)+o/2,u=h=a):(u=ue(t,this.top,r)-r/2,h=ue(t,this.bottom,o)+o/2,c=l=a),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,u),e.lineTo(l,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&ge(e,n);const i=this.getLabelItems(t);for(const t of i){const n=t.options,i=t.font;we(e,t.label,0,t.textOffset,i,n)}n&&me(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const s=Me(n.font),r=De(n.padding),o=n.align;let a=s.lineHeight/2;"bottom"===e||"center"===e||U(e)?(a+=r.bottom,j(n.text)&&(a+=s.lineHeight*(n.text.length-1))):a+=r.top;const{titleX:c,titleY:l,maxWidth:u,rotation:h}=function(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:c}=t,{chartArea:l,scales:u}=c;let h,d,f,p=0;const g=o-s,m=a-r;if(t.isHorizontal()){if(d=jt(i,r,a),U(n)){const t=Object.keys(n)[0],i=n[t];f=u[t].getPixelForValue(i)+g-e}else f="center"===n?(l.bottom+l.top)/2+g-e:Yi(t,n,e);h=a-r}else{if(U(n)){const t=Object.keys(n)[0],i=n[t];d=u[t].getPixelForValue(i)-m+e}else d="center"===n?(l.left+l.right)/2-m+e:Yi(t,n,e);f=jt(i,o,s),p="left"===n?-dt:dt}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,e,o);we(t,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:h,textAlign:es(o,e,i),textBaseline:"middle",translation:[c,l]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=q(t.grid&&t.grid.z,-1),i=q(t.border&&t.border.z,0);return this._isVisible()&&this.draw===ns.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let s,r;for(s=0,r=e.length;s<r;++s){const r=e[s];r[n]!==this.id||t&&r.type!==t||i.push(r)}return i}_resolveTickFontOptions(t){return Me(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class is{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,s=t.id,r=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,function(t,e,n){const i=J(Object.create(null),[n?ae.get(n):{},ae.get(e),t.defaults]);ae.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");ae.route(r,s,c,a)}))}(e,t.defaultRoutes);t.descriptors&&ae.describe(e,t.descriptors)}(t,r,n),this.override&&ae.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in ae[i]&&(delete ae[i][n],this.override&&delete ne[n])}}class ss{constructor(){this.controllers=new is(Kn,"datasets",!0),this.elements=new is(Hi,"elements"),this.plugins=new is(Object,"plugins"),this.scales=new is(ns,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):K(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=it(t);W(n["before"+i],[],n),e[t](n),W(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var rs=new ss;class os{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),r=this._notify(s,t,e,n);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,n,i){i=i||{};for(const s of t){const t=s.plugin;if(!1===W(t[n],[e,i,s.options],t)&&i.cancelable)return!1}return!0}invalidate(){V(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=q(n.options&&n.options.plugins,{}),s=function(t){const e={},n=[],i=Object.keys(rs.plugins.items);for(let t=0;t<i.length;t++)n.push(rs.getPlugin(i[t]));const s=t.plugins||[];for(let t=0;t<s.length;t++){const i=s[t];-1===n.indexOf(i)&&(n.push(i),e[i.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const e=a.id,c=as(i[e],s);null!==c&&r.push({plugin:a,options:cs(t.config,{plugin:a,local:n[e]},c,o)})}return r}(t,s,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function as(t,e){return e||!1!==t?!0===t?{}:t:null}function cs(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ls(t,e){const n=ae.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function us(t,e){if("x"===t||"y"===t||"r"===t)return t;var n;if(t=e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.length>1&&us(t[0].toLowerCase(),e))return t;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function hs(t){const e=t.options||(t.options={});e.plugins=q(e.plugins,{}),e.scales=function(t,e){const n=ne[t.type]||{scales:{}},i=e.scales||{},s=ls(t.type,e),r=Object.create(null);return Object.keys(i).forEach((t=>{const e=i[t];if(!U(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const o=us(t,e),a=function(t,e){return t===e?"_index_":"_value_"}(o,s),c=n.scales||{};r[t]=Z(Object.create(null),[{axis:o},e,c[o],c[a]])})),t.data.datasets.forEach((n=>{const s=n.type||t.type,o=n.indexAxis||ls(s,e),a=(ne[s]||{}).scales||{};Object.keys(a).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,o),s=n[e+"AxisID"]||e;r[s]=r[s]||Object.create(null),Z(r[s],[{axis:e},i[s],a[t]])}))})),Object.keys(r).forEach((t=>{const e=r[t];Z(e,[ae.scales[e.type],ae.scale])})),r}(t,e)}function ds(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const fs=new Map,ps=new Set;function gs(t,e){let n=fs.get(t);return n||(n=e(),fs.set(t,n),ps.add(n)),n}const ms=(t,e,n)=>{const i=nt(e,n);void 0!==i&&t.add(i)};class ys{constructor(t){this._config=function(t){return(t=t||{}).data=ds(t.data),hs(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ds(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),hs(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return gs(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return gs(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return gs(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return gs(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:s}=this,r=this._cachedScopes(t,n),o=r.get(e);if(o)return o;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>ms(a,t,e)))),e.forEach((t=>ms(a,i,t))),e.forEach((t=>ms(a,ne[s]||{},t))),e.forEach((t=>ms(a,ae,t))),e.forEach((t=>ms(a,ie,t)))}));const c=Array.from(a);return 0===c.length&&c.push(Object.create(null)),ps.has(e)&&r.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,ne[e]||{},ae.datasets[e]||{},{type:e},ae,ie]}resolveNamedOptions(t,e,n,i=[""]){const s={$shared:!0},{resolver:r,subPrefixes:o}=bs(this._resolverCache,t,i);let a=r;if(function(t,e){const{isScriptable:n,isIndexable:i}=Ne(t);for(const s of e){const e=n(s),r=i(s),o=(r||e)&&t[s];if(e&&(rt(o)||ws(o))||r&&j(o))return!0}return!1}(r,e)){s.$shared=!1;a=Re(r,n=rt(n)?n():n,this.createResolver(t,n,o))}for(const t of e)s[t]=a[t];return s}createResolver(t,e,n=[""],i){const{resolver:s}=bs(this._resolverCache,t,n);return U(e)?Re(s,e,void 0,i):s}}function bs(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);if(!r){r={resolver:Le(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(s,r)}return r}const ws=t=>U(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||rt(t[n])),!1);const vs=["top","bottom","left","right","chartArea"];function _s(t,e){return"top"===t||"bottom"===t||-1===vs.indexOf(t)&&"x"===e}function xs(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Is(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),W(n&&n.onComplete,[t],e)}function Es(t){const e=t.chart,n=e.options.animation;W(n&&n.onProgress,[t],e)}function Ts(t){return en()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ks={},Ss=t=>{const e=Ts(t);return Object.values(ks).filter((t=>t.canvas===e)).pop()};function Cs(t,e,n){const i=Object.keys(t);for(const s of i){const i=+s;if(i>=e){const r=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=r)}}}class As{static defaults=ae;static instances=ks;static overrides=ne;static registry=rs;static version="4.2.1";static getChart=Ss;static register(...t){rs.add(...t),Ds()}static unregister(...t){rs.remove(...t),Ds()}constructor(t,e){const n=this.config=new ys(e),i=Ts(t),s=Ss(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!en()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Ai:qi}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,r.aspectRatio),a=o&&o.canvas,c=a&&a.height,l=a&&a.width;this.id=B(),this.ctx=o,this.canvas=a,this.width=l,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new os,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}((t=>this.update(t)),r.resizeDelay||0),this._dataChanges=[],ks[this.id]=this,o&&a?(Mn.listen(this,"complete",Is),Mn.listen(this,"progress",Es),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:s}=this;return V(t)?e&&s?s:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return rs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():dn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return he(this.canvas,this.ctx),this}stop(){return Mn.stop(this),this}resize(t,e){Mn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,t,e,s),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,dn(this,o,!0)&&(this.notifyPlugins("resize",{size:r}),W(n.onResize,[this,r],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){K(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let s=[];e&&(s=s.concat(Object.keys(e).map((t=>{const n=e[t],i=us(t,n),s="r"===i,r="x"===i;return{options:n,dposition:s?"chartArea":r?"bottom":"left",dtype:s?"radialLinear":r?"category":"linear"}})))),K(s,(e=>{const s=e.options,r=s.id,o=us(r,s),a=q(s.type,e.dtype);void 0!==s.position&&_s(s.position,o)===_s(e.dposition)||(s.position=e.dposition),i[r]=!0;let c=null;if(r in n&&n[r].type===a)c=n[r];else{c=new(rs.getScale(a))({id:r,type:a,ctx:this.ctx,chart:this}),n[c.id]=c}c.init(s,t)})),K(i,((t,e)=>{t||delete n[e]})),K(n,(t=>{Si.configure(this,t,t.options),Si.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(xs("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let s=this.getDatasetMeta(n);const r=i.type||this.config.type;if(s.type&&s.type!==r&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=r,s.indexAxis=i.indexAxis||ls(r,this.options),s.order=i.order||0,s.index=n,s.label=""+i.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const e=rs.getController(r),{datasetElementType:i,dataElementType:o}=ae.datasets[r];Object.assign(e,{dataElementType:rs.getElement(o),datasetElementType:i&&rs.getElement(i)}),s.controller=new e(this,n),t.push(s.controller)}}return this._updateMetasets(),t}_resetElements(){K(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===s.indexOf(e);e.buildOrUpdateElements(n),r=Math.max(+e.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||K(s,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(xs("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){K(this.scales,(t=>{Si.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);ot(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:s}of e){Cs(t,i,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let t=1;t<e;t++)if(!ot(i,n(t)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Si.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],K(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,rt(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Mn.has(this)?this.attached&&!Mn.running(this)&&Mn.start(this):(this.draw(),Is({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,s;for(i=0,s=e.length;i<s;++i){const s=e[i];t&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,s=function(t){const{xScale:e,yScale:n}=t;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}(t)||this.chartArea,r={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(i&&ge(e,{left:!1===n.left?0:s.left-n.left,right:!1===n.right?this.width:s.right+n.right,top:!1===n.top?0:s.top-n.top,bottom:!1===n.bottom?this.height:s.bottom+n.bottom}),t.controller.draw(),i&&me(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return pe(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const s=pi.modes[e];return"function"==typeof s?s(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Pe(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",s=this.getDatasetMeta(t),r=s.controller._resolveAnimations(void 0,i);st(e)?(s.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(s,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Mn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),he(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete ks[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};K(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},s=(t,e)=>{this.canvas&&this.resize(t,e)};let r;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",s),n("detach",r)};r=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():r()}unbindEvents(){K(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},K(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let s,r,o,a;for("dataset"===e&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){r=t[o];const e=r&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}));!G(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const i=this.options.hover,s=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),r=s(e,t),o=n?t:s(t,e);r.length&&this.updateHoverStyle(r,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const s=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(s||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:s}=this,r=e,o=this._getActiveElements(t,i,n,r),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),c=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,W(s.onHover,[t,o,this],this),a&&W(s.onClick,[t,o,this],this));const l=!G(o,i);return(l||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=c,l}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}}function Ds(){return K(As.instances,(t=>t._plugins.invalidate()))}function Ms(t,e,n,i){const s=Se(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const r=(n-e)/2,o=Math.min(r,i*e/2),a=t=>{const e=(n-Math.min(r,t))*i/2;return At(t,0,Math.min(r,e))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:At(s.innerStart,0,o),innerEnd:At(s.innerEnd,0,o)}}function Os(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Ps(t,e,n,i,s,r){const{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-l,0),d=u>0?u+i+n+l:0;let f=0;const p=s-c;if(i){const t=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==t?p*t/(t+i):p))/2}const g=(p-Math.max(.001,p*h-n/at)/h)/2,m=c+g+f,y=s-g-f,{outerStart:b,outerEnd:w,innerStart:v,innerEnd:_}=Ms(e,d,h,y-m),x=h-b,I=h-w,E=m+b/x,T=y-w/I,k=d+v,S=d+_,C=m+v/k,A=y-_/S;if(t.beginPath(),r){const e=(E+T)/2;if(t.arc(o,a,h,E,e),t.arc(o,a,h,e,T),w>0){const e=Os(I,T,o,a);t.arc(e.x,e.y,w,T,y+dt)}const n=Os(S,y,o,a);if(t.lineTo(n.x,n.y),_>0){const e=Os(S,A,o,a);t.arc(e.x,e.y,_,y+dt,A+Math.PI)}const i=(y-_/d+(m+v/d))/2;if(t.arc(o,a,d,y-_/d,i,!0),t.arc(o,a,d,i,m+v/d,!0),v>0){const e=Os(k,C,o,a);t.arc(e.x,e.y,v,C+Math.PI,m-dt)}const s=Os(x,m,o,a);if(t.lineTo(s.x,s.y),b>0){const e=Os(x,E,o,a);t.arc(e.x,e.y,b,m-dt,E)}}else{t.moveTo(o,a);const e=Math.cos(E)*h+o,n=Math.sin(E)*h+a;t.lineTo(e,n);const i=Math.cos(T)*h+o,s=Math.sin(T)*h+a;t.lineTo(i,s)}t.closePath()}function Ls(t,e,n,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u}=c,h="inner"===c.borderAlign;if(!l)return;h?(t.lineWidth=2*l,t.lineJoin=u||"round"):(t.lineWidth=l,t.lineJoin=u||"bevel");let d=e.endAngle;if(r){Ps(t,e,n,i,d,s);for(let e=0;e<r;++e)t.stroke();isNaN(a)||(d=o+(a%ct||ct))}h&&function(t,e,n){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:c}=e;let l=s/a;t.beginPath(),t.arc(r,o,a,i-l,n+l),c>s?(l=s/c,t.arc(r,o,c,n+l,i-l,!0)):t.arc(r,o,s,n+dt,i-dt),t.closePath(),t.clip()}(t,e,d),r||(Ps(t,e,n,i,d,s),t.stroke())}function Rs(t,e,n=e){t.lineCap=q(n.borderCapStyle,e.borderCapStyle),t.setLineDash(q(n.borderDash,e.borderDash)),t.lineDashOffset=q(n.borderDashOffset,e.borderDashOffset),t.lineJoin=q(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=q(n.borderWidth,e.borderWidth),t.strokeStyle=q(n.borderColor,e.borderColor)}function Ns(t,e,n){t.lineTo(n.x,n.y)}function Fs(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,c=Math.max(s,o),l=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!u?i+l-c:l-c}}function Bs(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:c,ilen:l}=Fs(s,n,i),u=function(t){return t.stepped?ye:t.tension||"monotone"===t.cubicInterpolationMode?be:Ns}(r);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=l;++h)d=s[(a+(g?l-h:h))%o],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,g,r.stepped),f=d);return c&&(d=s[(a+(g?l:0))%o],u(t,f,d,g,r.stepped)),!!c}function Vs(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=Fs(s,n,i),{move:c=!0,reverse:l}=i||{};let u,h,d,f,p,g,m=0,y=0;const b=t=>(o+(l?a-t:t))%r,w=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(c&&(h=s[b(0)],t.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=s[b(u)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(y*m+e)/++y):(w(),t.lineTo(e,n),d=i,y=0,f=p=n),g=n}w()}function js(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?Vs:Bs}const Us="function"==typeof Path2D;function zs(t,e,n,i){Us&&!e.options.segment?function(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),Rs(t,e.options),t.stroke(s)}(t,e,n,i):function(t,e,n,i){const{segments:s,options:r}=e,o=js(e);for(const a of s)Rs(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class $s extends Hi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;tn(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=function(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}(n,s,r,i);return Sn(t,!0===i?[{start:o,end:a,loop:r}]:function(t,e,n,i){const s=t.length,r=[];let o,a=e,c=t[e];for(o=e+1;o<=n;++o){const n=t[o%s];n.skip||n.stop?c.skip||(i=!1,r.push({start:e%s,end:(o-1)%s,loop:i}),e=a=n.stop?o:null):(a=o,c.skip&&(e=o)),c=n}return null!==a&&r.push({start:e%s,end:a%s,loop:i}),r}(n,o,a<o?a+s:a,!!t._fullLoop&&0===o&&a===s-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],s=this.points,r=kn(this,{property:e,start:i,end:i});if(!r.length)return;const o=[],a=function(t){return t.stepped?mn:t.tension||"monotone"===t.cubicInterpolationMode?yn:gn}(n);let c,l;for(c=0,l=r.length;c<l;++c){const{start:l,end:u}=r[c],h=s[l],d=s[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((i-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],o.push(f)}return 1===o.length?o[0]:o}pathSegment(t,e,n){return js(this)(t,this,e,n)}path(t,e,n){const i=this.segments,s=js(this);let r=this._loop;e=e||0,n=n||this.points.length-e;for(const o of i)r&=s(t,this,o,{start:e,end:e+n-1});return!!r}draw(t,e,n,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),zs(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function qs(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}function Hs(t,e){const{x:n,y:i,base:s,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,c,l,u,h;return t.horizontal?(h=o/2,a=Math.min(n,s),c=Math.max(n,s),l=i-h,u=i+h):(h=r/2,a=n-h,c=n+h,l=Math.min(i,s),u=Math.max(i,s)),{left:a,top:l,right:c,bottom:u}}function Ws(t,e,n,i){return t?0:At(e,n,i)}function Ks(t){const e=Hs(t),n=e.right-e.left,i=e.bottom-e.top,s=function(t,e,n){const i=t.options.borderWidth,s=t.borderSkipped,r=Ce(i);return{t:Ws(s.top,r.top,0,n),r:Ws(s.right,r.right,0,e),b:Ws(s.bottom,r.bottom,0,n),l:Ws(s.left,r.left,0,e)}}(t,n/2,i/2),r=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=Ae(s),o=Math.min(e,n),a=t.borderSkipped,c=i||U(s);return{topLeft:Ws(!c||a.top||a.left,r.topLeft,0,o),topRight:Ws(!c||a.top||a.right,r.topRight,0,o),bottomLeft:Ws(!c||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Ws(!c||a.bottom||a.right,r.bottomRight,0,o)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Gs(t,e,n,i){const s=null===e,r=null===n,o=t&&!(s&&r)&&Hs(t,i);return o&&(s||Dt(e,o.left,o.right))&&(r||Dt(n,o.top,o.bottom))}function Ys(t,e){t.rect(e.x,e.y,e.w,e.h)}function Xs(t,e,n={}){const i=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+i,y:t.y+s,w:t.w+r,h:t.h+o,radius:t.radius}}var Qs=Object.freeze({__proto__:null,ArcElement:class extends Hi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:s,distance:r}=Et(i,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:c,outerRadius:l,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=this.options.spacing/2,d=q(u,a-o)>=ct||Ct(s,o,a),f=Dt(r,c+h,l+h);return d&&f}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:s,innerRadius:r,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:c}=this.options,l=(i+s)/2,u=(r+o+c+a)/2;return{x:e+Math.cos(l)*u,y:n+Math.sin(l)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,s=(e.spacing||0)/2,r=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ct?Math.floor(n/ct):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(at,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let c=e.endAngle;if(r){Ps(t,e,n,i,c,s);for(let e=0;e<r;++e)t.fill();isNaN(a)||(c=o+(a%ct||ct))}Ps(t,e,n,i,c,s),t.fill()}(t,this,a,s,r),Ls(t,this,a,s,r),t.restore()}},LineElement:$s,PointElement:class extends Hi{static id="point";static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:s,y:r}=this.getProps(["x","y"],n);return Math.pow(t-s,2)+Math.pow(e-r,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return qs(this,t,"x",e)}inYRange(t,e){return qs(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!pe(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,de(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}},BarElement:class extends Hi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:s,outer:r}=Ks(this),o=(a=r.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?xe:Ys;var a;t.save(),r.w===s.w&&r.h===s.h||(t.beginPath(),o(t,Xs(r,e,s)),t.clip(),o(t,Xs(s,-e,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,Xs(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Gs(this,t,e,n)}inXRange(t,e){return Gs(this,t,null,e)}inYRange(t,e){return Gs(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}});const Js=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Zs=Js.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function tr(t){return Js[t%Js.length]}function er(t){return Zs[t%Zs.length]}function nr(t){let e=0;return(n,i)=>{const s=t.getDatasetMeta(i).controller;s instanceof ni?e=function(t,e){return t.backgroundColor=t.data.map((()=>tr(e++))),e}(n,e):s instanceof ii?e=function(t,e){return t.backgroundColor=t.data.map((()=>er(e++))),e}(n,e):s&&(e=function(t,e){return t.borderColor=tr(e),t.backgroundColor=er(e),++e}(n,e))}}function ir(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var sr={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:s}=t.config,{elements:r}=s;if(!n.forceOverride&&(ir(i)||(o=s)&&(o.borderColor||o.backgroundColor)||r&&ir(r)))return;var o;const a=nr(t);i.forEach(a)}};function rr(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function or(t){t.data.datasets.forEach((t=>{rr(t)}))}var ar={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void or(t);const i=t.width;t.data.datasets.forEach(((e,s)=>{const{_data:r,indexAxis:o}=e,a=t.getDatasetMeta(s),c=r||e.data;if("y"===Oe([o,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const l=t.scales[a.xAxisID];if("linear"!==l.type&&"time"!==l.type)return;if(t.options.parsing)return;let{start:u,count:h}=function(t,e){const n=e.length;let i,s=0;const{iScale:r}=t,{min:o,max:a,minDefined:c,maxDefined:l}=r.getUserBounds();return c&&(s=At(Ot(e,r.axis,o).lo,0,n-1)),i=l?At(Ot(e,r.axis,a).hi+1,s,n)-s:n-s,{start:s,count:i}}(a,c);if(h<=(n.threshold||4*i))return void rr(e);let d;switch(V(r)&&(e._data=c,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":d=function(t,e,n,i,s){const r=s.samples||i;if(r>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(r-2);let c=0;const l=e+n-1;let u,h,d,f,p,g=e;for(o[c++]=t[g],u=0;u<r-2;u++){let i,s=0,r=0;const l=Math.floor((u+1)*a)+1+e,m=Math.min(Math.floor((u+2)*a)+1,n)+e,y=m-l;for(i=l;i<m;i++)s+=t[i].x,r+=t[i].y;s/=y,r/=y;const b=Math.floor(u*a)+1+e,w=Math.min(Math.floor((u+1)*a)+1,n)+e,{x:v,y:_}=t[g];for(d=f=-1,i=b;i<w;i++)f=.5*Math.abs((v-s)*(t[i].y-_)-(v-t[i].x)*(r-_)),f>d&&(d=f,h=t[i],p=i);o[c++]=h,g=p}return o[c++]=t[l],o}(c,u,h,i,n);break;case"min-max":d=function(t,e,n,i){let s,r,o,a,c,l,u,h,d,f,p=0,g=0;const m=[],y=e+n-1,b=t[e].x,w=t[y].x-b;for(s=e;s<e+n;++s){r=t[s],o=(r.x-b)/w*i,a=r.y;const e=0|o;if(e===c)a<d?(d=a,l=s):a>f&&(f=a,u=s),p=(g*p+r.x)/++g;else{const n=s-1;if(!V(l)&&!V(u)){const e=Math.min(l,u),i=Math.max(l,u);e!==h&&e!==n&&m.push({...t[e],x:p}),i!==h&&i!==n&&m.push({...t[i],x:p})}s>0&&n!==h&&m.push(t[n]),m.push(r),c=e,g=0,d=f=a,l=u=h=s}}return m}(c,u,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=d}))},destroy(t){or(t)}};function cr(t,e,n,i){if(i)return;let s=e[t],r=n[t];return"angle"===t&&(s=St(s),r=St(r)),{property:t,start:s,end:r}}function lr(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function ur(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function hr(t,e){let n=[],i=!1;return j(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},s=e.points,r=[];return e.segments.forEach((({start:t,end:e})=>{e=lr(t,e,s);const o=s[t],a=s[e];null!==i?(r.push({x:o.x,y:i}),r.push({x:a.x,y:i})):null!==n&&(r.push({x:n,y:o.y}),r.push({x:n,y:a.y}))})),r}(t,e),n.length?new $s({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function dr(t){return t&&!1!==t.fill}function fr(t,e,n){let i=t[e].fill;const s=[e];let r;if(!n)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!z(i))return i;if(r=t[i],!r)return!1;if(r.visible)return i;s.push(i),i=r.fill}return!1}function pr(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=q(n&&n.target,n);void 0===i&&(i=!!e.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(t);if(U(i))return!isNaN(i.value)&&i;let s=parseFloat(i);return z(s)&&Math.floor(s)===s?function(t,e,n,i){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=i)return!1;return n}(i[0],e,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function gr(t,e,n){const i=[];for(let s=0;s<n.length;s++){const r=n[s],{first:o,last:a,point:c}=mr(r,e,"x");if(!(!c||o&&a))if(o)i.unshift(c);else if(t.push(c),!a)break}t.push(...i)}function mr(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const s=i[n],r=t.segments,o=t.points;let a=!1,c=!1;for(let t=0;t<r.length;t++){const e=r[t],i=o[e.start][n],l=o[e.end][n];if(Dt(s,i,l)){a=s===i,c=s===l;break}}return{first:a,last:c,point:i}}class yr{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:s,radius:r}=this;return e=e||{start:0,end:ct},t.arc(i,s,r,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,s=t.angle;return{x:e+Math.cos(s)*i,y:n+Math.sin(s)*i,angle:s}}}function br(t){const{chart:e,fill:n,line:i}=t;if(z(n))return function(t,e){const n=t.getDatasetMeta(e),i=n&&t.isDatasetVisible(e);return i?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,s=[],r=i.segments,o=i.points,a=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let t=0;t<i.length;t++){const s=i[t];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}(e,n);a.push(hr({x:null,y:e.bottom},i));for(let t=0;t<r.length;t++){const e=r[t];for(let t=e.start;t<=e.end;t++)gr(s,o[t],a)}return new $s({points:s,options:{}})}(t);if("shape"===n)return!0;const s=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:n}=t,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=function(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:U(t)?t.value:e.getBaseValue(),i}(n,e,r),a=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,r);return new yr({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(o)})}for(let t=0;t<s;++t)a.push(e.getPointPositionForValue(t,o));return a}(t);return function(t){const{scale:e={},fill:n}=t,i=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:U(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(z(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}(t)}(t);return s instanceof yr?s:hr(s,i)}function wr(t,e,n){const i=br(e),{line:s,scale:r,axis:o}=e,a=s.options,c=a.fill,l=a.backgroundColor,{above:u=l,below:h=l}=c||{};i&&s.points.length&&(ge(t,n),function(t,e){const{line:n,target:i,above:s,below:r,area:o,scale:a}=e,c=n._loop?"angle":e.axis;t.save(),"x"===c&&r!==s&&(vr(t,i,o.top),_r(t,{line:n,target:i,color:s,scale:a,property:c}),t.restore(),t.save(),vr(t,i,o.bottom));_r(t,{line:n,target:i,color:r,scale:a,property:c}),t.restore()}(t,{line:s,target:i,above:u,below:h,area:n,scale:r,axis:o}),me(t))}function vr(t,e,n){const{segments:i,points:s}=e;let r=!0,o=!1;t.beginPath();for(const a of i){const{start:i,end:c}=a,l=s[i],u=s[lr(i,c,s)];r?(t.moveTo(l.x,l.y),r=!1):(t.lineTo(l.x,n),t.lineTo(l.x,l.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function _r(t,e){const{line:n,target:i,property:s,color:r,scale:o}=e,a=function(t,e,n){const i=t.segments,s=t.points,r=e.points,o=[];for(const t of i){let{start:i,end:a}=t;a=lr(i,a,s);const c=cr(n,s[i],s[a],t.loop);if(!e.segments){o.push({source:t,target:c,start:s[i],end:s[a]});continue}const l=kn(e,c);for(const e of l){const i=cr(n,r[e.start],r[e.end],e.loop),a=Tn(t,s,i);for(const t of a)o.push({source:t,target:e,start:{[n]:ur(c,i,"start",Math.max)},end:{[n]:ur(c,i,"end",Math.min)}})}}return o}(n,i,s);for(const{source:e,target:c,start:l,end:u}of a){const{style:{backgroundColor:a=r}={}}=e,h=!0!==i;t.save(),t.fillStyle=a,xr(t,o,h&&cr(s,l,u)),t.beginPath();const d=!!n.pathSegment(t,e);let f;if(h){d?t.closePath():Ir(t,i,u,s);const e=!!i.pathSegment(t,c,{move:d,reverse:!0});f=d&&e,f||Ir(t,i,l,s)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function xr(t,e,n){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=n||{};"x"===r&&(t.beginPath(),t.rect(o,i,a-o,s-i),t.clip())}function Ir(t,e,n,i){const s=e.interpolate(n,i);s&&t.lineTo(s.x,s.y)}var Er={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,s=[];let r,o,a,c;for(o=0;o<i;++o)r=t.getDatasetMeta(o),a=r.dataset,c=null,a&&a.options&&a instanceof $s&&(c={visible:t.isDatasetVisible(o),index:o,fill:pr(a,o,i),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=c,s.push(c);for(o=0;o<i;++o)c=s[o],c&&!1!==c.fill&&(c.fill=fr(s,o,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,s=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let e=s.length-1;e>=0;--e){const n=s[e].$filler;n&&(n.line.updateControlPoints(r,n.axis),i&&n.fill&&wr(t.ctx,n,r))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;dr(n)&&wr(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;dr(i)&&"beforeDatasetDraw"===n.drawTime&&wr(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Tr=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class kr extends Hi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=W(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=Me(n.font),s=i.size,r=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=Tr(n,s);let c,l;e.font=i.string,this.isHorizontal()?(c=this.maxWidth,l=this._fitRows(r,s,o,a)+10):(l=this.maxHeight,c=this._fitCols(r,i,o,a)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:s,maxWidth:r,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.lineWidths=[0],l=i+o;let u=t;s.textAlign="left",s.textBaseline="middle";let h=-1,d=-l;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+s.measureText(t.text).width;(0===f||c[c.length-1]+p+2*o>r)&&(u+=l,c[c.length-(f>0?0:1)]=0,d+=l,h++),a[f]={left:0,top:d,row:h,width:p,height:i},c[c.length-1]+=p+o})),u}_fitCols(t,e,n,i){const{ctx:s,maxHeight:r,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.columnSizes=[],l=r-t;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,r)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,i,s){const r=function(t,e,n,i){let s=t.text;s&&"string"!=typeof s&&(s=s.reduce(((t,e)=>t.length>e.length?t:e)));return e+n.size/2+i.measureText(s).width}(i,t,e,n),o=function(t,e,n){let i=t;"string"!=typeof e.text&&(i=Sr(e,n));return i}(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}(n,e,s,t,i);r>0&&d+m+2*o>l&&(u+=h+o,c.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[r]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+o})),u+=h,c.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:s}}=this,r=vn(s,this.left,this.width);if(this.isHorizontal()){let s=0,o=jt(n,this.left+i,this.right-this.lineWidths[s]);for(const a of e)s!==a.row&&(s=a.row,o=jt(n,this.left+i,this.right-this.lineWidths[s])),a.top+=this.top+t+i,a.left=r.leftForLtr(r.x(o),a.width),o+=a.width+i}else{let s=0,o=jt(n,this.top+t+i,this.bottom-this.columnSizes[s].height);for(const a of e)a.col!==s&&(s=a.col,o=jt(n,this.top+t+i,this.bottom-this.columnSizes[s].height)),a.top=o,a.left+=this.left+i,a.left=r.leftForLtr(r.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;ge(t,this),this._draw(),me(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:s,labels:r}=t,o=ae.color,a=vn(t.rtl,this.left,this.width),c=Me(r.font),{padding:l}=r,u=c.size,h=u/2;let d;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Tr(r,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:jt(s,this.left+l,this.right-n[0]),y:this.top+l+y,line:0}:{x:this.left+l,y:jt(s,this.top+y+l,this.bottom-e[0].height),line:0},_n(this.ctx,t.textDirection);const b=g+l;this.legendItems.forEach(((w,v)=>{i.strokeStyle=w.fontColor,i.fillStyle=w.fontColor;const _=i.measureText(w.text).width,x=a.textAlign(w.textAlign||(w.textAlign=r.textAlign)),I=f+h+_;let E=d.x,T=d.y;a.setWidth(this.width),m?v>0&&E+I+l>this.right&&(T=d.y+=b,d.line++,E=d.x=jt(s,this.left+l,this.right-n[d.line])):v>0&&T+b>this.bottom&&(E=d.x=E+e[d.line].width+l,d.line++,T=d.y=jt(s,this.top+y+l,this.bottom-e[d.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const s=q(n.lineWidth,1);if(i.fillStyle=q(n.fillStyle,o),i.lineCap=q(n.lineCap,"butt"),i.lineDashOffset=q(n.lineDashOffset,0),i.lineJoin=q(n.lineJoin,"miter"),i.lineWidth=s,i.strokeStyle=q(n.strokeStyle,o),i.setLineDash(q(n.lineDash,[])),r.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},c=a.xPlus(t,f/2);fe(i,o,c,e+h,r.pointStyleWidth&&f)}else{const r=e+Math.max((u-p)/2,0),o=a.leftForLtr(t,f),c=Ae(n.borderRadius);i.beginPath(),Object.values(c).some((t=>0!==t))?xe(i,{x:o,y:r,w:f,h:p,radius:c}):i.rect(o,r,f,p),i.fill(),0!==s&&i.stroke()}i.restore()}(a.x(E),T,w),E=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(x,E+f+h,m?E+I:this.right,t.rtl),function(t,e,n){we(i,n.text,t,e+g/2,c,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(E),T,w),m)d.x+=I+l;else if("string"!=typeof w.text){const t=c.lineHeight;d.y+=Sr(w,t)}else d.y+=b})),xn(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Me(e.font),i=De(e.padding);if(!e.display)return;const s=vn(t.rtl,this.left,this.width),r=this.ctx,o=e.position,a=n.size/2,c=i.top+a;let l,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),l=this.top+c,u=jt(t.align,u,this.right-h);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);l=c+jt(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=jt(o,u,u+h);r.textAlign=s.textAlign(Vt(o)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=n.string,we(r,e.text,d,l,n)}_computeTitleHeight(){const t=this.options.title,e=Me(t.font),n=De(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,s;if(Dt(t,this.left,this.right)&&Dt(e,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(i=s[n],Dt(t,i.left,i.left+i.width)&&Dt(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,o=(s=n,null!==(i=r)&&null!==s&&i.datasetIndex===s.datasetIndex&&i.index===s.index);r&&!o&&W(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!o&&W(e.onHover,[t,n,this],this)}else n&&W(e.onClick,[t,n,this],this);var i,s}}function Sr(t,e){return e*(t.text?t.text.length+.5:0)}var Cr={id:"legend",_element:kr,start(t,e,n){const i=t.legend=new kr({ctx:t.ctx,options:n,chart:t});Si.configure(t,i,n),Si.addBox(t,i)},stop(t){Si.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Si.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const c=t.controller.getStyle(n?0:void 0),l=De(c.borderWidth);return{text:e[t.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!t.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Ar extends Hi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=j(n.text)?n.text.length:1;this._padding=De(n.padding);const s=i*Me(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:s,options:r}=this,o=r.align;let a,c,l,u=0;return this.isHorizontal()?(c=jt(o,n,s),l=e+t,a=s-n):("left"===r.position?(c=n+t,l=jt(o,i,e),u=-.5*at):(c=s-t,l=jt(o,e,i),u=.5*at),a=i-e),{titleX:c,titleY:l,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Me(e.font),i=n.lineHeight/2+this._padding.top,{titleX:s,titleY:r,maxWidth:o,rotation:a}=this._drawArgs(i);we(t,e.text,0,0,n,{color:e.color,maxWidth:o,rotation:a,textAlign:Vt(e.align),textBaseline:"middle",translation:[s,r]})}}var Dr={id:"title",_element:Ar,start(t,e,n){!function(t,e){const n=new Ar({ctx:t.ctx,options:e,chart:t});Si.configure(t,n,e),Si.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Si.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Si.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mr=new WeakMap;var Or={id:"subtitle",start(t,e,n){const i=new Ar({ctx:t.ctx,options:n,chart:t});Si.configure(t,i,n),Si.addBox(t,i),Mr.set(t,i)},stop(t){Si.removeBox(t,Mr.get(t)),Mr.delete(t)},beforeUpdate(t,e,n){const i=Mr.get(t);Si.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pr={average(t){if(!t.length)return!1;let e,n,i=0,s=0,r=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,s+=t.y,++r}}return{x:i/r,y:s/r}},nearest(t,e){if(!t.length)return!1;let n,i,s,r=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=Tt(e,i.getCenterPoint());t<a&&(a=t,s=i)}}if(s){const t=s.tooltipPosition();r=t.x,o=t.y}return{x:r,y:o}}};function Lr(t,e){return e&&(j(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Rr(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Nr(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function Fr(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,c=Me(e.bodyFont),l=Me(e.titleFont),u=Me(e.footerFont),h=r.length,d=s.length,f=i.length,p=De(e.padding);let g=p.height,m=0,y=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){g+=f*(e.displayColors?Math.max(a,c.lineHeight):c.lineHeight)+(y-f)*c.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let b=0;const w=function(t){m=Math.max(m,n.measureText(t).width+b)};return n.save(),n.font=l.string,K(t.title,w),n.font=c.string,K(t.beforeBody.concat(t.afterBody),w),b=e.displayColors?o+2+e.boxPadding:0,K(i,(t=>{K(t.before,w),K(t.lines,w),K(t.after,w)})),b=0,n.font=u.string,K(t.footer,w),n.restore(),m+=p.width,{width:m,height:g}}function Br(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:c}}=t;let l="center";return"center"===i?l=s<=(a+c)/2?"left":"right":s<=r/2?l="left":s>=o-r/2&&(l="right"),function(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;return"left"===t&&s+r+o>e.width||"right"===t&&s-r-o<0||void 0}(l,t,e,n)&&(l="center"),l}function Vr(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||Br(t,e,n,i),yAlign:i}}function jr(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,l=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Ae(o);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,a);const g=function(t,e,n){let{y:i,height:s}=t;return"top"===e?i+=n:i-="bottom"===e?s+n:s/2,i}(e,c,l);return"center"===c?"left"===a?p+=l:"right"===a&&(p-=l):"left"===a?p-=Math.max(u,d)+s:"right"===a&&(p+=Math.max(h,f)+s),{x:At(p,0,i.width-e.width),y:At(g,0,i.height-e.height)}}function Ur(t,e,n){const i=De(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function zr(t){return Lr([],Rr(t))}function $r(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const qr={beforeTitle:F,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:F,beforeBody:F,beforeLabel:F,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return V(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:F,afterBody:F,beforeFooter:F,footer:F,afterFooter:F};function Hr(t,e,n,i){const s=t[e].call(n,i);return void 0===s?qr[e].call(n,i):s}class Wr extends Hi{static positioners=Pr;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,s=new Rn(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Pe(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=Hr(n,"beforeTitle",this,t),s=Hr(n,"title",this,t),r=Hr(n,"afterTitle",this,t);let o=[];return o=Lr(o,Rr(i)),o=Lr(o,Rr(s)),o=Lr(o,Rr(r)),o}getBeforeBody(t,e){return zr(Hr(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return K(t,(t=>{const e={before:[],lines:[],after:[]},s=$r(n,t);Lr(e.before,Rr(Hr(s,"beforeLabel",this,t))),Lr(e.lines,Hr(s,"label",this,t)),Lr(e.after,Rr(Hr(s,"afterLabel",this,t))),i.push(e)})),i}getAfterBody(t,e){return zr(Hr(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=Hr(n,"beforeFooter",this,t),s=Hr(n,"footer",this,t),r=Hr(n,"afterFooter",this,t);let o=[];return o=Lr(o,Rr(i)),o=Lr(o,Rr(s)),o=Lr(o,Rr(r)),o}_createItems(t){const e=this._active,n=this.chart.data,i=[],s=[],r=[];let o,a,c=[];for(o=0,a=e.length;o<a;++o)c.push(Nr(this.chart,e[o]));return t.filter&&(c=c.filter(((e,i,s)=>t.filter(e,i,s,n)))),t.itemSort&&(c=c.sort(((e,i)=>t.itemSort(e,i,n)))),K(c,(e=>{const n=$r(t.callbacks,e);i.push(Hr(n,"labelColor",this,e)),s.push(Hr(n,"labelPointStyle",this,e)),r.push(Hr(n,"labelTextColor",this,e))})),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=r,this.dataPoints=c,c}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let s,r=[];if(i.length){const t=Pr[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const e=this._size=Fr(this,n),o=Object.assign({},t,e),a=Vr(this.chart,n,o),c=jr(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,s={opacity:1,x:c.x,y:c.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=r,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const s=this.getCaretPosition(t,n,i);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:s}=this,{caretSize:r,cornerRadius:o}=n,{topLeft:a,topRight:c,bottomLeft:l,bottomRight:u}=Ae(o),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,y,b,w,v;return"center"===s?(w=d+p/2,"left"===i?(g=h,m=g-r,b=w+r,v=w-r):(g=h+f,m=g+r,b=w-r,v=w+r),y=g):(m="left"===i?h+Math.max(a,l)+r:"right"===i?h+f-Math.max(c,u)-r:this.caretX,"top"===s?(b=d,w=b-r,g=m-r,y=m+r):(b=d+p,w=b+r,g=m+r,y=m-r),v=b),{x1:g,x2:m,x3:y,y1:b,y2:w,y3:v}}drawTitle(t,e,n){const i=this.title,s=i.length;let r,o,a;if(s){const c=vn(n.rtl,this.x,this.width);for(t.x=Ur(this,n.titleAlign,n),e.textAlign=c.textAlign(n.titleAlign),e.textBaseline="middle",r=Me(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=r.string,a=0;a<s;++a)e.fillText(i[a],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+o,a+1===s&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,i,s){const r=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:c,boxPadding:l}=s,u=Me(s.bodyFont),h=Ur(this,"left",s),d=i.x(h),f=a<u.lineHeight?(u.lineHeight-a)/2:0,p=e.y+f;if(s.usePointStyle){const e={radius:Math.min(c,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(d,c)+c/2,l=p+a/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,de(t,e,n,l),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,de(t,e,n,l)}else{t.lineWidth=U(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const e=i.leftForLtr(d,c-l),n=i.leftForLtr(i.xPlus(d,1),c-l-2),o=Ae(r.borderRadius);Object.values(o).some((t=>0!==t))?(t.beginPath(),t.fillStyle=s.multiKeyBackground,xe(t,{x:e,y:p,w:c,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),xe(t,{x:n,y:p+1,w:c-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(e,p,c,a),t.strokeRect(e,p,c,a),t.fillStyle=r.backgroundColor,t.fillRect(n,p+1,c-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:s,bodyAlign:r,displayColors:o,boxHeight:a,boxWidth:c,boxPadding:l}=n,u=Me(n.bodyFont);let h=u.lineHeight,d=0;const f=vn(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+s},g=f.textAlign(r);let m,y,b,w,v,_,x;for(e.textAlign=r,e.textBaseline="middle",e.font=u.string,t.x=Ur(this,g,n),e.fillStyle=n.bodyColor,K(this.beforeBody,p),d=o&&"right"!==g?"center"===r?c/2+l:c+2+l:0,w=0,_=i.length;w<_;++w){for(m=i[w],y=this.labelTextColors[w],e.fillStyle=y,K(m.before,p),b=m.lines,o&&b.length&&(this._drawColorBox(e,t,w,f,n),h=Math.max(u.lineHeight,a)),v=0,x=b.length;v<x;++v)p(b[v]),h=u.lineHeight;K(m.after,p)}d=0,h=u.lineHeight,K(this.afterBody,p),t.y-=s}drawFooter(t,e,n){const i=this.footer,s=i.length;let r,o;if(s){const a=vn(n.rtl,this.x,this.width);for(t.x=Ur(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",r=Me(n.footerFont),e.fillStyle=n.footerColor,e.font=r.string,o=0;o<s;++o)e.fillText(i[o],a.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:s,yAlign:r}=this,{x:o,y:a}=t,{width:c,height:l}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Ae(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+u,a),"top"===r&&this.drawCaret(t,e,n,i),e.lineTo(o+c-h,a),e.quadraticCurveTo(o+c,a,o+c,a+h),"center"===r&&"right"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+c,a+l-f),e.quadraticCurveTo(o+c,a+l,o+c-f,a+l),"bottom"===r&&this.drawCaret(t,e,n,i),e.lineTo(o+d,a+l),e.quadraticCurveTo(o,a+l,o,a+l-d),"center"===r&&"left"===s&&this.drawCaret(t,e,n,i),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,s=n&&n.y;if(i||s){const n=Pr[t.position].call(this,this._active,this._eventPosition);if(!n)return;const r=this._size=Fr(this,t),o=Object.assign({},n,this._size),a=Vr(e,t,o),c=jr(t,o,a,e);i._to===c.x&&s._to===c.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=r.width,this.height=r.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=De(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(s,t,i,e),_n(t,e.textDirection),s.y+=r.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),xn(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),s=!G(n,i),r=this._positionChanged(i,e);(s||r)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],r=this._getActiveElements(t,s,e,n),o=this._positionChanged(r,t),a=e||!G(r,s)||o;return a&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,i){const s=this.options;if("mouseout"===t.type)return[];if(!i)return e;const r=this.chart.getElementsAtEventForMode(t,s.mode,s,n);return s.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:n,caretY:i,options:s}=this,r=Pr[s.position].call(this,t,e);return!1!==r&&(n!==r.x||i!==r.y)}}var Kr={id:"tooltip",_element:Wr,positioners:Pr,afterInit(t,e,n){n&&(t.tooltip=new Wr({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qr},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Gr=Object.freeze({__proto__:null,Colors:sr,Decimation:ar,Filler:Er,Legend:Cr,SubTitle:Or,Title:Dr,Tooltip:Kr});const Yr=(t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Xr(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function Qr(t,e){const n=[],{bounds:i,step:s,min:r,max:o,precision:a,count:c,maxTicks:l,maxDigits:u,includeBounds:h}=t,d=s||1,f=l-1,{min:p,max:g}=e,m=!V(r),y=!V(o),b=!V(c),w=(g-p)/(u+1);let v,_,x,I,E=bt((g-p)/f/d)*d;if(E<1e-14&&!m&&!y)return[{value:p},{value:g}];I=Math.ceil(g/E)-Math.floor(p/E),I>f&&(E=bt(I*E/f/d)*d),V(a)||(v=Math.pow(10,a),E=Math.ceil(E*v)/v),"ticks"===i?(_=Math.floor(p/E)*E,x=Math.ceil(g/E)*E):(_=p,x=g),m&&y&&s&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((o-r)/s,E/1e3)?(I=Math.round(Math.min((o-r)/E,l)),E=(o-r)/I,_=r,x=o):b?(_=m?r:_,x=y?o:x,I=c-1,E=(x-_)/I):(I=(x-_)/E,I=yt(I,Math.round(I),E/1e3)?Math.round(I):Math.ceil(I));const T=Math.max(It(E),It(_));v=Math.pow(10,V(a)?T:a),_=Math.round(_*v)/v,x=Math.round(x*v)/v;let k=0;for(m&&(h&&_!==r?(n.push({value:r}),_<r&&k++,yt(Math.round((_+k*E)*v)/v,r,Jr(r,w,t))&&k++):_<r&&k++);k<I;++k)n.push({value:Math.round((_+k*E)*v)/v});return y&&h&&x!==o?n.length&&yt(n[n.length-1].value,o,Jr(o,w,t))?n[n.length-1].value=o:n.push({value:o}):y&&x!==o||n.push({value:x}),n}function Jr(t,e,{horizontal:n,minRotation:i}){const s=_t(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class Zr extends ns{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return V(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this;const r=t=>i=e?i:t,o=t=>s=n?s:t;if(t){const t=mt(i),e=mt(s);t<0&&e<0?o(0):t>0&&e>0&&r(0)}if(i===s){let e=0===s?1:Math.abs(.05*s);o(s+e),t||r(i-e)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=Qr({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&vt(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Zt(t,this.chart.options.locale,this.options.ticks.format)}}class to extends Zr{static id="linear";static defaults={ticks:{callback:ee.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=z(t)?t:0,this.max=z(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=_t(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const eo=t=>Math.floor(gt(t)),no=(t,e)=>Math.pow(10,eo(t)+e);function io(t){return 1===t/Math.pow(10,eo(t))}function so(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function ro(t,{min:e,max:n}){e=$(t.min,e);const i=[],s=eo(e);let r=function(t,e){let n=eo(e-t);for(;so(t,e,n)>10;)n++;for(;so(t,e,n)<10;)n--;return Math.min(n,eo(t))}(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),c=s>r?Math.pow(10,s):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10;let h=Math.floor((l-u)/Math.pow(10,r)),d=$(t.min,Math.round((c+u+h*Math.pow(10,r))*o)/o);for(;d<n;)i.push({value:d,major:io(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((c+u+h*Math.pow(10,r))*o)/o;const f=$(t.max,d);return i.push({value:f,major:io(f),significand:h}),i}class oo extends ns{static id="logarithmic";static defaults={ticks:{callback:ee.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=Zr.prototype.parse.apply(this,[t,e]);if(0!==n)return z(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=z(t)?Math.max(0,t):null,this.max=z(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!z(this._userMin)&&(this.min=t===no(this.min,0)?no(this.min,-1):no(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const s=e=>n=t?n:e,r=t=>i=e?i:t;n===i&&(n<=0?(s(1),r(10)):(s(no(n,-1)),r(no(i,1)))),n<=0&&s(no(i,-1)),i<=0&&r(no(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=ro({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&vt(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Zt(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=gt(t),this._valueRange=gt(this.max)-gt(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(gt(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ao(t){const e=t.ticks;if(e.display&&t.display){const t=De(e.backdropPadding);return q(e.font&&e.font.size,ae.font.size)+t.height}return 0}function co(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function lo(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?at/r:0;for(let h=0;h<r;h++){const r=o.setContext(t.getPointLabelContext(h));s[h]=r.padding;const d=t.getPointPosition(h,t.drawingArea+s[h],a),f=Me(r.font),p=(c=t.ctx,l=f,u=j(u=t._pointLabels[h])?u:[u],{w:le(c,l.string,u),h:u.length*l.lineHeight});i[h]=p;const g=St(t.getIndexAngle(h)+a),m=Math.round(xt(g));uo(n,e,g,co(m,d.x,p.w,0,180),co(m,d.y,p.h,90,270))}var c,l,u;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,o=ao(r)/2,a=t.drawingArea,c=r.pointLabels.centerPointLabels?at/s:0;for(let r=0;r<s;r++){const s=t.getPointPosition(r,a+o+n[r],c),l=Math.round(xt(St(s.angle+dt))),u=e[r],h=po(s.y,u.h,l),d=ho(l),f=fo(s.x,u.w,d);i.push({x:s.x,y:h,textAlign:d,left:f,top:h,right:f+u.w,bottom:h+u.h})}return i}(t,i,s)}function uo(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,c=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(c=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-c)):s.end>e.b&&(c=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function ho(t){return 0===t||180===t?"center":t<180?"left":"right"}function fo(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function po(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function go(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,ct);else{let n=t.getPointPosition(0,e);s.moveTo(n.x,n.y);for(let r=1;r<i;r++)n=t.getPointPosition(r,e),s.lineTo(n.x,n.y)}}class mo extends Zr{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ee.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=De(ao(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=z(t)&&!isNaN(t)?t:0,this.max=z(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ao(this.options))}generateTickLabels(t){Zr.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=W(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?lo(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return St(t*(ct/(this._pointLabels.length||1))+_t(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(V(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(V(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Pe(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-dt+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),go(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:s}=e,r=this._pointLabels.length;let o,a,c;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const e=i.setContext(t.getPointLabelContext(s)),r=Me(e.font),{x:o,y:a,textAlign:c,left:l,top:u,right:h,bottom:d}=t._pointLabelItems[s],{backdropColor:f}=e;if(!V(f)){const t=Ae(e.borderRadius),i=De(e.backdropPadding);n.fillStyle=f;const s=l-i.left,r=u-i.top,o=h-l+i.width,a=d-u+i.height;Object.values(t).some((t=>0!==t))?(n.beginPath(),xe(n,{x:s,y:r,w:o,h:a,radius:t}),n.fill()):n.fillRect(s,r,o,a)}we(n,t._pointLabels[s],o,a+r.lineHeight/2,r,{color:e.color,textAlign:c,textBaseline:"middle"})}}(this,r),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),o=i.setContext(n),c=s.setContext(n);!function(t,e,n,i,s){const r=t.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=c,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),go(t,n,o,i),r.closePath(),r.stroke(),r.restore())}(this,o,a,r,c)}})),n.display){for(t.save(),o=r-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:s,lineWidth:r}=i;r&&s&&(t.lineWidth=r,t.strokeStyle=s,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let s,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,o)=>{if(0===o&&!e.reverse)return;const a=n.setContext(this.getContext(o)),c=Me(a.font);if(s=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){t.font=c.string,r=t.measureText(i.label).width,t.fillStyle=a.backdropColor;const e=De(a.backdropPadding);t.fillRect(-r/2-e.left,-s-c.size/2-e.top,r+e.width,c.size+e.height)}we(t,i.label,0,-s,c,{color:a.color})})),t.restore()}drawTitle(){}}const yo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bo=Object.keys(yo);function wo(t,e){return t-e}function vo(t,e){if(V(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return"function"==typeof i&&(o=i(o)),z(o)||(o="string"==typeof i?n.parse(o,i):n.parse(o)),null===o?null:(s&&(o="week"!==s||!wt(r)&&!0!==r?n.startOf(o,s):n.startOf(o,"isoWeek",r)),+o)}function _o(t,e,n,i){const s=bo.length;for(let r=bo.indexOf(t);r<s-1;++r){const t=yo[bo[r]],s=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(s*t.size))<=i)return bo[r]}return bo[s-1]}function xo(t,e,n){if(n){if(n.length){const{lo:i,hi:s}=Mt(n,e);t[n[i]>=e?n[i]:n[s]]=!0}}else t[e]=!0}function Io(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return 0!==r&&n?function(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,c;for(a=r;a<=o;a=+s.add(a,1,i))c=n[a],c>=0&&(e[c].major=!0);return e}(t,i,s,n):i}class Eo extends ns{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new ai(t.adapters.date);i.init(e),Z(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:vo(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:s,minDefined:r,maxDefined:o}=this.getUserBounds();function a(t){r||isNaN(t.min)||(i=Math.min(i,t.min)),o||isNaN(t.max)||(s=Math.max(s,t.max))}r&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),i=z(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),s=z(s)&&!isNaN(s)?s:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,r=function(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}(i,s,this.max);return this._unit=e.unit||(n.autoSkip?_o(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(t,e,n,i,s){for(let r=bo.length-1;r>=bo.indexOf(n);r--){const n=bo[r];if(yo[n].common&&t._adapter.diff(s,i,n)>=e-1)return n}return bo[n?bo.indexOf(n):0]}(this,r.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=bo.indexOf(t)+1,n=bo.length;e<n;++e)if(yo[bo[e]].common)return bo[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&r.reverse(),Io(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,n,i=0,s=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),s=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;i=At(i,0,r),s=At(s,0,r),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,s=i.time,r=s.unit||_o(s.minUnit,e,n,this._getLabelCapacity(e)),o=q(i.ticks.stepSize,1),a="week"===r&&s.isoWeekday,c=wt(a)||!0===a,l={};let u,h,d=e;if(c&&(d=+t.startOf(d,"isoWeek",a)),d=+t.startOf(d,c?"day":r),t.diff(n,e,r)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+r);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+t.add(u,o,r),h++)xo(l,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||xo(l,u,f),Object.keys(l).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,i=this._unit,s=e||n[i];return this._adapter.format(t,s)}_tickFormatFunction(t,e,n,i){const s=this.options,r=s.ticks.callback;if(r)return W(r,[t,e,n],this);const o=s.time.displayFormats,a=this._unit,c=this._majorUnit,l=a&&o[a],u=c&&o[c],h=n[e],d=c&&u&&h&&h.major;return this._adapter.format(t,i||(d?u:l))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=_t(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(i),r=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*s+o*r,h:n*r+o*s}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,s=this._tickFormatFunction(t,0,Io(this,[t],this._majorUnit),i),r=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(vo(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Nt(t.sort(wo))}}function To(t,e,n){let i,s,r,o,a=0,c=t.length-1;n?(e>=t[a].pos&&e<=t[c].pos&&({lo:a,hi:c}=Ot(t,"pos",e)),({pos:i,time:r}=t[a]),({pos:s,time:o}=t[c])):(e>=t[a].time&&e<=t[c].time&&({lo:a,hi:c}=Ot(t,"time",e)),({time:i,pos:r}=t[a]),({time:s,pos:o}=t[c]));const l=s-i;return l?r+(o-r)*(e-i)/l:r}var ko=Object.freeze({__proto__:null,CategoryScale:class extends ns{static id="category";static defaults={ticks:{callback:Xr}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(V(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:function(t,e,n,i){const s=t.indexOf(e);return-1===s?Yr(t,e,n,i):s!==t.lastIndexOf(e)?n:s}(n,t,q(e,t),this._addedLabels),((t,e)=>null===t?null:At(Math.round(t),0,e))(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)i.push({value:n});return i}getLabelForValue(t){return Xr.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:to,LogarithmicScale:oo,RadialLinearScale:mo,TimeScale:Eo,TimeSeriesScale:class extends Eo{static id="timeseries";static defaults=Eo.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=To(e,this.min),this._tableRange=To(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],s=[];let r,o,a,c,l;for(r=0,o=t.length;r<o;++r)c=t[r],c>=e&&c<=n&&i.push(c);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(r=0,o=i.length;r<o;++r)l=i[r+1],a=i[r-1],c=i[r],Math.round((l+a)/2)!==c&&s.push({time:c,pos:r/(o-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(To(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return To(this._table,n*this._tableRange+this._minPos,!0)}}});const So=[si,Qs,Gr,ko];As.register(...So)},261:(t,e,n)=>{"use strict";n.d(e,{IH:()=>V});var i=n(238),s=n(333),r=n(444),o=n(463);n(578);const a="analytics",c="firebase_id",l="origin",u=6e4,h="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",d="https://www.googletagmanager.com/gtag/js",f=new s.Yd("@firebase/analytics");function p(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function g(t,e,n,i){return async function(s,r,o){try{"event"===s?await async function(t,e,n,i,s){try{let r=[];if(s&&s.send_to){let t=s.send_to;Array.isArray(t)||(t=[t]);const i=await p(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),s=t&&e[t.appId];if(!s){r=[];break}r.push(s)}}0===r.length&&(r=Object.values(e)),await Promise.all(r),t("event",i,s||{})}catch(t){f.error(t)}}(t,e,n,r,o):"config"===s?await async function(t,e,n,i,s,r){const o=i[s];try{if(o)await e[o];else{const t=(await p(n)).find((t=>t.measurementId===s));t&&await e[t.appId]}}catch(t){f.error(t)}t("config",s,r)}(t,e,n,i,r,o):"consent"===s?t("consent","update",o):t("set",r)}catch(t){f.error(t)}}}const m={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},y=new r.LL("analytics","Analytics",m),b=30;const w=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function v(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function _(t,e=w,n){const{appId:i,apiKey:s,measurementId:r}=t.options;if(!i)throw y.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw y.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new I;return setTimeout((async()=>{a.abort()}),void 0!==n?n:u),x({appId:i,apiKey:s,measurementId:r},o,a,e)}async function x(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=w){var o;const{appId:a,measurementId:c}=t;try{await function(t,e){return new Promise(((n,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(n,s);t.addEventListener((()=>{clearTimeout(r),i(y.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(t){if(c)return f.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:a,measurementId:c};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:v(i)},r=h.replace("{app-id}",n),o=await fetch(r,s);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw y.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return s.deleteThrottleMetadata(a),e}catch(e){const l=e;if(!function(t){if(!(t instanceof r.ZR&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l)){if(s.deleteThrottleMetadata(a),c)return f.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:a,measurementId:c};throw e}const u=503===Number(null===(o=null==l?void 0:l.customData)||void 0===o?void 0:o.httpStatus)?(0,r.$s)(n,s.intervalMillis,b):(0,r.$s)(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(a,h),f.debug(`Calling attemptFetch again in ${u} millis`),x(t,h,i,s)}}class I{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let E,T;function k(t){T=t}function S(t){E=t}async function C(t,e,n,i,s,o,a){var u;const h=_(t);h.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&f.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>f.error(t))),e.push(h);const p=async function(){if(!(0,r.hl)())return f.warn(y.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,r.eu)()}catch(t){return f.warn(y.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[g,m]=await Promise.all([h,p]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(d)&&n.src.includes(t))return n;return null})(o)||function(t,e){const n=document.createElement("script");n.src=`${d}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}(o,g.measurementId),T&&(s("consent","default",T),k(void 0)),s("js",new Date);const b=null!==(u=null==a?void 0:a.config)&&void 0!==u?u:{};return b[l]="firebase",b.update=!0,null!=m&&(b[c]=m),s("config",g.measurementId,b),E&&(s("set",E),S(void 0)),g.measurementId}class A{constructor(t){this.app=t}_delete(){return delete D[this.app.options.appId],Promise.resolve()}}let D={},M=[];const O={};let P,L,R="dataLayer",N="gtag",F=!1;function B(t,e,n){!function(){const t=[];if((0,r.ru)()&&t.push("This is a browser extension environment."),(0,r.zI)()||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=y.create("invalid-analytics-context",{errorInfo:e});f.warn(n.message)}}();const i=t.options.appId;if(!i)throw y.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw y.create("no-api-key");f.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=D[i])throw y.create("already-exists",{id:i});if(!F){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(R);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,s){let r=function(...t){window[i].push(arguments)};return window[s]&&"function"==typeof window[s]&&(r=window[s]),window[s]=g(r,t,e,n),{gtagCore:r,wrappedGtag:window[s]}}(D,M,O,R,N);L=t,P=e,F=!0}D[i]=C(t,M,O,e,P,R,n);return new A(t)}function V(t=(0,i.Mq)()){t=(0,r.m9)(t);const e=(0,i.qX)(t,a);return e.isInitialized()?e.getImmediate():function(t,e={}){const n=(0,i.qX)(t,a);if(n.isInitialized()){const t=n.getImmediate();if((0,r.vZ)(e,n.getOptions()))return t;throw y.create("already-initialized")}const s=n.initialize({options:e});return s}(t)}function j(t,e,n,i){t=(0,r.m9)(t),async function(t,e,n,i,s){if(s&&s.global)t("event",n,i);else{const s=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:s}))}}(L,D[t.app.options.appId],e,n,i).catch((t=>f.error(t)))}const U="@firebase/analytics",z="0.9.3";(0,i.Xd)(new o.wA(a,((t,{options:e})=>B(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),(0,i.Xd)(new o.wA("analytics-internal",(function(t){try{const e=t.getProvider(a).getImmediate();return{logEvent:(t,n,i)=>j(e,t,n,i)}}catch(t){throw y.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),(0,i.KN)(U,z),(0,i.KN)(U,z,"esm2017")},977:(t,e,n)=>{"use strict";n.d(e,{ZF:()=>i.ZF});var i=n(238);(0,i.KN)("firebase","9.17.1","app")},962:(t,e,n)=>{"use strict";n.d(e,{v0:()=>fn,Aj:()=>zt,LS:()=>jt,e5:()=>Ut});var i=n(444),s=n(238),r=n(333);function o(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n}Object.create;Object.create;var a=n(463);function c(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l=c,u=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),h=new r.Yd("@firebase/auth");function d(t,...e){h.logLevel<=r.in.ERROR&&h.error(`Auth (${s.Jn}): ${t}`,...e)}function f(t,...e){throw m(t,...e)}function p(t,...e){return m(t,...e)}function g(t,e,n){const s=Object.assign(Object.assign({},l()),{[e]:n});return new i.LL("auth","Firebase",s).create(e,{appName:t.name})}function m(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return u.create(t,...e)}function y(t,e,...n){if(!t)throw m(e,...n)}function b(t){const e="INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function w(t,e){t||b(e)}const v=new Map;function _(t){w(t instanceof Function,"Expected a class definition");let e=v.get(t);return e?(w(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,v.set(t,e),e)}function x(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function I(){return"http:"===E()||"https:"===E()}function E(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class T{constructor(t,e){this.shortDelay=t,this.longDelay=e,w(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(I()||(0,i.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function k(t,e){w(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class S{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const C={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},A=new T(3e4,6e4);function D(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function M(t,e,n,s,r={}){return O(t,r,(async()=>{let r={},o={};s&&("GET"===e?o=s:r={body:JSON.stringify(s)});const a=(0,i.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),S.fetch()(L(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},r))}))}async function O(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},C),e);try{const e=new R(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const r=await i.json();if("needConfirmation"in r)throw N(t,"account-exists-with-different-credential",r);if(i.ok&&!("errorMessage"in r))return r;{const e=i.ok?r.errorMessage:r.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw N(t,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw N(t,"email-already-in-use",r);if("USER_DISABLED"===n)throw N(t,"user-disabled",r);const a=s[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw g(t,a,o);f(t,a)}}catch(e){if(e instanceof i.ZR)throw e;f(t,"network-request-failed")}}async function P(t,e,n,i,s={}){const r=await M(t,e,n,i,s);return"mfaPendingCredential"in r&&f(t,"multi-factor-auth-required",{_serverResponse:r}),r}function L(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?k(t.config,s):`${t.config.apiScheme}://${s}`}class R{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(p(this.auth,"network-request-failed"))),A.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function N(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=p(t,e,i);return s.customData._tokenResponse=n,s}function F(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function B(t){return 1e3*Number(t)}function V(t){const[e,n,s]=t.split(".");if(void 0===e||void 0===n||void 0===s)return d("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,i.tV)(n);return t?JSON.parse(t):(d("Failed to decode base64 JWT payload"),null)}catch(t){return d("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}async function j(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof i.ZR&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class U{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class z{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=F(this.lastLoginAt),this.creationTime=F(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $(t){var e;const n=t.auth,i=await t.getIdToken(),s=await j(t,async function(t,e){return M(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));y(null==s?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const a=(null===(e=r.providerUserInfo)||void 0===e?void 0:e.length)?r.providerUserInfo.map((t=>{var{providerId:e}=t,n=o(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const c=(l=t.providerData,u=a,[...l.filter((t=>!u.some((e=>e.providerId===t.providerId)))),...u]);var l,u;const h=t.isAnonymous,d=!(t.email&&r.passwordHash||(null==c?void 0:c.length)),f=!!h&&d,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new z(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,p)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){y(t.idToken,"internal-error"),y(void 0!==t.idToken,"internal-error"),y(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=V(t);return y(e,"internal-error"),y(void 0!==e.exp,"internal-error"),y(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return y(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:s,expiresIn:r}=await async function(t,e){const n=await O(t,{},(async()=>{const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=L(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",S.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,s,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:s}=e,r=new q;return n&&(y("string"==typeof n,"internal-error",{appName:t}),r.refreshToken=n),i&&(y("string"==typeof i,"internal-error",{appName:t}),r.accessToken=i),s&&(y("number"==typeof s,"internal-error",{appName:t}),r.expirationTime=s),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return b("not implemented")}}function H(t,e){y("string"==typeof t||void 0===t,"internal-error",{appName:e})}class W{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,s=o(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new U(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new z(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await j(this,this.stsTokenManager.getToken(this.auth,t));return y(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=(0,i.m9)(t),s=await n.getIdToken(e),r=V(s);y(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o="object"==typeof r.firebase?r.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:r,token:s,authTime:F(B(r.auth_time)),issuedAtTime:F(B(r.iat)),expirationTime:F(B(r.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=(0,i.m9)(t);await $(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(y(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new W(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await $(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await j(this,async function(t,e){return M(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,s,r,o,a,c,l;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(s=e.phoneNumber)&&void 0!==s?s:void 0,f=null!==(r=e.photoURL)&&void 0!==r?r:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=e.createdAt)&&void 0!==c?c:void 0,b=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:w,emailVerified:v,isAnonymous:_,providerData:x,stsTokenManager:I}=e;y(w&&I,t,"internal-error");const E=q.fromJSON(this.name,I);y("string"==typeof w,t,"internal-error"),H(u,t.name),H(h,t.name),y("boolean"==typeof v,t,"internal-error"),y("boolean"==typeof _,t,"internal-error"),H(d,t.name),H(f,t.name),H(p,t.name),H(g,t.name),H(m,t.name),H(b,t.name);const T=new W({uid:w,auth:t,email:h,emailVerified:v,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:b});return x&&Array.isArray(x)&&(T.providerData=x.map((t=>Object.assign({},t)))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(t,e,n=!1){const i=new q;i.updateFromServerResponse(e);const s=new W({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await $(s),s}}class K{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}K.type="NONE";const G=K;function Y(t,e,n){return`firebase:${t}:${e}:${n}`}class X{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Y(this.userKey,i.apiKey,s),this.fullPersistenceKey=Y("persistence",i.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?W._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new X(_(G),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let s=i[0]||_(G);const r=Y(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(r);if(e){const i=W._fromJSON(t,e);n!==s&&(o=i),s=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(r,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==s)try{await t._remove(r)}catch(t){}}))),new X(s,t,n)):new X(s,t,n)}}function Q(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(et(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(J(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(it(e))return"Blackberry";if(st(e))return"Webos";if(Z(e))return"Safari";if((e.includes("chrome/")||tt(e))&&!e.includes("edge/"))return"Chrome";if(nt(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function J(t=(0,i.z$)()){return/firefox\//i.test(t)}function Z(t=(0,i.z$)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tt(t=(0,i.z$)()){return/crios\//i.test(t)}function et(t=(0,i.z$)()){return/iemobile/i.test(t)}function nt(t=(0,i.z$)()){return/android/i.test(t)}function it(t=(0,i.z$)()){return/blackberry/i.test(t)}function st(t=(0,i.z$)()){return/webos/i.test(t)}function rt(t=(0,i.z$)()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ot(t=(0,i.z$)()){return rt(t)||nt(t)||st(t)||it(t)||/windows phone/i.test(t)||et(t)}function at(t,e=[]){let n;switch(t){case"Browser":n=Q((0,i.z$)());break;case"Worker":n=`${Q((0,i.z$)())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${s.Jn}/${r}`}class ct{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class lt{constructor(t,e,n){this.app=t,this.heartbeatServiceProvider=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ht(this),this.idTokenSubscription=new ht(this),this.beforeStateQueue=new ct(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=_(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await X.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,r=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==r||!(null==o?void 0:o.user)||(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await $(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?(0,i.m9)(t):null;return e&&y(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&y(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(_(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new i.LL("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&_(t)||this._popupRedirectResolver;y(e,this,"argument-error"),this.redirectPersistenceManager=await X.create(this,[_(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const s="function"==typeof e?e:e.next.bind(e),r=this._isInitialized?Promise.resolve():this._initializationPromise;return y(r,this,"internal-error"),r.then((()=>s(this.currentUser))),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=at(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());return n&&(e["X-Firebase-Client"]=n),e}}function ut(t){return(0,i.m9)(t)}class ht{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,i.ne)((t=>this.observer=t))}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dt(t,e,n){const i=ut(t);y(i._canInitEmulator,i,"emulator-config-failed"),y(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(null==n?void 0:n.disableWarnings),r=ft(e),{host:o,port:a}=function(t){const e=ft(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const t=s[1];return{host:t,port:pt(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:pt(e)}}}(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${r}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function ft(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pt(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class gt{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return b("not implemented")}_getIdTokenResponse(t){return b("not implemented")}_linkToIdToken(t,e){return b("not implemented")}_getReauthenticationResolver(t){return b("not implemented")}}async function mt(t,e){return M(t,"POST","/v1/accounts:update",e)}async function yt(t,e){return M(t,"POST","/v1/accounts:sendOobCode",D(t,e))}class bt extends gt{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new bt(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new bt(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return P(t,"POST","/v1/accounts:signInWithPassword",D(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return P(t,"POST","/v1/accounts:signInWithEmailLink",D(t,e))}(t,{email:this._email,oobCode:this._password});default:f(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return mt(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return P(t,"POST","/v1/accounts:signInWithEmailLink",D(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:f(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function wt(t,e){return P(t,"POST","/v1/accounts:signInWithIdp",D(t,e))}class vt extends gt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new vt(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):f("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,s=o(e,["providerId","signInMethod"]);if(!n||!i)return null;const r=new vt(n,i);return r.idToken=s.idToken||void 0,r.accessToken=s.accessToken||void 0,r.secret=s.secret,r.nonce=s.nonce,r.pendingToken=s.pendingToken||null,r}_getIdTokenResponse(t){return wt(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,wt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,wt(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=(0,i.xO)(e)}return t}}const _t={USER_NOT_FOUND:"user-not-found"};class xt extends gt{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new xt({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new xt({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return P(t,"POST","/v1/accounts:signInWithPhoneNumber",D(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await P(t,"POST","/v1/accounts:signInWithPhoneNumber",D(t,e));if(n.temporaryProof)throw N(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return P(t,"POST","/v1/accounts:signInWithPhoneNumber",D(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),_t)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:s}=t;return n||e||i||s?new xt({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}class It{constructor(t){var e,n,s,r,o,a;const c=(0,i.zd)((0,i.pd)(t)),l=null!==(e=c.apiKey)&&void 0!==e?e:null,u=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(s=c.mode)&&void 0!==s?s:null);y(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(r=c.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(t){const e=function(t){const e=(0,i.zd)((0,i.pd)(t)).link,n=e?(0,i.zd)((0,i.pd)(e)).deep_link_id:null,s=(0,i.zd)((0,i.pd)(t)).deep_link_id;return(s?(0,i.zd)((0,i.pd)(s)).link:null)||s||n||e||t}(t);try{return new It(e)}catch(t){return null}}}class Et{constructor(){this.providerId=Et.PROVIDER_ID}static credential(t,e){return bt._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=It.parseLink(e);return y(n,"argument-error"),bt._fromEmailAndCode(t,n.code,n.tenantId)}}Et.PROVIDER_ID="password",Et.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Et.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Tt{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class kt extends Tt{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class St extends kt{constructor(){super("facebook.com")}static credential(t){return vt._fromParams({providerId:St.PROVIDER_ID,signInMethod:St.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return St.credentialFromTaggedObject(t)}static credentialFromError(t){return St.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return St.credential(t.oauthAccessToken)}catch(t){return null}}}St.FACEBOOK_SIGN_IN_METHOD="facebook.com",St.PROVIDER_ID="facebook.com";class Ct extends kt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return vt._fromParams({providerId:Ct.PROVIDER_ID,signInMethod:Ct.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ct.credentialFromTaggedObject(t)}static credentialFromError(t){return Ct.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Ct.credential(e,n)}catch(t){return null}}}Ct.GOOGLE_SIGN_IN_METHOD="google.com",Ct.PROVIDER_ID="google.com";class At extends kt{constructor(){super("github.com")}static credential(t){return vt._fromParams({providerId:At.PROVIDER_ID,signInMethod:At.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return At.credentialFromTaggedObject(t)}static credentialFromError(t){return At.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return At.credential(t.oauthAccessToken)}catch(t){return null}}}At.GITHUB_SIGN_IN_METHOD="github.com",At.PROVIDER_ID="github.com";class Dt extends kt{constructor(){super("twitter.com")}static credential(t,e){return vt._fromParams({providerId:Dt.PROVIDER_ID,signInMethod:Dt.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Dt.credentialFromTaggedObject(t)}static credentialFromError(t){return Dt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Dt.credential(e,n)}catch(t){return null}}}Dt.TWITTER_SIGN_IN_METHOD="twitter.com",Dt.PROVIDER_ID="twitter.com";class Mt{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const s=await W._fromIdTokenResponse(t,n,i),r=Ot(n);return new Mt({user:s,providerId:r,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Ot(n);return new Mt({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Ot(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Pt extends i.ZR{constructor(t,e,n,i){var s;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Pt.prototype),this.customData={appName:t.name,tenantId:null!==(s=t.tenantId)&&void 0!==s?s:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Pt(t,e,n,i)}}function Lt(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Pt._fromErrorAndOperation(t,n,e,i);throw n}))}async function Rt(t,e,n=!1){const i=await j(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mt._forOperation(t,"link",i)}async function Nt(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const r=await j(t,Lt(i,s,e,t),n);y(r.idToken,i,"internal-error");const o=V(r.idToken);y(o,i,"internal-error");const{sub:a}=o;return y(t.uid===a,i,"user-mismatch"),Mt._forOperation(t,s,r)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&f(i,"user-mismatch"),t}}async function Ft(t,e,n=!1){const i="signIn",s=await Lt(t,i,e),r=await Mt._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function Bt(t,e){return Ft(ut(t),e)}function Vt(t,e,n){var i;y((null===(i=n.url)||void 0===i?void 0:i.length)>0,t,"invalid-continue-uri"),y(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(y(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(y(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function jt(t,e,n){const s=(0,i.m9)(t),r={requestType:"PASSWORD_RESET",email:e};n&&Vt(s,r,n),await async function(t,e){return yt(t,e)}(s,r)}function Ut(t,e,n){return Bt((0,i.m9)(t),Et.credential(e,n))}function zt(t,e,n,s){return(0,i.m9)(t).onAuthStateChanged(e,n,s)}new WeakMap;const $t="__sak";class qt{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem($t,"1"),this.storage.removeItem($t),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ht extends qt{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=(0,i.z$)();return Z(t)||rt(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=ot(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const s=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);(0,i.w1)()&&10===document.documentMode&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,10):s()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Ht.type="LOCAL";const Wt=Ht;class Kt extends qt{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Kt.type="SESSION";const Gt=Kt;class Yt{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Yt(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:s}=e.data,r=this.handlersMap[i];if(!(null==r?void 0:r.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(r).map((async t=>t(e.origin,s))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Xt(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}Yt.receivers=[];class Qt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,r;return new Promise(((o,a)=>{const c=Xt("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);r={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),o(e.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}function Jt(){return window}function Zt(){return void 0!==Jt().WorkerGlobalScope&&"function"==typeof Jt().importScripts}const te="firebaseLocalStorageDb",ee=1,ne="firebaseLocalStorage",ie="fbase_key";class se{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function re(t,e){return t.transaction([ne],e?"readwrite":"readonly").objectStore(ne)}function oe(){const t=indexedDB.open(te,ee);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(ne,{keyPath:ie})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(ne)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(te);return new se(t).toPromise()}(),e(await oe()))}))}))}async function ae(t,e,n){const i=re(t,!0).put({[ie]:e,value:n});return new se(i).toPromise()}function ce(t,e){const n=re(t,!0).delete(e);return new se(n).toPromise()}class le{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await oe()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yt._getInstance(Zt()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Qt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await oe();return await ae(t,$t,"1"),await ce(t,$t),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>ae(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=re(t,!1).get(e),i=await new se(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>ce(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=re(t,!1).getAll();return new se(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:s}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}le.type="LOCAL";const ue=le;function he(t){return new Promise(((e,n)=>{const i=document.createElement("script");var s,r;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=p("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(r=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==r?r:document).appendChild(i)}))}function de(t){return`__${t}${Math.floor(1e6*Math.random())}`}de("rcb"),new T(3e4,6e4);const fe="recaptcha";async function pe(t,e,n){var i;const s=await n.verify();try{let r;if(y("string"==typeof s,t,"argument-error"),y(n.type===fe,t,"argument-error"),r="string"==typeof e?{phoneNumber:e}:e,"session"in r){const e=r.session;if("phoneNumber"in r){y("enroll"===e.type,t,"internal-error");const n=await function(t,e){return M(t,"POST","/v2/accounts/mfaEnrollment:start",D(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{y("signin"===e.type,t,"internal-error");const n=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;y(n,t,"missing-multi-factor-info");const o=await function(t,e){return M(t,"POST","/v2/accounts/mfaSignIn:start",D(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return M(t,"POST","/v1/accounts:sendVerificationCode",D(t,e))}(t,{phoneNumber:r.phoneNumber,recaptchaToken:s});return e}}finally{n._reset()}}class ge{constructor(t){this.providerId=ge.PROVIDER_ID,this.auth=ut(t)}verifyPhoneNumber(t,e){return pe(this.auth,t,(0,i.m9)(e))}static credential(t,e){return xt._fromVerification(t,e)}static credentialFromResult(t){const e=t;return ge.credentialFromTaggedObject(e)}static credentialFromError(t){return ge.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?xt._fromTokenResponse(e,n):null}}function me(t,e){return e?_(e):(y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}ge.PROVIDER_ID="phone",ge.PHONE_SIGN_IN_METHOD="phone";class ye extends gt{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return wt(t,this._buildIdpRequest())}_linkToIdToken(t,e){return wt(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return wt(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function be(t){return Ft(t.auth,new ye(t),t.bypassAuthState)}function we(t){const{auth:e,user:n}=t;return y(n,e,"internal-error"),Nt(n,new ye(t),t.bypassAuthState)}async function ve(t){const{auth:e,user:n}=t;return y(n,e,"internal-error"),Rt(n,new ye(t),t.bypassAuthState)}class _e{constructor(t,e,n,i,s=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:s,error:r,type:o}=t;if(r)return void this.reject(r);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return be;case"linkViaPopup":case"linkViaRedirect":return ve;case"reauthViaPopup":case"reauthViaRedirect":return we;default:f(this.auth,"internal-error")}}resolve(t){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xe=new T(2e3,1e4);class Ie extends _e{constructor(t,e,n,i,s){super(t,e,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Ie.currentPopupAction&&Ie.currentPopupAction.cancel(),Ie.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return y(t,this.auth,"internal-error"),t}async onExecution(){w(1===this.filter.length,"Popup operations only handle one event");const t=Xt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(p(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ie.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(p(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,xe.get())};t()}}Ie.currentPopupAction=null;const Ee="pendingRedirect",Te=new Map;class ke extends _e{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Te.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=Ae(e),i=Ce(t);if(!await i._isAvailable())return!1;const s="true"===await i._get(n);return await i._remove(n),s}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}Te.set(this.auth._key(),t)}return this.bypassAuthState||Te.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Se(t,e){Te.set(t._key(),e)}function Ce(t){return _(t._redirectPersistence)}function Ae(t){return Y(Ee,t.config.apiKey,t.name)}async function De(t,e,n=!1){const i=ut(t),s=me(i,e),r=new ke(i,s,n),o=await r.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class Me{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pe(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Pe(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(p(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oe(t))}saveEventToCache(t){this.cachedEventUids.add(Oe(t)),this.lastProcessedEventTime=Date.now()}}function Oe(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Pe({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const Le=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Re=/^https?/;async function Ne(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return M(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(Fe(t))return}catch(t){}f(t,"unauthorized-domain")}function Fe(t){const e=x(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!Re.test(n))return!1;if(Le.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const Be=new T(3e4,6e4);function Ve(){const t=Jt().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let je=null;function Ue(t){return je=je||function(t){return new Promise(((e,n)=>{var i,s,r;function o(){Ve(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ve(),n(p(t,"network-request-failed"))},timeout:Be.get()})}if(null===(s=null===(i=Jt().gapi)||void 0===i?void 0:i.iframes)||void 0===s?void 0:s.Iframe)e(gapi.iframes.getContext());else{if(!(null===(r=Jt().gapi)||void 0===r?void 0:r.load)){const e=de("iframefcb");return Jt()[e]=()=>{gapi.load?o():n(p(t,"network-request-failed"))},he(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw je=null,t}))}(t),je}const ze=new T(5e3,15e3),$e="__/auth/iframe",qe="emulator/auth/iframe",He={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},We=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ke(t){const e=t.config;y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?k(e,qe):`https://${t.config.authDomain}/${$e}`,r={apiKey:e.apiKey,appName:t.name,v:s.Jn},o=We.get(t.config.apiHost);o&&(r.eid=o);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,i.xO)(r).slice(1)}`}const Ge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ye=500,Xe=600,Qe="_blank",Je="http://localhost";class Ze{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function tn(t,e,n,s=Ye,r=Xe){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Ge),{width:s.toString(),height:r.toString(),top:o,left:a}),u=(0,i.z$)().toLowerCase();n&&(c=tt(u)?Qe:n),J(u)&&(e=e||Je,l.scrollbars="yes");const h=Object.entries(l).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=(0,i.z$)()){var e;return rt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==c)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",c),new Ze(null);const d=window.open(e||"",c,h);y(d,t,"popup-blocked");try{d.focus()}catch(t){}return new Ze(d)}const en="__/auth/handler",nn="emulator/auth/handler";function sn(t,e,n,r,o,a){y(t.config.authDomain,t,"auth-domain-config-required"),y(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:s.Jn,eventId:o};if(e instanceof Tt){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",(0,i.xb)(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))c[t]=e}if(e instanceof kt){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(c.scopes=t.join(","))}t.tenantId&&(c.tid=t.tenantId);const l=c;for(const t of Object.keys(l))void 0===l[t]&&delete l[t];return`${function({config:t}){if(!t.emulator)return`https://${t.authDomain}/${en}`;return k(t,nn)}(t)}?${(0,i.xO)(l).slice(1)}`}const rn="webStorageSupport";const on=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gt,this._completeRedirectFn=De,this._overrideRedirectResult=Se}async _openPopup(t,e,n,i){var s;w(null===(s=this.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return tn(t,sn(t,e,n,x(),i),Xt())}async _openRedirect(t,e,n,i){var s;return await this._originValidation(t),s=sn(t,e,n,x(),i),Jt().location.href=s,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(w(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await Ue(t),n=Jt().gapi;return y(n,t,"internal-error"),e.open({where:document.body,url:Ke(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:He,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const s=p(t,"network-request-failed"),r=Jt().setTimeout((()=>{i(s)}),ze.get());function o(){Jt().clearTimeout(r),n(e)}e.ping(o).then(o,(()=>{i(s)}))}))))}(t),n=new Me(t);return e.register("authEvent",(e=>{y(null==e?void 0:e.authEvent,t,"invalid-auth-event");return{status:n.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(rn,{type:rn},(n=>{var i;const s=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[rn];void 0!==s&&e(!!s),f(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Ne(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return ot()||Z()||rt()}};var an="@firebase/auth",cn="0.21.3";class ln{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const un=(0,i.Pz)("authIdTokenMaxAge")||300;let hn=null;const dn=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>un)return;const s=null==n?void 0:n.token;hn!==s&&(hn=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function fn(t=(0,s.Mq)()){const e=(0,s.qX)(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=(0,s.qX)(t,"auth");if(n.isInitialized()){const t=n.getImmediate(),s=n.getOptions();if((0,i.vZ)(s,null!=e?e:{}))return t;f(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:on,persistence:[ue,Wt,Gt]}),r=(0,i.Pz)("authTokenSyncURL");if(r){const t=dn(r);!function(t,e,n){(0,i.m9)(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(t,e,n,s){(0,i.m9)(t).onIdTokenChanged(e,n,s)}(n,(e=>t(e)))}const o=(0,i.q4)("auth");return o&&dt(n,`http://${o}`),n}var pn;pn="Browser",(0,s.Xd)(new a.wA("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),{apiKey:s,authDomain:r}=n.options;return((t,n)=>{y(s&&!s.includes(":"),"invalid-api-key",{appName:t.name}),y(!(null==r?void 0:r.includes(":")),"argument-error",{appName:t.name});const i={apiKey:s,authDomain:r,clientPlatform:pn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:at(pn)},o=new lt(t,n,i);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(_);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(o,e),o})(n,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),(0,s.Xd)(new a.wA("auth-internal",(t=>(t=>new ln(t))(ut(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.KN)(an,cn,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(pn)),(0,s.KN)(an,cn,"esm2017")},247:(t,e,n)=>{"use strict";n.d(e,{hJ:()=>fd,TF:()=>Rd,JU:()=>pd,ST:()=>Od,Ix:()=>Ld,QT:()=>kf,PL:()=>Cf,ad:()=>Ad,IO:()=>hf,pl:()=>Af,ar:()=>ff});var i,s=n(238),r=n(463),o=n(333),a=n(444),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},l={},u=u||{},h=c||self;function d(){}function f(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var g="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:b).apply(null,arguments)}function v(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function _(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(t,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return e.prototype[n].apply(t,s)}}function x(){this.s=this.s,this.o=this.o}x.prototype.s=!1,x.prototype.na=function(){var t;!this.s&&(this.s=!0,this.M(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++m))},x.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function E(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function T(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(f(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let s=0;s<i;s++)t[e+s]=n[s]}else t.push(n)}}function k(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{h.addEventListener("test",d,e),h.removeEventListener("test",d,e)}catch(t){}return t}();function C(t){return/^[\s\xa0]*$/.test(t)}var A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function D(t,e){return t<e?-1:t>e?1:0}function M(){var t=h.navigator;return t&&(t=t.userAgent)?t:""}function O(t){return-1!=M().indexOf(t)}function P(t){return P[" "](t),t}P[" "]=d;var L,R,N=O("Opera"),F=O("Trident")||O("MSIE"),B=O("Edge"),V=B||F,j=O("Gecko")&&!(-1!=M().toLowerCase().indexOf("webkit")&&!O("Edge"))&&!(O("Trident")||O("MSIE"))&&!O("Edge"),U=-1!=M().toLowerCase().indexOf("webkit")&&!O("Edge");function z(){var t=h.document;return t?t.documentMode:void 0}t:{var $="",q=(R=M(),j?/rv:([^\);]+)(\)|;)/.exec(R):B?/Edge\/([\d\.]+)/.exec(R):F?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(R):U?/WebKit\/(\S+)/.exec(R):N?/(?:Version)[ \/]?(\S+)/.exec(R):void 0);if(q&&($=q?q[1]:""),F){var H=z();if(null!=H&&H>parseFloat($)){L=String(H);break t}}L=$}var W,K={};function G(){return function(t){var e=K;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){let t=0;const e=A(String(L)).split("."),n=A("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var s=e[o]||"",r=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==s[0].length&&0==r[0].length)break;t=D(0==s[1].length?0:parseInt(s[1],10),0==r[1].length?0:parseInt(r[1],10))||D(0==s[2].length,0==r[2].length)||D(s[2],r[2]),s=s[3],r=r[3]}while(0==t)}return 0<=t}))}if(h.document&&F){var Y=z();W=Y||(parseInt(L,10)||void 0)}else W=void 0;var X=W;function Q(t,e){if(k.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(j){t:{try{P(e.nodeName);var s=!0;break t}catch(t){}s=!1}s||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:J[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Q.X.h.call(this)}}_(Q,k);var J={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),tt=0;function et(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=s,this.key=++tt,this.ba=this.ea=!1}function nt(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function it(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function st(t){const e={};for(const n in t)e[n]=t[n];return e}const rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<rt.length;e++)n=rt[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function at(t){this.src=t,this.g={},this.h=0}function ct(t,e){var n=e.type;if(n in t.g){var i,s=t.g[n],r=I(s,e);(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(nt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function lt(t,e,n,i){for(var s=0;s<t.length;++s){var r=t[s];if(!r.ba&&r.listener==e&&r.capture==!!n&&r.ha==i)return s}return-1}at.prototype.add=function(t,e,n,i,s){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var o=lt(t,e,i,s);return-1<o?(e=t[o],n||(e.ea=!1)):((e=new et(e,this.src,r,!!i,s)).ea=n,t.push(e)),e};var ut="closure_lm_"+(1e6*Math.random()|0),ht={};function dt(t,e,n,i,s){if(i&&i.once)return pt(t,e,n,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)dt(t,e[r],n,i,s);return null}return n=_t(n),t&&t[Z]?t.N(e,n,p(i)?!!i.capture:!!i,s):ft(t,e,n,!1,i,s)}function ft(t,e,n,i,s,r){if(!e)throw Error("Invalid event type");var o=p(s)?!!s.capture:!!s,a=wt(t);if(a||(t[ut]=a=new at(t)),(n=a.add(e,n,i,o,r)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=bt;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)S||(s=o),void 0===s&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(yt(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function pt(t,e,n,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)pt(t,e[r],n,i,s);return null}return n=_t(n),t&&t[Z]?t.O(e,n,p(i)?!!i.capture:!!i,s):ft(t,e,n,!0,i,s)}function gt(t,e,n,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)gt(t,e[r],n,i,s);else i=p(i)?!!i.capture:!!i,n=_t(n),t&&t[Z]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=lt(r=t.g[e],n,i,s))&&(nt(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.g[e],t.h--)))):t&&(t=wt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=lt(e,n,i,s)),(n=-1<t?e[t]:null)&&mt(n))}function mt(t){if("number"!=typeof t&&t&&!t.ba){var e=t.src;if(e&&e[Z])ct(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(yt(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=wt(e))?(ct(n,t),0==n.h&&(n.src=null,e[ut]=null)):nt(t)}}}function yt(t){return t in ht?ht[t]:ht[t]="on"+t}function bt(t,e){if(t.ba)t=!0;else{e=new Q(e,this);var n=t.listener,i=t.ha||t.src;t.ea&&mt(t),t=n.call(i,e)}return t}function wt(t){return(t=t[ut])instanceof at?t:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(t){return"function"==typeof t?t:(t[vt]||(t[vt]=function(e){return t.handleEvent(e)}),t[vt])}function xt(){x.call(this),this.i=new at(this),this.P=this,this.I=null}function It(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"==typeof e)e=new k(e,t);else if(e instanceof k)e.target=e.target||t;else{var s=e;ot(e=new k(i,t),s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];s=Et(o,i,!0,e)&&s}if(s=Et(o=e.g=t,i,!0,e)&&s,s=Et(o,i,!1,e)&&s,n)for(r=0;r<n.length;r++)s=Et(o=e.g=n[r],i,!1,e)&&s}function Et(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ba&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.ea&&ct(t.i,o),s=!1!==a.call(c,i)&&s}}return s&&!i.defaultPrevented}_(xt,x),xt.prototype[Z]=!0,xt.prototype.removeEventListener=function(t,e,n,i){gt(this,t,e,n,i)},xt.prototype.M=function(){if(xt.X.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)nt(n[i]);delete e.g[t],e.h--}}this.I=null},xt.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},xt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Tt=h.JSON.stringify;function kt(){var t=Pt;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var St,Ct=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new At),(t=>t.reset()));class At{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Dt(t){h.setTimeout((()=>{throw t}),0)}function Mt(t,e){St||function(){var t=h.Promise.resolve(void 0);St=function(){t.then(Lt)}}(),Ot||(St(),Ot=!0),Pt.add(t,e)}var Ot=!1,Pt=new class{constructor(){this.h=this.g=null}add(t,e){const n=Ct.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function Lt(){for(var t;t=kt();){try{t.h.call(t.g)}catch(t){Dt(t)}var e=Ct;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ot=!1}function Rt(t,e){xt.call(this),this.h=t||1,this.g=e||h,this.j=w(this.lb,this),this.l=Date.now()}function Nt(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function Ft(t,e,n){if("function"==typeof t)n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function Bt(t){t.g=Ft((()=>{t.g=null,t.i&&(t.i=!1,Bt(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}_(Rt,xt),(i=Rt.prototype).ca=!1,i.R=null,i.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),It(this,"tick"),this.ca&&(Nt(this),this.start()))}},i.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},i.M=function(){Rt.X.M.call(this),Nt(this),delete this.g};class Vt extends x{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Bt(this)}M(){super.M(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jt(t){x.call(this),this.h=t,this.g={}}_(jt,x);var Ut=[];function zt(t,e,n,i){Array.isArray(n)||(n&&(Ut[0]=n.toString()),n=Ut);for(var s=0;s<n.length;s++){var r=dt(e,n[s],i||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function $t(t){it(t.g,(function(t,e){this.g.hasOwnProperty(e)&&mt(t)}),t),t.g={}}function qt(){this.g=!0}function Ht(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return Tt(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}jt.prototype.M=function(){jt.X.M.call(this),$t(this)},jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qt.prototype.Aa=function(){this.g=!1},qt.prototype.info=function(){};var Wt={},Kt=null;function Gt(){return Kt=Kt||new xt}function Yt(t){k.call(this,Wt.Pa,t)}function Xt(t){const e=Gt();It(e,new Yt(e))}function Qt(t,e){k.call(this,Wt.STAT_EVENT,t),this.stat=e}function Jt(t){const e=Gt();It(e,new Qt(e,t))}function Zt(t,e){k.call(this,Wt.Qa,t),this.size=e}function te(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){t()}),e)}Wt.Pa="serverreachability",_(Yt,k),Wt.STAT_EVENT="statevent",_(Qt,k),Wt.Qa="timingevent",_(Zt,k);var ee={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ne={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ie(){}function se(t){return t.h||(t.h=t.i())}function re(){}ie.prototype.h=null;var oe,ae={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ce(){k.call(this,"d")}function le(){k.call(this,"c")}function ue(){}function he(t,e,n,i){this.l=t,this.j=e,this.m=n,this.U=i||1,this.S=new jt(this),this.O=fe,t=V?125:void 0,this.T=new Rt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}_(ce,k),_(le,k),_(ue,ie),ue.prototype.g=function(){return new XMLHttpRequest},ue.prototype.i=function(){return{}},oe=new ue;var fe=45e3,pe={},ge={};function me(t,e,n){t.K=1,t.v=Re(De(e)),t.s=n,t.P=!0,ye(t,null)}function ye(t,e){t.F=Date.now(),_e(t),t.A=De(t.v);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),Ge(n.i,"t",i),t.C=0,n=t.l.H,t.h=new de,t.g=Gn(t.l,n?e:null,!t.s),0<t.N&&(t.L=new Vt(w(t.La,t,t.g),t.N)),zt(t.S,t.g,"readystatechange",t.ib),e=t.H?st(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Xt(),function(t,e,n,i,s,r){t.info((function(){if(t.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.U,t.s)}function be(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Da)}function we(t,e,n){let i,s=!0;for(;!t.I&&t.C<n.length;){if(i=ve(t,n),i==ge){4==e&&(t.o=4,Jt(14),s=!1),Ht(t.j,t.m,null,"[Incomplete Response]");break}if(i==pe){t.o=4,Jt(15),Ht(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}Ht(t.j,t.m,i,null),ke(t,i)}be(t)&&i!=ge&&i!=pe&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Jt(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.$&&(t.$=!0,(e=t.l).g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),jn(e),e.K=!0,Jt(11))):(Ht(t.j,t.m,n,"[Invalid Chunked Response]"),Te(t),Ee(t))}function ve(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?ge:(n=Number(e.substring(n,i)),isNaN(n)?pe:(i+=1)+n>e.length?ge:(e=e.substr(i,n),t.C=i+n,e))}function _e(t){t.V=Date.now()+t.O,xe(t,t.O)}function xe(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=te(w(t.gb,t),e)}function Ie(t){t.B&&(h.clearTimeout(t.B),t.B=null)}function Ee(t){0==t.l.G||t.I||$n(t.l,t)}function Te(t){Ie(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Nt(t.T),$t(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function ke(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||tn(n.h,t)))if(!t.J&&tn(n.h,t)&&3==n.G){try{var i=n.Fa.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;zn(n),On(n)}Vn(n),Jt(18)}}else n.Ba=s[1],0<n.Ba-n.T&&37500>s[2]&&n.L&&0==n.A&&!n.v&&(n.v=te(w(n.cb,n),6e3));if(1>=Ze(n.h)&&n.ja){try{n.ja()}catch(t){}n.ja=void 0}}else Hn(n,11)}else if((t.J||n.g==t)&&zn(n),!C(e))for(s=n.Fa.g.parse(e),e=0;e<s.length;e++){let l=s[e];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.I=l[1],n.ka=l[2];const e=l[3];null!=e&&(n.ma=e,n.j.info("VER="+n.ma));const s=l[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.J=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=i.h;r.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(en(r,r.h),r.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.za=t,Le(i.F,i.D,t))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=t;if((i=n).sa=Kn(i,i.H?i.ka:null,i.V),o.J){nn(i.h,o);var a=o,c=i.J;c&&a.setTimeout(c),a.B&&(Ie(a),_e(a)),i.g=o}else Bn(i);0<n.i.length&&Ln(n)}else"stop"!=l[0]&&"close"!=l[0]||Hn(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Hn(n,7):Mn(n):"noop"!=l[0]&&n.l&&n.l.wa(l),n.A=0)}Xt()}catch(t){}}function Se(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.W&&"function"==typeof t.W)return t.W();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),s=i.length,r=0;r<s;r++)e.call(void 0,i[r],n&&n[r],t)}(i=he.prototype).setTimeout=function(t){this.O=t},i.ib=function(t){t=t.target;const e=this.L;e&&3==Tn(t)?e.l():this.La(t)},i.La=function(t){try{if(t==this.g)t:{const u=Tn(this.g);var e=this.g.Ea();this.g.aa();if(!(3>u)&&(3!=u||V||this.g&&(this.h.h||this.g.fa()||kn(this.g)))){this.I||4!=u||7==e||Xt(),Ie(this);var n=this.g.aa();this.Y=n;e:if(be(this)){var i=kn(this.g);t="";var s=i.length,r=4==Tn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Te(this),Ee(this);var o="";break e}this.h.i=new h.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function(t,e,n,i,s,r,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+"\n"+n+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.U,u,n),this.i){if(this.Z&&!this.J){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.o=3,Jt(12),Te(this),Ee(this);break t}Ht(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ke(this,n)}this.P?(we(this,u,o),V&&this.i&&3==u&&(zt(this.S,this.T,"tick",this.hb),this.T.start())):(Ht(this.j,this.m,o,null),ke(this,o)),4==u&&Te(this),this.i&&!this.I&&(4==u?$n(this.l,this):(this.i=!1,_e(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Jt(12)):(this.o=0,Jt(13)),Te(this),Ee(this)}}}catch(t){}},i.hb=function(){if(this.g){var t=Tn(this.g),e=this.g.fa();this.C<e.length&&(Ie(this),we(this,t,e),this.i&&4!=t&&_e(this))}},i.cancel=function(){this.I=!0,Te(this)},i.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Xt(),Jt(17)),Te(this),this.o=2,Ee(this)):xe(this,this.V-t)};var Ce=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ae(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ae){this.h=void 0!==e?e:t.h,Me(this,t.j),this.s=t.s,this.g=t.g,Oe(this,t.m),this.l=t.l,e=t.i;var n=new qe;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Pe(this,n),this.o=t.o}else t&&(n=String(t).match(Ce))?(this.h=!!e,Me(this,n[1]||"",!0),this.s=Ne(n[2]||""),this.g=Ne(n[3]||"",!0),Oe(this,n[4]),this.l=Ne(n[5]||"",!0),Pe(this,n[6]||"",!0),this.o=Ne(n[7]||"")):(this.h=!!e,this.i=new qe(null,this.h))}function De(t){return new Ae(t)}function Me(t,e,n){t.j=n?Ne(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Oe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Pe(t,e,n){e instanceof qe?(t.i=e,function(t,e){e&&!t.j&&(He(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(We(this,e),Ge(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Fe(e,ze)),t.i=new qe(e,t.h))}function Le(t,e,n){t.i.set(e,n)}function Re(t){return Le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ne(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fe(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Be),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Be(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ae.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Fe(e,Ve,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Fe(e,Ve,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fe(n,"/"==n.charAt(0)?Ue:je,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Fe(n,$e)),t.join("")};var Ve=/[#\/\?@]/g,je=/[#\?:]/g,Ue=/[#\?]/g,ze=/[#\?@]/g,$e=/#/g;function qe(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function He(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var r=t[n].substring(0,i);s=t[n].substring(i+1)}else r=t[n];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function We(t,e){He(t),e=Ye(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ke(t,e){return He(t),e=Ye(t,e),t.g.has(e)}function Ge(t,e,n){We(t,e),0<n.length&&(t.i=null,t.g.set(Ye(t,e),E(n)),t.h+=n.length)}function Ye(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(i=qe.prototype).add=function(t,e){He(this),this.i=null,t=Ye(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},i.forEach=function(t,e){He(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},i.oa=function(){He(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const s=t[i];for(let t=0;t<s.length;t++)n.push(e[i])}return n},i.W=function(t){He(this);let e=[];if("string"==typeof t)Ke(this,t)&&(e=e.concat(this.g.get(Ye(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},i.set=function(t,e){return He(this),this.i=null,Ke(this,t=Ye(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},i.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const r=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var s=r;""!==o[i]&&(s+="="+encodeURIComponent(String(o[i]))),t.push(s)}}return this.i=t.join("&")};function Xe(t){this.l=t||Qe,h.PerformanceNavigationTiming?t=0<(t=h.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(h.g&&h.g.Ga&&h.g.Ga()&&h.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Qe=10;function Je(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ze(t){return t.h?1:t.g?t.g.size:0}function tn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function en(t,e){t.g?t.g.add(e):t.h=e}function nn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function sn(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return E(t.i)}function rn(){}function on(){this.g=new rn}function an(t,e,n){const i=n||"";try{Se(t,(function(t,n){let s=t;p(t)&&(s=Tt(t)),e.push(i+n+"="+encodeURIComponent(s))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function cn(t,e,n,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch(t){}}function ln(t){this.l=t.ac||null,this.j=t.jb||!1}function un(t,e){xt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=hn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xe.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},rn.prototype.stringify=function(t){return h.JSON.stringify(t,void 0)},rn.prototype.parse=function(t){return h.JSON.parse(t,void 0)},_(ln,ie),ln.prototype.g=function(){return new un(this.l,this.j)},ln.prototype.i=function(t){return function(){return t}}({}),_(un,xt);var hn=0;function dn(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}function fn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,pn(t)}function pn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(i=un.prototype).open=function(t,e){if(this.readyState!=hn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,pn(this)},i.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||h).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fn(this)),this.readyState=hn},i.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,pn(this)),this.g&&(this.readyState=3,pn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==h.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dn(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))},i.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?fn(this):pn(this),3==this.readyState&&dn(this)}},i.Va=function(t){this.g&&(this.response=this.responseText=t,fn(this))},i.Ua=function(t){this.g&&(this.response=t,fn(this))},i.ga=function(){this.g&&fn(this)},i.setRequestHeader=function(t,e){this.v.append(t,e)},i.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(un.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var gn=h.JSON.parse;function mn(t){xt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yn,this.K=this.L=!1}_(mn,xt);var yn="",bn=/^https?$/i,wn=["POST","PUT"];function vn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,_n(t),In(t)}function _n(t){t.D||(t.D=!0,It(t,"complete"),It(t,"error"))}function xn(t){if(t.h&&void 0!==u&&(!t.C[1]||4!=Tn(t)||2!=t.aa()))if(t.v&&4==Tn(t))Ft(t.Ha,0,t);else if(It(t,"readystatechange"),4==Tn(t)){t.h=!1;try{const a=t.aa();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var s=String(t.H).match(Ce)[1]||null;if(!s&&h.self&&h.self.location){var r=h.self.location.protocol;s=r.substr(0,r.length-1)}i=!bn.test(s?s.toLowerCase():"")}n=i}if(n)It(t,"complete"),It(t,"success");else{t.m=6;try{var o=2<Tn(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.aa()+"]",_n(t)}}finally{In(t)}}}function In(t,e){if(t.g){En(t);const n=t.g,i=t.C[0]?d:null;t.g=null,t.C=null,e||It(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function En(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(h.clearTimeout(t.A),t.A=null)}function Tn(t){return t.g?t.g.readyState:0}function kn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case yn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Sn(t){let e="";return it(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Cn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Sn(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Le(t,e,n))}function An(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Dn(t){this.Ca=0,this.i=[],this.j=new qt,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=An("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=An("baseRetryDelayMs",5e3,t),this.bb=An("retryDelaySeedMs",1e4,t),this.$a=An("forwardChannelMaxRetries",2,t),this.ta=An("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Xe(t&&t.concurrentRequestLimit),this.Fa=new on,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Mn(t){if(Pn(t),3==t.G){var e=t.U++,n=De(t.F);Le(n,"SID",t.I),Le(n,"RID",e),Le(n,"TYPE","terminate"),Nn(t,n),(e=new he(t,t.j,e,void 0)).K=2,e.v=Re(De(n)),n=!1,h.navigator&&h.navigator.sendBeacon&&(n=h.navigator.sendBeacon(e.v.toString(),"")),!n&&h.Image&&((new Image).src=e.v,n=!0),n||(e.g=Gn(e.l,null),e.g.da(e.v)),e.F=Date.now(),_e(e)}Wn(t)}function On(t){t.g&&(jn(t),t.g.cancel(),t.g=null)}function Pn(t){On(t),t.u&&(h.clearTimeout(t.u),t.u=null),zn(t),t.h.cancel(),t.m&&("number"==typeof t.m&&h.clearTimeout(t.m),t.m=null)}function Ln(t){Je(t.h)||t.m||(t.m=!0,Mt(t.Ja,t),t.C=0)}function Rn(t,e){var n;n=e?e.m:t.U++;const i=De(t.F);Le(i,"SID",t.I),Le(i,"RID",n),Le(i,"AID",t.T),Nn(t,i),t.o&&t.s&&Cn(i,t.o,t.s),n=new he(t,t.j,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=Fn(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),en(t.h,n),me(n,i,e)}function Nn(t,e){t.ia&&it(t.ia,(function(t,n){Le(e,n,t)})),t.l&&Se({},(function(t,n){Le(e,n,t)}))}function Fn(t,e,n){n=Math.min(t.i.length,n);var i=t.l?w(t.l.Ra,t.l,t):null;t:{var s=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=s[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let r=!0;for(let o=0;o<n;o++){let n=s[o].h;const a=s[o].g;if(n-=e,0>n)e=Math.max(0,s[o].h-100),r=!1;else try{an(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(r){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function Bn(t){t.g||t.u||(t.Z=1,Mt(t.Ia,t),t.A=0)}function Vn(t){return!(t.g||t.u||3<=t.A)&&(t.Z++,t.u=te(w(t.Ia,t),qn(t,t.A)),t.A++,!0)}function jn(t){null!=t.B&&(h.clearTimeout(t.B),t.B=null)}function Un(t){t.g=new he(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var e=De(t.sa);Le(e,"RID","rpc"),Le(e,"SID",t.I),Le(e,"CI",t.L?"0":"1"),Le(e,"AID",t.T),Le(e,"TYPE","xmlhttp"),Nn(t,e),t.o&&t.s&&Cn(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Re(De(e)),n.s=null,n.P=!0,ye(n,t)}function zn(t){null!=t.v&&(h.clearTimeout(t.v),t.v=null)}function $n(t,e){var n=null;if(t.g==e){zn(t),jn(t),t.g=null;var i=2}else{if(!tn(t.h,e))return;n=e.D,nn(t.h,e),i=1}if(0!=t.G)if(t.pa=e.Y,e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;It(i=Gt(),new Zt(i,n)),Ln(t)}else Bn(t);else if(3==(s=e.o)||0==s&&0<t.pa||!(1==i&&function(t,e){return!(Ze(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.C>=(t.Za?0:t.$a)||(t.m=te(w(t.Ja,t,e),qn(t,t.C)),t.C++,0)))}(t,e)||2==i&&Vn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:Hn(t,5);break;case 4:Hn(t,10);break;case 3:Hn(t,6);break;default:Hn(t,2)}}function qn(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Hn(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var i=w(t.kb,t);n||(n=new Ae("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Me(n,"https"),Re(n)),function(t,e){const n=new qt;if(h.Image){const i=new Image;i.onload=v(cn,n,i,"TestLoadImage: loaded",!0,e),i.onerror=v(cn,n,i,"TestLoadImage: error",!1,e),i.onabort=v(cn,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=v(cn,n,i,"TestLoadImage: timeout",!1,e),h.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Jt(2);t.G=0,t.l&&t.l.va(e),Wn(t),Pn(t)}function Wn(t){if(t.G=0,t.la=[],t.l){const e=sn(t.h);0==e.length&&0==t.i.length||(T(t.la,e),T(t.la,t.i),t.h.i.length=0,E(t.i),t.i.length=0),t.l.ua()}}function Kn(t,e,n){var i=n instanceof Ae?De(n):new Ae(n,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),Oe(i,i.m);else{var s=h.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var r=new Ae(null,void 0);i&&Me(r,i),e&&(r.g=e),s&&Oe(r,s),n&&(r.l=n),i=r}return n=t.D,e=t.za,n&&e&&Le(i,n,e),Le(i,"VER",t.ma),Nn(t,i),i}function Gn(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Da&&!t.ra?new mn(new ln({jb:!0})):new mn(t.ra)).Ka(t.H),e}function Yn(){}function Xn(){if(F&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function Qn(t,e){xt.call(this),this.g=new Dn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!C(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!C(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new ti(this)}function Jn(t){ce.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Zn(){le.call(this),this.status=1}function ti(t){this.g=t}(i=mn.prototype).Ka=function(t){this.L=t},i.da=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():oe.g(),this.C=this.u?se(this.u):se(oe),this.g.onreadystatechange=w(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void vn(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),s=h.FormData&&t instanceof h.FormData,!(0<=I(wn,e))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{En(this),0<this.B&&((this.K=function(t){return F&&G()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=w(this.qa,this)):this.A=Ft(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){vn(this,t)}},i.qa=function(){void 0!==u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,It(this,"timeout"),this.abort(8))},i.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,It(this,"complete"),It(this,"abort"),In(this))},i.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),In(this,!0)),mn.X.M.call(this)},i.Ha=function(){this.s||(this.F||this.v||this.l?xn(this):this.fb())},i.fb=function(){xn(this)},i.aa=function(){try{return 2<Tn(this)?this.g.status:-1}catch(t){return-1}},i.fa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},i.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),gn(e)}},i.Ea=function(){return this.m},i.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(i=Dn.prototype).ma=8,i.G=1,i.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new he(this,this.j,t,void 0);let r=this.s;if(this.S&&(r?(r=st(r),ot(r,this.S)):r=this.S),null!==this.o||this.N||(s.H=r,r=null),this.O)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Fn(this,s,e),Le(n=De(this.F),"RID",t),Le(n,"CVER",22),this.D&&Le(n,"X-HTTP-Session-Id",this.D),Nn(this,n),r&&(this.N?e="headers="+encodeURIComponent(String(Sn(r)))+"&"+e:this.o&&Cn(n,this.o,r)),en(this.h,s),this.Ya&&Le(n,"TYPE","init"),this.O?(Le(n,"$req",e),Le(n,"SID","null"),s.Z=!0,me(s,n,null)):me(s,n,e),this.G=2}}else 3==this.G&&(t?Rn(this,t):0==this.i.length||Je(this.h)||Rn(this))},i.Ia=function(){if(this.u=null,Un(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=te(w(this.eb,this),t)}},i.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Jt(10),On(this),Un(this))},i.cb=function(){null!=this.v&&(this.v=null,On(this),Vn(this),Jt(19))},i.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))},(i=Yn.prototype).xa=function(){},i.wa=function(){},i.va=function(){},i.ua=function(){},i.Ra=function(){},Xn.prototype.g=function(t,e){return new Qn(t,e)},_(Qn,xt),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Jt(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=Kn(t,null,t.V),Ln(t)},Qn.prototype.close=function(){Mn(this.g)},Qn.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Tt(t),t=n);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.ab++,t)),3==e.G&&Ln(e)},Qn.prototype.M=function(){this.g.l=null,delete this.j,Mn(this.g),delete this.g,Qn.X.M.call(this)},_(Jn,ce),_(Zn,le),_(ti,Yn),ti.prototype.xa=function(){It(this.g,"a")},ti.prototype.wa=function(t){It(this.g,new Jn(t))},ti.prototype.va=function(t){It(this.g,new Zn)},ti.prototype.ua=function(){It(this.g,"b")},Xn.prototype.createWebChannel=Xn.prototype.g,Qn.prototype.send=Qn.prototype.u,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,ee.NO_ERROR=0,ee.TIMEOUT=8,ee.HTTP_ERROR=6,ne.COMPLETE="complete",re.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",xt.prototype.listen=xt.prototype.N,mn.prototype.listenOnce=mn.prototype.O,mn.prototype.getLastError=mn.prototype.Oa,mn.prototype.getLastErrorCode=mn.prototype.Ea,mn.prototype.getStatus=mn.prototype.aa,mn.prototype.getResponseJson=mn.prototype.Sa,mn.prototype.getResponseText=mn.prototype.fa,mn.prototype.send=mn.prototype.da,mn.prototype.setWithCredentials=mn.prototype.Ka;var ei=l.createWebChannelTransport=function(){return new Xn},ni=l.getStatEventTarget=function(){return Gt()},ii=l.ErrorCode=ee,si=l.EventType=ne,ri=l.Event=Wt,oi=l.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ai=l.FetchXmlHttpFactory=ln,ci=l.WebChannel=re,li=l.XhrIo=mn,ui=n(155);const hi="@firebase/firestore";class di{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}di.UNAUTHENTICATED=new di(null),di.GOOGLE_CREDENTIALS=new di("google-credentials-uid"),di.FIRST_PARTY=new di("first-party-uid"),di.MOCK_USER=new di("mock-user");let fi="9.17.1";const pi=new o.Yd("@firebase/firestore");function gi(){return pi.logLevel}function mi(t,...e){if(pi.logLevel<=o.in.DEBUG){const n=e.map(wi);pi.debug(`Firestore (${fi}): ${t}`,...n)}}function yi(t,...e){if(pi.logLevel<=o.in.ERROR){const n=e.map(wi);pi.error(`Firestore (${fi}): ${t}`,...n)}}function bi(t,...e){if(pi.logLevel<=o.in.WARN){const n=e.map(wi);pi.warn(`Firestore (${fi}): ${t}`,...n)}}function wi(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function vi(t="Unexpected state"){const e=`FIRESTORE (${fi}) INTERNAL ASSERTION FAILED: `+t;throw yi(e),new Error(e)}function _i(t,e){t||vi()}function xi(t,e){return t}const Ii={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ei extends a.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class ki{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Si{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(di.UNAUTHENTICATED)))}shutdown(){}}class Ci{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Ai{constructor(t){this.t=t,this.currentUser=di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let s=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ti,t.enqueueRetryable((()=>i(this.currentUser)))};const r=()=>{const e=s;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{mi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(mi("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ti)}}),0),r()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(mi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(_i("string"==typeof e.accessToken),new ki(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return _i(null===t||"string"==typeof t),new di(t)}}class Di{constructor(t,e,n,i){this.h=t,this.l=e,this.m=n,this.g=i,this.type="FirstParty",this.user=di.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(_i(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Mi{constructor(t,e,n,i){this.h=t,this.l=e,this.m=n,this.g=i}getToken(){return Promise.resolve(new Di(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable((()=>e(di.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Oi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pi{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const n=t=>{null!=t.error&&mi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.A;return this.A=t.token,mi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{mi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.T.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.T.getImmediate({optional:!0});t?i(t):mi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(_i("string"==typeof t.token),this.A=t.token,new Oi(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Li(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class Ri{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=Li(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<e&&(n+=t.charAt(i[s]%t.length))}return n}}function Ni(t,e){return t<e?-1:t>e?1:0}function Fi(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}function Bi(t){return t+"\0"}class Vi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ei(Ii.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ei(Ii.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ei(Ii.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ei(Ii.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Vi.fromMillis(Date.now())}static fromDate(t){return Vi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Vi(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ni(this.nanoseconds,t.nanoseconds):Ni(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ji{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ji(t)}static min(){return new ji(new Vi(0,0))}static max(){return new ji(new Vi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ui{constructor(t,e,n){void 0===e?e=0:e>t.length&&vi(),void 0===n?n=t.length-e:n>t.length-e&&vi(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Ui.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ui?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),s=e.get(i);if(n<s)return-1;if(n>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class zi extends Ui{construct(t,e,n){return new zi(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Ei(Ii.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new zi(e)}static emptyPath(){return new zi([])}}const $i=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qi extends Ui{construct(t,e,n){return new qi(t,e,n)}static isValidIdentifier(t){return $i.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qi(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const s=()=>{if(0===n.length)throw new Ei(Ii.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let r=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Ei(Ii.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Ei(Ii.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(r=!r,i++):"."!==e||r?(n+=e,i++):(s(),i++)}if(s(),r)throw new Ei(Ii.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qi(e)}static emptyPath(){return new qi([])}}class Hi{constructor(t){this.path=t}static fromPath(t){return new Hi(zi.fromString(t))}static fromName(t){return new Hi(zi.fromString(t).popFirst(5))}static empty(){return new Hi(zi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===zi.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return zi.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Hi(new zi(t.slice()))}}class Wi{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}function Ki(t){return t.fields.find((t=>2===t.kind))}function Gi(t){return t.fields.filter((t=>2!==t.kind))}Wi.UNKNOWN_ID=-1;class Yi{constructor(t,e){this.fieldPath=t,this.kind=e}}class Xi{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Xi(0,Zi.min())}}function Qi(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ji.fromTimestamp(1e9===i?new Vi(n+1,0):new Vi(n,i));return new Zi(s,Hi.empty(),e)}function Ji(t){return new Zi(t.readTime,t.key,-1)}class Zi{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Zi(ji.min(),Hi.empty(),-1)}static max(){return new Zi(ji.max(),Hi.empty(),-1)}}function ts(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Hi.comparator(t.documentKey,e.documentKey),0!==n?n:Ni(t.largestBatchId,e.largestBatchId))}const es="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ns{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function is(t){if(t.code!==Ii.FAILED_PRECONDITION||t.message!==es)throw t;mi("LocalStore","Unexpectedly lost primary lease")}class ss{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&vi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ss(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof ss?e:ss.resolve(e)}catch(t){return ss.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):ss.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):ss.reject(e)}static resolve(t){return new ss(((e,n)=>{e(t)}))}static reject(t){return new ss(((e,n)=>{n(t)}))}static waitFor(t){return new ss(((e,n)=>{let i=0,s=0,r=!1;t.forEach((t=>{++i,t.next((()=>{++s,r&&s===i&&e()}),(t=>n(t)))})),r=!0,s===i&&e()}))}static or(t){let e=ss.resolve(!1);for(const n of t)e=e.next((t=>t?ss.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new ss(((n,i)=>{const s=t.length,r=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;e(t[c]).next((t=>{r[c]=t,++o,o===s&&n(r)}),(t=>i(t)))}}))}static doWhile(t,e){return new ss(((n,i)=>{const s=()=>{!0===t()?e().next((()=>{s()}),i):n()};s()}))}}class rs{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new Ti,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new cs(t,e.error)):this.P.resolve()},this.transaction.onerror=e=>{const n=fs(e.target.error);this.P.reject(new cs(t,n))}}static open(t,e,n,i){try{return new rs(e,t.transaction(i,n))}catch(t){throw new cs(e,t)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||(mi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new us(e)}}class os{constructor(t,e,n){this.name=t,this.version=e,this.S=n,12.2===os.D((0,a.z$)())&&yi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return mi("SimpleDb","Removing database:",t),hs(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,a.hl)())return!1;if(os.N())return!0;const t=(0,a.z$)(),e=os.D(t),n=0<e&&e<10,i=os.k(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||s)}static N(){var t;return void 0!==ui&&"YES"===(null===(t=ui.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static k(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async F(t){return this.db||(mi("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new cs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new Ei(Ii.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new Ei(Ii.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new cs(t,i))},i.onupgradeneeded=t=>{mi("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.S.$(e,i.transaction,t.oldVersion,this.version).next((()=>{mi("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const s="readonly"===e;let r=0;for(;;){++r;try{this.db=await this.F(t);const e=rs.open(this.db,t,s?"readonly":"readwrite",n),r=i(e).next((t=>(e.V(),t))).catch((t=>(e.abort(t),ss.reject(t)))).toPromise();return r.catch((()=>{})),await e.v,r}catch(t){const e=t,n="FirebaseError"!==e.name&&r<3;if(mi("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class as{constructor(t){this.q=t,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(t){this.q=t}done(){this.U=!0}j(t){this.K=t}delete(){return hs(this.q.delete())}}class cs extends Ei{constructor(t,e){super(Ii.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function ls(t){return"IndexedDbTransactionError"===t.name}class us{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(mi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(mi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),hs(n)}add(t){return mi("SimpleDb","ADD",this.store.name,t,t),hs(this.store.add(t))}get(t){return hs(this.store.get(t)).next((e=>(void 0===e&&(e=null),mi("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return mi("SimpleDb","DELETE",this.store.name,t),hs(this.store.delete(t))}count(){return mi("SimpleDb","COUNT",this.store.name),hs(this.store.count())}W(t,e){const n=this.options(t,e);if(n.index||"function"!=typeof this.store.getAll){const t=this.cursor(n),e=[];return this.H(t,((t,n)=>{e.push(n)})).next((()=>e))}{const t=this.store.getAll(n.range);return new ss(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}}J(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new ss(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}Y(t,e){mi("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.X=!1;const i=this.cursor(n);return this.H(i,((t,e,n)=>n.delete()))}Z(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.H(i,e)}tt(t){const e=this.cursor({});return new ss(((n,i)=>{e.onerror=t=>{const e=fs(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}H(t,e){const n=[];return new ss(((i,s)=>{t.onerror=t=>{s(t.target.error)},t.onsuccess=t=>{const s=t.target.result;if(!s)return void i();const r=new as(s),o=e(s.primaryKey,s.value,r);if(o instanceof ss){const t=o.catch((t=>(r.done(),ss.reject(t))));n.push(t)}r.isDone?i():null===r.G?s.continue():s.continue(r.G)}})).next((()=>ss.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.X?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function hs(t){return new ss(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=fs(t.target.error);n(e)}}))}let ds=!1;function fs(t){const e=os.D((0,a.z$)());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Ei("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ds||(ds=!0,setTimeout((()=>{throw t}),0)),t}}return t}class ps{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){mi("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{mi("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(t){ls(t)?mi("IndexBackiller","Ignoring IndexedDB error during index backfill: ",t):await is(t)}await this.nt(6e4)}))}}class gs{constructor(t,e){this.localStore=t,this.persistence=e}async st(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.it(e,t)))}it(t,e){const n=new Set;let i=e,s=!0;return ss.doWhile((()=>!0===s&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((e=>{if(null!==e&&!n.has(e))return mi("IndexBackiller",`Processing collection: ${e}`),this.rt(t,e,i).next((t=>{i-=t,n.add(e)}));s=!1})))).next((()=>e-i))}rt(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((i=>this.localStore.localDocuments.getNextDocuments(t,e,i,n).next((n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next((()=>this.ot(i,n))).next((n=>(mi("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(t,e,n)))).next((()=>s.size))}))))}ot(t,e){let n=t;return e.changes.forEach(((t,e)=>{const i=Ji(e);ts(i,n)>0&&(n=i)})),new Zi(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}class ms{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ut(t),this.ct=t=>e.writeSequenceNumber(t))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}ms.at=-1;class ys{constructor(t,e,n,i,s,r,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class bs{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new bs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof bs&&t.projectId===this.projectId&&t.database===this.database}}function ws(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _s(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xs(t){return null==t}function Is(t){return 0===t&&1/t==-1/0}function Es(t){return"number"==typeof t&&Number.isInteger(t)&&!Is(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class Ts{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Ts(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Ts(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ni(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ts.EMPTY_BYTE_STRING=new Ts("");const ks=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(_i(!!t),"string"==typeof t){let e=0;const n=ks.exec(t);if(_i(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Cs(t.seconds),nanos:Cs(t.nanos)}}function Cs(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function As(t){return"string"==typeof t?Ts.fromBase64String(t):Ts.fromUint8Array(t)}function Ds(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ms(t){const e=t.mapValue.fields.__previous_value__;return Ds(e)?Ms(e):e}function Os(t){const e=Ss(t.mapValue.fields.__local_write_time__.timestampValue);return new Vi(e.seconds,e.nanos)}const Ps={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ls={nullValue:"NULL_VALUE"};function Rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ds(t)?4:Ys(t)?9007199254740991:10:vi()}function Ns(t,e){if(t===e)return!0;const n=Rs(t);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Os(t).isEqual(Os(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Ss(t.timestampValue),i=Ss(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return As(t.bytesValue).isEqual(As(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Cs(t.geoPointValue.latitude)===Cs(e.geoPointValue.latitude)&&Cs(t.geoPointValue.longitude)===Cs(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Cs(t.integerValue)===Cs(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Cs(t.doubleValue),i=Cs(e.doubleValue);return n===i?Is(n)===Is(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Fi(t.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(ws(n)!==ws(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!Ns(n[t],i[t])))return!1;return!0}(t,e);default:return vi()}}function Fs(t,e){return void 0!==(t.values||[]).find((t=>Ns(t,e)))}function Bs(t,e){if(t===e)return 0;const n=Rs(t),i=Rs(e);if(n!==i)return Ni(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ni(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Cs(t.integerValue||t.doubleValue),i=Cs(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Vs(t.timestampValue,e.timestampValue);case 4:return Vs(Os(t),Os(e));case 5:return Ni(t.stringValue,e.stringValue);case 6:return function(t,e){const n=As(t),i=As(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=Ni(n[t],i[t]);if(0!==e)return e}return Ni(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Ni(Cs(t.latitude),Cs(e.latitude));return 0!==n?n:Ni(Cs(t.longitude),Cs(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=Bs(n[t],i[t]);if(e)return e}return Ni(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Ps.mapValue&&e===Ps.mapValue)return 0;if(t===Ps.mapValue)return 1;if(e===Ps.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),s=e.fields||{},r=Object.keys(s);i.sort(),r.sort();for(let t=0;t<i.length&&t<r.length;++t){const e=Ni(i[t],r[t]);if(0!==e)return e;const o=Bs(n[i[t]],s[r[t]]);if(0!==o)return o}return Ni(i.length,r.length)}(t.mapValue,e.mapValue);default:throw vi()}}function Vs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ni(t,e);const n=Ss(t),i=Ss(e),s=Ni(n.seconds,i.seconds);return 0!==s?s:Ni(n.nanos,i.nanos)}function js(t){return Us(t)}function Us(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Ss(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?As(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Hi.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Us(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const s of e)i?i=!1:n+=",",n+=`${s}:${Us(t.fields[s])}`;return n+"}"}(t.mapValue):vi();var e,n}function zs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $s(t){return!!t&&"integerValue"in t}function qs(t){return!!t&&"arrayValue"in t}function Hs(t){return!!t&&"nullValue"in t}function Ws(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ks(t){return!!t&&"mapValue"in t}function Gs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vs(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Gs(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Ys(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function Xs(t){return"nullValue"in t?Ls:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?zs(bs.empty(),Hi.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:vi()}function Qs(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?zs(bs.empty(),Hi.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ps:vi()}function Js(t,e){const n=Bs(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Zs(t,e){const n=Bs(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class tr{constructor(t,e){this.position=t,this.inclusive=e}}function er(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(i=r.field.isKeyField()?Hi.comparator(Hi.fromName(o.referenceValue),n.key):Bs(o,n.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function nr(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ns(t.position[n],e.position[n]))return!1;return!0}class ir{}class sr extends ir{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new pr(t,e,n):"array-contains"===e?new br(t,n):"in"===e?new wr(t,n):"not-in"===e?new vr(t,n):"array-contains-any"===e?new _r(t,n):new sr(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new gr(t,n):new mr(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Bs(e,this.value)):null!==e&&Rs(this.value)===Rs(e)&&this.matchesComparison(Bs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return vi()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class rr extends ir{constructor(t,e){super(),this.filters=t,this.op=e,this.ht=null}static create(t,e){return new rr(t,e)}matches(t){return or(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.lt((t=>t.isInequality()));return null!==t?t.field:null}lt(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function or(t){return"and"===t.op}function ar(t){return"or"===t.op}function cr(t){return lr(t)&&or(t)}function lr(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function ur(t){if(t instanceof sr)return t.field.canonicalString()+t.op.toString()+js(t.value);if(cr(t))return t.filters.map((t=>ur(t))).join(",");{const e=t.filters.map((t=>ur(t))).join(",");return`${t.op}(${e})`}}function hr(t,e){return t instanceof sr?function(t,e){return e instanceof sr&&t.op===e.op&&t.field.isEqual(e.field)&&Ns(t.value,e.value)}(t,e):t instanceof rr?function(t,e){return e instanceof rr&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&hr(n,e.filters[i])),!0)}(t,e):void vi()}function dr(t,e){const n=t.filters.concat(e);return rr.create(n,t.op)}function fr(t){return t instanceof sr?function(t){return`${t.field.canonicalString()} ${t.op} ${js(t.value)}`}(t):t instanceof rr?function(t){return t.op.toString()+" {"+t.getFilters().map(fr).join(" ,")+"}"}(t):"Filter"}class pr extends sr{constructor(t,e,n){super(t,e,n),this.key=Hi.fromName(n.referenceValue)}matches(t){const e=Hi.comparator(t.key,this.key);return this.matchesComparison(e)}}class gr extends sr{constructor(t,e){super(t,"in",e),this.keys=yr("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class mr extends sr{constructor(t,e){super(t,"not-in",e),this.keys=yr("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function yr(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Hi.fromName(t.referenceValue)))}class br extends sr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return qs(e)&&Fs(e.arrayValue,this.value)}}class wr extends sr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Fs(this.value.arrayValue,e)}}class vr extends sr{constructor(t,e){super(t,"not-in",e)}matches(t){if(Fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Fs(this.value.arrayValue,e)}}class _r extends sr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!qs(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Fs(this.value.arrayValue,t)))}}class xr{constructor(t,e="asc"){this.field=t,this.dir=e}}function Ir(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Er{constructor(t,e){this.comparator=t,this.root=e||kr.EMPTY}insert(t,e){return new Er(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,kr.BLACK,null,null))}remove(t){return new Er(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Tr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Tr(this.root,t,this.comparator,!1)}getReverseIterator(){return new Tr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Tr(this.root,t,this.comparator,!0)}}class Tr{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class kr{constructor(t,e,n,i,s){this.key=t,this.value=e,this.color=null!=n?n:kr.RED,this.left=null!=i?i:kr.EMPTY,this.right=null!=s?s:kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,s){return new kr(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const s=n(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===s?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return kr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vi();if(this.right.isRed())throw vi();const t=this.left.check();if(t!==this.right.check())throw vi();return t+(this.isRed()?0:1)}}kr.EMPTY=null,kr.RED=!0,kr.BLACK=!1,kr.EMPTY=new class{constructor(){this.size=0}get key(){throw vi()}get value(){throw vi()}get color(){throw vi()}get left(){throw vi()}get right(){throw vi()}copy(t,e,n,i,s){return this}insert(t,e,n){return new kr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sr{constructor(t){this.comparator=t,this.data=new Er(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Cr(this.data.getIterator())}getIteratorFrom(t){return new Cr(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Sr))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Sr(this.comparator);return e.data=t,e}}class Cr{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ar(t){return t.hasNext()?t.getNext():void 0}class Dr{constructor(t){this.fields=t,t.sort(qi.comparator)}static empty(){return new Dr([])}unionWith(t){let e=new Sr(qi.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Dr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Fi(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Mr{constructor(t){this.value=t}static empty(){return new Mr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Ks(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gs(e)}setAll(t){let e=qi.emptyPath(),n={},i=[];t.forEach(((t,s)=>{if(!e.isImmediateParentOf(s)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=s.popLast()}t?n[s.lastSegment()]=Gs(t):i.push(s.lastSegment())}));const s=this.getFieldsMap(e);this.applyChanges(s,n,i)}delete(t){const e=this.field(t.popLast());Ks(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ns(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Ks(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){vs(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Mr(Gs(this.value))}}function Or(t){const e=[];return vs(t.fields,((t,n)=>{const i=new qi([t]);if(Ks(n)){const t=Or(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Dr(e)}class Pr{constructor(t,e,n,i,s,r,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=s,this.data=r,this.documentState=o}static newInvalidDocument(t){return new Pr(t,0,ji.min(),ji.min(),ji.min(),Mr.empty(),0)}static newFoundDocument(t,e,n,i){return new Pr(t,1,e,ji.min(),n,i,0)}static newNoDocument(t,e){return new Pr(t,2,e,ji.min(),ji.min(),Mr.empty(),0)}static newUnknownDocument(t,e){return new Pr(t,3,e,ji.min(),ji.min(),Mr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ji.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Mr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ji.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Pr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lr{constructor(t,e=null,n=[],i=[],s=null,r=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=r,this.endAt=o,this.ft=null}}function Rr(t,e=null,n=[],i=[],s=null,r=null,o=null){return new Lr(t,e,n,i,s,r,o)}function Nr(t){const e=xi(t);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>ur(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),xs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>js(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>js(t))).join(",")),e.ft=t}return e.ft}function Fr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ir(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hr(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nr(t.startAt,e.startAt)&&nr(t.endAt,e.endAt)}function Br(t){return Hi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Vr(t,e){return t.filters.filter((t=>t instanceof sr&&t.field.isEqual(e)))}function jr(t,e,n){let i=Ls,s=!0;for(const n of Vr(t,e)){let t=Ls,e=!0;switch(n.op){case"<":case"<=":t=Xs(n.value);break;case"==":case"in":case">=":t=n.value;break;case">":t=n.value,e=!1;break;case"!=":case"not-in":t=Ls}Js({value:i,inclusive:s},{value:t,inclusive:e})<0&&(i=t,s=e)}if(null!==n)for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(e)){const t=n.position[r];Js({value:i,inclusive:s},{value:t,inclusive:n.inclusive})<0&&(i=t,s=n.inclusive);break}return{value:i,inclusive:s}}function Ur(t,e,n){let i=Ps,s=!0;for(const n of Vr(t,e)){let t=Ps,e=!0;switch(n.op){case">=":case">":t=Qs(n.value),e=!1;break;case"==":case"in":case"<=":t=n.value;break;case"<":t=n.value,e=!1;break;case"!=":case"not-in":t=Ps}Zs({value:i,inclusive:s},{value:t,inclusive:e})>0&&(i=t,s=e)}if(null!==n)for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(e)){const t=n.position[r];Zs({value:i,inclusive:s},{value:t,inclusive:n.inclusive})>0&&(i=t,s=n.inclusive);break}return{value:i,inclusive:s}}class zr{constructor(t,e=null,n=[],i=[],s=null,r="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=r,this.startAt=o,this.endAt=a,this.dt=null,this._t=null,this.startAt,this.endAt}}function $r(t,e,n,i,s,r,o,a){return new zr(t,e,n,i,s,r,o,a)}function qr(t){return new zr(t)}function Hr(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Wr(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Kr(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Gr(t){return null!==t.collectionGroup}function Yr(t){const e=xi(t);if(null===e.dt){e.dt=[];const t=Kr(e),n=Wr(e);if(null!==t&&null===n)t.isKeyField()||e.dt.push(new xr(t)),e.dt.push(new xr(qi.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.dt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new xr(qi.keyField(),t))}}}return e.dt}function Xr(t){const e=xi(t);if(!e._t)if("F"===e.limitType)e._t=Rr(e.path,e.collectionGroup,Yr(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Yr(e)){const e="desc"===n.dir?"asc":"desc";t.push(new xr(n.field,e))}const n=e.endAt?new tr(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new tr(e.startAt.position,e.startAt.inclusive):null;e._t=Rr(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e._t}function Qr(t,e){e.getFirstInequalityField(),Kr(t);const n=t.filters.concat([e]);return new zr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jr(t,e,n){return new zr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zr(t,e){return Fr(Xr(t),Xr(e))&&t.limitType===e.limitType}function to(t){return`${Nr(Xr(t))}|lt:${t.limitType}`}function eo(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>fr(t))).join(", ")}]`),xs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>js(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>js(t))).join(",")),`Target(${e})`}(Xr(t))}; limitType=${t.limitType})`}function no(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Hi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Yr(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=er(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,Yr(t),e))&&!(t.endAt&&!function(t,e,n){const i=er(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,Yr(t),e))}(t,e)}function io(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function so(t){return(e,n)=>{let i=!1;for(const s of Yr(t)){const t=ro(s,e,n);if(0!==t)return t;i=i||s.field.isKeyField()}return 0}}function ro(t,e,n){const i=t.field.isKeyField()?Hi.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),s=n.data.field(t);return null!==i&&null!==s?Bs(i,s):vi()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return vi()}}function oo(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Is(e)?"-0":e}}function ao(t){return{integerValue:""+t}}function co(t,e){return Es(e)?ao(e):oo(t,e)}class lo{constructor(){this._=void 0}}function uo(t,e,n){return t instanceof po?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof go?mo(t,e):t instanceof yo?bo(t,e):function(t,e){const n=fo(t,e),i=vo(n)+vo(t.gt);return $s(n)&&$s(t.gt)?ao(i):oo(t.yt,i)}(t,e)}function ho(t,e,n){return t instanceof go?mo(t,e):t instanceof yo?bo(t,e):n}function fo(t,e){return t instanceof wo?$s(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class po extends lo{}class go extends lo{constructor(t){super(),this.elements=t}}function mo(t,e){const n=_o(e);for(const e of t.elements)n.some((t=>Ns(t,e)))||n.push(e);return{arrayValue:{values:n}}}class yo extends lo{constructor(t){super(),this.elements=t}}function bo(t,e){let n=_o(e);for(const e of t.elements)n=n.filter((t=>!Ns(t,e)));return{arrayValue:{values:n}}}class wo extends lo{constructor(t,e){super(),this.yt=t,this.gt=e}}function vo(t){return Cs(t.integerValue||t.doubleValue)}function _o(t){return qs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class xo{constructor(t,e){this.field=t,this.transform=e}}class Io{constructor(t,e){this.version=t,this.transformResults=e}}class Eo{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Eo}static exists(t){return new Eo(void 0,t)}static updateTime(t){return new Eo(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function To(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ko{}function So(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Fo(t.key,Eo.none()):new Oo(t.key,t.data,Eo.none());{const n=t.data,i=Mr.empty();let s=new Sr(qi.comparator);for(let t of e.fields)if(!s.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),s=s.add(t)}return new Po(t.key,i,new Dr(s.toArray()),Eo.none())}}function Co(t,e,n){t instanceof Oo?function(t,e,n){const i=t.value.clone(),s=Ro(t.fieldTransforms,e,n.transformResults);i.setAll(s),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Po?function(t,e,n){if(!To(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Ro(t.fieldTransforms,e,n.transformResults),s=e.data;s.setAll(Lo(t)),s.setAll(i),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Ao(t,e,n,i){return t instanceof Oo?function(t,e,n,i){if(!To(t.precondition,e))return n;const s=t.value.clone(),r=No(t.fieldTransforms,i,e);return s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null}(t,e,n,i):t instanceof Po?function(t,e,n,i){if(!To(t.precondition,e))return n;const s=No(t.fieldTransforms,i,e),r=e.data;return r.setAll(Lo(t)),r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return To(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Do(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),s=fo(i.transform,t||null);null!=s&&(null===n&&(n=Mr.empty()),n.set(i.field,s))}return n||null}function Mo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Fi(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof go&&e instanceof go||t instanceof yo&&e instanceof yo?Fi(t.elements,e.elements,Ns):t instanceof wo&&e instanceof wo?Ns(t.gt,e.gt):t instanceof po&&e instanceof po}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Oo extends ko{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Po extends ko{constructor(t,e,n,i,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Lo(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Ro(t,e,n){const i=new Map;_i(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,ho(o,a,n[s]))}return i}function No(t,e,n){const i=new Map;for(const s of t){const t=s.transform,r=n.data.field(s.field);i.set(s.field,uo(t,r,e))}return i}class Fo extends ko{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bo extends ko{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vo{constructor(t){this.count=t}}var jo,Uo;function zo(t){switch(t){default:return vi();case Ii.CANCELLED:case Ii.UNKNOWN:case Ii.DEADLINE_EXCEEDED:case Ii.RESOURCE_EXHAUSTED:case Ii.INTERNAL:case Ii.UNAVAILABLE:case Ii.UNAUTHENTICATED:return!1;case Ii.INVALID_ARGUMENT:case Ii.NOT_FOUND:case Ii.ALREADY_EXISTS:case Ii.PERMISSION_DENIED:case Ii.FAILED_PRECONDITION:case Ii.ABORTED:case Ii.OUT_OF_RANGE:case Ii.UNIMPLEMENTED:case Ii.DATA_LOSS:return!0}}function $o(t){if(void 0===t)return yi("GRPC error has no .code"),Ii.UNKNOWN;switch(t){case jo.OK:return Ii.OK;case jo.CANCELLED:return Ii.CANCELLED;case jo.UNKNOWN:return Ii.UNKNOWN;case jo.DEADLINE_EXCEEDED:return Ii.DEADLINE_EXCEEDED;case jo.RESOURCE_EXHAUSTED:return Ii.RESOURCE_EXHAUSTED;case jo.INTERNAL:return Ii.INTERNAL;case jo.UNAVAILABLE:return Ii.UNAVAILABLE;case jo.UNAUTHENTICATED:return Ii.UNAUTHENTICATED;case jo.INVALID_ARGUMENT:return Ii.INVALID_ARGUMENT;case jo.NOT_FOUND:return Ii.NOT_FOUND;case jo.ALREADY_EXISTS:return Ii.ALREADY_EXISTS;case jo.PERMISSION_DENIED:return Ii.PERMISSION_DENIED;case jo.FAILED_PRECONDITION:return Ii.FAILED_PRECONDITION;case jo.ABORTED:return Ii.ABORTED;case jo.OUT_OF_RANGE:return Ii.OUT_OF_RANGE;case jo.UNIMPLEMENTED:return Ii.UNIMPLEMENTED;case jo.DATA_LOSS:return Ii.DATA_LOSS;default:return vi()}}(Uo=jo||(jo={}))[Uo.OK=0]="OK",Uo[Uo.CANCELLED=1]="CANCELLED",Uo[Uo.UNKNOWN=2]="UNKNOWN",Uo[Uo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Uo[Uo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Uo[Uo.NOT_FOUND=5]="NOT_FOUND",Uo[Uo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Uo[Uo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Uo[Uo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Uo[Uo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Uo[Uo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Uo[Uo.ABORTED=10]="ABORTED",Uo[Uo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Uo[Uo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Uo[Uo.INTERNAL=13]="INTERNAL",Uo[Uo.UNAVAILABLE=14]="UNAVAILABLE",Uo[Uo.DATA_LOSS=15]="DATA_LOSS";class qo{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){vs(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return _s(this.inner)}size(){return this.innerSize}}const Ho=new Er(Hi.comparator);function Wo(){return Ho}const Ko=new Er(Hi.comparator);function Go(...t){let e=Ko;for(const n of t)e=e.insert(n.key,n);return e}function Yo(t){let e=Ko;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Xo(){return Jo()}function Qo(){return Jo()}function Jo(){return new qo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Zo=new Er(Hi.comparator),ta=new Sr(Hi.comparator);function ea(...t){let e=ta;for(const n of t)e=e.add(n);return e}const na=new Sr(Ni);function ia(){return na}class sa{constructor(t,e,n,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,ra.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new sa(ji.min(),i,ia(),Wo(),ea())}}class ra{constructor(t,e,n,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new ra(n,e,ea(),ea(),ea())}}class oa{constructor(t,e,n,i){this.It=t,this.removedTargetIds=e,this.key=n,this.Tt=i}}class aa{constructor(t,e){this.targetId=t,this.Et=e}}class ca{constructor(t,e,n=Ts.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class la{constructor(){this.At=0,this.Rt=da(),this.bt=Ts.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(t){t.approximateByteSize()>0&&(this.vt=!0,this.bt=t)}Ct(){let t=ea(),e=ea(),n=ea();return this.Rt.forEach(((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:vi()}})),new ra(this.bt,this.Pt,t,e,n)}xt(){this.vt=!1,this.Rt=da()}Nt(t,e){this.vt=!0,this.Rt=this.Rt.insert(t,e)}kt(t){this.vt=!0,this.Rt=this.Rt.remove(t)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class ua{constructor(t){this.$t=t,this.Bt=new Map,this.Lt=Wo(),this.qt=ha(),this.Ut=new Sr(Ni)}Kt(t){for(const e of t.It)t.Tt&&t.Tt.isFoundDocument()?this.Gt(e,t.Tt):this.Qt(e,t.key,t.Tt);for(const e of t.removedTargetIds)this.Qt(e,t.key,t.Tt)}jt(t){this.forEachTarget(t,(e=>{const n=this.Wt(e);switch(t.state){case 0:this.zt(e)&&n.Dt(t.resumeToken);break;case 1:n.Mt(),n.Vt||n.xt(),n.Dt(t.resumeToken);break;case 2:n.Mt(),n.Vt||this.removeTarget(e);break;case 3:this.zt(e)&&(n.Ft(),n.Dt(t.resumeToken));break;case 4:this.zt(e)&&(this.Ht(e),n.Dt(t.resumeToken));break;default:vi()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Bt.forEach(((t,n)=>{this.zt(n)&&e(n)}))}Jt(t){const e=t.targetId,n=t.Et.count,i=this.Yt(e);if(i){const t=i.target;if(Br(t))if(0===n){const n=new Hi(t.path);this.Qt(e,n,Pr.newNoDocument(n,ji.min()))}else _i(1===n);else this.Xt(e)!==n&&(this.Ht(e),this.Ut=this.Ut.add(e))}}Zt(t){const e=new Map;this.Bt.forEach(((n,i)=>{const s=this.Yt(i);if(s){if(n.current&&Br(s.target)){const e=new Hi(s.target.path);null!==this.Lt.get(e)||this.te(i,e)||this.Qt(i,e,Pr.newNoDocument(e,t))}n.St&&(e.set(i,n.Ct()),n.xt())}}));let n=ea();this.qt.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Yt(t);return!e||2===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.Lt.forEach(((e,n)=>n.setReadTime(t)));const i=new sa(t,e,this.Ut,this.Lt,n);return this.Lt=Wo(),this.qt=ha(),this.Ut=new Sr(Ni),i}Gt(t,e){if(!this.zt(t))return;const n=this.te(t,e.key)?2:0;this.Wt(t).Nt(e.key,n),this.Lt=this.Lt.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ee(e.key).add(t))}Qt(t,e,n){if(!this.zt(t))return;const i=this.Wt(t);this.te(t,e)?i.Nt(e,1):i.kt(e),this.qt=this.qt.insert(e,this.ee(e).delete(t)),n&&(this.Lt=this.Lt.insert(e,n))}removeTarget(t){this.Bt.delete(t)}Xt(t){const e=this.Wt(t).Ct();return this.$t.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ot(t){this.Wt(t).Ot()}Wt(t){let e=this.Bt.get(t);return e||(e=new la,this.Bt.set(t,e)),e}ee(t){let e=this.qt.get(t);return e||(e=new Sr(Ni),this.qt=this.qt.insert(t,e)),e}zt(t){const e=null!==this.Yt(t);return e||mi("WatchChangeAggregator","Detected inactive target",t),e}Yt(t){const e=this.Bt.get(t);return e&&e.Vt?null:this.$t.ne(t)}Ht(t){this.Bt.set(t,new la),this.$t.getRemoteKeysForTarget(t).forEach((e=>{this.Qt(t,e,null)}))}te(t,e){return this.$t.getRemoteKeysForTarget(t).has(e)}}function ha(){return new Er(Hi.comparator)}function da(){return new Er(Hi.comparator)}const fa={asc:"ASCENDING",desc:"DESCENDING"},pa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ga={and:"AND",or:"OR"};class ma{constructor(t,e){this.databaseId=t,this.wt=e}}function ya(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ba(t,e){return t.wt?e.toBase64():e.toUint8Array()}function wa(t,e){return ya(t,e.toTimestamp())}function va(t){return _i(!!t),ji.fromTimestamp(function(t){const e=Ss(t);return new Vi(e.seconds,e.nanos)}(t))}function _a(t,e){return function(t){return new zi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function xa(t){const e=zi.fromString(t);return _i(qa(e)),e}function Ia(t,e){return _a(t.databaseId,e.path)}function Ea(t,e){const n=xa(e);if(n.get(1)!==t.databaseId.projectId)throw new Ei(Ii.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ei(Ii.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Hi(Ca(n))}function Ta(t,e){return _a(t.databaseId,e)}function ka(t){const e=xa(t);return 4===e.length?zi.emptyPath():Ca(e)}function Sa(t){return new zi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ca(t){return _i(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Aa(t,e,n){return{name:Ia(t,e),fields:n.value.mapValue.fields}}function Da(t,e,n){const i=Ea(t,e.name),s=va(e.updateTime),r=e.createTime?va(e.createTime):ji.min(),o=new Mr({mapValue:{fields:e.fields}}),a=Pr.newFoundDocument(i,s,r,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ma(t,e){let n;if(e instanceof Oo)n={update:Aa(t,e.key,e.value)};else if(e instanceof Fo)n={delete:Ia(t,e.key)};else if(e instanceof Po)n={update:Aa(t,e.key,e.data),updateMask:$a(e.fieldMask)};else{if(!(e instanceof Bo))return vi();n={verify:Ia(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof po)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof go)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wo)return{fieldPath:e.field.canonicalString(),increment:n.gt};throw vi()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:wa(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:vi()}(t,e.precondition)),n}function Oa(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?Eo.updateTime(va(t.updateTime)):void 0!==t.exists?Eo.exists(t.exists):Eo.none()}(e.currentDocument):Eo.none(),i=e.updateTransforms?e.updateTransforms.map((e=>function(t,e){let n=null;if("setToServerValue"in e)_i("REQUEST_TIME"===e.setToServerValue),n=new po;else if("appendMissingElements"in e){const t=e.appendMissingElements.values||[];n=new go(t)}else if("removeAllFromArray"in e){const t=e.removeAllFromArray.values||[];n=new yo(t)}else"increment"in e?n=new wo(t,e.increment):vi();const i=qi.fromServerFormat(e.fieldPath);return new xo(i,n)}(t,e))):[];if(e.update){e.update.name;const s=Ea(t,e.update.name),r=new Mr({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){const e=t.fieldPaths||[];return new Dr(e.map((t=>qi.fromServerFormat(t))))}(e.updateMask);return new Po(s,r,t,n,i)}return new Oo(s,r,n,i)}if(e.delete){const i=Ea(t,e.delete);return new Fo(i,n)}if(e.verify){const i=Ea(t,e.verify);return new Bo(i,n)}return vi()}function Pa(t,e){return{documents:[Ta(t,e.path)]}}function La(t,e){const n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=Ta(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ta(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(t){if(0!==t.length)return za(rr.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const r=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:ja(t.field),direction:Fa(t.dir)}}(t)))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(t,e){return t.wt||xs(e)?e:{value:e}}(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function Ra(t){let e=ka(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){_i(1===i);const t=n.from[0];t.allDescendants?s=t.collectionId:e=e.child(t.collectionId)}let r=[];n.where&&(r=function(t){const e=Na(t);return e instanceof rr&&cr(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new xr(Ua(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,xs(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new tr(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new tr(n,e)}(n.endAt)),$r(e,s,o,r,a,"F",c,l)}function Na(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Ua(t.unaryFilter.field);return sr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Ua(t.unaryFilter.field);return sr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ua(t.unaryFilter.field);return sr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ua(t.unaryFilter.field);return sr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return vi()}}(t):void 0!==t.fieldFilter?function(t){return sr.create(Ua(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vi()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return rr.create(t.compositeFilter.filters.map((t=>Na(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return vi()}}(t.compositeFilter.op))}(t):vi()}function Fa(t){return fa[t]}function Ba(t){return pa[t]}function Va(t){return ga[t]}function ja(t){return{fieldPath:t.canonicalString()}}function Ua(t){return qi.fromServerFormat(t.fieldPath)}function za(t){return t instanceof sr?function(t){if("=="===t.op){if(Ws(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NAN"}};if(Hs(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ws(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NAN"}};if(Hs(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(t.field),op:Ba(t.op),value:t.value}}}(t):t instanceof rr?function(t){const e=t.getFilters().map((t=>za(t)));return 1===e.length?e[0]:{compositeFilter:{op:Va(t.op),filters:e}}}(t):vi()}function $a(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qa(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ha(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ka(e)),e=Wa(t.get(n),e);return Ka(e)}function Wa(t,e){let n=e;const i=t.length;for(let e=0;e<i;e++){const i=t.charAt(e);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Ka(t){return t+""}function Ga(t){const e=t.length;if(_i(e>=2),2===e)return _i(""===t.charAt(0)&&""===t.charAt(1)),zi.emptyPath();const n=e-2,i=[];let s="";for(let r=0;r<e;){const e=t.indexOf("",r);switch((e<0||e>n)&&vi(),t.charAt(e+1)){case"":const n=t.substring(r,e);let o;0===s.length?o=n:(s+=n,o=s,s=""),i.push(o);break;case"":s+=t.substring(r,e),s+="\0";break;case"":s+=t.substring(r,e+1);break;default:vi()}r=e+2}return new zi(i)}const Ya=["userId","batchId"];function Xa(t,e){return[t,Ha(e)]}function Qa(t,e,n){return[t,Ha(e),n]}const Ja={},Za=["prefixPath","collectionGroup","readTime","documentId"],tc=["prefixPath","collectionGroup","documentId"],ec=["collectionGroup","readTime","prefixPath","documentId"],nc=["canonicalId","targetId"],ic=["targetId","path"],sc=["path","targetId"],rc=["collectionId","parent"],oc=["indexId","uid"],ac=["uid","sequenceNumber"],cc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lc=["indexId","uid","orderedDocumentKey"],uc=["userId","collectionPath","documentId"],hc=["userId","collectionPath","largestBatchId"],dc=["userId","collectionGroup","largestBatchId"],fc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pc=[...fc,"documentOverlays"],gc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mc=gc,yc=[...mc,"indexConfiguration","indexState","indexEntries"];class bc extends ns{constructor(t,e){super(),this.se=t,this.currentSequenceNumber=e}}function wc(t,e){const n=xi(t);return os.M(n.se,e)}class vc{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&Co(i,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Ao(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Ao(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Qo();return this.mutations.forEach((i=>{const s=t.get(i.key),r=s.overlayedDocument;let o=this.applyToLocalView(r,s.mutatedFields);o=e.has(i.key)?null:o;const a=So(r,o);null!==a&&n.set(i.key,a),r.isValidDocument()||r.convertToNoDocument(ji.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ea())}isEqual(t){return this.batchId===t.batchId&&Fi(this.mutations,t.mutations,((t,e)=>Mo(t,e)))&&Fi(this.baseMutations,t.baseMutations,((t,e)=>Mo(t,e)))}}class _c{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){_i(t.mutations.length===n.length);let i=Zo;const s=t.mutations;for(let t=0;t<s.length;t++)i=i.insert(s[t].key,n[t].version);return new _c(t,e,n,i)}}class xc{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ic{constructor(t,e,n,i,s=ji.min(),r=ji.min(),o=Ts.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o}withSequenceNumber(t){return new Ic(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Ic(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Ic(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Ec{constructor(t){this.ie=t}}function Tc(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:kc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(t,e){return{name:Ia(t,e.key),fields:e.data.value.mapValue.fields,updateTime:ya(t,e.version.toTimestamp()),createTime:ya(t,e.createTime.toTimestamp())}}(t.ie,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Sc(e.version)};else{if(!e.isUnknownDocument())return vi();i.unknownDocument={path:n.path.toArray(),version:Sc(e.version)}}return i}function kc(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Sc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cc(t){const e=new Vi(t.seconds,t.nanoseconds);return ji.fromTimestamp(e)}function Ac(t,e){const n=(e.baseMutations||[]).map((e=>Oa(t.ie,e)));for(let t=0;t<e.mutations.length-1;++t){const n=e.mutations[t];if(t+1<e.mutations.length&&void 0!==e.mutations[t+1].transform){const i=e.mutations[t+1];n.updateTransforms=i.transform.fieldTransforms,e.mutations.splice(t+1,1),++t}}const i=e.mutations.map((e=>Oa(t.ie,e))),s=Vi.fromMillis(e.localWriteTimeMs);return new vc(e.batchId,s,n,i)}function Dc(t){const e=Cc(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Cc(t.lastLimboFreeSnapshotVersion):ji.min();let i;var s;return void 0!==t.query.documents?(_i(1===(s=t.query).documents.length),i=Xr(qr(ka(s.documents[0])))):i=function(t){return Xr(Ra(t))}(t.query),new Ic(i,t.targetId,0,t.lastListenSequenceNumber,e,n,Ts.fromBase64String(t.resumeToken))}function Mc(t,e){const n=Sc(e.snapshotVersion),i=Sc(e.lastLimboFreeSnapshotVersion);let s;s=Br(e.target)?Pa(t.ie,e.target):La(t.ie,e.target);const r=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Nr(e.target),readTime:n,resumeToken:r,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function Oc(t){const e=Ra({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Jr(e,e.limit,"L"):e}function Pc(t,e){return new xc(e.largestBatchId,Oa(t.ie,e.overlayMutation))}function Lc(t,e){const n=e.path.lastSegment();return[t,Ha(e.path.popLast()),n]}function Rc(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Sc(i.readTime),documentKey:Ha(i.documentKey.path),largestBatchId:i.largestBatchId}}class Nc{getBundleMetadata(t,e){return Fc(t).get(e).next((t=>{if(t)return{id:(e=t).bundleId,createTime:Cc(e.createTime),version:e.version};var e}))}saveBundleMetadata(t,e){return Fc(t).put({bundleId:(n=e).id,createTime:Sc(va(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return Bc(t).get(e).next((t=>{if(t)return{name:(e=t).name,query:Oc(e.bundledQuery),readTime:Cc(e.readTime)};var e}))}saveNamedQuery(t,e){return Bc(t).put(function(t){return{name:t.name,readTime:Sc(va(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function Fc(t){return wc(t,"bundles")}function Bc(t){return wc(t,"namedQueries")}class Vc{constructor(t,e){this.yt=t,this.userId=e}static re(t,e){const n=e.uid||"";return new Vc(t,n)}getOverlay(t,e){return jc(t).get(Lc(this.userId,e)).next((t=>t?Pc(this.yt,t):null))}getOverlays(t,e){const n=Xo();return ss.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){const i=[];return n.forEach(((n,s)=>{const r=new xc(e,s);i.push(this.oe(t,r))})),ss.waitFor(i)}removeOverlaysForBatchId(t,e,n){const i=new Set;e.forEach((t=>i.add(Ha(t.getCollectionPath()))));const s=[];return i.forEach((e=>{const i=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,n+1],!1,!0);s.push(jc(t).Y("collectionPathOverlayIndex",i))})),ss.waitFor(s)}getOverlaysForCollection(t,e,n){const i=Xo(),s=Ha(e),r=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return jc(t).W("collectionPathOverlayIndex",r).next((t=>{for(const e of t){const t=Pc(this.yt,e);i.set(t.getKey(),t)}return i}))}getOverlaysForCollectionGroup(t,e,n,i){const s=Xo();let r;const o=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return jc(t).Z({index:"collectionGroupOverlayIndex",range:o},((t,e,n)=>{const o=Pc(this.yt,e);s.size()<i||o.largestBatchId===r?(s.set(o.getKey(),o),r=o.largestBatchId):n.done()})).next((()=>s))}oe(t,e){return jc(t).put(function(t,e,n){const[i,s,r]=Lc(e,n.mutation.key);return{userId:e,collectionPath:s,documentId:r,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ma(t.ie,n.mutation)}}(this.yt,this.userId,e))}}function jc(t){return wc(t,"documentOverlays")}class Uc{constructor(){}ue(t,e){this.ce(t,e),e.ae()}ce(t,e){if("nullValue"in t)this.he(e,5);else if("booleanValue"in t)this.he(e,10),e.le(t.booleanValue?1:0);else if("integerValue"in t)this.he(e,15),e.le(Cs(t.integerValue));else if("doubleValue"in t){const n=Cs(t.doubleValue);isNaN(n)?this.he(e,13):(this.he(e,15),Is(n)?e.le(0):e.le(n))}else if("timestampValue"in t){const n=t.timestampValue;this.he(e,20),"string"==typeof n?e.fe(n):(e.fe(`${n.seconds||""}`),e.le(n.nanos||0))}else if("stringValue"in t)this.de(t.stringValue,e),this._e(e);else if("bytesValue"in t)this.he(e,30),e.we(As(t.bytesValue)),this._e(e);else if("referenceValue"in t)this.me(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.he(e,45),e.le(n.latitude||0),e.le(n.longitude||0)}else"mapValue"in t?Ys(t)?this.he(e,Number.MAX_SAFE_INTEGER):(this.ge(t.mapValue,e),this._e(e)):"arrayValue"in t?(this.ye(t.arrayValue,e),this._e(e)):vi()}de(t,e){this.he(e,25),this.pe(t,e)}pe(t,e){e.fe(t)}ge(t,e){const n=t.fields||{};this.he(e,55);for(const t of Object.keys(n))this.de(t,e),this.ce(n[t],e)}ye(t,e){const n=t.values||[];this.he(e,50);for(const t of n)this.ce(t,e)}me(t,e){this.he(e,37),Hi.fromName(t).path.forEach((t=>{this.he(e,60),this.pe(t,e)}))}he(t,e){t.le(e)}_e(t){t.le(2)}}function zc(t){if(0===t)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function $c(t){const e=64-function(t){let e=0;for(let n=0;n<8;++n){const i=zc(255&t[n]);if(e+=i,8!==i)break}return e}(t);return Math.ceil(e/8)}Uc.Ie=new Uc;class qc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Ee(n.value),n=e.next();this.Ae()}Re(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.be(n.value),n=e.next();this.Pe()}ve(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Ee(t);else if(t<2048)this.Ee(960|t>>>6),this.Ee(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Ee(480|t>>>12),this.Ee(128|63&t>>>6),this.Ee(128|63&t);else{const t=e.codePointAt(0);this.Ee(240|t>>>18),this.Ee(128|63&t>>>12),this.Ee(128|63&t>>>6),this.Ee(128|63&t)}}this.Ae()}Ve(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.be(t);else if(t<2048)this.be(960|t>>>6),this.be(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.be(480|t>>>12),this.be(128|63&t>>>6),this.be(128|63&t);else{const t=e.codePointAt(0);this.be(240|t>>>18),this.be(128|63&t>>>12),this.be(128|63&t>>>6),this.be(128|63&t)}}this.Pe()}Se(t){const e=this.De(t),n=$c(e);this.Ce(1+n),this.buffer[this.position++]=255&n;for(let t=e.length-n;t<e.length;++t)this.buffer[this.position++]=255&e[t]}xe(t){const e=this.De(t),n=$c(e);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(let t=e.length-n;t<e.length;++t)this.buffer[this.position++]=~(255&e[t])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(t){this.Ce(t.length),this.buffer.set(t,this.position),this.position+=t.length}Fe(){return this.buffer.slice(0,this.position)}De(t){const e=function(t){const e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}(t),n=0!=(128&e[0]);e[0]^=n?255:128;for(let t=1;t<e.length;++t)e[t]^=n?255:0;return e}Ee(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(e)}be(t){const e=255&t;0===e?(this.Me(0),this.Me(255)):255===e?(this.Me(255),this.Me(0)):this.Me(t)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(t){this.Ce(1),this.buffer[this.position++]=t}Me(t){this.Ce(1),this.buffer[this.position++]=~t}Ce(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class Hc{constructor(t){this.$e=t}we(t){this.$e.Te(t)}fe(t){this.$e.ve(t)}le(t){this.$e.Se(t)}ae(){this.$e.Ne()}}class Wc{constructor(t){this.$e=t}we(t){this.$e.Re(t)}fe(t){this.$e.Ve(t)}le(t){this.$e.xe(t)}ae(){this.$e.Oe()}}class Kc{constructor(){this.$e=new qc,this.Be=new Hc(this.$e),this.Le=new Wc(this.$e)}seed(t){this.$e.seed(t)}qe(t){return 0===t?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Gc{constructor(t,e,n,i){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=i}Ue(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new Gc(this.indexId,this.documentKey,this.arrayValue,n)}}function Yc(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=Xc(t.arrayValue,e.arrayValue),0!==n?n:(n=Xc(t.directionalValue,e.directionalValue),0!==n?n:Hi.comparator(t.documentKey,e.documentKey)))}function Xc(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(0!==i)return i}return t.length-e.length}class Qc{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];for(const e of t.filters){const t=e;t.isInequality()?this.Qe=t:this.Ge.push(t)}}je(t){_i(t.collectionGroup===this.collectionId);const e=Ki(t);if(void 0!==e&&!this.We(e))return!1;const n=Gi(t);let i=0,s=0;for(;i<n.length&&this.We(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Qe){const t=n[i];if(!this.ze(this.Qe,t)||!this.He(this.Ke[s++],t))return!1;++i}for(;i<n.length;++i){const t=n[i];if(s>=this.Ke.length||!this.He(this.Ke[s++],t))return!1}return!0}We(t){for(const e of this.Ge)if(this.ze(e,t))return!0;return!1}ze(t,e){if(void 0===t||!t.field.isEqual(e.fieldPath))return!1;const n="array-contains"===t.op||"array-contains-any"===t.op;return 2===e.kind===n}He(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function Jc(t){var e,n;if(_i(t instanceof sr||t instanceof rr),t instanceof sr){if(t instanceof wr){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map((e=>sr.create(t.field,"==",e))))||[];return rr.create(i,"or")}return t}const i=t.filters.map((t=>Jc(t)));return rr.create(i,t.op)}function Zc(t){if(0===t.getFilters().length)return[];const e=il(Jc(t));return _i(nl(e)),tl(e)||el(e)?[e]:e.getFilters()}function tl(t){return t instanceof sr}function el(t){return t instanceof rr&&cr(t)}function nl(t){return tl(t)||el(t)||function(t){if(t instanceof rr&&ar(t)){for(const e of t.getFilters())if(!tl(e)&&!el(e))return!1;return!0}return!1}(t)}function il(t){if(_i(t instanceof sr||t instanceof rr),t instanceof sr)return t;if(1===t.filters.length)return il(t.filters[0]);const e=t.filters.map((t=>il(t)));let n=rr.create(e,t.op);return n=ol(n),nl(n)?n:(_i(n instanceof rr),_i(or(n)),_i(n.filters.length>1),n.filters.reduce(((t,e)=>sl(t,e))))}function sl(t,e){let n;return _i(t instanceof sr||t instanceof rr),_i(e instanceof sr||e instanceof rr),n=t instanceof sr?e instanceof sr?function(t,e){return rr.create([t,e],"and")}(t,e):rl(t,e):e instanceof sr?rl(e,t):function(t,e){if(_i(t.filters.length>0&&e.filters.length>0),or(t)&&or(e))return dr(t,e.getFilters());const n=ar(t)?t:e,i=ar(t)?e:t,s=n.filters.map((t=>sl(t,i)));return rr.create(s,"or")}(t,e),ol(n)}function rl(t,e){if(or(e))return dr(e,t.getFilters());{const n=e.filters.map((e=>sl(t,e)));return rr.create(n,"or")}}function ol(t){if(_i(t instanceof sr||t instanceof rr),t instanceof sr)return t;const e=t.getFilters();if(1===e.length)return ol(e[0]);if(lr(t))return t;const n=e.map((t=>ol(t))),i=[];return n.forEach((e=>{e instanceof sr?i.push(e):e instanceof rr&&(e.op===t.op?i.push(...e.filters):i.push(e))})),1===i.length?i[0]:rr.create(i,t.op)}class al{constructor(){this.Je=new cl}addToCollectionParentIndex(t,e){return this.Je.add(e),ss.resolve()}getCollectionParents(t,e){return ss.resolve(this.Je.getEntries(e))}addFieldIndex(t,e){return ss.resolve()}deleteFieldIndex(t,e){return ss.resolve()}getDocumentsMatchingTarget(t,e){return ss.resolve(null)}getIndexType(t,e){return ss.resolve(0)}getFieldIndexes(t,e){return ss.resolve([])}getNextCollectionGroupToUpdate(t){return ss.resolve(null)}getMinOffset(t,e){return ss.resolve(Zi.min())}getMinOffsetFromCollectionGroup(t,e){return ss.resolve(Zi.min())}updateCollectionGroup(t,e,n){return ss.resolve()}updateIndexEntries(t,e){return ss.resolve()}}class cl{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Sr(zi.comparator),s=!i.has(n);return this.index[e]=i.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Sr(zi.comparator)).toArray()}}const ll=new Uint8Array(0);class ul{constructor(t,e){this.user=t,this.databaseId=e,this.Ye=new cl,this.Xe=new qo((t=>Nr(t)),((t,e)=>Fr(t,e))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ye.has(e)){const n=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((()=>{this.Ye.add(e)}));const s={collectionId:n,parent:Ha(i)};return hl(t).put(s)}return ss.resolve()}getCollectionParents(t,e){const n=[],i=IDBKeyRange.bound([e,""],[Bi(e),""],!1,!0);return hl(t).W(i).next((t=>{for(const i of t){if(i.collectionId!==e)break;n.push(Ga(i.parent))}return n}))}addFieldIndex(t,e){const n=fl(t),i=function(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map((t=>[t.fieldPath.canonicalString(),t.kind]))}}(e);delete i.indexId;const s=n.add(i);if(e.indexState){const n=pl(t);return s.next((t=>{n.put(Rc(t,this.user,e.indexState.sequenceNumber,e.indexState.offset))}))}return s.next()}deleteFieldIndex(t,e){const n=fl(t),i=pl(t),s=dl(t);return n.delete(e.indexId).next((()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}getDocumentsMatchingTarget(t,e){const n=dl(t);let i=!0;const s=new Map;return ss.forEach(this.Ze(e),(e=>this.tn(t,e).next((t=>{i&&(i=!!t),s.set(e,t)})))).next((()=>{if(i){let t=ea();const i=[];return ss.forEach(s,((s,r)=>{var o;mi("IndexedDbIndexManager",`Using index ${o=s,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map((t=>`${t.fieldPath}:${t.kind}`)).join(",")}`} to execute ${Nr(e)}`);const a=function(t,e){const n=Ki(e);if(void 0===n)return null;for(const e of Vr(t,n.fieldPath))switch(e.op){case"array-contains-any":return e.value.arrayValue.values||[];case"array-contains":return[e.value]}return null}(r,s),c=function(t,e){const n=new Map;for(const i of Gi(e))for(const e of Vr(t,i.fieldPath))switch(e.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),e.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),e.value),Array.from(n.values())}return null}(r,s),l=function(t,e){const n=[];let i=!0;for(const s of Gi(e)){const e=0===s.kind?jr(t,s.fieldPath,t.startAt):Ur(t,s.fieldPath,t.startAt);n.push(e.value),i&&(i=e.inclusive)}return new tr(n,i)}(r,s),u=function(t,e){const n=[];let i=!0;for(const s of Gi(e)){const e=0===s.kind?Ur(t,s.fieldPath,t.endAt):jr(t,s.fieldPath,t.endAt);n.push(e.value),i&&(i=e.inclusive)}return new tr(n,i)}(r,s),h=this.en(s,r,l),d=this.en(s,r,u),f=this.nn(s,r,c),p=this.sn(s.indexId,a,h,l.inclusive,d,u.inclusive,f);return ss.forEach(p,(s=>n.J(s,e.limit).next((e=>{e.forEach((e=>{const n=Hi.fromSegments(e.documentKey);t.has(n)||(t=t.add(n),i.push(n))}))}))))})).next((()=>i))}return ss.resolve(null)}))}Ze(t){let e=this.Xe.get(t);return e||(e=0===t.filters.length?[t]:Zc(rr.create(t.filters,"and")).map((e=>Rr(t.path,t.collectionGroup,t.orderBy,e.getFilters(),t.limit,t.startAt,t.endAt))),this.Xe.set(t,e),e)}sn(t,e,n,i,s,r,o){const a=(null!=e?e.length:1)*Math.max(n.length,s.length),c=a/(null!=e?e.length:1),l=[];for(let u=0;u<a;++u){const a=e?this.rn(e[u/c]):ll,h=this.on(t,a,n[u%c],i),d=this.un(t,a,s[u%c],r),f=o.map((e=>this.on(t,a,e,!0)));l.push(...this.createRange(h,d,f))}return l}on(t,e,n,i){const s=new Gc(t,Hi.empty(),e,n);return i?s:s.Ue()}un(t,e,n,i){const s=new Gc(t,Hi.empty(),e,n);return i?s.Ue():s}tn(t,e){const n=new Qc(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next((t=>{let e=null;for(const i of t)n.je(i)&&(!e||i.fields.length>e.fields.length)&&(e=i);return e}))}getIndexType(t,e){let n=2;const i=this.Ze(e);return ss.forEach(i,(e=>this.tn(t,e).next((t=>{t?0!==n&&t.fields.length<function(t){let e=new Sr(qi.comparator),n=!1;for(const i of t.filters)for(const t of i.getFlattenedFilters())t.field.isKeyField()||("array-contains"===t.op||"array-contains-any"===t.op?n=!0:e=e.add(t.field));for(const n of t.orderBy)n.field.isKeyField()||(e=e.add(n.field));return e.size+(n?1:0)}(e)&&(n=1):n=0})))).next((()=>function(t){return null!==t.limit}(e)&&i.length>1&&2===n?1:n))}cn(t,e){const n=new Kc;for(const i of Gi(t)){const t=e.data.field(i.fieldPath);if(null==t)return null;const s=n.qe(i.kind);Uc.Ie.ue(t,s)}return n.Fe()}rn(t){const e=new Kc;return Uc.Ie.ue(t,e.qe(0)),e.Fe()}an(t,e){const n=new Kc;return Uc.Ie.ue(zs(this.databaseId,e),n.qe(function(t){const e=Gi(t);return 0===e.length?0:e[e.length-1].kind}(t))),n.Fe()}nn(t,e,n){if(null===n)return[];let i=[];i.push(new Kc);let s=0;for(const r of Gi(t)){const t=n[s++];for(const n of i)if(this.hn(e,r.fieldPath)&&qs(t))i=this.ln(i,r,t);else{const e=n.qe(r.kind);Uc.Ie.ue(t,e)}}return this.fn(i)}en(t,e,n){return this.nn(t,e,n.position)}fn(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].Fe();return e}ln(t,e,n){const i=[...t],s=[];for(const t of n.arrayValue.values||[])for(const n of i){const i=new Kc;i.seed(n.Fe()),Uc.Ie.ue(t,i.qe(e.kind)),s.push(i)}return s}hn(t,e){return!!t.filters.find((t=>t instanceof sr&&t.field.isEqual(e)&&("in"===t.op||"not-in"===t.op)))}getFieldIndexes(t,e){const n=fl(t),i=pl(t);return(e?n.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.W()).next((t=>{const e=[];return ss.forEach(t,(t=>i.get([t.indexId,this.uid]).next((n=>{e.push(function(t,e){const n=e?new Xi(e.sequenceNumber,new Zi(Cc(e.readTime),new Hi(Ga(e.documentKey)),e.largestBatchId)):Xi.empty(),i=t.fields.map((([t,e])=>new Yi(qi.fromServerFormat(t),e)));return new Wi(t.indexId,t.collectionGroup,i,n)}(t,n))})))).next((()=>e))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((t=>0===t.length?null:(t.sort(((t,e)=>{const n=t.indexState.sequenceNumber-e.indexState.sequenceNumber;return 0!==n?n:Ni(t.collectionGroup,e.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(t,e,n){const i=fl(t),s=pl(t);return this.dn(t).next((t=>i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next((e=>ss.forEach(e,(e=>s.put(Rc(e.indexId,this.user,t,n))))))))}updateIndexEntries(t,e){const n=new Map;return ss.forEach(e,((e,i)=>{const s=n.get(e.collectionGroup);return(s?ss.resolve(s):this.getFieldIndexes(t,e.collectionGroup)).next((s=>(n.set(e.collectionGroup,s),ss.forEach(s,(n=>this._n(t,e,n).next((e=>{const s=this.wn(i,n);return e.isEqual(s)?ss.resolve():this.mn(t,i,n,e,s)})))))))}))}gn(t,e,n,i){return dl(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(n,e.key),documentKey:e.key.path.toArray()})}yn(t,e,n,i){return dl(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(n,e.key),e.key.path.toArray()])}_n(t,e,n){const i=dl(t);let s=new Sr(Yc);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,e)])},((t,i)=>{s=s.add(new Gc(n.indexId,e,i.arrayValue,i.directionalValue))})).next((()=>s))}wn(t,e){let n=new Sr(Yc);const i=this.cn(e,t);if(null==i)return n;const s=Ki(e);if(null!=s){const r=t.data.field(s.fieldPath);if(qs(r))for(const s of r.arrayValue.values||[])n=n.add(new Gc(e.indexId,t.key,this.rn(s),i))}else n=n.add(new Gc(e.indexId,t.key,ll,i));return n}mn(t,e,n,i,s){mi("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const r=[];return function(t,e,n,i,s){const r=t.getIterator(),o=e.getIterator();let a=Ar(r),c=Ar(o);for(;a||c;){let t=!1,e=!1;if(a&&c){const i=n(a,c);i<0?e=!0:i>0&&(t=!0)}else null!=a?e=!0:t=!0;t?(i(c),c=Ar(o)):e?(s(a),a=Ar(r)):(a=Ar(r),c=Ar(o))}}(i,s,Yc,(i=>{r.push(this.gn(t,e,n,i))}),(i=>{r.push(this.yn(t,e,n,i))})),ss.waitFor(r)}dn(t){let e=1;return pl(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((t,n,i)=>{i.done(),e=n.sequenceNumber+1})).next((()=>e))}createRange(t,e,n){n=n.sort(((t,e)=>Yc(t,e))).filter(((t,e,n)=>!e||0!==Yc(t,n[e-1])));const i=[];i.push(t);for(const s of n){const n=Yc(s,t),r=Yc(s,e);if(0===n)i[0]=t.Ue();else if(n>0&&r<0)i.push(s),i.push(s.Ue());else if(r>0)break}i.push(e);const s=[];for(let t=0;t<i.length;t+=2){if(this.pn(i[t],i[t+1]))return[];const e=[i[t].indexId,this.uid,i[t].arrayValue,i[t].directionalValue,ll,[]],n=[i[t+1].indexId,this.uid,i[t+1].arrayValue,i[t+1].directionalValue,ll,[]];s.push(IDBKeyRange.bound(e,n))}return s}pn(t,e){return Yc(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(gl)}getMinOffset(t,e){return ss.mapArray(this.Ze(e),(e=>this.tn(t,e).next((t=>t||vi())))).next(gl)}}function hl(t){return wc(t,"collectionParents")}function dl(t){return wc(t,"indexEntries")}function fl(t){return wc(t,"indexConfiguration")}function pl(t){return wc(t,"indexState")}function gl(t){_i(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const s=t[i].indexState.offset;ts(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Zi(e.readTime,e.documentKey,n)}const ml={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yl{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new yl(t,yl.DEFAULT_COLLECTION_PERCENTILE,yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bl(t,e,n){const i=t.store("mutations"),s=t.store("documentMutations"),r=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=i.Z({range:o},((t,e,n)=>(a++,n.delete())));r.push(c.next((()=>{_i(1===a)})));const l=[];for(const t of n.mutations){const i=Qa(e,t.key.path,n.batchId);r.push(s.delete(i)),l.push(t.key)}return ss.waitFor(r).next((()=>l))}function wl(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw vi();e=t.noDocument}return JSON.stringify(e).length}yl.DEFAULT_COLLECTION_PERCENTILE=10,yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yl.DEFAULT=new yl(41943040,yl.DEFAULT_COLLECTION_PERCENTILE,yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yl.DISABLED=new yl(-1,0,0);class vl{constructor(t,e,n,i){this.userId=t,this.yt=e,this.indexManager=n,this.referenceDelegate=i,this.In={}}static re(t,e,n,i){_i(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new vl(s,e,n,i)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xl(t).Z({index:"userMutationsIndex",range:n},((t,n,i)=>{e=!1,i.done()})).next((()=>e))}addMutationBatch(t,e,n,i){const s=Il(t),r=xl(t);return r.add({}).next((o=>{_i("number"==typeof o);const a=new vc(o,e,n,i),c=function(t,e,n){const i=n.baseMutations.map((e=>Ma(t.ie,e))),s=n.mutations.map((e=>Ma(t.ie,e)));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:s}}(this.yt,this.userId,a),l=[];let u=new Sr(((t,e)=>Ni(t.canonicalString(),e.canonicalString())));for(const t of i){const e=Qa(this.userId,t.key.path,o);u=u.add(t.key.path.popLast()),l.push(r.put(c)),l.push(s.put(e,Ja))}return u.forEach((e=>{l.push(this.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((()=>{this.In[o]=a.keys()})),ss.waitFor(l).next((()=>a))}))}lookupMutationBatch(t,e){return xl(t).get(e).next((t=>t?(_i(t.userId===this.userId),Ac(this.yt,t)):null))}Tn(t,e){return this.In[e]?ss.resolve(this.In[e]):this.lookupMutationBatch(t,e).next((t=>{if(t){const n=t.keys();return this.In[e]=n,n}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return xl(t).Z({index:"userMutationsIndex",range:i},((t,e,i)=>{e.userId===this.userId&&(_i(e.batchId>=n),s=Ac(this.yt,e)),i.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return xl(t).Z({index:"userMutationsIndex",range:e,reverse:!0},((t,e,i)=>{n=e.batchId,i.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xl(t).W("userMutationsIndex",e).next((t=>t.map((t=>Ac(this.yt,t)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=Xa(this.userId,e.path),i=IDBKeyRange.lowerBound(n),s=[];return Il(t).Z({range:i},((n,i,r)=>{const[o,a,c]=n,l=Ga(a);if(o===this.userId&&e.path.isEqual(l))return xl(t).get(c).next((t=>{if(!t)throw vi();_i(t.userId===this.userId),s.push(Ac(this.yt,t))}));r.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Sr(Ni);const i=[];return e.forEach((e=>{const s=Xa(this.userId,e.path),r=IDBKeyRange.lowerBound(s),o=Il(t).Z({range:r},((t,i,s)=>{const[r,o,a]=t,c=Ga(o);r===this.userId&&e.path.isEqual(c)?n=n.add(a):s.done()}));i.push(o)})),ss.waitFor(i).next((()=>this.En(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1,s=Xa(this.userId,n),r=IDBKeyRange.lowerBound(s);let o=new Sr(Ni);return Il(t).Z({range:r},((t,e,s)=>{const[r,a,c]=t,l=Ga(a);r===this.userId&&n.isPrefixOf(l)?l.length===i&&(o=o.add(c)):s.done()})).next((()=>this.En(t,o)))}En(t,e){const n=[],i=[];return e.forEach((e=>{i.push(xl(t).get(e).next((t=>{if(null===t)throw vi();_i(t.userId===this.userId),n.push(Ac(this.yt,t))})))})),ss.waitFor(i).next((()=>n))}removeMutationBatch(t,e){return bl(t.se,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this.An(e.batchId)})),ss.forEach(n,(e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return ss.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return Il(t).Z({range:n},((t,e,n)=>{if(t[0]===this.userId){const e=Ga(t[1]);i.push(e)}else n.done()})).next((()=>{_i(0===i.length)}))}))}containsKey(t,e){return _l(t,this.userId,e)}Rn(t){return El(t).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function _l(t,e,n){const i=Xa(e,n.path),s=i[1],r=IDBKeyRange.lowerBound(i);let o=!1;return Il(t).Z({range:r,X:!0},((t,n,i)=>{const[r,a,c]=t;r===e&&a===s&&(o=!0),i.done()})).next((()=>o))}function xl(t){return wc(t,"mutations")}function Il(t){return wc(t,"documentMutations")}function El(t){return wc(t,"mutationQueues")}class Tl{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new Tl(0)}static vn(){return new Tl(-1)}}class kl{constructor(t,e){this.referenceDelegate=t,this.yt=e}allocateTargetId(t){return this.Vn(t).next((e=>{const n=new Tl(e.highestTargetId);return e.highestTargetId=n.next(),this.Sn(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.Vn(t).next((t=>ji.fromTimestamp(new Vi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.Vn(t).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.Vn(t).next((i=>(i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.Sn(t,i))))}addTargetData(t,e){return this.Dn(t,e).next((()=>this.Vn(t).next((n=>(n.targetCount+=1,this.Cn(e,n),this.Sn(t,n))))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Sl(t).delete(e.targetId))).next((()=>this.Vn(t))).next((e=>(_i(e.targetCount>0),e.targetCount-=1,this.Sn(t,e))))}removeTargets(t,e,n){let i=0;const s=[];return Sl(t).Z(((r,o)=>{const a=Dc(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,s.push(this.removeTargetData(t,a)))})).next((()=>ss.waitFor(s))).next((()=>i))}forEachTarget(t,e){return Sl(t).Z(((t,n)=>{const i=Dc(n);e(i)}))}Vn(t){return Cl(t).get("targetGlobalKey").next((t=>(_i(null!==t),t)))}Sn(t,e){return Cl(t).put("targetGlobalKey",e)}Dn(t,e){return Sl(t).put(Mc(this.yt,e))}Cn(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.Vn(t).next((t=>t.targetCount))}getTargetData(t,e){const n=Nr(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Sl(t).Z({range:i,index:"queryTargetsIndex"},((t,n,i)=>{const r=Dc(n);Fr(e,r.target)&&(s=r,i.done())})).next((()=>s))}addMatchingKeys(t,e,n){const i=[],s=Al(t);return e.forEach((e=>{const r=Ha(e.path);i.push(s.put({targetId:n,path:r})),i.push(this.referenceDelegate.addReference(t,n,e))})),ss.waitFor(i)}removeMatchingKeys(t,e,n){const i=Al(t);return ss.forEach(e,(e=>{const s=Ha(e.path);return ss.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(t,n,e)])}))}removeMatchingKeysForTargetId(t,e){const n=Al(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),i=Al(t);let s=ea();return i.Z({range:n,X:!0},((t,e,n)=>{const i=Ga(t[1]),r=new Hi(i);s=s.add(r)})).next((()=>s))}containsKey(t,e){const n=Ha(e.path),i=IDBKeyRange.bound([n],[Bi(n)],!1,!0);let s=0;return Al(t).Z({index:"documentTargetsIndex",X:!0,range:i},(([t,e],n,i)=>{0!==t&&(s++,i.done())})).next((()=>s>0))}ne(t,e){return Sl(t).get(e).next((t=>t?Dc(t):null))}}function Sl(t){return wc(t,"targets")}function Cl(t){return wc(t,"targetGlobal")}function Al(t){return wc(t,"targetDocuments")}function Dl([t,e],[n,i]){const s=Ni(t,n);return 0===s?Ni(e,i):s}class Ml{constructor(t){this.xn=t,this.buffer=new Sr(Dl),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();Dl(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Ol{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){mi("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Mn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ls(t)?mi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await is(t)}await this.Fn(3e5)}))}}class Pl{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return ss.resolve(ms.at);const n=new Ml(e);return this.$n.forEachTarget(t,(t=>n.On(t.sequenceNumber))).next((()=>this.$n.Ln(t,(t=>n.On(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.$n.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(mi("LruGarbageCollector","Garbage collection skipped; disabled"),ss.resolve(ml)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(mi("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ml):this.qn(t,e)))}getCacheSize(t){return this.$n.getCacheSize(t)}qn(t,e){let n,i,s,r,a,c,l;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(mi("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,r=Date.now(),this.nthSequenceNumber(t,i)))).next((i=>(n=i,a=Date.now(),this.removeTargets(t,n,e)))).next((e=>(s=e,c=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(l=Date.now(),gi()<=o.in.DEBUG&&mi("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${r-u}ms\n\tDetermined least recently used ${i} in `+(a-r)+"ms\n"+`\tRemoved ${s} targets in `+(c-a)+"ms\n"+`\tRemoved ${t} documents in `+(l-c)+"ms\n"+`Total Duration: ${l-u}ms`),ss.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:t}))))}}class Ll{constructor(t,e){this.db=t,this.garbageCollector=function(t,e){return new Pl(t,e)}(this,e)}Bn(t){const e=this.Un(t);return this.db.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}Un(t){let e=0;return this.Ln(t,(t=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,((t,n)=>e(n)))}addReference(t,e,n){return Rl(t,n)}removeReference(t,e,n){return Rl(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Rl(t,e)}Gn(t,e){return function(t,e){let n=!1;return El(t).tt((i=>_l(t,i,e).next((t=>(t&&(n=!0),ss.resolve(!t)))))).next((()=>n))}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(t,((r,o)=>{if(o<=e){const e=this.Gn(t,r).next((e=>{if(!e)return s++,n.getEntry(t,r).next((()=>(n.removeEntry(r,ji.min()),Al(t).delete([0,Ha(r.path)]))))}));i.push(e)}})).next((()=>ss.waitFor(i))).next((()=>n.apply(t))).next((()=>s))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Rl(t,e)}Kn(t,e){const n=Al(t);let i,s=ms.at;return n.Z({index:"documentTargetsIndex"},(([t,n],{path:r,sequenceNumber:o})=>{0===t?(s!==ms.at&&e(new Hi(Ga(i)),s),s=o,i=r):s=ms.at})).next((()=>{s!==ms.at&&e(new Hi(Ga(i)),s)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Rl(t,e){return Al(t).put(function(t,e){return{targetId:0,path:Ha(t.path),sequenceNumber:e}}(e,t.currentSequenceNumber))}class Nl{constructor(){this.changes=new qo((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Pr.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?ss.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Fl{constructor(t){this.yt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return Ul(t).put(n)}removeEntry(t,e,n){return Ul(t).delete(function(t,e){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],kc(e),n[n.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.Qn(t,n))))}getEntry(t,e){let n=Pr.newInvalidDocument(e);return Ul(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zl(e))},((t,i)=>{n=this.jn(e,i)})).next((()=>n))}Wn(t,e){let n={size:0,document:Pr.newInvalidDocument(e)};return Ul(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zl(e))},((t,i)=>{n={document:this.jn(e,i),size:wl(i)}})).next((()=>n))}getEntries(t,e){let n=Wo();return this.zn(t,e,((t,e)=>{const i=this.jn(t,e);n=n.insert(t,i)})).next((()=>n))}Hn(t,e){let n=Wo(),i=new Er(Hi.comparator);return this.zn(t,e,((t,e)=>{const s=this.jn(t,e);n=n.insert(t,s),i=i.insert(t,wl(e))})).next((()=>({documents:n,Jn:i})))}zn(t,e,n){if(e.isEmpty())return ss.resolve();let i=new Sr(ql);e.forEach((t=>i=i.add(t)));const s=IDBKeyRange.bound(zl(i.first()),zl(i.last())),r=i.getIterator();let o=r.getNext();return Ul(t).Z({index:"documentKeyIndex",range:s},((t,e,i)=>{const s=Hi.fromSegments([...e.prefixPath,e.collectionGroup,e.documentId]);for(;o&&ql(o,s)<0;)n(o,null),o=r.getNext();o&&o.isEqual(s)&&(n(o,e),o=r.hasNext()?r.getNext():null),o?i.j(zl(o)):i.done()})).next((()=>{for(;o;)n(o,null),o=r.hasNext()?r.getNext():null}))}getDocumentsMatchingQuery(t,e,n,i){const s=e.path,r=[s.popLast().toArray(),s.lastSegment(),kc(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ul(t).W(IDBKeyRange.bound(r,o,!0)).next((t=>{let n=Wo();for(const s of t){const t=this.jn(Hi.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);t.isFoundDocument()&&(no(e,t)||i.has(t.key))&&(n=n.insert(t.key,t))}return n}))}getAllFromCollectionGroup(t,e,n,i){let s=Wo();const r=$l(e,n),o=$l(e,Zi.max());return Ul(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(r,o,!0)},((t,e,n)=>{const r=this.jn(Hi.fromSegments(e.prefixPath.concat(e.collectionGroup,e.documentId)),e);s=s.insert(r.key,r),s.size===i&&n.done()})).next((()=>s))}newChangeBuffer(t){return new Vl(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((t=>t.byteSize))}getMetadata(t){return jl(t).get("remoteDocumentGlobalKey").next((t=>(_i(!!t),t)))}Qn(t,e){return jl(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const t=function(t,e){let n;if(e.document)n=Da(t.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=Hi.fromSegments(e.noDocument.path),i=Cc(e.noDocument.readTime);n=Pr.newNoDocument(t,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return vi();{const t=Hi.fromSegments(e.unknownDocument.path),i=Cc(e.unknownDocument.version);n=Pr.newUnknownDocument(t,i)}}return e.readTime&&n.setReadTime(function(t){const e=new Vi(t[0],t[1]);return ji.fromTimestamp(e)}(e.readTime)),n}(this.yt,e);if(!t.isNoDocument()||!t.version.isEqual(ji.min()))return t}return Pr.newInvalidDocument(t)}}function Bl(t){return new Fl(t)}class Vl extends Nl{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new qo((t=>t.toString()),((t,e)=>t.isEqual(e)))}applyChanges(t){const e=[];let n=0,i=new Sr(((t,e)=>Ni(t.canonicalString(),e.canonicalString())));return this.changes.forEach(((s,r)=>{const o=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,o.readTime)),r.isValidDocument()){const a=Tc(this.Yn.yt,r);i=i.add(s.path.popLast());const c=wl(a);n+=c-o.size,e.push(this.Yn.addEntry(t,s,a))}else if(n-=o.size,this.trackRemovals){const n=Tc(this.Yn.yt,r.convertToNoDocument(ji.min()));e.push(this.Yn.addEntry(t,s,n))}})),i.forEach((n=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,n))})),e.push(this.Yn.updateMetadata(t,n)),ss.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next((t=>(this.Xn.set(e,{size:t.size,readTime:t.document.readTime}),t.document)))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next((({documents:t,Jn:e})=>(e.forEach(((e,n)=>{this.Xn.set(e,{size:n,readTime:t.get(e).readTime})})),t)))}}function jl(t){return wc(t,"remoteDocumentGlobal")}function Ul(t){return wc(t,"remoteDocumentsV14")}function zl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $l(t,e){const n=e.documentKey.path.toArray();return[t,kc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ql(t,e){const n=t.path.toArray(),i=e.path.toArray();let s=0;for(let t=0;t<n.length-2&&t<i.length-2;++t)if(s=Ni(n[t],i[t]),s)return s;return s=Ni(n.length,i.length),s||(s=Ni(n[n.length-2],i[i.length-2]),s||Ni(n[n.length-1],i[i.length-1]))}class Hl{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Wl{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Ao(n.mutation,t,Dr.empty(),Vi.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,ea()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=ea()){const i=Xo();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Go();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Xo();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,ea())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let s=Wo();const r=Jo(),o=Jo();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof Po)?s=s.insert(e.key,e):void 0!==o?(r.set(e.key,o.mutation.getFieldMask()),Ao(o.mutation,e,o.mutation.getFieldMask(),Vi.now())):r.set(e.key,Dr.empty())})),this.recalculateAndSaveOverlays(t,s).next((t=>(t.forEach(((t,e)=>r.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Hl(e,null!==(n=r.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Jo();let i=new Er(((t,e)=>t-e)),s=ea();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const s of t)s.keys().forEach((t=>{const r=e.get(t);if(null===r)return;let o=n.get(t)||Dr.empty();o=s.applyToLocalView(r,o),n.set(t,o);const a=(i.get(s.batchId)||ea()).add(t);i=i.insert(s.batchId,a)}))})).next((()=>{const r=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Qo();c.forEach((t=>{if(!s.has(t)){const i=So(e.get(t),n.get(t));null!==i&&l.set(t,i),s=s.add(t)}})),r.push(this.documentOverlayCache.saveOverlays(t,a,l))}return ss.waitFor(r)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return Hi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Gr(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((s=>{const r=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-s.size):ss.resolve(Xo());let o=-1,a=s;return r.next((e=>ss.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(e)?ss.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,s))).next((()=>this.computeViews(t,a,e,ea()))).next((t=>({batchId:o,changes:Yo(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Hi(e)).next((t=>{let e=Go();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const i=e.collectionGroup;let s=Go();return this.indexManager.getCollectionParents(t,i).next((r=>ss.forEach(r,(r=>{const o=function(t,e){return new zr(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,r.child(i));return this.getDocumentsMatchingCollectionQuery(t,o,n).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i)))).next((t=>{i.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Pr.newInvalidDocument(i)))}));let n=Go();return t.forEach(((t,s)=>{const r=i.get(t);void 0!==r&&Ao(r.mutation,s,Dr.empty(),Vi.now()),no(e,s)&&(n=n.insert(t,s))})),n}))}}class Kl{constructor(t){this.yt=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return ss.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var n;return this.Zn.set(e.id,{id:(n=e).id,version:n.version,createTime:va(n.createTime)}),ss.resolve()}getNamedQuery(t,e){return ss.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,function(t){return{name:t.name,query:Oc(t.bundledQuery),readTime:va(t.readTime)}}(e)),ss.resolve()}}class Gl{constructor(){this.overlays=new Er(Hi.comparator),this.es=new Map}getOverlay(t,e){return ss.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Xo();return ss.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.oe(t,e,i)})),ss.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.es.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.es.delete(n)),ss.resolve()}getOverlaysForCollection(t,e,n){const i=Xo(),s=e.length+1,r=new Hi(e.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const t=o.getNext().value,r=t.getKey();if(!e.isPrefixOf(r.path))break;r.path.length===s&&t.largestBatchId>n&&i.set(t.getKey(),t)}return ss.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let s=new Er(((t,e)=>t-e));const r=this.overlays.getIterator();for(;r.hasNext();){const t=r.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=s.get(t.largestBatchId);null===e&&(e=Xo(),s=s.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Xo(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return ss.resolve(o)}oe(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.es.get(i.largestBatchId).delete(n.key);this.es.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new xc(e,n));let s=this.es.get(e);void 0===s&&(s=ea(),this.es.set(e,s)),this.es.set(e,s.add(n.key))}}class Yl{constructor(){this.ns=new Sr(Xl.ss),this.rs=new Sr(Xl.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const n=new Xl(t,e);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.cs(new Xl(t,e))}hs(t,e){t.forEach((t=>this.removeReference(t,e)))}ls(t){const e=new Hi(new zi([])),n=new Xl(e,t),i=new Xl(e,t+1),s=[];return this.rs.forEachInRange([n,i],(t=>{this.cs(t),s.push(t.key)})),s}fs(){this.ns.forEach((t=>this.cs(t)))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new Hi(new zi([])),n=new Xl(e,t),i=new Xl(e,t+1);let s=ea();return this.rs.forEachInRange([n,i],(t=>{s=s.add(t.key)})),s}containsKey(t){const e=new Xl(t,0),n=this.ns.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Xl{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return Hi.comparator(t.key,e.key)||Ni(t._s,e._s)}static os(t,e){return Ni(t._s,e._s)||Hi.comparator(t.key,e.key)}}class Ql{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new Sr(Xl.ss)}checkEmpty(t){return ss.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const s=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new vc(s,e,n,i);this.mutationQueue.push(r);for(const e of i)this.gs=this.gs.add(new Xl(e.key,s)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return ss.resolve(r)}lookupMutationBatch(t,e){return ss.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.ps(n),s=i<0?0:i;return ss.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ss.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return ss.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Xl(e,0),i=new Xl(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([n,i],(t=>{const e=this.ys(t._s);s.push(e)})),ss.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Sr(Ni);return e.forEach((t=>{const e=new Xl(t,0),i=new Xl(t,Number.POSITIVE_INFINITY);this.gs.forEachInRange([e,i],(t=>{n=n.add(t._s)}))})),ss.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let s=n;Hi.isDocumentKey(s)||(s=s.child(""));const r=new Xl(new Hi(s),0);let o=new Sr(Ni);return this.gs.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t._s)),!0)}),r),ss.resolve(this.Is(o))}Is(t){const e=[];return t.forEach((t=>{const n=this.ys(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){_i(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let n=this.gs;return ss.forEach(e.mutations,(i=>{const s=new Xl(i.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.gs=n}))}An(t){}containsKey(t,e){const n=new Xl(e,0),i=this.gs.firstAfterOrEqual(n);return ss.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,ss.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Jl{constructor(t){this.Es=t,this.docs=new Er(Hi.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),s=i?i.size:0,r=this.Es(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return ss.resolve(n?n.document.mutableCopy():Pr.newInvalidDocument(e))}getEntries(t,e){let n=Wo();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Pr.newInvalidDocument(t))})),ss.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let s=Wo();const r=e.path,o=new Hi(r.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!r.isPrefixOf(t.path))break;t.path.length>r.length+1||ts(Ji(o),n)<=0||(i.has(o.key)||no(e,o))&&(s=s.insert(o.key,o.mutableCopy()))}return ss.resolve(s)}getAllFromCollectionGroup(t,e,n,i){vi()}As(t,e){return ss.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Zl(this)}getSize(t){return ss.resolve(this.size)}}class Zl extends Nl{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.Yn.addEntry(t,i)):this.Yn.removeEntry(n)})),ss.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class tu{constructor(t){this.persistence=t,this.Rs=new qo((t=>Nr(t)),Fr),this.lastRemoteSnapshotVersion=ji.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Yl,this.targetCount=0,this.vs=Tl.Pn()}forEachTarget(t,e){return this.Rs.forEach(((t,n)=>e(n))),ss.resolve()}getLastRemoteSnapshotVersion(t){return ss.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ss.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),ss.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.bs&&(this.bs=e),ss.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new Tl(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,ss.resolve()}updateTargetData(t,e){return this.Dn(e),ss.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,ss.resolve()}removeTargets(t,e,n){let i=0;const s=[];return this.Rs.forEach(((r,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Rs.delete(r),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),ss.waitFor(s).next((()=>i))}getTargetCount(t){return ss.resolve(this.targetCount)}getTargetData(t,e){const n=this.Rs.get(e)||null;return ss.resolve(n)}addMatchingKeys(t,e,n){return this.Ps.us(e,n),ss.resolve()}removeMatchingKeys(t,e,n){this.Ps.hs(e,n);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach((e=>{s.push(i.markPotentiallyOrphaned(t,e))})),ss.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),ss.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Ps.ds(e);return ss.resolve(n)}containsKey(t,e){return ss.resolve(this.Ps.containsKey(e))}}class eu{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new ms(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new tu(this),this.indexManager=new al,this.remoteDocumentCache=function(t){return new Jl(t)}((t=>this.referenceDelegate.xs(t))),this.yt=new Ec(e),this.Ns=new Kl(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Gl,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Vs[t.toKey()];return n||(n=new Ql(e,this.referenceDelegate),this.Vs[t.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,n){mi("MemoryPersistence","Starting transaction:",t);const i=new nu(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((t=>this.referenceDelegate.Os(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Ms(t,e){return ss.or(Object.values(this.Vs).map((n=>()=>n.containsKey(t,e))))}}class nu extends ns{constructor(t){super(),this.currentSequenceNumber=t}}class iu{constructor(t){this.persistence=t,this.Fs=new Yl,this.$s=null}static Bs(t){return new iu(t)}get Ls(){if(this.$s)return this.$s;throw vi()}addReference(t,e,n){return this.Fs.addReference(n,e),this.Ls.delete(n.toString()),ss.resolve()}removeReference(t,e,n){return this.Fs.removeReference(n,e),this.Ls.add(n.toString()),ss.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),ss.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach((t=>this.Ls.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Ls.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ss.forEach(this.Ls,(n=>{const i=Hi.fromPath(n);return this.qs(t,i).next((t=>{t||e.removeEntry(i,ji.min())}))})).next((()=>(this.$s=null,e.apply(t))))}updateLimboDocument(t,e){return this.qs(t,e).next((t=>{t?this.Ls.delete(e.toString()):this.Ls.add(e.toString())}))}xs(t){return 0}qs(t,e){return ss.or([()=>ss.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class su{constructor(t){this.yt=t}$(t,e,n,i){const s=new rs("createOrUpgrade",e);n<1&&i>=1&&(function(t){t.createObjectStore("owner")}(t),function(t){t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ya,{unique:!0}),t.createObjectStore("documentMutations")}(t),ru(t),function(t){t.createObjectStore("remoteDocuments")}(t));let r=ss.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),ru(t)),r=r.next((()=>function(t){const e=t.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ji.min().toTimestamp(),targetCount:0};return e.put("targetGlobalKey",n)}(s)))),n<4&&i>=4&&(0!==n&&(r=r.next((()=>function(t,e){return e.store("mutations").W().next((n=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ya,{unique:!0});const i=e.store("mutations"),s=n.map((t=>i.put(t)));return ss.waitFor(s)}))}(t,s)))),r=r.next((()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)}))),n<5&&i>=5&&(r=r.next((()=>this.Us(s)))),n<6&&i>=6&&(r=r.next((()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s))))),n<7&&i>=7&&(r=r.next((()=>this.Gs(s)))),n<8&&i>=8&&(r=r.next((()=>this.Qs(t,s)))),n<9&&i>=9&&(r=r.next((()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)}))),n<10&&i>=10&&(r=r.next((()=>this.js(s)))),n<11&&i>=11&&(r=r.next((()=>{!function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})}(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)}))),n<12&&i>=12&&(r=r.next((()=>{!function(t){const e=t.createObjectStore("documentOverlays",{keyPath:uc});e.createIndex("collectionPathOverlayIndex",hc,{unique:!1}),e.createIndex("collectionGroupOverlayIndex",dc,{unique:!1})}(t)}))),n<13&&i>=13&&(r=r.next((()=>function(t){const e=t.createObjectStore("remoteDocumentsV14",{keyPath:Za});e.createIndex("documentKeyIndex",tc),e.createIndex("collectionGroupIndex",ec)}(t))).next((()=>this.Ws(t,s))).next((()=>t.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(r=r.next((()=>this.zs(t,s)))),n<15&&i>=15&&(r=r.next((()=>function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:oc}).createIndex("sequenceNumberIndex",ac,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:cc}).createIndex("documentKeyIndex",lc,{unique:!1})}(t)))),r}Ks(t){let e=0;return t.store("remoteDocuments").Z(((t,n)=>{e+=wl(n)})).next((()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Us(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.W().next((e=>ss.forEach(e,(e=>{const i=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",i).next((n=>ss.forEach(n,(n=>{_i(n.userId===e.userId);const i=Ac(this.yt,n);return bl(t,e.userId,i).next((()=>{}))}))))}))))}Gs(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next((t=>{const i=[];return n.Z(((n,s)=>{const r=new zi(n),o=function(t){return[0,Ha(t)]}(r);i.push(e.get(o).next((n=>n?ss.resolve():(n=>e.put({targetId:0,path:Ha(n),sequenceNumber:t.highestListenSequenceNumber}))(r))))})).next((()=>ss.waitFor(i)))}))}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:rc});const n=e.store("collectionParents"),i=new cl,s=t=>{if(i.add(t)){const e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ha(i)})}};return e.store("remoteDocuments").Z({X:!0},((t,e)=>{const n=new zi(t);return s(n.popLast())})).next((()=>e.store("documentMutations").Z({X:!0},(([t,e,n],i)=>{const r=Ga(e);return s(r.popLast())}))))}js(t){const e=t.store("targets");return e.Z(((t,n)=>{const i=Dc(n),s=Mc(this.yt,i);return e.put(s)}))}Ws(t,e){const n=e.store("remoteDocuments"),i=[];return n.Z(((t,n)=>{const s=e.store("remoteDocumentsV14"),r=(o=n,o.document?new Hi(zi.fromString(o.document.name).popFirst(5)):o.noDocument?Hi.fromSegments(o.noDocument.path):o.unknownDocument?Hi.fromSegments(o.unknownDocument.path):vi()).path.toArray();var o;const a={prefixPath:r.slice(0,r.length-2),collectionGroup:r[r.length-2],documentId:r[r.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(s.put(a))})).next((()=>ss.waitFor(i)))}zs(t,e){const n=e.store("mutations"),i=Bl(this.yt),s=new eu(iu.Bs,this.yt.ie);return n.W().next((t=>{const n=new Map;return t.forEach((t=>{var e;let i=null!==(e=n.get(t.userId))&&void 0!==e?e:ea();Ac(this.yt,t).keys().forEach((t=>i=i.add(t))),n.set(t.userId,i)})),ss.forEach(n,((t,n)=>{const r=new di(n),o=Vc.re(this.yt,r),a=s.getIndexManager(r),c=vl.re(r,this.yt,a,s.referenceDelegate);return new Wl(i,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new bc(e,ms.at),t).next()}))}))}}function ru(t){t.createObjectStore("targetDocuments",{keyPath:ic}).createIndex("documentTargetsIndex",sc,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nc,{unique:!0}),t.createObjectStore("targetGlobal")}const ou="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class au{constructor(t,e,n,i,s,r,o,a,c,l,u=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Hs=s,this.window=r,this.document=o,this.Js=c,this.Ys=l,this.Xs=u,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=t=>Promise.resolve(),!au.C())throw new Ei(Ii.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ll(this,i),this.ii=e+"main",this.yt=new Ec(a),this.ri=new os(this.ii,this.Xs,new su(this.yt)),this.Cs=new kl(this.referenceDelegate,this.yt),this.remoteDocumentCache=Bl(this.yt),this.Ns=new Nc,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&yi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ei(Ii.FAILED_PRECONDITION,ou);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Cs.getHighestSequenceNumber(t)))})).then((t=>{this.Ss=new ms(t,this.Js)})).then((()=>{this.Ds=!0})).catch((t=>(this.ri&&this.ri.close(),Promise.reject(t))))}li(t){return this.si=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L((async e=>{null===e.newVersion&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((async()=>{this.started&&await this.ui()})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>lu(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(t).next((t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable((()=>this.si(!1))))}))})).next((()=>this.di(t))).next((e=>this.isPrimary&&!e?this._i(t).next((()=>!1)):!!e&&this.wi(t).next((()=>!0)))))).catch((t=>{if(ls(t))return mi("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return mi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable((()=>this.si(t))),this.isPrimary=t}))}fi(t){return cu(t).get("owner").next((t=>ss.resolve(this.mi(t))))}gi(t){return lu(t).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const e=wc(t,"clientMetadata");return e.W().next((t=>{const n=this.Ii(t,18e5),i=t.filter((t=>-1===n.indexOf(t)));return ss.forEach(i,(t=>e.delete(t.clientId))).next((()=>i))}))})).catch((()=>[]));if(this.oi)for(const e of t)this.oi.removeItem(this.Ti(e.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.ui().then((()=>this.yi())).then((()=>this.hi()))))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?ss.resolve(!0):cu(t).get("owner").next((e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new Ei(Ii.FAILED_PRECONDITION,ou);return!1}}return!(!this.networkEnabled||!this.inForeground)||lu(t).W().next((t=>void 0===this.Ii(t,5e3).find((t=>{if(this.clientId!==t.clientId){const e=!this.networkEnabled&&t.networkEnabled,n=!this.inForeground&&t.inForeground,i=this.networkEnabled===t.networkEnabled;if(e||n&&i)return!0}return!1}))))})).next((t=>(this.isPrimary!==t&&mi("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(t=>{const e=new bc(t,ms.at);return this._i(e).next((()=>this.gi(e)))})),this.ri.close(),this.Pi()}Ii(t,e){return t.filter((t=>this.pi(t.updateTimeMs,e)&&!this.Ei(t.clientId)))}vi(){return this.runTransaction("getActiveClients","readonly",(t=>lu(t).W().next((t=>this.Ii(t,18e5).map((t=>t.clientId))))))}get started(){return this.Ds}getMutationQueue(t,e){return vl.re(t,this.yt,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new ul(t,this.yt.ie.databaseId)}getDocumentOverlayCache(t){return Vc.re(this.yt,t)}getBundleCache(){return this.Ns}runTransaction(t,e,n){mi("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",s=15===(r=this.Xs)?yc:14===r?mc:13===r?gc:12===r?pc:11===r?fc:void vi();var r;let o;return this.ri.runTransaction(t,i,s,(i=>(o=new bc(i,this.Ss?this.Ss.next():ms.at),"readwrite-primary"===e?this.fi(o).next((t=>!!t||this.di(o))).next((e=>{if(!e)throw yi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable((()=>this.si(!1))),new Ei(Ii.FAILED_PRECONDITION,es);return n(o)})).next((t=>this.wi(o).next((()=>t)))):this.Vi(o).next((()=>n(o)))))).then((t=>(o.raiseOnCommittedEvent(),t)))}Vi(t){return cu(t).get("owner").next((t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ei(Ii.FAILED_PRECONDITION,ou)}))}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cu(t).put("owner",e)}static C(){return os.C()}_i(t){const e=cu(t);return e.get("owner").next((t=>this.mi(t)?(mi("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ss.resolve()))}pi(t,e){const n=Date.now();return!(t<n-e||t>n&&(yi(`Detected an update time that is in the future: ${t} > ${n}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.ui())))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,a.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const n=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return mi("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return yi("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){yi("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(t){}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function cu(t){return wc(t,"owner")}function lu(t){return wc(t,"clientMetadata")}function uu(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class hu{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Si=n,this.Di=i}static Ci(t,e){let n=ea(),i=ea();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new hu(t,e.fromCache,n,i)}}class du{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,n,i){return this.ki(t,e).next((s=>s||this.Oi(t,e,i,n))).next((n=>n||this.Mi(t,e)))}ki(t,e){if(Hr(e))return ss.resolve(null);let n=Xr(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=Jr(e,null,"F"),n=Xr(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const s=ea(...i);return this.Ni.getDocuments(t,s).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const r=this.Fi(e,i);return this.$i(e,r,s,n.readTime)?this.ki(t,Jr(e,null,"F")):this.Bi(t,r,e,n)}))))})))))}Oi(t,e,n,i){return Hr(e)||i.isEqual(ji.min())?this.Mi(t,e):this.Ni.getDocuments(t,n).next((s=>{const r=this.Fi(e,s);return this.$i(e,r,n,i)?this.Mi(t,e):(gi()<=o.in.DEBUG&&mi("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),eo(e)),this.Bi(t,r,e,Qi(i,-1)))}))}Fi(t,e){let n=new Sr(so(t));return e.forEach(((e,i)=>{no(t,i)&&(n=n.add(i))})),n}$i(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(t,e){return gi()<=o.in.DEBUG&&mi("QueryEngine","Using full collection scan to execute query:",eo(e)),this.Ni.getDocumentsMatchingQuery(t,e,Zi.min())}Bi(t,e,n,i){return this.Ni.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class fu{constructor(t,e,n,i){this.persistence=t,this.Li=e,this.yt=i,this.qi=new Er(Ni),this.Ui=new qo((t=>Nr(t)),Fr),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(n)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Wl(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.qi)))}}function pu(t,e,n,i){return new fu(t,e,n,i)}async function gu(t,e){const n=xi(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((s=>(i=s,n.Qi(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const s=[],r=[];let o=ea();for(const t of i){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({ji:t,removedBatchIds:s,addedBatchIds:r})))}))}))}function mu(t){const e=xi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Cs.getLastRemoteSnapshotVersion(t)))}function yu(t,e,n){let i=ea(),s=ea();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=Wo();return n.forEach(((n,r)=>{const o=t.get(n);r.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),r.isNoDocument()&&r.version.isEqual(ji.min())?(e.removeEntry(n,r.readTime),i=i.insert(n,r)):!o.isValidDocument()||r.version.compareTo(o.version)>0||0===r.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(r),i=i.insert(n,r)):mi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",r.version)})),{Wi:i,zi:s}}))}function bu(t,e){const n=xi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function wu(t,e){const n=xi(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Cs.getTargetData(t,e).next((s=>s?(i=s,ss.resolve(i)):n.Cs.allocateTargetId(t).next((s=>(i=new Ic(e,s,0,t.currentSequenceNumber),n.Cs.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.qi.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.qi=n.qi.insert(t.targetId,t),n.Ui.set(e,t.targetId)),t}))}async function vu(t,e,n){const i=xi(t),s=i.qi.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,(t=>i.persistence.referenceDelegate.removeTarget(t,s)))}catch(t){if(!ls(t))throw t;mi("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.qi=i.qi.remove(e),i.Ui.delete(s.target)}function _u(t,e,n){const i=xi(t);let s=ji.min(),r=ea();return i.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const i=xi(t),s=i.Ui.get(n);return void 0!==s?ss.resolve(i.qi.get(s)):i.Cs.getTargetData(e,n)}(i,t,Xr(e)).next((e=>{if(e)return s=e.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(t,e.targetId).next((t=>{r=t}))})).next((()=>i.Li.getDocumentsMatchingQuery(t,e,n?s:ji.min(),n?r:ea()))).next((t=>(xu(i,io(e),t),{documents:t,Hi:r})))))}function xu(t,e,n){let i=t.Ki.get(e)||ji.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.Ki.set(e,i)}class Iu{constructor(){this.activeTargetIds=ia()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Eu{constructor(){this.Lr=new Iu,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Lr.er(t),this.qr[t]||"not-current"}updateQueryState(t,e,n){this.qr[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new Iu,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Tu{Ur(t){}shutdown(){}}class ku{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){mi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){mi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Su={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Cu{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class Au extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.oo=e+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,n,i,s){const r=this.ho(t,e);mi("RestConnection","Sending: ",r,n);const o={};return this.lo(o,i,s),this.fo(t,r,o,n).then((t=>(mi("RestConnection","Received: ",t),t)),(e=>{throw bi("RestConnection",`${t} failed with error: `,e,"url: ",r,"request:",n),e}))}_o(t,e,n,i,s,r){return this.ao(t,e,n,i,s)}lo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+fi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}ho(t,e){const n=Su[t];return`${this.oo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,n,i){return new Promise(((s,r)=>{const o=new li;o.setWithCredentials(!0),o.listenOnce(si.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case ii.NO_ERROR:const e=o.getResponseJson();mi("Connection","XHR received:",JSON.stringify(e)),s(e);break;case ii.TIMEOUT:mi("Connection",'RPC "'+t+'" timed out'),r(new Ei(Ii.DEADLINE_EXCEEDED,"Request time out"));break;case ii.HTTP_ERROR:const n=o.getStatus();if(mi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){let t=o.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ii).indexOf(e)>=0?e:Ii.UNKNOWN}(e.status);r(new Ei(t,e.message))}else r(new Ei(Ii.UNKNOWN,"Server responded with status "+o.getStatus()))}else r(new Ei(Ii.UNAVAILABLE,"Connection failed."));break;default:vi()}}finally{mi("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(i);o.send(e,"POST",a,n,15)}))}wo(t,e,n){const i=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=ei(),r=ni(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ai({})),this.lo(o.initMessageHeaders,e,n),o.encodeInitMessageHeaders=!0;const a=i.join("");mi("Connection","Creating WebChannel: "+a,o);const c=s.createWebChannel(a,o);let l=!1,u=!1;const h=new Cu({Hr:t=>{u?mi("Connection","Not sending because WebChannel is closed:",t):(l||(mi("Connection","Opening WebChannel transport."),c.open(),l=!0),mi("Connection","WebChannel sending:",t),c.send(t))},Jr:()=>c.close()}),d=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return d(c,ci.EventType.OPEN,(()=>{u||mi("Connection","WebChannel transport opened.")})),d(c,ci.EventType.CLOSE,(()=>{u||(u=!0,mi("Connection","WebChannel transport closed"),h.io())})),d(c,ci.EventType.ERROR,(t=>{u||(u=!0,bi("Connection","WebChannel transport errored:",t),h.io(new Ei(Ii.UNAVAILABLE,"The operation could not be completed")))})),d(c,ci.EventType.MESSAGE,(t=>{var e;if(!u){const n=t.data[0];_i(!!n);const i=n,s=i.error||(null===(e=i[0])||void 0===e?void 0:e.error);if(s){mi("Connection","WebChannel received error:",s);const t=s.status;let e=function(t){const e=jo[t];if(void 0!==e)return $o(e)}(t),n=s.message;void 0===e&&(e=Ii.INTERNAL,n="Unknown error status: "+t+" with message "+s.message),u=!0,h.io(new Ei(e,n)),c.close()}else mi("Connection","WebChannel received:",n),h.ro(n)}})),d(r,ri.STAT_EVENT,(t=>{t.stat===oi.PROXY?mi("Connection","Detected buffering proxy"):t.stat===oi.NOPROXY&&mi("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.so()}),0),h}}function Du(){return"undefined"!=typeof window?window:null}function Mu(){return"undefined"!=typeof document?document:null}function Ou(t){return new ma(t,!0)}class Pu{constructor(t,e,n=1e3,i=1.5,s=6e4){this.Hs=t,this.timerId=e,this.mo=n,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),i=Math.max(0,e-n);i>0&&mi("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(()=>(this.Eo=Date.now(),t()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Lu{constructor(t,e,n,i,s,r,o,a){this.Hs=t,this.vo=n,this.Vo=i,this.connection=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Pu(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(()=>this.$o())))}Bo(t){this.Lo(),this.stream.send(t)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(t,e){this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():e&&e.code===Ii.RESOURCE_EXHAUSTED?(yi(e.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):e&&e.code===Ii.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Zr(e)}Uo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.So===e&&this.Go(t,n)}),(e=>{t((()=>{const t=new Ei(Ii.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Qo(t)}))}))}Go(t,e){const n=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr((()=>{n((()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,(()=>(this.ko()&&(this.state=3),Promise.resolve()))),this.listener.Yr())))})),this.stream.Zr((t=>{n((()=>this.Qo(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Oo(){this.state=5,this.xo.Ro((async()=>{this.state=0,this.start()}))}Qo(t){return mi("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget((()=>this.So===t?e():(mi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ru extends Lu{constructor(t,e,n,i,s,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,r),this.yt=s}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:vi()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(t,e){return t.wt?(_i(void 0===e||"string"==typeof e),Ts.fromBase64String(e||"")):(_i(void 0===e||e instanceof Uint8Array),Ts.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Ii.UNKNOWN:$o(t.code);return new Ei(e,t.message||"")}(o);n=new ca(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ea(t,i.document.name),r=va(i.document.updateTime),o=i.document.createTime?va(i.document.createTime):ji.min(),a=new Mr({mapValue:{fields:i.document.fields}}),c=Pr.newFoundDocument(s,r,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new oa(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Ea(t,i.document),r=i.readTime?va(i.readTime):ji.min(),o=Pr.newNoDocument(s,r),a=i.removedTargetIds||[];n=new oa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Ea(t,i.document),r=i.removedTargetIds||[];n=new oa([],r,s,null)}else{if(!("filter"in e))return vi();{e.filter;const t=e.filter;t.targetId;const i=t.count||0,s=new Vo(i),r=t.targetId;n=new aa(r,s)}}return n}(this.yt,t),n=function(t){if(!("targetChange"in t))return ji.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?ji.min():e.readTime?va(e.readTime):ji.min()}(t);return this.listener.Wo(e,n)}zo(t){const e={};e.database=Sa(this.yt),e.addTarget=function(t,e){let n;const i=e.target;return n=Br(i)?{documents:Pa(t,i)}:{query:La(t,i)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=ba(t,e.resumeToken):e.snapshotVersion.compareTo(ji.min())>0&&(n.readTime=ya(t,e.snapshotVersion.toTimestamp())),n}(this.yt,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,t);n&&(e.labels=n),this.Bo(e)}Ho(t){const e={};e.database=Sa(this.yt),e.removeTarget=t,this.Bo(e)}}class Nu extends Lu{constructor(t,e,n,i,s,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,r),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(_i(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function(t,e){return t&&t.length>0?(_i(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?va(t.updateTime):va(e);return n.isEqual(ji.min())&&(n=va(e)),new Io(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=va(t.commitTime);return this.listener.Zo(n,e)}return _i(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=Sa(this.yt),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>Ma(this.yt,t)))};this.Bo(e)}}class Fu extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Ei(Ii.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.ao(t,e,n,i,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ii.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ei(Ii.UNKNOWN,t.toString())}))}_o(t,e,n,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,r])=>this.connection._o(t,e,n,s,r,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ii.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ei(Ii.UNKNOWN,t.toString())}))}terminate(){this.nu=!0}}class Bu{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve()))))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(yi(e),this.ou=!1):mi("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Vu{constructor(t,e,n,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur((t=>{n.enqueueAndForget((async()=>{Gu(this)&&(mi("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=xi(t);e._u.add(4),await Uu(e),e.gu.set("Unknown"),e._u.delete(4),await ju(e)}(this))}))})),this.gu=new Bu(n,i)}}async function ju(t){if(Gu(t))for(const e of t.wu)await e(!0)}async function Uu(t){for(const e of t.wu)await e(!1)}function zu(t,e){const n=xi(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Ku(n)?Wu(n):dh(n).ko()&&qu(n,e))}function $u(t,e){const n=xi(t),i=dh(n);n.du.delete(e),i.ko()&&Hu(n,e),0===n.du.size&&(i.ko()?i.Fo():Gu(n)&&n.gu.set("Unknown"))}function qu(t,e){t.yu.Ot(e.targetId),dh(t).zo(e)}function Hu(t,e){t.yu.Ot(e),dh(t).Ho(e)}function Wu(t){t.yu=new ua({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),dh(t).start(),t.gu.uu()}function Ku(t){return Gu(t)&&!dh(t).No()&&t.du.size>0}function Gu(t){return 0===xi(t)._u.size}function Yu(t){t.yu=void 0}async function Xu(t){t.du.forEach(((e,n)=>{qu(t,e)}))}async function Qu(t,e){Yu(t),Ku(t)?(t.gu.hu(e),Wu(t)):t.gu.set("Unknown")}async function Ju(t,e,n){if(t.gu.set("Online"),e instanceof ca&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.du.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.du.delete(i),t.yu.removeTarget(i))}(t,e)}catch(n){mi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Zu(t,n)}else if(e instanceof oa?t.yu.Kt(e):e instanceof aa?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(ji.min()))try{const e=await mu(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.yu.Zt(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const s=t.du.get(i);s&&t.du.set(i,s.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.du.get(e);if(!n)return;t.du.set(e,n.withResumeToken(Ts.EMPTY_BYTE_STRING,n.snapshotVersion)),Hu(t,e);const i=new Ic(n.target,e,1,n.sequenceNumber);qu(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){mi("RemoteStore","Failed to raise snapshot:",e),await Zu(t,e)}}async function Zu(t,e,n){if(!ls(e))throw e;t._u.add(1),await Uu(t),t.gu.set("Offline"),n||(n=()=>mu(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{mi("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await ju(t)}))}function th(t,e){return e().catch((n=>Zu(t,n,e)))}async function eh(t){const e=xi(t),n=fh(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;nh(e);)try{const t=await bu(e.localStore,i);if(null===t){0===e.fu.length&&n.Fo();break}i=t.batchId,ih(e,t)}catch(t){await Zu(e,t)}sh(e)&&rh(e)}function nh(t){return Gu(t)&&t.fu.length<10}function ih(t,e){t.fu.push(e);const n=fh(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function sh(t){return Gu(t)&&!fh(t).No()&&t.fu.length>0}function rh(t){fh(t).start()}async function oh(t){fh(t).eu()}async function ah(t){const e=fh(t);for(const n of t.fu)e.Xo(n.mutations)}async function ch(t,e,n){const i=t.fu.shift(),s=_c.from(i,e,n);await th(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await eh(t)}async function lh(t,e){e&&fh(t).Yo&&await async function(t,e){if(zo(n=e.code)&&n!==Ii.ABORTED){const n=t.fu.shift();fh(t).Mo(),await th(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await eh(t)}var n}(t,e),sh(t)&&rh(t)}async function uh(t,e){const n=xi(t);n.asyncQueue.verifyOperationInProgress(),mi("RemoteStore","RemoteStore received new credentials");const i=Gu(n);n._u.add(3),await Uu(n),i&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await ju(n)}async function hh(t,e){const n=xi(t);e?(n._u.delete(2),await ju(n)):e||(n._u.add(2),await Uu(n),n.gu.set("Unknown"))}function dh(t){return t.pu||(t.pu=function(t,e,n){const i=xi(t);return i.su(),new Ru(e,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,n)}(t.datastore,t.asyncQueue,{Yr:Xu.bind(null,t),Zr:Qu.bind(null,t),Wo:Ju.bind(null,t)}),t.wu.push((async e=>{e?(t.pu.Mo(),Ku(t)?Wu(t):t.gu.set("Unknown")):(await t.pu.stop(),Yu(t))}))),t.pu}function fh(t){return t.Iu||(t.Iu=function(t,e,n){const i=xi(t);return i.su(),new Nu(e,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,n)}(t.datastore,t.asyncQueue,{Yr:oh.bind(null,t),Zr:lh.bind(null,t),tu:ah.bind(null,t),Zo:ch.bind(null,t)}),t.wu.push((async e=>{e?(t.Iu.Mo(),await eh(t)):(await t.Iu.stop(),t.fu.length>0&&(mi("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))}))),t.Iu}class ph{constructor(t,e,n,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,s){const r=Date.now()+n,o=new ph(t,e,r,i,s);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ei(Ii.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gh(t,e){if(yi("AsyncQueue",`${e}: ${t}`),ls(t))return new Ei(Ii.UNAVAILABLE,`${e}: ${t}`);throw t}class mh{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Hi.comparator(e.key,n.key):(t,e)=>Hi.comparator(t.key,e.key),this.keyedMap=Go(),this.sortedSet=new Er(this.comparator)}static emptySet(t){return new mh(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof mh))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new mh;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class yh{constructor(){this.Tu=new Er(Hi.comparator)}track(t){const e=t.doc.key,n=this.Tu.get(e);n?0!==t.type&&3===n.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==n.type?this.Tu=this.Tu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Tu=this.Tu.remove(e):1===t.type&&2===n.type?this.Tu=this.Tu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):vi():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal(((e,n)=>{t.push(n)})),t}}class bh{constructor(t,e,n,i,s,r,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,i,s){const r=[];return e.forEach((t=>{r.push({type:0,doc:t})})),new bh(t,e,mh.emptySet(e),r,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zr(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class wh{constructor(){this.Au=void 0,this.listeners=[]}}class vh{constructor(){this.queries=new qo((t=>to(t)),Zr),this.onlineState="Unknown",this.Ru=new Set}}async function _h(t,e){const n=xi(t),i=e.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new wh),s)try{r.Au=await n.onListen(i)}catch(t){const n=gh(t,`Initialization of query '${eo(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,r),r.listeners.push(e),e.bu(n.onlineState),r.Au&&e.Pu(r.Au)&&Th(n)}async function xh(t,e){const n=xi(t),i=e.query;let s=!1;const r=n.queries.get(i);if(r){const t=r.listeners.indexOf(e);t>=0&&(r.listeners.splice(t,1),s=0===r.listeners.length)}if(s)return n.queries.delete(i),n.onUnlisten(i)}function Ih(t,e){const n=xi(t);let i=!1;for(const t of e){const e=t.query,s=n.queries.get(e);if(s){for(const e of s.listeners)e.Pu(t)&&(i=!0);s.Au=t}}i&&Th(n)}function Eh(t,e,n){const i=xi(t),s=i.queries.get(e);if(s)for(const t of s.listeners)t.onError(n);i.queries.delete(e)}function Th(t){t.Ru.forEach((t=>{t.next()}))}class kh{constructor(t,e,n){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new bh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Nu||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){if(t.docChanges.length>0)return!0;const e=this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}xu(t){t=bh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class Sh{constructor(t){this.key=t}}class Ch{constructor(t){this.key=t}}class Ah{constructor(t,e){this.query=t,this.qu=e,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ea(),this.mutatedKeys=ea(),this.Gu=so(t),this.Qu=new mh(this.Gu)}get ju(){return this.qu}Wu(t,e){const n=e?e.zu:new yh,i=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,r=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),u=no(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Hu(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Gu(u,a)>0||c&&this.Gu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(r=r.add(u),s=d?s.add(t):s.delete(t)):(r=r.delete(t),s=s.delete(t)))})),null!==this.query.limit)for(;r.size>this.query.limit;){const t="F"===this.query.limitType?r.last():r.first();r=r.delete(t.key),s=s.delete(t.key),n.track({type:1,doc:t})}return{Qu:r,zu:n,$i:o,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Eu();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vi()}};return n(t)-n(e)}(t.type,e.type)||this.Gu(t.doc,e.doc))),this.Ju(n);const r=e?this.Yu():[],o=0===this.Ku.size&&this.current?1:0,a=o!==this.Uu;return this.Uu=o,0!==s.length||a?{snapshot:new bh(this.query,t.Qu,i,s,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:r}:{Xu:r}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new yh,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.qu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach((t=>this.qu=this.qu.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.qu=this.qu.delete(t))),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=ea(),this.Qu.forEach((t=>{this.Zu(t.key)&&(this.Ku=this.Ku.add(t.key))}));const e=[];return t.forEach((t=>{this.Ku.has(t)||e.push(new Ch(t))})),this.Ku.forEach((n=>{t.has(n)||e.push(new Sh(n))})),e}tc(t){this.qu=t.Hi,this.Ku=ea();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return bh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Dh{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Mh{constructor(t){this.key=t,this.nc=!1}}class Oh{constructor(t,e,n,i,s,r){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.sc={},this.ic=new qo((t=>to(t)),Zr),this.rc=new Map,this.oc=new Set,this.uc=new Er(Hi.comparator),this.cc=new Map,this.ac=new Yl,this.hc={},this.lc=new Map,this.fc=Tl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}async function Ph(t,e){const n=Qh(t);let i,s;const r=n.ic.get(e);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.ec();else{const t=await wu(n.localStore,Xr(e));n.isPrimaryClient&&zu(n.remoteStore,t);const r=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,s=await Lh(n,e,i,"current"===r,t.resumeToken)}return s}async function Lh(t,e,n,i,s){t._c=(e,n,i)=>async function(t,e,n,i){let s=e.view.Wu(n);s.$i&&(s=await _u(t.localStore,e.query,!1).then((({documents:t})=>e.view.Wu(t,s))));const r=i&&i.targetChanges.get(e.targetId),o=e.view.applyChanges(s,t.isPrimaryClient,r);return Hh(t,e.targetId,o.Xu),o.snapshot}(t,e,n,i);const r=await _u(t.localStore,e,!0),o=new Ah(e,r.Hi),a=o.Wu(r.documents),c=ra.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,s),l=o.applyChanges(a,t.isPrimaryClient,c);Hh(t,n,l.Xu);const u=new Dh(e,n,o);return t.ic.set(e,u),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),l.snapshot}async function Rh(t,e){const n=xi(t),i=n.ic.get(e),s=n.rc.get(i.targetId);if(s.length>1)return n.rc.set(i.targetId,s.filter((t=>!Zr(t,e)))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await vu(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),$u(n.remoteStore,i.targetId),$h(n,i.targetId)})).catch(is)):($h(n,i.targetId),await vu(n.localStore,i.targetId,!0))}async function Nh(t,e){const n=xi(t);try{const t=await function(t,e){const n=xi(t),i=e.snapshotVersion;let s=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const r=n.Gi.newChangeBuffer({trackRemovals:!0});s=n.qi;const o=[];e.targetChanges.forEach(((r,a)=>{const c=s.get(a);if(!c)return;o.push(n.Cs.removeMatchingKeys(t,r.removedDocuments,a).next((()=>n.Cs.addMatchingKeys(t,r.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(a)?l=l.withResumeToken(Ts.EMPTY_BYTE_STRING,ji.min()).withLastLimboFreeSnapshotVersion(ji.min()):r.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(r.resumeToken,i)),s=s.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,r)&&o.push(n.Cs.updateTargetData(t,l))}));let a=Wo(),c=ea();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(yu(t,r,e.documentUpdates).next((t=>{a=t.Wi,c=t.zi}))),!i.isEqual(ji.min())){const e=n.Cs.getLastRemoteSnapshotVersion(t).next((e=>n.Cs.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return ss.waitFor(o).next((()=>r.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.qi=s,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.cc.get(e);i&&(_i(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.nc=!0:t.modifiedDocuments.size>0?_i(i.nc):t.removedDocuments.size>0&&(_i(i.nc),i.nc=!1))})),await Gh(n,t,e)}catch(t){await is(t)}}function Fh(t,e,n){const i=xi(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ic.forEach(((n,i)=>{const s=i.view.bu(e);s.snapshot&&t.push(s.snapshot)})),function(t,e){const n=xi(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.bu(e)&&(i=!0)})),i&&Th(n)}(i.eventManager,e),t.length&&i.sc.Wo(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Bh(t,e,n){const i=xi(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.cc.get(e),r=s&&s.key;if(r){let t=new Er(Hi.comparator);t=t.insert(r,Pr.newNoDocument(r,ji.min()));const n=ea().add(r),s=new sa(ji.min(),new Map,new Sr(Ni),t,n);await Nh(i,s),i.uc=i.uc.remove(r),i.cc.delete(e),Kh(i)}else await vu(i.localStore,e,!1).then((()=>$h(i,e,n))).catch(is)}async function Vh(t,e){const n=xi(t),i=e.batch.batchId;try{const t=await function(t,e){const n=xi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),s=n.Gi.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const s=n.batch,r=s.keys();let o=ss.resolve();return r.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const r=n.docVersions.get(t);_i(null!==r),e.version.compareTo(r)<0&&(s.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,s)))}(n,t,e,s).next((()=>s.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=ea();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);zh(n,i,null),Uh(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Gh(n,t)}catch(t){await is(t)}}async function jh(t,e,n){const i=xi(t);try{const t=await function(t,e){const n=xi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(_i(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);zh(i,e,n),Uh(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Gh(i,t)}catch(n){await is(n)}}function Uh(t,e){(t.lc.get(e)||[]).forEach((t=>{t.resolve()})),t.lc.delete(e)}function zh(t,e,n){const i=xi(t);let s=i.hc[i.currentUser.toKey()];if(s){const t=s.get(e);t&&(n?t.reject(n):t.resolve(),s=s.remove(e)),i.hc[i.currentUser.toKey()]=s}}function $h(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.rc.get(e))t.ic.delete(i),n&&t.sc.wc(i,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach((e=>{t.ac.containsKey(e)||qh(t,e)}))}function qh(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);null!==n&&($u(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),Kh(t))}function Hh(t,e,n){for(const i of n)i instanceof Sh?(t.ac.addReference(i.key,e),Wh(t,i)):i instanceof Ch?(mi("SyncEngine","Document no longer in limbo: "+i.key),t.ac.removeReference(i.key,e),t.ac.containsKey(i.key)||qh(t,i.key)):vi()}function Wh(t,e){const n=e.key,i=n.path.canonicalString();t.uc.get(n)||t.oc.has(i)||(mi("SyncEngine","New document in limbo: "+n),t.oc.add(i),Kh(t))}function Kh(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new Hi(zi.fromString(e)),i=t.fc.next();t.cc.set(i,new Mh(n)),t.uc=t.uc.insert(n,i),zu(t.remoteStore,new Ic(Xr(qr(n.path)),i,2,ms.at))}}async function Gh(t,e,n){const i=xi(t),s=[],r=[],o=[];i.ic.isEmpty()||(i.ic.forEach(((t,a)=>{o.push(i._c(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){s.push(t);const e=hu.Ci(a.targetId,t);r.push(e)}})))})),await Promise.all(o),i.sc.Wo(s),await async function(t,e){const n=xi(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>ss.forEach(e,(e=>ss.forEach(e.Si,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>ss.forEach(e.Di,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!ls(t))throw t;mi("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.qi.get(e),i=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(i);n.qi=n.qi.insert(e,s)}}}(i.localStore,r))}async function Yh(t,e){const n=xi(t);if(!n.currentUser.isEqual(e)){mi("SyncEngine","User change. New user:",e.toKey());const t=await gu(n.localStore,e);n.currentUser=e,function(t,e){t.lc.forEach((t=>{t.forEach((t=>{t.reject(new Ei(Ii.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.lc.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Gh(n,t.ji)}}function Xh(t,e){const n=xi(t),i=n.cc.get(e);if(i&&i.nc)return ea().add(i.key);{let t=ea();const i=n.rc.get(e);if(!i)return t;for(const e of i){const i=n.ic.get(e);t=t.unionWith(i.view.ju)}return t}}function Qh(t){const e=xi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bh.bind(null,e),e.sc.Wo=Ih.bind(null,e.eventManager),e.sc.wc=Eh.bind(null,e.eventManager),e}function Jh(t){const e=xi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jh.bind(null,e),e}class Zh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.yt=Ou(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),await this.persistence.start(),this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore)}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return pu(this.persistence,new du,t.initialUser,this.yt)}yc(t){return new eu(iu.Bs,this.yt)}gc(t){return new Eu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class td extends Zh{constructor(t,e,n){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Ac.initialize(this,t),await Jh(this.Ac.syncEngine),await eh(this.Ac.remoteStore),await this.persistence.li((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}Ic(t){return pu(this.persistence,new du,t.initialUser,this.yt)}Tc(t,e){const n=this.persistence.referenceDelegate.garbageCollector;return new Ol(n,t.asyncQueue,e)}Ec(t,e){const n=new gs(e,this.persistence);return new ps(t.asyncQueue,n)}yc(t){const e=uu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?yl.withCacheSize(this.cacheSizeBytes):yl.DEFAULT;return new au(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Du(),Mu(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(t){return new Eu}}class ed{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Fh(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yh.bind(null,this.syncEngine),await hh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new vh}createDatastore(t){const e=Ou(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new Au(i));var i;return function(t,e,n,i){return new Fu(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,s=t=>Fh(this.syncEngine,t,0),r=ku.C()?new ku:new Tu,new Vu(e,n,i,s,r);var e,n,i,s,r}createSyncEngine(t,e){return function(t,e,n,i,s,r,o){const a=new Oh(t,e,n,i,s,r);return o&&(a.dc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=xi(t);mi("RemoteStore","RemoteStore shutting down."),e._u.add(5),await Uu(e),e.mu.shutdown(),e.gu.set("Unknown")}(this.remoteStore)}}function nd(t,e,n){if(!n)throw new Ei(Ii.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function id(t){if(!Hi.isDocumentKey(t))throw new Ei(Ii.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sd(t){if(Hi.isDocumentKey(t))throw new Ei(Ii.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":vi()}function od(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ei(Ii.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rd(t);throw new Ei(Ii.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}const ad=new Map;class cd{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ei(Ii.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ei(Ii.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,i){if(!0===e&&!0===i)throw new Ei(Ii.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ld{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ei(Ii.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ei(Ii.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cd(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Si;switch(t.type){case"gapi":const e=t.client;return new Mi(e,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ei(Ii.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=ad.get(t);e&&(mi("ComponentProvider","Removing Datastore"),ad.delete(t),e.terminate())}(this),Promise.resolve()}}class ud{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dd(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ud(this.firestore,t,this._key)}}class hd{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new hd(this.firestore,t,this._query)}}class dd extends hd{constructor(t,e,n){super(t,e,qr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ud(this.firestore,null,new Hi(t))}withConverter(t){return new dd(this.firestore,t,this._path)}}function fd(t,e,...n){if(t=(0,a.m9)(t),nd("collection","path",e),t instanceof ld){const i=zi.fromString(e,...n);return sd(i),new dd(t,null,i)}{if(!(t instanceof ud||t instanceof dd))throw new Ei(Ii.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(zi.fromString(e,...n));return sd(i),new dd(t.firestore,null,i)}}function pd(t,e,...n){if(t=(0,a.m9)(t),1===arguments.length&&(e=Ri.R()),nd("doc","path",e),t instanceof ld){const i=zi.fromString(e,...n);return id(i),new ud(t,null,new Hi(i))}{if(!(t instanceof ud||t instanceof dd))throw new Ei(Ii.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(zi.fromString(e,...n));return id(i),new ud(t.firestore,t instanceof dd?t.converter:null,new Hi(i))}}class gd{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):yi("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class md{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=di.UNAUTHENTICATED,this.clientId=Ri.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{mi("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(mi("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ei(Ii.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=gh(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function yd(t,e){t.asyncQueue.verifyOperationInProgress(),mi("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await gu(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}async function bd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wd(t);mi("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>uh(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>uh(e.remoteStore,n))),t.onlineComponents=e}async function wd(t){return t.offlineComponents||(mi("FirestoreClient","Using default OfflineComponentProvider"),await yd(t,new Zh)),t.offlineComponents}async function vd(t){return t.onlineComponents||(mi("FirestoreClient","Using default OnlineComponentProvider"),await bd(t,new ed)),t.onlineComponents}function _d(t){return wd(t).then((t=>t.persistence))}function xd(t){return vd(t).then((t=>t.remoteStore))}function Id(t){return vd(t).then((t=>t.syncEngine))}async function Ed(t){const e=await vd(t),n=e.eventManager;return n.onListen=Ph.bind(null,e.syncEngine),n.onUnlisten=Rh.bind(null,e.syncEngine),n}function Td(t,e,n={}){const i=new Ti;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,s){const r=new gd({next:r=>{e.enqueueAndForget((()=>xh(t,o)));const a=r.docs.has(n);!a&&r.fromCache?s.reject(new Ei(Ii.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&r.fromCache&&i&&"server"===i.source?s.reject(new Ei(Ii.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(r)},error:t=>s.reject(t)}),o=new kh(qr(n.path),r,{includeMetadataChanges:!0,Nu:!0});return _h(t,o)}(await Ed(t),t.asyncQueue,e,n,i))),i.promise}function kd(t,e,n={}){const i=new Ti;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,s){const r=new gd({next:n=>{e.enqueueAndForget((()=>xh(t,o))),n.fromCache&&"server"===i.source?s.reject(new Ei(Ii.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:t=>s.reject(t)}),o=new kh(n,r,{includeMetadataChanges:!0,Nu:!0});return _h(t,o)}(await Ed(t),t.asyncQueue,e,n,i))),i.promise}class Sd{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Pu(this,"async_queue_retry"),this.Wc=()=>{const t=Mu();t&&mi("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const t=Mu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.qc){this.qc=!0,this.Qc=t||!1;const e=Mu();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.qc)return new Promise((()=>{}));const e=new Ti;return this.Hc((()=>this.qc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Lc.push(t),this.Jc())))}async Jc(){if(0!==this.Lc.length){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(t){if(!ls(t))throw t;mi("AsyncQueue","Operation failed with retryable error: "+t)}this.Lc.length>0&&this.xo.Ro((()=>this.Jc()))}}Hc(t){const e=this.Bc.then((()=>(this.Gc=!0,t().catch((t=>{this.Kc=t,this.Gc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw yi("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Gc=!1,t))))));return this.Bc=e,e}enqueueAfterDelay(t,e,n){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const i=ph.createAndSchedule(this,t,e,n,(t=>this.Yc(t)));return this.Uc.push(i),i}zc(){this.Kc&&vi()}verifyOperationInProgress(){}async Xc(){let t;do{t=this.Bc,await t}while(t!==this.Bc)}Zc(t){for(const e of this.Uc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then((()=>{this.Uc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Uc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()}))}ea(t){this.jc.push(t)}Yc(t){const e=this.Uc.indexOf(t);this.Uc.splice(e,1)}}class Cd extends ld{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Sd,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Md(this),this._firestoreClient.terminate()}}function Ad(t,e){const n="object"==typeof t?t:(0,s.Mq)(),i="string"==typeof t?t:e||"(default)",r=(0,s.qX)(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const t=(0,a.P0)("firestore");t&&function(t,e,n,i={}){var s;const r=(t=od(t,ld))._getSettings();if("firestore.googleapis.com"!==r.host&&r.host!==e&&bi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=di.MOCK_USER;else{e=(0,a.Sg)(i.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const r=i.mockUserToken.sub||i.mockUserToken.user_id;if(!r)throw new Ei(Ii.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new di(r)}t._authCredentials=new Ci(new ki(e,n))}}(r,...t)}return r}function Dd(t){return t._firestoreClient||Md(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Md(t){var e;const n=t._freezeSettings(),i=function(t,e,n,i){return new ys(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new md(t._authCredentials,t._appCheckCredentials,t._queue,i)}function Od(t,e){Nd(t=od(t,Cd));const n=Dd(t),i=t._freezeSettings(),s=new ed;return Pd(n,s,new td(s,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function Pd(t,e,n){const i=new Ti;return t.asyncQueue.enqueue((async()=>{try{await yd(t,n),await bd(t,e),i.resolve()}catch(t){const e=t;if(!function(t){return"FirebaseError"===t.name?t.code===Ii.FAILED_PRECONDITION||t.code===Ii.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code||11===t.code)}(e))throw e;bi("Error enabling offline persistence. Falling back to persistence disabled: "+e),i.reject(e)}})).then((()=>i.promise))}function Ld(t){return function(t){return t.asyncQueue.enqueue((async()=>{const e=await _d(t),n=await xd(t);return e.setNetworkEnabled(!0),function(t){const e=xi(t);return e._u.delete(0),ju(e)}(n)}))}(Dd(t=od(t,Cd)))}function Rd(t){return function(t){return t.asyncQueue.enqueue((async()=>{const e=await _d(t),n=await xd(t);return e.setNetworkEnabled(!1),async function(t){const e=xi(t);e._u.add(0),await Uu(e),e.gu.set("Offline")}(n)}))}(Dd(t=od(t,Cd)))}function Nd(t){if(t._initialized||t._terminated)throw new Ei(Ii.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fd{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Fd(Ts.fromBase64String(t))}catch(t){throw new Ei(Ii.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Fd(Ts.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Bd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ei(Ii.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Vd{constructor(t){this._methodName=t}}class jd{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ei(Ii.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ei(Ii.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ni(this._lat,t._lat)||Ni(this._long,t._long)}}const Ud=/^__.*__$/;class zd{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Po(t,this.data,this.fieldMask,e,this.fieldTransforms):new Oo(t,this.data,e,this.fieldTransforms)}}function $d(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vi()}}class qd{constructor(t,e,n,i,s,r){this.settings=t,this.databaseId=e,this.yt=n,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new qd(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ia({path:n,oa:!1});return i.ua(t),i}ca(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ia({path:n,oa:!1});return i.na(),i}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return nf(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if($d(this.sa)&&Ud.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class Hd{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.yt=n||Ou(t)}da(t,e,n,i=!1){return new qd({sa:t,methodName:e,fa:n,path:qi.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Wd(t){const e=t._freezeSettings(),n=Ou(t._databaseId);return new Hd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Kd(t,e,n,i,s,r={}){const o=t.da(r.merge||r.mergeFields?2:0,e,n,s);Jd("Data must be an object, but it was:",o,i);const a=Xd(i,o);let c,l;if(r.merge)c=new Dr(o.fieldMask),l=o.fieldTransforms;else if(r.mergeFields){const t=[];for(const i of r.mergeFields){const s=Zd(e,i,n);if(!o.contains(s))throw new Ei(Ii.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);sf(t,s)||t.push(s)}c=new Dr(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new zd(new Mr(a),c,l)}function Gd(t,e,n,i=!1){return Yd(n,t.da(i?4:3,e))}function Yd(t,e){if(Qd(t=(0,a.m9)(t)))return Jd("Unsupported field value:",e,t),Xd(t,e);if(t instanceof Vd)return function(t,e){if(!$d(e.sa))throw e.ha(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.ha(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const s of t){let t=Yd(s,e.aa(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,a.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return co(e.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Vi.fromDate(t);return{timestampValue:ya(e.yt,n)}}if(t instanceof Vi){const n=new Vi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ya(e.yt,n)}}if(t instanceof jd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fd)return{bytesValue:ba(e.yt,t._byteString)};if(t instanceof ud){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:_a(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.ha(`Unsupported field value: ${rd(t)}`)}(t,e)}function Xd(t,e){const n={};return _s(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(t,((t,i)=>{const s=Yd(i,e.ra(t));null!=s&&(n[t]=s)})),{mapValue:{fields:n}}}function Qd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Vi||t instanceof jd||t instanceof Fd||t instanceof ud||t instanceof Vd)}function Jd(t,e,n){if(!Qd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=rd(n);throw"an object"===i?e.ha(t+" a custom object"):e.ha(t+" "+i)}}function Zd(t,e,n){if((e=(0,a.m9)(e))instanceof Bd)return e._internalPath;if("string"==typeof e)return ef(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const tf=new RegExp("[~\\*/\\[\\]]");function ef(t,e,n){if(e.search(tf)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bd(...e.split("."))._internalPath}catch(i){throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,i,s){const r=i&&!i.isEmpty(),o=void 0!==s;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${i}`),o&&(c+=` in document ${s}`),c+=")"),new Ei(Ii.INVALID_ARGUMENT,a+t+c)}function sf(t,e){return t.some((t=>t.isEqual(e)))}class rf{constructor(t,e,n,i,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ud(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new of(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(af("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class of extends rf{data(){return super.data()}}function af(t,e){return"string"==typeof e?ef(t,e):e instanceof Bd?e._internalPath:e._delegate._internalPath}function cf(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Ei(Ii.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lf{}class uf extends lf{}function hf(t,e,...n){let i=[];e instanceof lf&&i.push(e),i=i.concat(n),function(t){const e=t.filter((t=>t instanceof pf)).length,n=t.filter((t=>t instanceof df)).length;if(e>1||e>0&&n>0)throw new Ei(Ii.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const e of i)t=e._apply(t);return t}class df extends uf{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new df(t,e,n)}_apply(t){const e=this._parse(t);return yf(t._query,e),new hd(t.firestore,t.converter,Qr(t._query,e))}_parse(t){const e=Wd(t.firestore),n=function(t,e,n,i,s,r,o){let a;if(s.isKeyField()){if("array-contains"===r||"array-contains-any"===r)throw new Ei(Ii.INVALID_ARGUMENT,`Invalid Query. You can't perform '${r}' queries on documentId().`);if("in"===r||"not-in"===r){mf(o,r);const e=[];for(const n of o)e.push(gf(i,t,n));a={arrayValue:{values:e}}}else a=gf(i,t,o)}else"in"!==r&&"not-in"!==r&&"array-contains-any"!==r||mf(o,r),a=Gd(n,"where",o,"in"===r||"not-in"===r);return sr.create(s,r,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function ff(t,e,n){const i=e,s=af("where",t);return df._create(s,i,n)}class pf extends lf{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new pf(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:rr.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const t of i)yf(n,t),n=Qr(n,t)}(t._query,e),new hd(t.firestore,t.converter,Qr(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function gf(t,e,n){if("string"==typeof(n=(0,a.m9)(n))){if(""===n)throw new Ei(Ii.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gr(e)&&-1!==n.indexOf("/"))throw new Ei(Ii.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(zi.fromString(n));if(!Hi.isDocumentKey(i))throw new Ei(Ii.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zs(t,new Hi(i))}if(n instanceof ud)return zs(t,n._key);throw new Ei(Ii.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rd(n)}.`)}function mf(t,e){if(!Array.isArray(t)||0===t.length)throw new Ei(Ii.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new Ei(Ii.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yf(t,e){if(e.isInequality()){const n=Kr(t),i=e.field;if(null!==n&&!n.isEqual(i))throw new Ei(Ii.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const s=Wr(t);null!==s&&bf(t,i,s)}const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Ei(Ii.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ei(Ii.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function bf(t,e,n){if(!n.isEqual(e))throw new Ei(Ii.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class wf{convertValue(t,e="none"){switch(Rs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Cs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(As(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw vi()}}convertObject(t,e){const n={};return vs(t.fields,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new jd(Cs(t.latitude),Cs(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Ms(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Os(t));default:return null}}convertTimestamp(t){const e=Ss(t);return new Vi(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=zi.fromString(t);_i(qa(n));const i=new bs(n.get(1),n.get(3)),s=new Hi(n.popFirst(5));return i.isEqual(e)||yi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function vf(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class _f{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class xf extends rf{constructor(t,e,n,i,s,r){super(t,e,n,i,r),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new If(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(af("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class If extends xf{data(t={}){return super.data(t)}}class Ef{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new _f(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new If(this._firestore,this._userDataWriter,n.key,n,new _f(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ei(Ii.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new If(t._firestore,t._userDataWriter,n.doc.key,n.doc,new _f(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new If(t._firestore,t._userDataWriter,e.doc.key,e.doc,new _f(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let s=-1,r=-1;return 0!==e.type&&(s=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),r=n.indexOf(e.doc.key)),{type:Tf(e.type),doc:i,oldIndex:s,newIndex:r}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Tf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vi()}}function kf(t){t=od(t,ud);const e=od(t.firestore,Cd);return Td(Dd(e),t._key).then((n=>Mf(e,t,n)))}class Sf extends wf{constructor(t){super(),this.firestore=t}convertBytes(t){return new Fd(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ud(this.firestore,null,e)}}function Cf(t){t=od(t,hd);const e=od(t.firestore,Cd),n=Dd(e),i=new Sf(e);return cf(t._query),kd(n,t._query).then((n=>new Ef(e,i,t,n)))}function Af(t,e,n){t=od(t,ud);const i=od(t.firestore,Cd),s=vf(t.converter,e,n);return Df(i,[Kd(Wd(i),"setDoc",t._key,s,null!==t.converter,n).toMutation(t._key,Eo.none())])}function Df(t,e){return function(t,e){const n=new Ti;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=Jh(t);try{const t=await function(t,e){const n=xi(t),i=Vi.now(),s=e.reduce(((t,e)=>t.add(e.key)),ea());let r,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Wo(),c=ea();return n.Gi.getEntries(t,s).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((s=>{r=s;const o=[];for(const t of e){const e=Do(t,r.get(t.key).overlayedDocument);null!=e&&o.push(new Po(t.key,e,Or(e.value.mapValue),Eo.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(r,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Yo(r)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.hc[t.currentUser.toKey()];i||(i=new Er(Ni)),i=i.insert(e,n),t.hc[t.currentUser.toKey()]=i}(i,t.batchId,n),await Gh(i,t.changes),await eh(i.remoteStore)}catch(t){const e=gh(t,"Failed to persist write");n.reject(e)}}(await Id(t),e,n))),n.promise}(Dd(t),e)}function Mf(t,e,n){const i=n.docs.get(e._key),s=new Sf(t);return new xf(t,s,e._key,i,new _f(n.hasPendingWrites,n.fromCache),e.converter)}!function(t,e=!0){!function(t){fi=t}(s.Jn),(0,s.Xd)(new r.wA("firestore",((t,{instanceIdentifier:n,options:i})=>{const s=t.getProvider("app").getImmediate(),r=new Cd(new Ai(t.getProvider("auth-internal")),new Pi(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ei(Ii.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bs(t.options.projectId,e)}(s,n),s);return i=Object.assign({useFetchStreams:e},i),r._setSettings(i),r}),"PUBLIC").setMultipleInstances(!0)),(0,s.KN)(hi,"3.8.3",t),(0,s.KN)(hi,"3.8.3","esm2017")}()},135:(t,e,n)=>{"use strict";n.d(e,{xS:()=>A,sN:()=>g,NA:()=>y});var i=n(238),s=n(444),r=n(463),o=n(333);n(578);const a="@firebase/remote-config",c="0.4.3";class l{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}const u="remote-config",h={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},d=new s.LL("remoteconfig","Remote Config",h);const f=["1","true","t","yes","y","on"];class p{constructor(t,e=""){this._source=t,this._value=e}asString(){return this._value}asBoolean(){return"static"!==this._source&&f.indexOf(this._value.toLowerCase())>=0}asNumber(){if("static"===this._source)return 0;let t=Number(this._value);return isNaN(t)&&(t=0),t}getSource(){return this._source}}function g(t=(0,i.Mq)()){t=(0,s.m9)(t);return(0,i.qX)(t,u).getImmediate()}async function m(t){const e=(0,s.m9)(t),n=new l;setTimeout((async()=>{n.abort()}),e.settings.fetchTimeoutMillis);try{await e._client.fetch({cacheMaxAgeMillis:e.settings.minimumFetchIntervalMillis,signal:n}),await e._storageCache.setLastFetchStatus("success")}catch(t){const n=function(t,e){return t instanceof s.ZR&&-1!==t.code.indexOf(e)}(t,"fetch-throttle")?"throttle":"failure";throw await e._storageCache.setLastFetchStatus(n),t}}function y(t,e){const n=(0,s.m9)(t);n._isInitializationComplete||n._logger.debug(`A value was requested for key "${e}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const i=n._storageCache.getActiveConfig();return i&&void 0!==i[e]?new p("remote",i[e]):n.defaultConfig&&void 0!==n.defaultConfig[e]?new p("default",String(n.defaultConfig[e])):(n._logger.debug(`Returning static value for key "${e}". Define a default or remote value if this is unintentional.`),new p("static"))}class b{constructor(t,e,n,i){this.client=t,this.storage=e,this.storageCache=n,this.logger=i}isCachedDataFresh(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-e,i=n<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${i}.`),i}async fetch(t){const[e,n]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(t.cacheMaxAgeMillis,e))return n;t.eTag=n&&n.eTag;const i=await this.client.fetch(t),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),await Promise.all(s),i}}function w(t=navigator){return t.languages&&t.languages[0]||t.language}class v{constructor(t,e,n,i,s,r){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=i,this.apiKey=s,this.appId=r}async fetch(t){const[e,n]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},r={sdk_version:this.sdkVersion,app_instance_id:e,app_instance_id_token:n,app_id:this.appId,language_code:w()},o={method:"POST",headers:s,body:JSON.stringify(r)},a=fetch(i,o),c=new Promise(((e,n)=>{t.signal.addEventListener((()=>{const t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))}));let l;try{await Promise.race([a,c]),l=await a}catch(t){let e="fetch-client-network";throw"AbortError"===(null==t?void 0:t.name)&&(e="fetch-timeout"),d.create(e,{originalErrorMessage:null==t?void 0:t.message})}let u=l.status;const h=l.headers.get("ETag")||void 0;let f,p;if(200===l.status){let t;try{t=await l.json()}catch(t){throw d.create("fetch-client-parse",{originalErrorMessage:null==t?void 0:t.message})}f=t.entries,p=t.state}if("INSTANCE_STATE_UNSPECIFIED"===p?u=500:"NO_CHANGE"===p?u=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==u&&200!==u)throw d.create("fetch-status",{httpStatus:u});return{status:u,eTag:h,config:f}}}class _{constructor(t,e){this.client=t,this.storage=e}async fetch(t){const e=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,e)}async attemptFetch(t,{throttleEndTimeMillis:e,backoffCount:n}){await function(t,e){return new Promise(((n,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(n,s);t.addEventListener((()=>{clearTimeout(r),i(d.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(t.signal,e);try{const e=await this.client.fetch(t);return await this.storage.deleteThrottleMetadata(),e}catch(e){if(!function(t){if(!(t instanceof s.ZR&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(e))throw e;const i={throttleEndTimeMillis:Date.now()+(0,s.$s)(n),backoffCount:n+1};return await this.storage.setThrottleMetadata(i),this.attemptFetch(t,i)}}}class x{constructor(t,e,n,i,s){this.app=t,this._client=e,this._storageCache=n,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function I(t,e){const n=t.target.error||void 0;return d.create(e,{originalErrorMessage:n&&(null==n?void 0:n.message)})}const E="app_namespace_store",T="firebase_remote_config",k=1;class S{constructor(t,e,n,i=function(){return new Promise(((t,e)=>{try{const n=indexedDB.open(T,k);n.onerror=t=>{e(I(t,"storage-open"))},n.onsuccess=e=>{t(e.target.result)},n.onupgradeneeded=t=>{const e=t.target.result;0===t.oldVersion&&e.createObjectStore(E,{keyPath:"compositeKey"})}}catch(t){e(d.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}))}()){this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(t){const e=await this.openDbPromise;return new Promise(((n,i)=>{const s=e.transaction([E],"readonly").objectStore(E),r=this.createCompositeKey(t);try{const t=s.get(r);t.onerror=t=>{i(I(t,"storage-get"))},t.onsuccess=t=>{const e=t.target.result;n(e?e.value:void 0)}}catch(t){i(d.create("storage-get",{originalErrorMessage:null==t?void 0:t.message}))}}))}async set(t,e){const n=await this.openDbPromise;return new Promise(((i,s)=>{const r=n.transaction([E],"readwrite").objectStore(E),o=this.createCompositeKey(t);try{const t=r.put({compositeKey:o,value:e});t.onerror=t=>{s(I(t,"storage-set"))},t.onsuccess=()=>{i()}}catch(t){s(d.create("storage-set",{originalErrorMessage:null==t?void 0:t.message}))}}))}async delete(t){const e=await this.openDbPromise;return new Promise(((n,i)=>{const s=e.transaction([E],"readwrite").objectStore(E),r=this.createCompositeKey(t);try{const t=s.delete(r);t.onerror=t=>{i(I(t,"storage-delete"))},t.onsuccess=()=>{n()}}catch(t){i(d.create("storage-delete",{originalErrorMessage:null==t?void 0:t.message}))}}))}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}}class C{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),i=await t;i&&(this.lastFetchStatus=i);const s=await e;s&&(this.lastSuccessfulFetchTimestampMillis=s);const r=await n;r&&(this.activeConfig=r)}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}}async function A(t){return t=(0,s.m9)(t),await m(t),async function(t){const e=(0,s.m9)(t),[n,i]=await Promise.all([e._storage.getLastSuccessfulFetchResponse(),e._storage.getActiveConfigEtag()]);return!!(n&&n.config&&n.eTag&&n.eTag!==i)&&(await Promise.all([e._storageCache.setActiveConfig(n.config),e._storage.setActiveConfigEtag(n.eTag)]),!0)}(t)}(0,i.Xd)(new r.wA(u,(function(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw d.create("registration-window");if(!(0,s.hl)())throw d.create("indexed-db-unavailable");const{projectId:c,apiKey:l,appId:u}=n.options;if(!c)throw d.create("registration-project-id");if(!l)throw d.create("registration-api-key");if(!u)throw d.create("registration-app-id");e=e||"firebase";const h=new S(u,n.name,e),f=new C(h),p=new o.Yd(a);p.logLevel=o.in.ERROR;const g=new v(r,i.Jn,e,c,l,u),m=new _(g,h),y=new b(m,h,f,p),w=new x(n,y,f,h,p);return function(t){const e=(0,s.m9)(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then((()=>{e._isInitializationComplete=!0}))),e._initializePromise}(w),w}),"PUBLIC").setMultipleInstances(!0)),(0,i.KN)(a,c),(0,i.KN)(a,c,"esm2017")},531:(t,e,n)=>{"use strict";n.d(e,{X3:()=>m});const i=(t,e)=>e.some((e=>t instanceof e));let s,r;const o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap;let h={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return a.get(t);if("objectStoreNames"===e)return t.objectStoreNames||c.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function d(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(g(this),e),p(o.get(this))}:function(...e){return p(t.apply(g(this),e))}:function(e,...n){const i=t.call(g(this),e,...n);return c.set(i,e.sort?e.sort():[e]),p(i)}}function f(t){return"function"==typeof t?d(t):(t instanceof IDBTransaction&&function(t){if(a.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",r),t.removeEventListener("abort",r)},s=()=>{e(),i()},r=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",r),t.addEventListener("abort",r)}));a.set(t,e)}(t),i(t,s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,h):t)}function p(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",r)},s=()=>{e(p(t.result)),i()},r=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",r)}));return e.then((e=>{e instanceof IDBCursor&&o.set(e,t)})).catch((()=>{})),u.set(e,t),e}(t);if(l.has(t))return l.get(t);const e=f(t);return e!==t&&(l.set(t,e),u.set(e,t)),e}const g=t=>u.get(t);function m(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=p(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(p(o.result),t.oldVersion,t.newVersion,p(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((t=>{r&&t.addEventListener("close",(()=>r())),s&&t.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),a}const y=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function v(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(w.get(e))return w.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=b.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!y.includes(n))return;const r=async function(t,...e){const r=this.transaction(t,s?"readwrite":"readonly");let o=r.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),s&&r.done]))[0]};return w.set(e,r),r}h=(t=>({...t,get:(e,n,i)=>v(e,n)||t.get(e,n,i),has:(e,n)=>!!v(e,n)||t.has(e,n)}))(h)}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var __webpack_exports__={};(()=>{"use strict";var firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(977),firebase_analytics__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(261),firebase_firestore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(247),firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(135),firebase_auth__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(962),chart_js_auto__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(809),sweetalert2__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(455),sweetalert2__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_6__),last_page;function _createForOfIteratorHelper(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,s=function(){};return{s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",a=s.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,s){var r=e&&e.prototype instanceof d?e:d,o=Object.create(r.prototype),a=new T(s||[]);return i(o,"_invoke",{value:_(t,n,a)}),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function d(){}function f(){}function p(){}var g={};c(g,r,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(k([])));y&&y!==e&&n.call(y,r)&&(g=y);var b=p.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function v(t,e){function s(i,r,o,a){var c=u(t[i],t,r);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){s("next",t,o,a)}),(function(t){s("throw",t,o,a)})):e.resolve(h).then((function(t){l.value=t,o(l)}),(function(t){return s("throw",t,o,a)}))}a(c.arg)}var r;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){s(t,n,e,i)}))}return r=r?r.then(i,i):i()}})}function _(t,e,n){var i="suspendedStart";return function(s,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===s)throw r;return S()}for(n.method=s,n.arg=r;;){var o=n.delegate;if(o){var a=x(o,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=u(t,e,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=e.method,i=t.iterator[n];if(void 0===i)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var s=u(i,t.iterator,e.arg);if("throw"===s.type)return e.method="throw",e.arg=s.arg,e.delegate=null,h;var r=s.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function k(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=p,i(b,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(v.prototype),c(v.prototype,o,(function(){return this})),t.AsyncIterator=v,t.async=function(e,n,i,s,r){void 0===r&&(r=Promise);var o=new v(l(e,n,i,s),r);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),c(b,a,"Generator"),c(b,r,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=k,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return o.type="throw",o.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s],o=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var a=n.call(r,"catchLoc"),c=n.call(r,"finallyLoc");if(a&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var r=s;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,h):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var s=i.arg;E(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function asyncGeneratorStep(t,e,n,i,s,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(i,s)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var r=t.apply(e,n);function o(t){asyncGeneratorStep(r,i,s,o,a,"next",t)}function a(t){asyncGeneratorStep(r,i,s,o,a,"throw",t)}o(void 0)}))}}window.axios=__webpack_require__(669),window.Swal=__webpack_require__(455),window.showMessage=function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";switch(console.log(t),s){case"info":e="bg-slate-800",n="text-slate-50";break;case"warning":e="bg-amber-500",n="text-amber-100";break;case"error":e="bg-red-500",n="text-red-100"}sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().fire({title:t,position:i?"top":"bottom",timer:1500,timerProgressBar:!0,willClose:function(){clearInterval(undefined)},showClass:{popup:"\n            animate__animated\n            ".concat(i?"animate__fadeInDown":"animate__fadeInUp","\n            animate__faster\n            ")},hideClass:{popup:"\n            animate__animated\n            ".concat(i?"animate__fadeOutUp":"animate__fadeOutDown","\n            animate__faster\n            ")},customClass:{container:"p-1.5",title:"p-2.5 ".concat(n," text-base font-medium"),popup:"rounded-md ".concat(e)},padding:"0",grow:"row",showConfirmButton:!1,showCloseButton:!1,backdrop:!1,heightAuto:!1})},window._uuid=function(){var t=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))},window.isOnline=_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("onLine"in navigator)){t.next=5;break}return console.log(navigator.onLine),t.abrupt("return",navigator.onLine);case 5:return console.log("trying"),t.next=8,axios.get("https://www.google.com").then((function(){return!0})).catch((function(t){return!1}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)}))),window.updateEleText=function(t,e){window.document.getElementById(t).innerText=e},window.updateEleHTML=function(t,e){window.document.getElementById(t).innerHTML=e},window.showPage=function(t){last_page!=t&&window.document.getElementById(t).classList.replace("hidden","box"),null!=last_page&&last_page!=t&&window.document.getElementById(last_page).classList.replace("box","hidden"),last_page=t},window.copyHTML=function(t,e){window.document.getElementById(t).innerHTML=window.document.getElementById(e).innerHTML};var firebaseConfig={apiKey:"AIzaSyCQ5cg4VRFiVxeT6JQPKI1vd3kB938w_g0",authDomain:"frc-7589.firebaseapp.com",databaseURL:"https://frc-7589-default-rtdb.firebaseio.com",projectId:"frc-7589",storageBucket:"frc-7589.appspot.com",messagingSenderId:"283240547457",appId:"1:283240547457:web:ce55f744bc4b4d46653980",measurementId:"G-2EB11FYT18"},app=(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.ZF)(firebaseConfig),analytics=(0,firebase_analytics__WEBPACK_IMPORTED_MODULE_1__.IH)(app),db=(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.ad)(app),remoteConfig=(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.sN)(app),auth=(0,firebase_auth__WEBPACK_IMPORTED_MODULE_4__.v0)(app);function tba_available(){return null!=(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}function fetchSettings(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.xS)(remoteConfig).then((function(){t||showMessage("Config Fetched")})).catch((function(t){showMessage("Config Error: "+t,!0,"error")}))}function signIn(t,e){return _signIn.apply(this,arguments)}function _signIn(){return(_signIn=_asyncToGenerator(_regeneratorRuntime().mark((function t(e,n){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,firebase_auth__WEBPACK_IMPORTED_MODULE_4__.e5)(auth,e,n).then((function(t){return!0})).catch((function(t){t.code,t.message}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function changeDBMode(t){return _changeDBMode.apply(this,arguments)}function _changeDBMode(){return _changeDBMode=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var n,i=arguments;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=i.length>1&&void 0!==i[1]&&i[1],e?(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Ix)(db).then((function(){n||showMessage("mode: ONLINE")})):(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.TF)(db).then((function(){n||showMessage("mode: OFFLINE")}));case 2:case"end":return t.stop()}}),t)}))),_changeDBMode.apply(this,arguments)}function getAllRecords(){return _getAllRecords.apply(this,arguments)}function _getAllRecords(){return _getAllRecords=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var e,n=arguments;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:null,showMessage("Fetching records..."),null==e){t.next=8;break}return t.next=5,(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.PL)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.IO)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.hJ)(db,"records"),(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.ar)("team_number","==",e)));case 5:case 10:return t.abrupt("return",t.sent);case 8:return t.next=10,(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.PL)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.hJ)(db,"records"));case 11:case"end":return t.stop()}}),t)}))),_getAllRecords.apply(this,arguments)}function getTeams(){return _getTeams.apply(this,arguments)}function _getTeams(){return _getTeams=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var e,n,i=arguments;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:null,showMessage("Fetching teams..."),null==e){t.next=13;break}return t.next=5,(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.QT)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.JU)(db,"teams",e));case 5:if(!(n=t.sent).exists()){t.next=10;break}return t.abrupt("return",n);case 10:showMessage("Team no found");case 11:t.next=16;break;case 13:return t.next=15,(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.PL)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.hJ)(db,"teams"));case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t)}))),_getTeams.apply(this,arguments)}function storeTeam(t,e){return _storeTeam.apply(this,arguments)}function _storeTeam(){return _storeTeam=_asyncToGenerator(_regeneratorRuntime().mark((function t(e,n){var i,s=arguments;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],t.next=3,isOnline();case 3:t.sent,(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.pl)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.JU)(db,"teams",e),n,{merge:!0}).then((function(){i||showMessage("Team successfully store!")})).catch((function(t){showMessage("FAILED to store team(".concat(t,")"),!0,"error")}));case 5:case"end":return t.stop()}}),t)}))),_storeTeam.apply(this,arguments)}(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.ST)(db).catch((function(t){console.log("DB Error: "+t)})),window.getRate=function(data){var formula=(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"formula").asString(),parameters=JSON.parse((0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"parameters").asString());return parameters.forEach((function(t){try{formula="boolean"==typeof data[t.alias]?formula.replace(t.alias,data[t.alias]?1:0):void 0===data[t.alias]||parameters.contains("Attempts")?formula.replace(t.alias,"1"):formula.replace(t.alias,data[t.alias])}catch(e){formula=formula.replace(t.alias,"1")}})),eval(formula)};var allTeamChart=new chart_js_auto__WEBPACK_IMPORTED_MODULE_5__.kL(document.getElementById("allTeamChart"),{type:"bar",options:{indexAxis:"y",scales:{x:{beginAtZero:!0}},elements:{bar:{borderWidth:2}},responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}}),bgColors=["#36a2eb","#ff6383","#4cbfc0","#fe9e40","#9966ff","#ffcd57","#c8cbce","#8e8466","#17c91f","#4456e8","#a02964","#5c6912","#c7c8e9"],chartOrderBySelect=document.getElementById("chartOrderBy"),sortingData=[],allTeamChartData={labels:[],datasets:[{label:"Ranking Point(Total)",alias:"rankingPoint",data:[],backgroundColor:bgColors[0],borderColor:bgColors[0]},{label:"Rate(Average)",alias:"rate",data:[],backgroundColor:bgColors[1],borderColor:bgColors[1]}]};function updateTeamChart(){for(var t in Object.keys(allTeamChartData.datasets))allTeamChartData.datasets[t].data=[];allTeamChartData.labels=[],sortingData.forEach((function(t){Object.keys(t).forEach((function(e){if("teamNumber"!=e){var n=allTeamChartData.datasets.findIndex((function(t){return t.alias==e}));-1!=n&&allTeamChartData.datasets[n].data.push(t[e])}else allTeamChartData.labels.includes(t[e])||allTeamChartData.labels.push(t[e])}))})),console.log(allTeamChartData),allTeamChart.data=allTeamChartData,allTeamChart.update()}sortingData.push=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var e=arguments;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Array.prototype.push.apply(this,e);case 2:return t.next=4,sortingData.sort((function(t,e){return e[chartOrderBySelect.value]-t[chartOrderBySelect.value]}));case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t,this)}))),window.getTeamIndex=function(){copyHTML("team-index","loadingScreen"),showPage("teamIndexScreen"),getTeams().then((function(t){if(t.empty)copyHTML("team-index","noResultScreen");else{var e="";allTeamChartData={labels:[],datasets:[{label:"Ranking Point(Total)",alias:"rankingPoint",data:[],backgroundColor:bgColors[0],borderColor:bgColors[0]},{label:"Rate(Average)",alias:"rate",data:[],backgroundColor:bgColors[1],borderColor:bgColors[1]}]};var n=JSON.parse((0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"parameters").asString()),i=2;Object.keys(n).forEach((function(t){i>=bgColors.length&&(i=0),"number"==n[t].type&&("rankingPoint"!=n[t].alias&&allTeamChartData.datasets.push({label:n[t].name+("rankingPoint"!=n[t].alias?"(Average)":"(Total)"),alias:n[t].alias,data:[],backgroundColor:bgColors[i],borderColor:bgColors[i]}),"rankingPoint"!=n[t].alias&&(chartOrderBySelect.innerHTML+='<option value="'.concat(n[t].alias,'">').concat(n[t].name+"(Average)","</option>"),i++))})),t.forEach(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(n){var i,s,r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.data(),s=0,r={teamNumber:n.id},t.next=5,getAllRecords(n.id).then((function(t){t.forEach((function(t){var e=t.data();s+=getRate(e.parameters),Object.keys(e.parameters).forEach((function(t){"number"==typeof e.parameters[t]&&(t in r||(r[t]=0),r[t]+=e.parameters[t])}))})),e+='<div class="bg-blue-100 rounded-lg w-full p-3 lg:p-5 space-y-3" onclick="showTeam(\''.concat(n.id,'\')">\n                                <div>\n                                    <h1 class="text-xl xl:text-2xl">Team #').concat(i.info.team_number,'</h1>\n                                    <h2 class="xl:text-lg">').concat(i.info.nickname,'</h2>\n                                </div>\n                                <div class="flex items-center justify-between space-x-2">\n                                    <div class="flex-1 bg-blue-200 rounded-lg flex flex-col p-4">\n                                        <h3 class="text-lg lg:text-xl flex space-x-1.5 items-center">\n                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">\n                                                <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" />\n                                            </svg>\n                                            <span>Rate:</span>\n                                        </h3>\n                                        <p class="text-4xl font-bold text-center">').concat(Math.round(s/t.size*100)/100,'</p></div>\n                                        <div class="flex-1 bg-blue-200 rounded-lg flex flex-col p-4">\n                                            <h3 class="text-lg lg:text-xl flex space-x-1.5 items-center">\n                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">\n                                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />\n                                            </svg>\n                                            <span>Records:</span>\n                                        </h3>\n                                        <p class="text-4xl font-bold text-center">').concat(t.size,'</p>\n                                    </div>\n                                </div>\n                                <button \n                                    class="inline-flex justify-center items-center space-x-1.5 rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"\n                                    onclick="exportExcel(\'').concat(n.id,'\')">\n                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 hidden md:block">\n                                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />\n                                    </svg>                                                        \n                                    <span>Export</span>\n                                </button>\n                            </div>'),Object.keys(r).forEach((function(e){"rankingPoint"!=e&&"teamNumber"!=e&&(r[e]/=t.size)}))}));case 5:Object.keys(r).length>1&&sortingData.push(r),updateEleHTML("team-index",e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}))};var perRecordChart=new chart_js_auto__WEBPACK_IMPORTED_MODULE_5__.kL(document.getElementById("perTeamChart"),{type:"bar",options:{scales:{y:{beginAtZero:!0}}}});window.showTeam=function(t){window.document.getElementById("teamContainer").setAttribute("current","teamRecordTable"),window.document.getElementById("teamRecordTable").classList.remove("hidden"),window.document.getElementById("teamInfo").classList.add("hidden"),window.document.getElementById("teamCharts").classList.add("hidden"),window.document.querySelector("[page=teamRecordTable]").classList.replace("border-b-0","border-b-2"),window.document.querySelector("[page=teamInfo]").classList.replace("border-b-2","border-b-0"),window.document.querySelector("[page=teamCharts]").classList.replace("border-b-2","border-b-0"),getTeams(t).then((function(e){_asyncToGenerator(_regeneratorRuntime().mark((function n(){var i,s,r,o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.empty){n.next=22;break}if(i=e.data(),updateEleHTML("teamRecordTable",""),showPage("teamViewScreen"),updateEleText("teamID",i.info.team_number),updateEleText("teamName",i.info.nickname),updateEleText("teamRookieYear",i.info.rookie_year),!("onLine"in navigator)||!i.offline){n.next=16;break}if(!navigator.onLine){n.next=16;break}return n.next=11,axios.get("https://www.thebluealliance.com/api/v3/team/frc".concat(t),{headers:{accept:"application/json","X-TBA-Auth-Key":(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}}).then((function(t){if(200==t.status)return t.data})).catch((function(t){showMessage("FAILED to fetch team info",!0,"warning")}));case 11:return s=n.sent,n.next=14,axios.get("https://www.thebluealliance.com/api/v3/team/frc".concat(t,"/awards"),{headers:{accept:"application/json","X-TBA-Auth-Key":(0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"tba_key").asString()}}).then((function(t){if(200==t.status)return t.data})).catch((function(t){showMessage("FAILED to fetch team info",!0,"warning")}));case 14:r=n.sent,storeTeam(t,{rankingPoint:0,info:s,awards:r,offline:firebase.firestore.FieldValue.delete()}).then((function(){showMessage("Team info successfully updated!"),showTeam(t)})).catch((function(t){showMessage("FAILED to update team info",!0,"error")}));case 16:o="<h3>Awards</h3><ol>",void 0!==i.awards&&i.awards.forEach((function(t){o+="<li><ul>",Object.keys(t).forEach((function(e){"object"!==_typeof(t[e])&&(o+="<li>"+e+": "+t[e]+"</li>")})),o+="</ul></li>"})),o+="</ol><h3>About</h3><ul>",void 0!==_typeof(i.info)&&Object.keys(i.info).forEach((function(t){"key"!=t&&"nickname"!=t&&"team_number"!=t&&null!=i.info[t]&&(o+="<li>"+t+": "+("website"==t?'<a href="'+i.info[t]+'">'+i.info[t]+"</a>":i.info[t])+"</li>")})),o+="</ul>",updateEleHTML("teamInfo",o);case 22:getAllRecords(t).then((function(t){if(t.empty)perRecordChart.clear(),copyHTML("teamRecordTable","noResultScreen");else{var e="",n={labels:[],datasets:[]},i=JSON.parse((0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"parameters").asString());Object.keys(i).forEach((function(t){"number"==i[t].type&&n.datasets.push({label:i[t].name,alias:i[t].alias,data:[],borderWidth:1})}));t.forEach((function(t){n.labels.push(t.id);var i=t.data();e+='<div class="bg-blue-50 rounded-lg w-full p-3 lg:p-5 space-y-2 relative">\n                            <div>\n                                <h1 class="text-lg flex items-center space-x-1">\n                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">\n                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184" />\n                                    </svg>\n                                    <span>'.concat(t.id,'</span>\n                                </h1>\n                                <h2 class="text-sm flex items-center space-x-1">\n                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">\n                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />\n                                    </svg>\n                                    <span>').concat(moment(new Date(1e3*i.timestamp.seconds)).format("YYYY/MM/DD, HH:mm:ss"),'</span>\n                                </h2>\n                            </div>\n                            <div class="prose w-full">\n                                <ul>'),Object.keys(i.parameters).forEach((function(t){var s=n.datasets.findIndex((function(e){return e.alias==t}));-1!=s&&n.datasets[s].data.push(i.parameters[t]),e+='<li class="text-blue-800 space-x-1">'.concat(t,':<span class="font-bold">').concat(i.parameters[t],"</span></li>")})),e+="</ul></div></div>"})),perRecordChart.data=n,perRecordChart.update(),updateEleHTML("teamRecordTable",e)}}));case 23:case"end":return n.stop()}}),n)})))()}))};var flatten=function(t){var e={};return function t(n,i){if(Object(n)!==n)e[i]=n;else if(Array.isArray(n)){for(var s=n.length,r=0;r<s;r++)t(n[r],"".concat(i,"[").concat(r,"]"));0===s&&(e[i]=[])}else o=n,0!==Object.keys(o).length?Object.keys(n).forEach((function(e){return t(n[e],i?"".concat(e):e)})):e[i]={};var o}(t,""),e};function getArr(t){return _getArr.apply(this,arguments)}function _getArr(){return(_getArr=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var n,i,s,r,o;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i={},s=_createForOfIteratorHelper(e),t.prev=3,s.s();case 5:if((r=s.n()).done){t.next=14;break}return o=r.value,n[o]={"# Number":o},t.next=10,getAllRecords(o);case 10:t.sent.forEach((function(t){var e={uuid:t.id},n=flatten(t.data().parameters);Object.keys(n).forEach((function(t){e[t]=n[t]})),t.data().team_number in i||(i[t.data().team_number]=[]),i[t.data().team_number].push(e)}));case 12:t.next=5;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),s.e(t.t0);case 19:return t.prev=19,s.f(),t.finish(19);case 22:return t.abrupt("return",{all_team_data:n,new_json:i});case 23:case"end":return t.stop()}}),t,null,[[3,16,19,22]])})))).apply(this,arguments)}window.exportExcel=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var e,n,i,s,r,o,a,c,l,u,h,d=arguments;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=d.length>0&&void 0!==d[0]?d[0]:"",n=XLSX.utils.book_new(),""==e){t.next=22;break}return s=e.split(","),r={},o=[],a={},c=JSON.parse((0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"parameters").asString()),Object.keys(c).forEach((function(t){"number"==c[t].type&&(r[c[t].alias]={name:c[t].name,average:"rankingPoint"!=c[t].alias},r[c[t].name]={alias:c[t].name,average:"rankingPoint"!=c[t].alias})})),t.next=11,getArr(s);case 11:l=t.sent,o=l.all_team_data,a=l.new_json,Object.keys(a).forEach((function(t){a[t].forEach((function(e){Object.keys(e).forEach((function(n){n in r&&(r[n].name in o[t]||(o[t][r[n].name]=0),o[t][r[n].name]+=e[n])}))})),o.forEach((function(e){Object.keys(e).forEach((function(n){"# Number"!=n&&r[n].average&&(e[n]/=a[t].length)}))})),i=XLSX.utils.json_to_sheet(a[t]),XLSX.utils.book_append_sheet(n,i,"team #".concat(t))})),u=[],o.forEach((function(t){1!=Object.keys(t).length&&u.push(t)})),i=XLSX.utils.json_to_sheet(u),XLSX.utils.book_append_sheet(n,i,"All Team"),XLSX.writeFile(n,"scouting-export.xlsx"),t.next=32;break;case 22:return t.next=24,getAllRecords(null);case 24:h=t.sent,r={},o=[],a={},c=JSON.parse((0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_3__.NA)(remoteConfig,"parameters").asString()),Object.keys(c).forEach((function(t){"number"==c[t].type&&(r[c[t].alias]={name:c[t].name,average:"rankingPoint"!=c[t].alias},r[c[t].name]={alias:c[t].name,average:"rankingPoint"!=c[t].alias})})),h.forEach((function(t){var e={uuid:t.id},n=flatten(t.data().parameters);Object.keys(n).forEach((function(t){e[t]=n[t]})),t.data().team_number in a||(a[t.data().team_number]=[]),a[t.data().team_number].push(e)})),getTeams().then(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var s;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.forEach((function(t){o[t.id]={"# Number":t.id}}));case 2:return t.next=4,Object.keys(a).forEach((function(t){_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a[t].forEach((function(e){Object.keys(e).forEach((function(n){n in r&&(r[n].name in o[t]||(o[t][r[n].name]=0),o[t][r[n].name]+=e[n])}))}));case 2:return e.next=4,o.forEach((function(e){Object.keys(e).forEach((function(n){"# Number"!=n&&r[n].average&&(e[n]/=a[t].length)}))}));case 4:case"end":return e.stop()}}),e)})))(),i=XLSX.utils.json_to_sheet(a[t]),XLSX.utils.book_append_sheet(n,i,"team #".concat(t))}));case 4:s=[],o.forEach((function(t){1!=Object.keys(t).length&&s.push(t)})),i=XLSX.utils.json_to_sheet(s),XLSX.utils.book_append_sheet(n,i,"All Team"),XLSX.writeFile(n,"scouting-export.xlsx");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 32:case"end":return t.stop()}}),t)}))),window.selectedExportExcel=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var e;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().fire({title:"Export Data via Team",text:"enter team numbers(separate by comma)",input:"text",inputAttributes:{autocapitalize:"off",pattern:"^[0-9]{1,}(?:,[0-9]{1,})*$"},validationMessage:"Please enter valid team numbers(Check if you leave blank there or use ZH comma)",confirmButtonText:"Export",showCancelButton:"Cancel"}).then((function(t){if(t.isConfirmed)return t.value}));case 2:if(void 0!==(e=t.sent)){t.next=5;break}return t.abrupt("return");case 5:exportExcel(e);case 6:case"end":return t.stop()}}),t)}))),window.searchTeam=_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().fire({title:"Enter Team Number",input:"number",inputAttributes:{autocapitalize:"off"},confirmButtonText:"Search",showCancelButton:!0}).then((function(t){t.isConfirmed&&showTeam(t.value)}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)}))),window.sendPassswordReset=_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().fire({title:"Forgot Password",html:'<input type="text" id="email" class="swal2-input w-7/8" placeholder="Email">\n        <button class="text-blue-700 mt-4 text-sm" onclick="userLogin()">Login?</button>',confirmButtonText:"Send email",focusConfirm:!1,showLoaderOnConfirm:!0,preConfirm:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var e;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().getPopup().querySelector("#email").value)||sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().showValidationMessage("Please enter your email"),t.next=4,(0,firebase_auth__WEBPACK_IMPORTED_MODULE_4__.LS)(auth,e).then((function(){return!0})).catch((function(t){t.code,t.message;sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().showValidationMessage("Wrong Email")}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),showClass:{popup:"\n            animate__animated\n            animate__fadeInUp\n            animate__faster\n            "},hideClass:{popup:"\n            animate__animated\n            animate__fadeOutDown\n            animate__faster\n            "},customClass:{container:"p-1.5",htmlContainer:"m-0 max-w-full flex flex-col spacep-y-2",popup:"max-w-lg w-full"},allowOutsideClick:!1}).then((function(t){showMessage("Password rest email Sent!"),setTimeout((function(){userLogin()}),1500)}));case 2:case"end":return t.stop()}}),t)}))),window.userLogin=_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().fire({title:"Account Login",html:'<input type="text" id="email" class="swal2-input w-7/8" placeholder="Email">\n        <input type="password" id="password" class="swal2-input w-7/8" placeholder="Password">\n        <button class="text-blue-700 mt-4 text-sm" onclick="sendPassswordReset()">Forget Password?</button>',confirmButtonText:"Login",focusConfirm:!1,showLoaderOnConfirm:!0,preConfirm:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var e,n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().getPopup().querySelector("#email").value,n=sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().getPopup().querySelector("#password").value,e&&n||sweetalert2__WEBPACK_IMPORTED_MODULE_6___default().showValidationMessage("Please enter email and password"),t.next=5,signIn(e,n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),showClass:{popup:"\n            animate__animated\n            animate__fadeInUp\n            animate__faster\n            "},hideClass:{popup:"\n            animate__animated\n            animate__fadeOutDown\n            animate__faster\n            "},customClass:{container:"p-1.5",htmlContainer:"m-0 max-w-full flex flex-col spacep-y-2",popup:"max-w-lg"},allowOutsideClick:!1}).then((function(t){showMessage("Login Successful")}));case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)}))),window.addEventListener("load",function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"onLine"in window.navigator&&(changeDBMode(window.navigator.onLine,!0),window.navigator.onLine&&fetchSettings(!0));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),window.addEventListener("offline",(function(){changeDBMode(!1)})),window.addEventListener("online",(function(){changeDBMode(!0),fetchSettings()})),(0,firebase_auth__WEBPACK_IMPORTED_MODULE_4__.Aj)(auth,(function(t){if(t){t.uid;getTeamIndex()}else userLogin()})),document.getElementById("teamContainer").addEventListener("click",(function(t){t.target.classList.contains("tab-button")&&document.getElementById("teamContainer").getAttribute("current")!=t.target.getAttribute("page")&&(window.document.getElementById(document.getElementById("teamContainer").getAttribute("current")).classList.toggle("hidden"),window.document.getElementById(t.target.getAttribute("page")).classList.toggle("hidden"),t.target.classList.replace("border-b-0","border-b-2"),window.document.querySelector("[page=".concat(document.getElementById("teamContainer").getAttribute("current"),"]")).classList.replace("border-b-2","border-b-0"),window.document.getElementById("teamContainer").setAttribute("current",t.target.getAttribute("page")))})),chartOrderBySelect.addEventListener("change",_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sortingData.sort((function(t,e){return e[chartOrderBySelect.value]-t[chartOrderBySelect.value]}));case 2:updateTeamChart();case 3:case"end":return t.stop()}}),t)}))))})()})();